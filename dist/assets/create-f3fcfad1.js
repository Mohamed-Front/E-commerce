import{_ as U,r as v,u as z,A as q,j as C,l as N,o as O,P as B,a as _,c as f,C as g,f as l,t as i,B as u,h as d,e as o,Q as D,w as b,v as L,F as M,i as x,a1 as j,R as m,S as h,T as A,O as P}from"./index-2c0fa710.js";import{x as S,A as T,O as I}from"./index.es-088d7710.js";const R={class:"max-w-3xl mx-auto p-6 bg-white rounded-xl shadow-lg"},E={class:"text-3xl font-bold text-center mb-8 text-gray-800"},Q={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},W={class:"space-y-2"},G={for:"user_id",class:"block text-sm font-medium text-gray-700"},H={class:"space-y-2"},J={for:"address_line_1",class:"block text-sm font-medium text-gray-700"},K={class:"space-y-2"},X={for:"address_line_2",class:"block text-sm font-medium text-gray-700"},Y={class:"space-y-2"},Z={for:"city",class:"block text-sm font-medium text-gray-700"},ee={class:"space-y-2"},se={for:"country",class:"block text-sm font-medium text-gray-700"},le={class:"space-y-2"},ae={for:"zip_code",class:"block text-sm font-medium text-gray-700"},te={class:"space-y-2"},re={for:"lat",class:"block text-sm font-medium text-gray-700"},de={class:"space-y-2"},oe={for:"long",class:"block text-sm font-medium text-gray-700"},ie={class:"space-y-2"},ne={class:"flex items-center space-x-2"},ue={class:"text-sm font-medium text-gray-700 mx-1"},ce={class:"mt-6"},pe={class:"text-xl font-semibold text-gray-800 mb-4"},me={class:"pt-4 flex justify-center"},_e={key:0},fe={key:1,class:"pi pi-spinner pi-spin"},ve={__name:"create",setup(ye){const y=v([]),V=z(),n=q(),{t:r}=C(),c=v(!1),e=v({user_id:null,address_line_1:"",address_line_2:"",city:"",country:"",zip_code:"",is_default:!1,lat:31.984983325941823,long:35.900908045672196,distance:1e3}),$=N(()=>{const a=Number(e.value.distance)||1e3;return{center:{lat:Number(e.value.lat),lng:Number(e.value.long)},radius:a,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}}),w=()=>{x.get("api/user").then(a=>{y.value=a.data.data.data}).catch(a=>{n.add({severity:"error",summary:r("error"),detail:r("address.failed_to_load_users"),life:3e3})})};function k(a){const s=a.latLng;e.value.lat=s.lat(),e.value.long=s.lng()}const F=async()=>{var a,s;c.value=!0;try{if(!e.value.user_id||!e.value.address_line_1||!e.value.city||!e.value.country){n.add({severity:"error",summary:r("validation_error"),detail:r("address.required_fields_missing"),life:3e3});return}if(e.value.lat<-90||e.value.lat>90){n.add({severity:"error",summary:r("validation_error"),detail:r("address.invalid_lat"),life:3e3});return}if(e.value.long<-180||e.value.long>180){n.add({severity:"error",summary:r("validation_error"),detail:r("address.invalid_long"),life:3e3});return}if(e.value.distance<=0){n.add({severity:"error",summary:r("validation_error"),detail:r("address.invalid_distance"),life:3e3});return}const p={...e.value,is_default:e.value.is_default?"1":"0"};await x.post("/api/address",p),V.push({name:"address"}),n.add({severity:"success",summary:r("success"),detail:r("address.created_successfully"),life:3e3})}catch(p){n.add({severity:"error",summary:r("error"),detail:((s=(a=p.response)==null?void 0:a.data)==null?void 0:s.message)||r("address.failed_to_create"),life:3e3})}finally{c.value=!1}};return O(()=>{w()}),(a,s)=>{const p=B("can");return _(),f(M,null,[g((_(),f("div",R,[l("h1",E,i(a.$t("address.create_new_address")),1),l("form",{onSubmit:L(F,["prevent"]),class:"space-y-6"},[l("div",Q,[l("div",W,[l("label",G,[u(i(a.$t("user.name"))+" ",1),s[9]||(s[9]=l("span",{class:"text-red-500"},"*",-1))]),d(o(j),{filter:"",modelValue:e.value.user_id,"onUpdate:modelValue":s[0]||(s[0]=t=>e.value.user_id=t),options:y.value,optionLabel:"name",optionValue:"id",placeholder:a.$t("user.name"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,8,["modelValue","options","placeholder"])]),l("div",H,[l("label",J,[u(i(a.$t("address.line1"))+" ",1),s[10]||(s[10]=l("span",{class:"text-red-500"},"*",-1))]),d(o(m),{id:"address_line_1",modelValue:e.value.address_line_1,"onUpdate:modelValue":s[1]||(s[1]=t=>e.value.address_line_1=t),placeholder:a.$t("address.enter_line1"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",K,[l("label",X,i(a.$t("address.line2")),1),d(o(m),{id:"address_line_2",modelValue:e.value.address_line_2,"onUpdate:modelValue":s[2]||(s[2]=t=>e.value.address_line_2=t),placeholder:a.$t("address.enter_line2"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"])]),l("div",Y,[l("label",Z,[u(i(a.$t("address.city"))+" ",1),s[11]||(s[11]=l("span",{class:"text-red-500"},"*",-1))]),d(o(m),{id:"city",modelValue:e.value.city,"onUpdate:modelValue":s[3]||(s[3]=t=>e.value.city=t),placeholder:a.$t("address.enter_city"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",ee,[l("label",se,[u(i(a.$t("address.country"))+" ",1),s[12]||(s[12]=l("span",{class:"text-red-500"},"*",-1))]),d(o(m),{id:"country",modelValue:e.value.country,"onUpdate:modelValue":s[4]||(s[4]=t=>e.value.country=t),placeholder:a.$t("address.enter_country"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",le,[l("label",ae,i(a.$t("address.zip_code")),1),d(o(m),{id:"zip_code",modelValue:e.value.zip_code,"onUpdate:modelValue":s[5]||(s[5]=t=>e.value.zip_code=t),placeholder:a.$t("address.enter_zip_code"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"])]),l("div",te,[l("label",re,[u(i(a.$t("address.lat"))+" ",1),s[13]||(s[13]=l("span",{class:"text-red-500"},"*",-1))]),d(o(h),{id:"lat",modelValue:e.value.lat,"onUpdate:modelValue":s[6]||(s[6]=t=>e.value.lat=t),placeholder:a.$t("address.enter_lat"),min:-90,max:90,step:1e-6,decimalPlaces:6,class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",de,[l("label",oe,[u(i(a.$t("address.long"))+" ",1),s[14]||(s[14]=l("span",{class:"text-red-500"},"*",-1))]),d(o(h),{id:"long",modelValue:e.value.long,"onUpdate:modelValue":s[7]||(s[7]=t=>e.value.long=t),placeholder:a.$t("address.enter_long"),min:-180,max:180,step:1e-6,decimalPlaces:6,class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",ie,[l("label",ne,[g(l("input",{type:"checkbox",class:"w-5 h-5 mx-2","onUpdate:modelValue":s[8]||(s[8]=t=>e.value.is_default=t),binary:!0},null,512),[[D,e.value.is_default]]),l("span",ue,i(a.$t("address.set_as_default")),1)])])]),l("div",ce,[l("h2",pe,i(a.$t("address.select_location")),1),d(o(I),{onClick:k,style:{width:"100%",height:"500px"},center:{lat:parseFloat(e.value.lat),lng:parseFloat(e.value.long)},zoom:14},{default:b(()=>[d(o(S),{options:{position:{lat:parseFloat(e.value.lat),lng:parseFloat(e.value.long)}}},null,8,["options"]),d(o(T),{options:$.value},null,8,["options"])]),_:1},8,["center"])]),l("div",me,[d(o(A),{type:"submit",label:a.$t("address.create_address"),icon:"pi pi-plus",loading:c.value,class:"px-8 py-3 bg-gradient-to-r mx-2 from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:c.value},{default:b(()=>[c.value?(_(),f("i",fe)):(_(),f("span",_e,i(a.$t("address.create_address")),1))]),_:1},8,["label","loading","disabled"])])],32)])),[[p,"create address"]]),d(o(P))],64)}}},xe=U(ve,[["__scopeId","data-v-9048f0a5"]]);export{xe as default};
