import{_ as J,u as K,f as O,G as X,r as s,w as Y,o as Z,h as r,i as B,b as $,c as ee,j as o,e as a,k as d,l as h,m as te,B as t,a as L,t as p,n as k,x as ae,y as oe}from"./index-12f18b3e.js";const C=v=>(ae("data-v-9444d6cd"),v=v(),oe(),v),le={class:"grid"},se={class:"col-12"},ne={class:"p-4 card shadow-2 border-round"},de={class:"text-2xl font-bold"},re={class:"flex gap-2"},ie={class:"p-input-icon-left"},ce=C(()=>o("i",{class:"pi pi-search"},null,-1)),pe={class:"card shadow-1 surface-0"},ue={class:"py-4 text-center"},me=C(()=>o("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),_e={class:"text-xl"},he={class:"flex py-4 justify-content-center align-items-center"},ve={class:"flex align-items-center justify-content-center"},fe=C(()=>o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),ge={setup(v){const P=K(),x=O(),{t:e}=X(),f=s(!0),D=s([]),u=s(!1),T=s(null),S=s(null),E=s({}),g=s("");s(null);const I=s(1),R=s(0),y=s(10),M=s(0),w=()=>{f.value=!0,L.get("/api/model",{params:{page:I.value,per_page:y.value,search:g.value||void 0}}).then(n=>{D.value=n.data.data.data,R.value=n.data.data.total,M.value=n.data.data.last_page,f.value=!1}).catch(n=>{x.add({severity:"error",summary:e("error"),detail:e("model.loadError"),life:3e3}),f.value=!1,console.error("Error fetching models:",n)})};Y([I,y,g],()=>{w()});const N=n=>{T.value=n,u.value=!0},j=()=>{L.delete(`/api/model/${T.value}`).then(()=>{x.add({severity:"success",summary:e("success"),detail:e("model.deleteSuccess"),life:3e3}),w(),u.value=!1}).catch(n=>{x.add({severity:"error",summary:e("error"),detail:e("model.deleteError"),life:3e3})})},G=()=>{S.value.exportCSV()},U=()=>{P.push({name:"model-create"})},z=n=>{P.push({name:"model-edit",params:{id:n}})};return Z(()=>{w()}),(n,i)=>{const A=r("InputText"),c=r("Button"),F=r("Toolbar"),Q=r("Toast"),m=r("Column"),W=r("ProgressSpinner"),q=r("DataTable"),H=r("Dialog"),_=B("can"),V=B("tooltip");return $(),ee("div",le,[o("div",se,[o("div",ne,[a(F,{class:"mb-4"},{start:d(()=>[o("h2",de,p(t(e)("model.managementTitle")),1)]),end:d(()=>[o("div",re,[o("span",ie,[ce,a(A,{modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=l=>g.value=l),placeholder:t(e)("model.search")},null,8,["modelValue","placeholder"])]),h(a(c,{label:t(e)("model.export"),icon:"pi pi-upload",class:"p-export",onClick:G},null,8,["label"]),[[_,"list models"]]),h(a(c,{label:t(e)("model.new"),icon:"pi pi-plus",class:"p-button-success",onClick:U},null,8,["label"]),[[_,"create models"]])])]),_:1}),a(Q),o("div",pe,[h(($(),te(q,{ref_key:"dt",ref:S,value:D.value,loading:f.value,"data-key":"id",paginator:!0,rows:y.value,filters:E.value,totalRecords:R.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[o("div",ue,[me,o("p",_e,p(t(e)("model.noData")),1)])]),loading:d(()=>[o("div",he,[a(W,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[a(m,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(m,{field:"name_ar",header:t(e)("model.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[k(p(l.data.name_ar),1)]),_:1},8,["header"]),a(m,{field:"name_en",header:t(e)("model.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[k(p(l.data.name_en),1)]),_:1},8,["header"]),a(m,{field:"brand.name_en",header:t(e)("model.brand"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>{var b;return[k(p((b=l.data.brand)==null?void 0:b.name_en),1)]}),_:1},8,["header"]),a(m,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:d(l=>[h(a(c,{icon:"pi pi-pencil",class:"p-detail",onClick:b=>z(l.data.id)},null,8,["onClick"]),[[_,"edit models"],[V,t(e)("edit"),void 0,{top:!0}]]),h(a(c,{icon:"pi pi-trash",class:"mx-2 p-delete",onClick:b=>N(l.data.id)},null,8,["onClick"]),[[_,"delete models"],[V,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[_,"list models"]])]),a(H,{visible:u.value,"onUpdate:visible":i[2]||(i[2]=l=>u.value=l),style:{width:"450px"},header:t(e)("model.deleteConfirmTitle"),modal:!0},{footer:d(()=>[a(c,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:i[1]||(i[1]=l=>u.value=!1)},null,8,["label"]),a(c,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:j},null,8,["label"])]),default:d(()=>[o("div",ve,[fe,o("span",null,p(t(e)("model.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},xe=J(ge,[["__scopeId","data-v-9444d6cd"]]);export{xe as default};
