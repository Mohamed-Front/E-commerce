import{_ as X,A as Y,u as Z,j as ee,r as p,o as se,a3 as g,P as te,a as r,c as n,C as oe,f as s,t as l,h as u,w as G,v as h,F as le,i as L,B as c,g as v,x as ae}from"./index-48d6ea93.js";const re={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ne={class:"text-3xl font-bold text-center mb-8 text-gray-800"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue={class:"space-y-2"},ie={for:"name",class:"block text-sm font-medium text-gray-700"},pe={key:0,class:"text-red-500 text-xs"},ce={class:"space-y-2"},me={for:"phone",class:"block text-sm font-medium text-gray-700"},ge={key:0,class:"text-red-500 text-xs"},ve={class:"space-y-2"},_e={for:"type",class:"block text-sm font-medium text-gray-700"},fe={key:0,class:"text-red-500 text-xs"},be={class:"space-y-2"},ye={for:"role",class:"block text-sm font-medium text-gray-700"},xe={key:0,class:"text-red-500 text-xs"},he={class:"space-y-2"},we={for:"email",class:"block text-sm font-medium text-gray-700"},ke={key:0,class:"text-red-500 text-xs"},Ve={class:"space-y-2"},De={for:"password",class:"block text-sm font-medium text-gray-700"},$e={key:0,class:"text-red-500 text-xs"},Ue={class:"md:col-span-2 space-y-2"},Ce={class:"block text-sm font-medium text-gray-700"},Fe={class:"flex justify-center"},Ie={key:0,class:"p-4"},je={class:"relative group"},Be=["src"],Pe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Te={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ne={class:"mt-2 text-center text-sm text-gray-500"},Ge={key:1,class:"p-8 flex flex-col items-center justify-center"},Le={class:"text-sm text-center text-gray-600 mb-1"},Me={class:"text-blue-500 font-medium"},Re={class:"pt-4 flex justify-center"},Ae={key:0},Ee={key:1,class:"pi pi-spinner pi-spin"},Se={__name:"create",setup(ze){const M=Y(),R=Z(),{t:A}=ee(),a=p(),m=p(!1),w=p([]),b=p(null),y=p(null),_=p(!1),o=p({name:"",phone:"",type:null,role_id:null,email:"",password:""}),E=async()=>{try{const t=await L.get("api/role");w.value=t.data.data.data}catch(t){console.error("Error fetching roles:",t)}},S=t=>{t.preventDefault(),_.value=!0},z=()=>{_.value=!1},J=t=>{b.value=t;const e=new FileReader;e.onload=i=>{y.value=i.target.result},e.readAsDataURL(t),_.value=!1},k=t=>{var i,f,x;const e=((i=t.target.files)==null?void 0:i[0])||((x=(f=t.dataTransfer)==null?void 0:f.files)==null?void 0:x[0]);e&&e.type.match("image.*")&&J(e)},O=()=>{b.value=null,y.value=null},q=async()=>{m.value=!0;const t=new FormData;t.append("name",o.value.name),t.append("phone",o.value.phone),t.append("type",o.value.type),t.append("role_id",o.value.role_id),t.append("email",o.value.email),t.append("password",o.value.password),b.value&&t.append("image",b.value),L.post("/api/user",t).then(e=>{R.push({name:"users"}),m.value=!1}).catch(e=>{console.error("Error:",e),M.add({severity:"error",summary:A("error"),detail:e.response.data.message,life:3e3}),m.value=!1})};return se(()=>{E()}),(t,e)=>{const i=g("InputText"),f=g("Dropdown"),x=g("Password"),H=g("Button"),K=g("Form"),Q=g("Toast"),W=te("can");return r(),n(le,null,[oe((r(),n("div",re,[s("h1",ne,l(t.$t("user.create_New_User")),1),u(K,{ref_key:"form",ref:a,model:o.value,rules:t.rules,onSubmit:h(q,["prevent"]),class:"space-y-6"},{default:G(()=>{var V,D,$,U,C,F,I,j,B,P,T,N;return[s("div",de,[s("div",ue,[s("label",ie,[c(l(t.$t("user.name"))+" ",1),e[6]||(e[6]=s("span",{class:"text-red-500"},"*",-1))]),u(i,{id:"name",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.name=d),placeholder:t.$t("user.enter_full_name"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(D=(V=a.value)==null?void 0:V.errors)!=null&&D.name?(r(),n("small",pe,l(a.value.errors.name[0].message),1)):v("",!0)]),s("div",ce,[s("label",me,[c(l(t.$t("user.phone"))+" ",1),e[7]||(e[7]=s("span",{class:"text-red-500"},"*",-1))]),u(i,{id:"phone",modelValue:o.value.phone,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.phone=d),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(U=($=a.value)==null?void 0:$.errors)!=null&&U.phone?(r(),n("small",ge,l(a.value.errors.phone[0].message),1)):v("",!0)]),s("div",ve,[s("label",_e,[c(l(t.$t("user.type"))+" ",1),e[8]||(e[8]=s("span",{class:"text-red-500"},"*",-1))]),u(f,{filter:"",id:"type",modelValue:o.value.type,"onUpdate:modelValue":e[2]||(e[2]=d=>o.value.type=d),options:[{label:"Admin",value:1},{label:"customer",value:2},{label:"User",value:2}],optionLabel:"label",optionValue:"value",placeholder:t.$t("user.select_user_type"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","placeholder"]),(F=(C=a.value)==null?void 0:C.errors)!=null&&F.type?(r(),n("small",fe,l(a.value.errors.type[0].message),1)):v("",!0)]),s("div",be,[s("label",ye,[c(l(t.$t("user.role"))+" ",1),e[9]||(e[9]=s("span",{class:"text-red-500"},"*",-1))]),u(f,{filter:"",id:"role",modelValue:o.value.role_id,"onUpdate:modelValue":e[3]||(e[3]=d=>o.value.role_id=d),options:w.value,optionLabel:"name",optionValue:"id",placeholder:t.$t("user.select_role"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options","placeholder"]),(j=(I=a.value)==null?void 0:I.errors)!=null&&j.role_id?(r(),n("small",xe,l(a.value.errors.role_id[0].message),1)):v("",!0)]),s("div",he,[s("label",we,[c(l(t.$t("user.email"))+" ",1),e[10]||(e[10]=s("span",{class:"text-red-500"},"*",-1))]),u(i,{id:"email",modelValue:o.value.email,"onUpdate:modelValue":e[4]||(e[4]=d=>o.value.email=d),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(P=(B=a.value)==null?void 0:B.errors)!=null&&P.email?(r(),n("small",ke,l(a.value.errors.email[0].message),1)):v("",!0)]),s("div",Ve,[s("label",De,[c(l(t.$t("user.password"))+" ",1),e[11]||(e[11]=s("span",{class:"text-red-500"},"*",-1))]),u(x,{id:"password",modelValue:o.value.password,"onUpdate:modelValue":e[5]||(e[5]=d=>o.value.password=d),placeholder:"••••••••",toggleMask:"",feedback:!1,inputClass:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",class:"w-full"},null,8,["modelValue"]),(N=(T=a.value)==null?void 0:T.errors)!=null&&N.password?(r(),n("small",$e,l(a.value.errors.password[0].message),1)):v("",!0)]),s("div",Ue,[s("label",Ce,l(t.$t("user.profile_Image")),1),s("div",Fe,[s("label",{onDragover:h(S,["prevent"]),onDragleave:z,onDrop:h(k,["prevent"]),class:ae([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[s("input",{type:"file",onChange:k,accept:"image/*",class:"hidden"},null,32),y.value?(r(),n("div",Ie,[s("div",je,[s("img",{src:y.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Be),s("div",Pe,[s("div",Te,[s("button",{type:"button",onClick:h(O,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[12]||(e[12]=[s("i",{class:"pi pi-trash text-sm"},null,-1)])),e[13]||(e[13]=s("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[s("i",{class:"pi pi-pencil text-sm"})],-1))])])]),s("p",Ne,l(t.$t("user.click_or_drag_to_change_photo")),1)])):(r(),n("div",Ge,[e[14]||(e[14]=s("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[s("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),s("p",Le,[s("span",Me,l(t.$t("user.click_to_upload")),1),c(" "+l(t.$t("user.or_drag_and_drop")),1)]),e[15]||(e[15]=s("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1))]))],34)])])]),s("div",Re,[u(H,{type:"submit",label:"Create User",icon:"pi pi-user-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:m.value},{default:G(()=>[m.value?(r(),n("i",Ee)):(r(),n("span",Ae,l(t.$t("user.create_User")),1))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules"])])),[[W,"create users"]]),u(Q)],64)}}},Oe=X(Se,[["__scopeId","data-v-b838c9ca"]]);export{Oe as default};
