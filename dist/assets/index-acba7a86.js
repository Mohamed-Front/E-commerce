import{_ as Y,u as q,E as K,B as O,r as n,k as X,j as Z,H as i,I as R,o as V,c as ee,a as l,b as a,w as o,J as m,g as te,e as t,D as B,t as u,l as f}from"./index-e0fe619d.js";const se={class:"grid"},ae={class:"col-12"},le={class:"card p-4 shadow-2 border-round"},oe={class:"text-2xl font-bold"},de={class:"flex gap-2"},re={class:"p-input-icon-left"},ne={class:"card shadow-1 surface-0"},ie={class:"text-center py-4"},ce={class:"text-xl"},ue={class:"flex justify-content-center align-items-center py-4"},pe={class:"flex align-items-center justify-content-center"},_e={__name:"index",setup(ve){const k=q(),b=K(),{t:e}=O(),h=n(!0),w=n([]),_=n(!1),C=n(null),D=n(null),$=n({}),g=n("");n(null);const T=n(1),P=n(0),y=n(10),I=n(0),x=()=>{h.value=!0,B.get("/api/address",{params:{page:T.value,per_page:y.value,search:g.value||void 0}}).then(d=>{w.value=d.data.data.data,P.value=d.data.data.total,I.value=d.data.data.last_page,h.value=!1}).catch(d=>{b.add({severity:"error",summary:e("error"),detail:e("address.loadError"),life:3e3}),h.value=!1,console.error("Error fetching addresses:",d)})};X([T,y,g],()=>{x()});const L=d=>{C.value=d,_.value=!0},N=()=>{B.delete(`/api/address/${C.value}`).then(()=>{b.add({severity:"success",summary:e("success"),detail:e("address.deleteSuccess"),life:3e3}),x(),_.value=!1}).catch(d=>{b.add({severity:"error",summary:e("error"),detail:e("address.deleteError"),life:3e3})})},E=()=>{D.value.exportCSV()},z=()=>{k.push({name:"address-create"})},j=d=>{k.push({name:"address-update",params:{id:d}})},A=d=>d?"success":"info";return Z(()=>{x()}),(d,r)=>{const M=i("InputText"),p=i("Button"),U=i("Toolbar"),F=i("Toast"),c=i("Column"),G=i("Tag"),H=i("ProgressSpinner"),J=i("DataTable"),Q=i("Dialog"),v=R("can"),S=R("tooltip");return V(),ee("div",se,[l("div",ae,[l("div",le,[a(U,{class:"mb-4"},{start:o(()=>[l("h2",oe,u(t(e)("address.managementTitle")),1)]),end:o(()=>[l("div",de,[l("span",re,[r[3]||(r[3]=l("i",{class:"pi pi-search"},null,-1)),a(M,{modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=s=>g.value=s),placeholder:t(e)("address.search")},null,8,["modelValue","placeholder"])]),m(a(p,{label:t(e)("address.export"),icon:"pi pi-upload",class:"p-export",onClick:E},null,8,["label"]),[[v,"list address"]]),m(a(p,{label:t(e)("address.new"),icon:"pi pi-plus",class:"p-button-success",onClick:z},null,8,["label"]),[[v,"create address"]])])]),_:1}),a(F),l("div",ne,[m((V(),te(J,{ref_key:"dt",ref:D,value:w.value,loading:h.value,"data-key":"id",paginator:!0,rows:y.value,filters:$.value,totalRecords:P.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:o(()=>[l("div",ie,[r[4]||(r[4]=l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),l("p",ce,u(t(e)("address.noData")),1)])]),loading:o(()=>[l("div",ue,[a(H,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:o(()=>[a(c,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(c,{field:"address_line_1",header:t(e)("address.line1"),sortable:!0},{body:o(s=>[f(u(s.data.address_line_1),1)]),_:1},8,["header"]),a(c,{field:"address_line_2",header:t(e)("address.line2"),sortable:!0},{body:o(s=>[f(u(s.data.address_line_2||"-"),1)]),_:1},8,["header"]),a(c,{field:"city",header:t(e)("address.city"),sortable:!0},{body:o(s=>[f(u(s.data.city),1)]),_:1},8,["header"]),a(c,{field:"country",header:t(e)("address.country"),sortable:!0},{body:o(s=>[f(u(s.data.country),1)]),_:1},8,["header"]),a(c,{field:"zip_code",header:t(e)("address.zipCode"),sortable:!0},{body:o(s=>[f(u(s.data.zip_code||"-"),1)]),_:1},8,["header"]),a(c,{field:"is_default",header:t(e)("address.default"),sortable:!0},{body:o(s=>[a(G,{value:s.data.is_default?t(e)("address.defaultYes"):t(e)("address.defaultNo"),severity:A(s.data.is_default)},null,8,["value","severity"])]),_:1},8,["header"]),a(c,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:o(s=>[m(a(p,{icon:"pi pi-pencil",class:"p-detail",onClick:W=>j(s.data.id)},null,8,["onClick"]),[[v,"edit address"],[S,t(e)("edit"),void 0,{top:!0}]]),m(a(p,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:W=>L(s.data.id)},null,8,["onClick"]),[[v,"delete address"],[S,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[v,"list address"]])]),a(Q,{visible:_.value,"onUpdate:visible":r[2]||(r[2]=s=>_.value=s),style:{width:"450px"},header:t(e)("address.deleteConfirmTitle"),modal:!0},{footer:o(()=>[a(p,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:r[1]||(r[1]=s=>_.value=!1)},null,8,["label"]),a(p,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:N},null,8,["label"])]),default:o(()=>[l("div",pe,[r[5]||(r[5]=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,u(t(e)("address.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},fe=Y(_e,[["__scopeId","data-v-afb18778"]]);export{fe as default};
