import{_ as me,k as pe,u as fe,j as _e,q as he,r as u,l as D,n as A,m as we,o as be,s as xe,a as r,c as i,f as s,t as g,e as v,v as y,x as m,y as F,z as B,F as W,d as q,g as P,h as ye,i as k,p as ke,A as J,B as K,C as Ce}from"./index-ce4de016.js";import{l as X}from"./lodash-d59c3eeb.js";/* empty css              */import{d as Le}from"./banner-addtion-e4104052.js";const Me={class:"mx-auto mt-16 max-w-[1440px] px-4 sm:px-6 lg:px-8 pb-16"},Be={key:0,class:"flex flex-col items-center justify-center py-16 rounded-xl animate-pulse"},Pe={key:1,class:"text-center mb-10 py-16 text-red-600"},Se={class:"text-lg font-semibold"},je={key:2,class:"lg:flex"},Oe={class:"lg:w-1/4 mb-8 lg:mb-0 mx-8"},$e={class:"bg-white p-6 rounded-lg shadow-lg sticky top-24"},ze={class:"font-bold text-lg mb-4"},Ae={class:"space-y-6"},Fe={class:"border-b pb-4"},Ee={class:"font-semibold"},Ie={class:"mt-4 space-y-2"},Ve=["placeholder"],Ue=["id","value"],Re=["for"],Ne={class:"border-b pb-4"},De={class:"font-semibold"},We={class:"mt-4 space-y-2"},qe=["placeholder"],He=["id","value"],Qe=["for"],Te={class:"border-b pb-4"},Ge={class:"font-semibold"},Je={class:"mt-4 space-y-4"},Ke={class:"border-b pb-4"},Xe={class:"font-semibold"},Ye={class:"mt-4 space-y-2"},Ze={class:"flex items-center space-x-2"},et={class:"lg:w-3/4"},tt={class:"grid grid-cols-1 xs:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-10 mb-10"},st=["onClick"],at={class:"w-full max-h-[600px] overflow-hidden rounded-t-lg relative"},ot=["src","alt"],nt=["onClick","aria-label","title"],rt={class:"p-4 w-full"},it={class:"font-sans text-gray-800 font-medium xs:text-sm sm:text-base md:text-lg w-full"},lt={key:0,class:"font-sans text-gray-600 text-sm w-full"},dt={class:"flex items-center w-full justify-between mt-1"},ut={class:"font-sans text-[#A6853B] font-semibold text-lg"},ct=["disabled","onClick","aria-label","title"],gt={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},vt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},mt={class:"mt-8 bg-white flex justify-center"},pt={__name:"brand-products",setup(ft){const Y=pe(),E=fe(),{t:c,locale:h}=_e(),S=he(),Z=localStorage.getItem("appLang");h.value=Z;const ee=u(localStorage.getItem("defaultStoreId")),H=u({title:"",products:[]}),Q=u(!1),C=u(null),f=u(1),L=u(12),T=u(0),M=u(window.innerWidth>=1024),d=u({category_ids:[],brand_ids:[],rate:0,min_price:null,max_price:null}),p=u({category:!1,brand:!1,rating:!1,price:!1}),I=u([]),j=u([]),w=u(""),b=u(""),V=u(1),U=u(1),R=u(!0),N=u(!0),te=D(()=>{const a=[];return I.value.forEach(e=>{a.push(e),e.has_subcategories&&e.subCategories.data.length>0&&a.push(...e.subCategories.data)}),w.value?a.filter(e=>e.name.toLowerCase().includes(w.value.toLowerCase())):a}),se=D(()=>b.value?j.value.filter(a=>a.name.toLowerCase().includes(b.value.toLowerCase())):j.value),O=async(a=1,e=!1)=>{try{const l=(await k.get("/api/home/categories",{params:{page:a,search:w.value||void 0}})).data.data,o=l.data.map(n=>({id:n.id,name:h.value==="ar"?n.name_ar||n.name_en:n.name_en||n.name_ar,has_subcategories:n.has_subcategories,subCategories:{data:n.subCategories.data.map(_=>({id:_.id,name:h.value==="ar"?_.name_ar||_.name_en:_.name_en||_.name_ar,has_subcategories:_.has_subcategories}))}}));I.value=e?[...I.value,...o]:o,R.value=l.next_page_url!==null,V.value=l.current_page}catch(t){console.error("Error fetching categories:",t)}},ae=()=>{R.value&&O(V.value+1,!0)},$=async(a=1,e=!1)=>{try{const l=(await k.get("/api/home/brands",{params:{page:a,search:b.value||void 0}})).data.data,o=l.data.map(n=>({id:n.id,name:h.value==="ar"?n.name_ar||n.name_en:n.name_en||n.name_ar}));j.value=e?[...j.value,...o]:o,N.value=l.next_page_url!==null,U.value=l.current_page}catch(t){console.error("Error fetching brands:",t)}},oe=()=>{N.value&&$(U.value+1,!0)},ne=X.debounce(O,300),re=X.debounce($,300);A(w,()=>{V.value=1,ne()}),A(b,()=>{U.value=1,re()}),A(d,()=>{f.value=1,x()},{deep:!0}),A(h,()=>{O(),$(),x()});const ie=()=>{M.value=window.innerWidth>=1024,L.value=M.value?12:6},x=async(a=f.value)=>{C.value=null;try{const e={page:a,limit:L.value,category_ids:d.value.category_ids.length>0?d.value.category_ids.join(","):void 0,brand_ids:d.value.brand_ids.length>0?d.value.brand_ids.join(","):void 0,rate:d.value.rate>0?d.value.rate:void 0,min_price:d.value.min_price,max_price:d.value.max_price},l=(await k.get("/api/home/products",{params:e})).data.data;H.value={products:(l.data||[]).map(o=>{var n,_;return{id:o.id,name:h.value==="ar"?o.name_ar||o.name_en:o.name_en||o.name_ar,sub_name:h.value==="ar"?o.name_ar||o.sub_name_ar:o.name_en||o.sub_name_en,price:o.base_price,img:((_=(n=o.media)==null?void 0:n.find(ve=>ve.name==="product_main_image"))==null?void 0:_.url)||o.key_default_image||Le,is_wished:o.is_wished||!1,in_cart:o.in_cart||!1,is_stock:o.is_stock||0,isOutOfStock:o.is_stock===0,variant_id:o.has_variants?o.variant_id:null}})},f.value=l.current_page,T.value=l.total}catch(e){console.error("Error fetching products:",e),C.value=c("products.errorLoading")||"Failed to load products."}finally{Q.value=!1}},z=a=>{p.value[a]=!p.value[a]},le=D(()=>H.value.products),de=a=>{f.value=a.page+1,x(f.value)},ue=async a=>{if(!S.authenticatedweb){E.push({name:"AuthLogin"});return}if(!a.isOutOfStock)try{const e={product_id:a.id,variant_id:a.variant_id,quantity:1};(await k.post("/api/cart/add",e)).status===200&&(a.in_cart=!0,alert(c("cart.added")||"Product added to cart!"))}catch(e){console.error("Error adding to cart:",e),alert(c("cart.error")||"Failed to add product to cart.")}},ce=async a=>{if(!S.authenticatedweb){E.push({name:"AuthLogin"});return}const e=a.is_wished,t=e?"delete":"post",l=e?`/api/wishlists/${a.id}`:"/api/wishlists",o={product_id:a.id};try{let n;t==="post"?n=await k.post(l,o):n=await k.delete(l,{data:o}),(n.status===200||n.status===204)&&(a.is_wished=!e,alert(c(e?"wishlist.removed":"wishlist.added")||`Product ${e?"removed from":"added to"} wishlist!`))}catch(n){console.error("Error toggling favorite status:",n),a.is_wished=e,alert(c("wishlist.error")||"Failed to update wishlist.")}},ge=(a,e)=>a?a.length<=e?a:a.slice(0,e)+"...":"",G=()=>{const a=window.innerWidth>=1024;a!==M.value&&(M.value=a,L.value=M.value?12:6,f.value=1,x(f.value))};return we(()=>{d.value.brand_ids.push(Y.params.id),ee.value?(ie(),x(f.value),O(),$()):C.value=c("products.missingParams")||"Missing store ID."}),be(()=>{window.addEventListener("resize",G)}),xe(()=>{window.removeEventListener("resize",G)}),(a,e)=>(r(),i("div",Me,[Q.value?(r(),i("div",Be,e[12]||(e[12]=[s("img",{src:ke,alt:"Loading Logo",class:"w-32 h-32 object-contain animate-bounce","aria-label":"Loading animation"},null,-1)]))):C.value?(r(),i("div",Pe,[s("p",Se,g(C.value),1),s("button",{onClick:x,class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"},g(v(c)("products.retry")),1)])):(r(),i("div",je,[s("div",Oe,[s("div",$e,[s("h3",ze,g(v(c)("products.filters")),1),s("div",Ae,[s("div",Fe,[s("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[0]||(e[0]=t=>z("category"))},[s("span",Ee,g(v(c)("products.category")),1),(r(),i("svg",{class:y([{"rotate-180":p.value.category},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[13]||(e[13]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),m(s("div",Ie,[m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>w.value=t),type:"text",placeholder:v(c)("products.searchCategory"),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500","aria-label":"Search categories"},null,8,Ve),[[B,w.value]]),(r(!0),i(W,null,q(te.value,t=>(r(),i("div",{key:t.id,class:"flex items-center"},[m(s("input",{type:"checkbox",id:`cat-${t.id}`,value:t.id,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.category_ids=l),class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,8,Ue),[[J,d.value.category_ids]]),s("label",{for:`cat-${t.id}`,class:"ml-2 text-sm text-gray-700"},g(t.name),9,Re)]))),128)),R.value?(r(),i("button",{key:0,onClick:ae,class:"text-indigo-600 hover:text-indigo-800 text-sm"},g(v(c)("products.loadMore")),1)):P("",!0)],512),[[F,p.value.category]])]),s("div",Ne,[s("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[3]||(e[3]=t=>z("brand"))},[s("span",De,g(v(c)("products.brand")),1),(r(),i("svg",{class:y([{"rotate-180":p.value.brand},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[14]||(e[14]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),m(s("div",We,[m(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>b.value=t),type:"text",placeholder:v(c)("products.searchBrand"),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500","aria-label":"Search brands"},null,8,qe),[[B,b.value]]),(r(!0),i(W,null,q(se.value,t=>(r(),i("div",{key:t.id,class:"flex items-center"},[m(s("input",{type:"checkbox",id:`brand-${t.id}`,value:t.id,"onUpdate:modelValue":e[5]||(e[5]=l=>d.value.brand_ids=l),class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,8,He),[[J,d.value.brand_ids]]),s("label",{for:`brand-${t.id}`,class:"ml-2 text-sm text-gray-700"},g(t.name),9,Qe)]))),128)),N.value?(r(),i("button",{key:0,onClick:oe,class:"text-indigo-600 hover:text-indigo-800 text-sm"},g(v(c)("products.loadMore")),1)):P("",!0)],512),[[F,p.value.brand]])]),s("div",Te,[s("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[6]||(e[6]=t=>z("rating"))},[s("span",Ge,g(v(c)("products.rating")),1),(r(),i("svg",{class:y([{"rotate-180":p.value.rating},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[15]||(e[15]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),m(s("div",Je,[m(s("input",{id:"rating-slider",type:"range","onUpdate:modelValue":e[7]||(e[7]=t=>d.value.rate=t),min:"0",max:"5",step:"1",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Minimum rating slider"},null,512),[[B,d.value.rate,void 0,{number:!0}]]),e[16]||(e[16]=s("div",{class:"flex justify-between text-sm text-gray-500"},[s("span",null,"0"),s("span",null,"1"),s("span",null,"2"),s("span",null,"3"),s("span",null,"4"),s("span",null,"5")],-1))],512),[[F,p.value.rating]])]),s("div",Ke,[s("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[8]||(e[8]=t=>z("price"))},[s("span",Xe,g(v(c)("products.price")),1),(r(),i("svg",{class:y([{"rotate-180":p.value.price},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[17]||(e[17]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),m(s("div",Ye,[s("div",Ze,[m(s("input",{type:"number",placeholder:"Min","onUpdate:modelValue":e[9]||(e[9]=t=>d.value.min_price=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500","aria-label":"Minimum price"},null,512),[[B,d.value.min_price,void 0,{number:!0}]]),e[18]||(e[18]=s("span",null,"-",-1)),m(s("input",{type:"number",placeholder:"Max","onUpdate:modelValue":e[10]||(e[10]=t=>d.value.max_price=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500","aria-label":"Maximum price"},null,512),[[B,d.value.max_price,void 0,{number:!0}]])])],512),[[F,p.value.price]])])])])]),s("div",et,[s("div",tt,[(r(!0),i(W,null,q(le.value,t=>(r(),i("div",{key:t.id,class:"group flex flex-col items-start cursor-pointer h-full bg-white transition-all pb-4 rounded-lg shadow-lg duration-300 hover:-translate-y-2 hover:shadow-xl",onClick:l=>v(E).push({name:"Product-details",params:{id:t.id}})},[s("div",at,[s("img",{src:t.img,alt:t.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,ot),e[20]||(e[20]=s("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1)),v(S).authenticatedweb?(r(),i("button",{key:0,class:"absolute top-2 right-2 p-2 rounded-full bg-white text-gray-500 hover:text-red-500 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 z-10",onClick:K(l=>ce(t),["stop"]),"aria-label":t.is_wished?"Remove from wishlist":"Add to wishlist",title:t.is_wished?"Remove from wishlist":"Add to wishlist"},[(r(),i("svg",{class:y(["w-5 h-5",{"text-red-500":t.is_wished}]),fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[19]||(e[19]=[s("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},null,-1)]),2))],8,nt)):P("",!0)]),s("div",rt,[s("p",it,g(ge(t.name,25)),1),t.sub_name?(r(),i("p",lt,g(t.sub_name.slice(0,37)),1)):P("",!0),s("div",dt,[s("span",ut,g(t.price)+" "+g(a.$t("currencyLabel")),1),v(S).authenticatedweb?(r(),i("button",{key:0,class:y(["p-2 rounded-full bg-gray-100 text-[#A6853B] transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-[#A6853B] focus:ring-offset-2",{"hover:bg-[#A6853B] hover:text-white":!t.in_cart&&!t.isOutOfStock,"bg-gray-300 text-gray-500 cursor-not-allowed":t.isOutOfStock}]),disabled:t.isOutOfStock,onClick:K(l=>ue(t),["stop"]),"aria-label":t.in_cart?"In cart":t.isOutOfStock?"Out of stock":"Add to cart",title:t.in_cart?"In cart":t.isOutOfStock?"Out of stock":"Add to cart"},[t.in_cart?(r(),i("svg",gt,e[21]||(e[21]=[s("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(r(),i("svg",vt,e[22]||(e[22]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,ct)):P("",!0)])])],8,st))),128))]),s("div",mt,[ye(v(Ce),{rows:L.value,totalRecords:T.value,pageLinkSize:3,first:(f.value-1)*L.value,onPage:e[11]||(e[11]=t=>de(t)),template:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])])]))]))}},xt=me(pt,[["__scopeId","data-v-9d2d8537"]]);export{xt as default};
