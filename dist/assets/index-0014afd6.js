import{_ as se,b as re,L as ne,u as ie,r as n,w as ce,d as de,V as ue,o as k,e as $,f as s,g as o,i,j as e,t as c,F as z,h as pe,a as U,X as _e,Y as _,Z as me,$ as ge,a0 as ve,a1 as d,s as S,z as M,a2 as G,x as he,B as ye,a3 as be,a5 as O,a7 as fe,p as xe,m as we}from"./index-b794012a.js";const g=E=>(xe("data-v-7c2b2ca0"),E=E(),we(),E),Ce={class:"grid"},ke={class:"col-12"},$e={class:"card p-4 shadow-2 border-round"},Se={class:"text-2xl font-bold"},Ee={class:"flex gap-2"},Ne={class:"p-input-icon-left"},De=g(()=>s("i",{class:"pi pi-search"},null,-1)),Fe={class:"card shadow-1 surface-0"},Ue={class:"text-center py-4"},Ve=g(()=>s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Pe={class:"text-xl"},Re={class:"flex justify-content-center align-items-center py-4"},Ie={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Le={class:"p-paginator-left-content"},Ae={class:"p-paginator-current"},Te={class:"p-paginator-right-content"},je=["disabled"],Be=g(()=>s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),ze=[Be],Me=["disabled"],Ge=g(()=>s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Oe=[Ge],We=["onClick"],Qe={key:1,class:"p-paginator-dots"},Xe=["disabled"],Ye=g(()=>s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Ze=[Ye],qe=["disabled"],He=g(()=>s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Je=[He],Ke={class:"flex align-items-center justify-content-center"},ea=g(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),aa={class:"flex flex-column gap-3"},ta={setup(E){const P=re(),m=ne(),{t:a}=ie(),N=n(!0),R=n([]),b=n(!1),I=n(null),W=n(null),Q=n({}),D=n("");n(null);const f=n(!1),v=n(null),x=n(!1),u=n(1),V=n(0),h=n(10),F=n(0),X=n(""),Y=n(""),L=n(""),A=n(""),T=n(0),j=n(0),B=n([]),Z=n([{store_name_ar:"شفت 7",store_name_en:"Shift7",category_name_ar:"الأحذية",category_name_en:"Shoes",sub_category_name_ar:"أحذية نسائية رسمية",sub_category_name_en:"Women's Formal Shoes",sub_sub_category_name_ar:"كريم واقي للشمس",sub_sub_category_name_en:"Sunblock & Cream"},{store_name_ar:"شفت مارت",store_name_en:"Shift Mart",category_name_ar:"الخضار والفواكة",category_name_en:"Vegetables & Fruits",sub_category_name_ar:"الفواكة الطازجة",sub_category_name_en:"Fresh Fruits",sub_sub_category_name_ar:"كريم واقي للشمس",sub_sub_category_name_en:"Sunblock & Cream"}]),y=()=>{N.value=!0,U.get("/api/category",{params:{page:u.value,limit:h.value,search:D.value||void 0}}).then(l=>{R.value=l.data.data.data,V.value=l.data.data.total,F.value=l.data.data.last_page,X.value=l.data.data.first_page_url,Y.value=l.data.data.last_page_url,L.value=l.data.data.next_page_url,A.value=l.data.data.prev_page_url,T.value=l.data.data.from,j.value=l.data.data.to,B.value=l.data.data.links,u.value=l.data.data.current_page,N.value=!1}).catch(l=>{m.add({severity:"error",summary:a("error"),detail:a("category.loadError"),life:3e3}),N.value=!1,console.error("Error fetching categories:",l)})};ce([D,h],()=>{u.value=1,y()});const w=l=>{l>=1&&l<=F.value&&(u.value=l,y())},q=l=>{h.value=l.value,u.value=1,y()},H=l=>{I.value=l,b.value=!0},J=()=>{U.delete(`/api/category/${I.value}`).then(()=>{m.add({severity:"success",summary:a("success"),detail:a("category.deleteSuccess"),life:3e3}),y(),b.value=!1}).catch(l=>{m.add({severity:"error",summary:a("error"),detail:a("category.deleteError"),life:3e3}),console.error("Error deleting category:",l)})},K=()=>{U.get("/api/export/category",{responseType:"blob"}).then(l=>{const r=new Blob([l.data],{type:"text/csv"}),C=window.URL.createObjectURL(r),t=document.createElement("a");t.href=C,t.setAttribute("download","categories_export.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(C)}).catch(l=>{m.add({severity:"error",summary:a("error"),detail:a("category.exportError"),life:3e3}),console.error("Error exporting categories:",l)})},ee=()=>{f.value=!0,v.value=null},ae=l=>{v.value=l.files[0]},te=()=>{if(!v.value){m.add({severity:"warn",summary:a("warning"),detail:a("category.importNoFile"),life:3e3});return}x.value=!0;const l=new FormData;l.append("file",v.value),U.post("/api/import/store",l).then(()=>{m.add({severity:"success",summary:a("success"),detail:a("category.importSuccess"),life:3e3}),y(),f.value=!1,x.value=!1,v.value=null}).catch(r=>{m.add({severity:"error",summary:a("error"),detail:a("category.importError"),life:3e3}),x.value=!1,console.error("Error importing categories:",r)})},le=()=>{P.push({name:"category-create"})},oe=l=>{P.push({name:"category-update",params:{id:l}})};return de(()=>{y()}),(l,r)=>{const C=ue("tooltip");return k(),$("div",Ce,[s("div",ke,[s("div",$e,[o(e(me),{class:"mb-4"},{start:i(()=>[s("h2",Se,c(e(a)("category.managementTitle")),1)]),end:i(()=>[s("div",Ee,[s("span",Ne,[De,o(e(_e),{modelValue:D.value,"onUpdate:modelValue":r[0]||(r[0]=t=>D.value=t),placeholder:e(a)("category.search")},null,8,["modelValue","placeholder"])]),o(e(_),{label:e(a)("category.import"),icon:"pi pi-download",class:"exite",onClick:ee},null,8,["label"]),o(e(_),{label:e(a)("category.export"),icon:"pi pi-upload",class:"exite",onClick:K},null,8,["label"]),o(e(_),{label:e(a)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:le},null,8,["label"])])]),_:1}),o(e(ge)),s("div",Fe,[o(e(G),{ref_key:"dt",ref:W,value:R.value,loading:N.value,"data-key":"id",paginator:!1,rows:h.value,filters:Q.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:i(()=>[s("div",Ue,[Ve,s("p",Pe,c(e(a)("category.noData")),1)])]),loading:i(()=>[s("div",Re,[o(e(ve),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:i(()=>[o(e(d),{"selection-mode":"multiple","header-style":"width: 3rem"}),o(e(d),{field:"name_en",header:e(a)("id"),sortable:!0,"header-style":"width:5%; min-width:5rem;"},{body:i(t=>[S(c(t.data.id),1)]),_:1},8,["header"]),o(e(d),{field:"name_en",header:e(a)("category.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(t=>[S(c(t.data.name_en),1)]),_:1},8,["header"]),o(e(d),{field:"name_ar",header:e(a)("category.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(t=>[S(c(t.data.name_ar),1)]),_:1},8,["header"]),o(e(d),{field:"parent.name_en",header:e(a)("category.parent"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(t=>{var p;return[S(c(((p=t.data.parent)==null?void 0:p.name_en)||e(a)("category.noParent")),1)]}),_:1},8,["header"]),o(e(d),{field:"store.name_en",header:e(a)("category.store"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(t=>{var p;return[S(c(((p=t.data.store)==null?void 0:p.name_en)||e(a)("category.noStore")),1)]}),_:1},8,["header"]),o(e(d),{header:e(a)("actions"),"header-style":"width:12rem;"},{body:i(t=>[M(o(e(_),{icon:"pi pi-pencil",class:"p-detail",onClick:p=>oe(t.data.id)},null,8,["onClick"]),[[C,e(a)("edit"),void 0,{top:!0}]]),M(o(e(_),{icon:"pi pi-trash",class:"p-delete",onClick:p=>H(t.data.id)},null,8,["onClick"]),[[C,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),s("div",Ie,[s("div",Le,[s("span",Ae,c(e(a)("show"))+" "+c(T.value)+" "+c(e(a)("to"))+" "+c(j.value)+" "+c(e(a)("from"))+" "+c(V.value),1)]),s("div",Te,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:r[1]||(r[1]=t=>w(1))},ze,8,je),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!A.value,onClick:r[2]||(r[2]=t=>w(u.value-1))},Oe,8,Me),(k(!0),$(z,null,pe(B.value,(t,p)=>(k(),$(z,{key:p},[t.label&&!isNaN(parseInt(t.label))?(k(),$("button",{key:0,class:he(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:la=>w(parseInt(t.label))},c(t.label),11,We)):t.label==="..."?(k(),$("span",Qe,"...")):ye("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!L.value,onClick:r[3]||(r[3]=t=>w(u.value+1))},Ze,8,Xe),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===F.value,onClick:r[4]||(r[4]=t=>w(F.value))},Je,8,qe),o(e(be),{modelValue:h.value,"onUpdate:modelValue":r[5]||(r[5]=t=>h.value=t),options:[5,10,20,30],onChange:q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),o(e(O),{visible:b.value,"onUpdate:visible":r[7]||(r[7]=t=>b.value=t),style:{width:"450px"},header:e(a)("category.deleteConfirmTitle"),modal:!0},{footer:i(()=>[o(e(_),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:r[6]||(r[6]=t=>b.value=!1)},null,8,["label"]),o(e(_),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:J},null,8,["label"])]),default:i(()=>[s("div",Ke,[ea,s("span",null,c(e(a)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(e(O),{visible:f.value,"onUpdate:visible":r[9]||(r[9]=t=>f.value=t),style:{width:"800px"},header:e(a)("category.importInstructions"),modal:!0},{footer:i(()=>[o(e(fe),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:e(a)("category.chooseFile"),onSelect:ae,auto:!1,disabled:x.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),o(e(_),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text mt-3",onClick:r[8]||(r[8]=t=>f.value=!1)},null,8,["label"]),o(e(_),{label:e(a)("import"),icon:"pi pi-check",class:"p-button-success",onClick:te,disabled:!v.value,loading:x.value},null,8,["label","disabled","loading"])]),default:i(()=>[s("div",aa,[s("div",null,[o(e(G),{value:Z.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{default:i(()=>[o(e(d),{field:"store_name_ar",header:e(a)("category.storeNameAr")},null,8,["header"]),o(e(d),{field:"store_name_en",header:e(a)("category.storeNameEn")},null,8,["header"]),o(e(d),{field:"category_name_ar",header:e(a)("category.nameAr")},null,8,["header"]),o(e(d),{field:"category_name_en",header:e(a)("category.nameEn")},null,8,["header"]),o(e(d),{field:"sub_category_name_ar",header:e(a)("category.subCategoryNameAr")},null,8,["header"]),o(e(d),{field:"sub_category_name_en",header:e(a)("category.subCategoryNameEn")},null,8,["header"]),o(e(d),{field:"sub_sub_category_name_ar",header:e(a)("category.subSubCategoryNameAr")},null,8,["header"]),o(e(d),{field:"sub_sub_category_name_en",header:e(a)("category.subSubCategoryNameEn")},null,8,["header"])]),_:1},8,["value"])])])]),_:1},8,["visible","header"])])])])}}},sa=se(ta,[["__scopeId","data-v-7c2b2ca0"]]);export{sa as default};
