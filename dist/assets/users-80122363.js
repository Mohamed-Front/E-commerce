import{_ as ne,u as ie,a as re,I as de,r as n,J as ue,m as pe,o as ce,v as u,K as z,b as m,c as y,d as a,e as i,w as d,x,j as ve,t as r,g as o,F as L,f as me,L as _e,i as A,p as P,s as ge,z as he}from"./index-a74d0a8d.js";const be={class:"grid"},fe={class:"col-12"},ye={class:"card p-4 shadow-2 border-round"},xe={class:"text-2xl font-bold"},we={class:"flex gap-2"},Ce={class:"p-input-icon-left"},ke={class:"card shadow-1 surface-0"},Te={class:"text-center py-4"},Ve={class:"text-xl"},De={class:"flex justify-content-center align-items-center py-4"},Pe={class:"p-paginator p-component p-unselectable-text mt-3"},Ne={class:"p-paginator-left-content"},Ue={class:"p-paginator-current"},$e={class:"p-paginator-right-content"},Be={class:"p-paginator-pages"},Ie=["disabled"],Se=["disabled"],Me=["onClick"],Re={key:1,class:"p-paginator-dots"},Ee=["disabled"],Fe=["disabled"],je={class:"p-paginator-rpp-options"},ze={class:"flex align-items-center justify-content-center"},Le={__name:"users",setup(Ae){const{t:s}=ie(),N=re(),T=de(),w=n(!0),U=n(""),$=n(null),_=n(!1);n(null);const B=n(null),I=n({}),C=n(""),p=n(1),V=n(0),g=n(10),k=n(0),G=n(""),J=n(""),S=n(""),M=n(""),R=n(0),E=n(0),F=n([]),K=()=>{B.value.exportCSV()},O=l=>{U.value=l,_.value=!0},Q=()=>{A.delete(`/api/user/${U.value}`).then(()=>{h(),_.value=!1,T.add({severity:"success",summary:s("success"),detail:s("user.deleteSuccess"),life:3e3})}).catch(l=>{T.add({severity:"error",summary:s("error"),detail:s("user.deleteError"),life:3e3})})},W=()=>{I.value={global:{value:null,matchMode:_e.CONTAINS}}};ue(()=>{W()});const h=()=>{w.value=!0,A.get("/api/user",{params:{page:p.value,limit:g.value,search:C.value}}).then(l=>{w.value=!1,$.value=l.data.data.data,V.value=l.data.data.total,k.value=l.data.data.last_page,G.value=l.data.data.first_page_url,J.value=l.data.data.last_page_url,S.value=l.data.data.next_page_url,M.value=l.data.data.prev_page_url,R.value=l.data.data.from,E.value=l.data.data.to,F.value=l.data.data.links}).catch(l=>{w.value=!1,T.add({severity:"error",summary:s("error"),detail:s("user.loadError"),life:3e3}),console.error("Error fetching data:",l)})};pe(C,l=>{p.value=1,h()});const b=l=>{l>=1&&l<=k.value&&(p.value=l,h())},q=l=>{g.value=l.value,p.value=1,h()};ce(()=>{h()});const H=()=>{N.push({name:"user-create"})},X=l=>{N.push({name:"user-edit",params:{id:l}})};return(l,e)=>{const Y=u("InputText"),c=u("Button"),Z=u("Toolbar"),ee=u("Toast"),v=u("Column"),te=u("Tag"),ae=u("ProgressSpinner"),se=u("DataTable"),le=u("Dropdown"),oe=u("Dialog"),f=z("can"),j=z("tooltip");return m(),y("div",be,[a("div",fe,[a("div",ye,[i(Z,{class:"mb-4"},{start:d(()=>[a("h2",xe,r(o(s)("user.managementTitle")),1)]),end:d(()=>[a("div",we,[a("span",Ce,[e[8]||(e[8]=a("i",{class:"pi pi-search"},null,-1)),i(Y,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value=t),placeholder:o(s)("user.search")},null,8,["modelValue","placeholder"])]),x(i(c,{label:o(s)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:K},null,8,["label"]),[[f,"export users"]]),x(i(c,{label:o(s)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:H},null,8,["label"]),[[f,"create users"]])])]),_:1}),i(ee),a("div",ke,[x((m(),ve(se,{ref_key:"dt",ref:B,value:$.value,loading:w.value,"data-key":"id",paginator:!1,rows:g.value,filters:I.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[a("div",Te,[e[9]||(e[9]=a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),a("p",Ve,r(o(s)("user.noData")),1)])]),loading:d(()=>[a("div",De,[i(ae,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(v,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(v,{field:"name",header:o(s)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[P(r(t.data.name),1)]),_:1},8,["header"]),i(v,{field:"email",header:o(s)("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[P(r(t.data.email),1)]),_:1},8,["header"]),i(v,{field:"phone",header:o(s)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[P(r(t.data.phone),1)]),_:1},8,["header"]),i(v,{field:"type_description",header:o(s)("user.type"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[i(te,{value:t.data.type_description,severity:{Admin:"info",Customer:"success",Guest:"danger"}[t.data.type_description]||"warning"},null,8,["value","severity"])]),_:1},8,["header"]),i(v,{header:o(s)("actions"),"header-style":"min-width:10rem;"},{body:d(t=>[x(i(c,{icon:"pi pi-pencil",class:"p-detail",onClick:D=>X(t.data.id)},null,8,["onClick"]),[[f,"edit users"],[j,o(s)("edit"),void 0,{top:!0}]]),x(i(c,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:D=>O(t.data.id)},null,8,["onClick"]),[[f,"delete users"],[j,o(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[f,"list users"]]),a("div",Pe,[a("div",Ne,[a("span",Ue,r(o(s)("showing"))+" "+r(R.value)+" "+r(o(s)("to"))+" "+r(E.value)+" "+r(o(s)("of"))+" "+r(V.value)+" "+r(o(s)("entries")),1)]),a("div",$e,[a("span",Be,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:e[1]||(e[1]=t=>b(1))},e[10]||(e[10]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Ie),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!M.value,onClick:e[2]||(e[2]=t=>b(p.value-1))},e[11]||(e[11]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Se),(m(!0),y(L,null,me(F.value,(t,D)=>(m(),y(L,{key:D},[t.label&&!isNaN(t.label)?(m(),y("button",{key:0,class:ge(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Ge=>b(parseInt(t.label))},r(t.label),11,Me)):t.label==="..."?(m(),y("span",Re,"...")):he("",!0)],64))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!S.value,onClick:e[3]||(e[3]=t=>b(p.value+1))},e[12]||(e[12]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Ee),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===k.value,onClick:e[4]||(e[4]=t=>b(k.value))},e[13]||(e[13]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Fe)]),a("span",je,[i(le,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t),options:[5,10,20,30],optionLabel:"label",optionValue:"value",onChange:q,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])]),i(oe,{visible:_.value,"onUpdate:visible":e[7]||(e[7]=t=>_.value=t),style:{width:"450px"},header:o(s)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(c,{label:o(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[6]||(e[6]=t=>_.value=!1)},null,8,["label"]),i(c,{label:o(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Q},null,8,["label"])]),default:d(()=>[a("div",ze,[e[14]||(e[14]=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,r(o(s)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Ke=ne(Le,[["__scopeId","data-v-49d013f9"]]);export{Ke as default};
