import{_ as S,u as L,A as O,j as R,r as m,l as q,o as N,P as M,a as d,c as u,C as z,f as t,t as n,e as s,B as b,h as v,v as c,x as D,w as G,F as H,i as P,R as U,a1 as J,T as B,O as K}from"./index-c589d290.js";const Q={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},W={class:"text-3xl font-bold text-center mb-8 text-gray-800"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"space-y-2"},Z={for:"name_en",class:"block text-sm font-medium text-gray-700"},ee={class:"space-y-2"},te={for:"name_ar",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2 lg:col-span-2"},se={for:"store_id",class:"block text-sm font-medium text-gray-700"},le={class:"space-y-2"},oe={class:"block text-sm font-medium text-gray-700"},re={class:"flex justify-center"},ne={key:0,class:"p-4 w-full h-full"},ie={class:"relative group w-full h-full"},de=["src","alt"],ue={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},ce={key:1,class:"p-4 flex flex-col items-center justify-center"},me={class:"text-sm text-center text-gray-600"},pe={class:"text-blue-500 font-medium"},ge={class:"space-y-2"},be={class:"block text-sm font-medium text-gray-700"},ve={class:"flex justify-center"},fe={key:0,class:"p-4 w-full h-full"},_e={class:"relative group w-full h-full"},xe=["src","alt"],ye={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},he={key:1,class:"p-4 flex flex-col items-center justify-center"},we={class:"text-sm text-center text-gray-600"},ke={class:"text-blue-500 font-medium"},De={class:"space-y-2 md:col-span-2"},je={class:"block text-sm font-medium text-gray-700"},Ve={class:"flex justify-center"},$e={key:0,class:"p-4 w-full h-full"},Te={class:"relative group w-full h-full"},Ce=["src","alt"],Pe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ue={key:1,class:"p-4 flex flex-col items-center justify-center"},Be={class:"text-sm text-center text-gray-600"},Ae={class:"text-blue-500 font-medium"},Ie={class:"pt-4 flex justify-center space-x-4"},Ee={key:0},Fe={key:1,class:"pi pi-spinner pi-spin"},Se={__name:"create",setup(Le){const j=L(),V=O(),{t:l}=R(),p=m(!1),A=q(()=>localStorage.getItem("appLang")=="ar"?"name_ar":"name_en"),r=m({name_en:"",name_ar:"",store_id:null,image:null,banner_one_image:null,banner_two_image:null}),y=m(null),h=m(null),w=m(null),$=m([]),f=m(!1),_=m(!1),x=m(!1),I=async()=>{try{const o=await P.get("/api/store");$.value=o.data.data.data}catch(o){console.error("Error fetching stores:",o)}},E=(o,e)=>{const i=new FileReader;i.onload=a=>{switch(e){case"image":r.value.image=o,y.value=a.target.result,f.value=!1;break;case"banner_one":r.value.banner_one_image=o,h.value=a.target.result,_.value=!1;break;case"banner_two":r.value.banner_two_image=o,w.value=a.target.result,x.value=!1;break}},i.readAsDataURL(o)},g=(o,e)=>{var a,T,C;const i=((a=o.target.files)==null?void 0:a[0])||((C=(T=o.dataTransfer)==null?void 0:T.files)==null?void 0:C[0]);i&&i.type.match("image.*")&&E(i,e)},k=o=>{switch(o){case"image":r.value.image=null,y.value=null;break;case"banner_one":r.value.banner_one_image=null,h.value=null;break;case"banner_two":r.value.banner_two_image=null,w.value=null;break}},F=async()=>{var e,i;p.value=!0;const o=new FormData;o.append("name_en",r.value.name_en),o.append("name_ar",r.value.name_ar),o.append("store_id",r.value.store_id||""),r.value.image&&o.append("image",r.value.image),r.value.banner_one_image&&o.append("banner_one_image",r.value.banner_one_image),r.value.banner_two_image&&o.append("banner_two_image",r.value.banner_two_image);try{const a=await P.post("/api/market",o);j.push({name:"markets"}),V.add({severity:"success",summary:l("success"),detail:l("market.createSuccess"),life:3e3})}catch(a){console.error("Error:",a),V.add({severity:"error",summary:l("error"),detail:((i=(e=a.response)==null?void 0:e.data)==null?void 0:i.message)||l("market.createError"),life:3e3})}finally{p.value=!1}};return N(()=>{I()}),(o,e)=>{const i=M("can");return d(),u(H,null,[z((d(),u("div",Q,[t("h1",W,n(s(l)("market.createTitle")),1),t("form",{onSubmit:c(F,["prevent"]),class:"space-y-6"},[t("div",X,[t("div",Y,[t("label",Z,[b(n(s(l)("market.nameEn"))+" ",1),e[19]||(e[19]=t("span",{class:"text-red-500"},"*",-1))]),v(s(U),{id:"name_en",modelValue:r.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.name_en=a),placeholder:s(l)("market.nameEnPlaceholder"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",ee,[t("label",te,[b(n(s(l)("market.nameAr"))+" ",1),e[20]||(e[20]=t("span",{class:"text-red-500"},"*",-1))]),v(s(U),{id:"name_ar",modelValue:r.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.name_ar=a),placeholder:s(l)("market.nameArPlaceholder"),dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",ae,[t("label",se,[b(n(s(l)("market.store"))+" ",1),e[21]||(e[21]=t("span",{class:"text-red-500"},"*",-1))]),v(s(J),{filter:"",modelValue:r.value.store_id,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.store_id=a),options:$.value,optionLabel:A.value,optionValue:"id",placeholder:s(l)("market.selectStore"),class:"w-full",required:""},null,8,["modelValue","options","optionLabel","placeholder"])]),t("div",le,[t("label",oe,n(s(l)("market.image")),1),t("div",re,[t("label",{onDragover:e[5]||(e[5]=c(a=>f.value=!0,["prevent"])),onDragleave:e[6]||(e[6]=a=>f.value=!1),onDrop:e[7]||(e[7]=c(a=>g(a,"image"),["prevent"])),class:D([{"border-blue-500 bg-blue-50":f.value,"border-gray-300":!f.value},"cursor-pointer w-full h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[3]||(e[3]=a=>g(a,"image")),accept:"image/*",class:"hidden"},null,32),y.value?(d(),u("div",ne,[t("div",ie,[t("img",{src:y.value,alt:s(l)("market.imagePreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,de),t("div",ue,[t("button",{type:"button",onClick:e[4]||(e[4]=c(a=>k("image"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[22]||(e[22]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(d(),u("div",ce,[e[23]||(e[23]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",me,[t("span",pe,n(s(l)("market.clickToUpload")),1),b(" "+n(s(l)("market.orDragAndDrop")),1)])]))],34)])]),t("div",ge,[t("label",be,n(s(l)("market.bannerOne")),1),t("div",ve,[t("label",{onDragover:e[10]||(e[10]=c(a=>_.value=!0,["prevent"])),onDragleave:e[11]||(e[11]=a=>_.value=!1),onDrop:e[12]||(e[12]=c(a=>g(a,"banner_one"),["prevent"])),class:D([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[8]||(e[8]=a=>g(a,"banner_one")),accept:"image/*",class:"hidden"},null,32),h.value?(d(),u("div",fe,[t("div",_e,[t("img",{src:h.value,alt:s(l)("market.bannerOnePreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,xe),t("div",ye,[t("button",{type:"button",onClick:e[9]||(e[9]=c(a=>k("banner_one"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[24]||(e[24]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(d(),u("div",he,[e[25]||(e[25]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",we,[t("span",ke,n(s(l)("market.clickToUpload")),1),b(" "+n(s(l)("market.orDragAndDrop")),1)])]))],34)])]),t("div",De,[t("label",je,n(s(l)("market.bannerTwo")),1),t("div",Ve,[t("label",{onDragover:e[15]||(e[15]=c(a=>x.value=!0,["prevent"])),onDragleave:e[16]||(e[16]=a=>x.value=!1),onDrop:e[17]||(e[17]=c(a=>g(a,"banner_two"),["prevent"])),class:D([{"border-blue-500 bg-blue-50":x.value,"border-gray-300":!x.value},"cursor-pointer w-full max-w-2xl h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[13]||(e[13]=a=>g(a,"banner_two")),accept:"image/*",class:"hidden"},null,32),w.value?(d(),u("div",$e,[t("div",Te,[t("img",{src:w.value,alt:s(l)("market.bannerTwoPreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ce),t("div",Pe,[t("button",{type:"button",onClick:e[14]||(e[14]=c(a=>k("banner_two"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[26]||(e[26]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(d(),u("div",Ue,[e[27]||(e[27]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",Be,[t("span",Ae,n(s(l)("market.clickToUpload")),1),b(" "+n(s(l)("market.orDragAndDrop")),1)])]))],34)])])]),t("div",Ie,[v(s(B),{type:"button",label:s(l)("cancel"),icon:"pi pi-times",onClick:e[18]||(e[18]=a=>s(j).go(-1)),class:"px-6 py-3 mx-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:p.value},null,8,["label","disabled"]),v(s(B),{type:"submit",label:s(l)("market.createButton"),icon:"pi pi-plus",loading:p.value,class:"px-8 mx-2 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:p.value},{default:G(()=>[p.value?(d(),u("i",Fe)):(d(),u("span",Ee,n(s(l)("market.createButton")),1))]),_:1},8,["label","loading","disabled"])])],32)])),[[i,"create markets"]]),v(s(K))],64)}}},Re=S(Se,[["__scopeId","data-v-47db6f10"]]);export{Re as default};
