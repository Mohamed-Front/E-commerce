import{_ as N,k as R,u as T,j as V,q as W,r as u,l as q,m as D,o as H,s as U,a as r,c as l,f as i,t as _,e as n,F as G,d as J,h as K,i as p,p as Q,v as z,x as B,g as C,y as X}from"./index-46c13c1b.js";/* empty css              */import{d as Y}from"./banner-addtion-e4104052.js";const Z={class:"mx-auto mt-16 max-w-7xl px-4 sm:px-6 lg:px-8 pb-16"},tt={key:0,class:"flex flex-col items-center justify-center py-16 rounded-xl animate-pulse"},et={key:1,class:"text-center mb-10 py-16 text-red-600"},st={class:"text-lg font-semibold"},at={key:2},ot={class:"font-bold font-sans text-gray-800 lg:mt-4 xs:mt-2 xs:text-lg sm:text-xl md:text-2xl lg:text-3xl text-center animate-fade-in"},it={class:"grid grid-cols-1 xs:grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-10 mb-10"},nt=["onClick"],rt={class:"w-full h-60 overflow-hidden rounded-t-lg relative"},lt=["src","alt"],dt=["onClick","aria-label","title"],ct={class:"p-4 w-full"},ut={class:"font-sans text-gray-800 font-medium text-base line-clamp-2"},gt={key:0,class:"font-sans text-gray-600 text-sm line-clamp-1 mt-1"},_t={class:"flex items-center w-full justify-between mt-1"},mt={class:"font-sans text-[#A6853B] font-semibold text-lg"},vt=["disabled","onClick","aria-label","title"],ht={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ft={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wt={class:"mt-8 bg-white flex justify-center"},pt={__name:"produts-category",setup(xt){const L=R(),x=T(),{t:o,locale:y}=V(),f=W(),P=u(localStorage.getItem("defaultStoreId")),b=u({title:"",products:[]}),k=u(!1),m=u(null),g=u(1),v=u(12),S=u(0),h=u(window.innerWidth>=1024),$=()=>{h.value=window.innerWidth>=1024,v.value=h.value?12:6},w=async(s=1)=>{k.value=!0,m.value=null;try{const t=(await p.get(`/api/home/products-by-category/${L.params.id}/${P.value}`,{params:{page:s,limit:v.value}})).data.data;b.value={title:y.value==="ar"?`منتجات ${t.category.name_ar||t.category.name_en}`:`Products ${t.category.name_en||t.category.name_ar}`,products:(t.products.data||[]).map(a=>{var c,d;return{id:a.id,name:y.value==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar,sub_name:y.value==="ar"?a.sub_name_ar||a.sub_name_en:a.sub_name_en||a.sub_name_ar,price:parseFloat(a.base_price||0).toFixed(2),img:((d=(c=a.media)==null?void 0:c.find(E=>E.name==="product_main_image"))==null?void 0:d.url)||a.key_default_image||Y,is_wished:a.is_wished||!1,in_cart:a.in_cart||!1,is_stock:a.is_stock||0,isOutOfStock:a.is_stock===0,variant_id:a.variant_id||null}})},g.value=t.products.current_page,S.value=t.products.total}catch(e){console.error("Error fetching products:",e),m.value=o("products.errorLoading")||"Failed to load products."}finally{k.value=!1}},F=q(()=>b.value.products),M=s=>{g.value=s.page+1,w(g.value)},I=async s=>{if(!f.authenticatedweb){x.push({name:"AuthLogin"});return}if(!(s.isOutOfStock||s.in_cart))try{const e={product_id:s.id,variant_id:s.variant_id||null,quantity:1};(await p.post("/api/cart/add",e)).status===200&&(s.in_cart=!0,alert(o("cart.added")||"Product added to cart!"))}catch(e){console.error("Error adding to cart:",e),alert(o("cart.error")||"Failed to add product to cart.")}},j=async s=>{if(!f.authenticatedweb){x.push({name:"AuthLogin"});return}const e=s.is_wished,t=e?"delete":"post",a=e?`/api/wishlists/${s.id}`:"/api/wishlists",c={product_id:s.id};try{let d;t==="post"?d=await p.post(a,c):d=await p.delete(a,{data:c}),(d.status===200||d.status===204)&&(s.is_wished=!e,alert(o(e?"wishlist.removed":"wishlist.added")||`Product ${e?"removed from":"added to"} wishlist!`))}catch(d){console.error("Error toggling favorite status:",d),s.is_wished=e,alert(o("wishlist.error")||"Failed to update wishlist.")}},A=(s,e)=>s.length<=e?s:s.slice(0,e)+"...",O=()=>{const s=window.innerWidth>=1024;s!==h.value&&(h.value=s,v.value=h.value?12:6,g.value=1,w(g.value))};return D(()=>{L.params.id&&P.value?($(),w(g.value)):m.value=o("products.missingParams")||"Missing category or store ID."}),H(()=>{window.addEventListener("resize",O)}),U(()=>{window.removeEventListener("resize",O)}),(s,e)=>(r(),l("div",Z,[k.value?(r(),l("div",tt,e[1]||(e[1]=[i("img",{src:Q,alt:"Loading Logo",class:"w-32 h-32 object-contain animate-bounce","aria-label":"Loading animation"},null,-1)]))):m.value?(r(),l("div",et,[i("p",st,_(m.value),1),i("button",{onClick:w,class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"},_(n(o)("products.retry")),1)])):(r(),l("div",at,[i("h2",ot,_(b.value.title),1),i("div",it,[(r(!0),l(G,null,J(F.value,(t,a)=>(r(),l("div",{key:t.id,class:"group flex flex-col items-start cursor-pointer h-full bg-white transition-all pb-4 rounded-lg shadow-lg duration-300 hover:-translate-y-2 hover:shadow-xl",onClick:c=>n(x).push({name:"Product-details",params:{id:t.id}})},[i("div",rt,[i("img",{src:t.img,alt:t.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,lt),e[3]||(e[3]=i("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1)),n(f).authenticatedweb?(r(),l("button",{key:0,class:"absolute top-2 right-2 p-2 rounded-full bg-white text-gray-500 hover:text-red-500 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 z-10",onClick:z(c=>j(t),["stop"]),"aria-label":t.is_wished?n(o)("wishlist.remove"):n(o)("wishlist.add"),title:t.is_wished?n(o)("wishlist.remove"):n(o)("wishlist.add")},[(r(),l("svg",{class:B(["w-5 h-5",{"text-red-500":t.is_wished}]),fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[2]||(e[2]=[i("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},null,-1)]),2))],8,dt)):C("",!0)]),i("div",ct,[i("p",ut,_(A(t.name,30)),1),t.sub_name?(r(),l("p",gt,_(t.sub_name.slice(0,37)),1)):C("",!0),i("div",_t,[i("span",mt," $"+_(t.price)+" "+_(s.$t("currencyLabel")),1),n(f).authenticatedweb?(r(),l("button",{key:0,class:B(["p-2 rounded-full bg-gray-100 text-[#A6853B] transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-[#A6853B] focus:ring-offset-2",{"hover:bg-[#A6853B] hover:text-white":!t.in_cart&&!t.isOutOfStock,"bg-gray-300 text-gray-500 cursor-not-allowed":t.isOutOfStock||t.in_cart}]),disabled:t.isOutOfStock||t.in_cart,onClick:z(c=>I(t),["stop"]),"aria-label":t.in_cart?n(o)("cart.inCart"):t.isOutOfStock?n(o)("cart.outOfStock"):n(o)("cart.addToCart"),title:t.in_cart?n(o)("cart.inCart"):t.isOutOfStock?n(o)("cart.outOfStock"):n(o)("cart.addToCart")},[t.in_cart?(r(),l("svg",ht,e[4]||(e[4]=[i("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(r(),l("svg",ft,e[5]||(e[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,vt)):C("",!0)])])],8,nt))),128))]),i("div",wt,[K(n(X),{rows:v.value,totalRecords:S.value,pageLinkSize:3,first:(g.value-1)*v.value,onPage:e[0]||(e[0]=t=>M(t)),template:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])]))]))}},Ct=N(pt,[["__scopeId","data-v-8a4b3e95"]]);export{Ct as default};
