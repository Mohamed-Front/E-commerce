import{_ as J,r as y,u as K,c as Z,o as ee,a as m,b as S,F as L,d as W,e as s,t as E,f as D,w as R,g as O,h as B,i as j,j as ae,k as te,l as se,m as re,n as C}from"./index-30883687.js";import{S as Q,A as U,a as X,b as A}from"./productsSwiper-1dea1b84.js";import{N as oe}from"./navigation-901b0191.js";import{d as V}from"./banner-addtion-e4104052.js";function le(q){let{swiper:n,extendParams:F}=q;F({grid:{rows:1,fill:"column"}});let i,p,h;const _=()=>{let a=n.params.spaceBetween;return typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*n.size:typeof a=="string"&&(a=parseFloat(a)),a},$=a=>{const{slidesPerView:o}=n.params,{rows:u,fill:b}=n.params.grid;h=Math.floor(a/u),Math.floor(a/u)===a/u?i=a:i=Math.ceil(a/u)*u,o!=="auto"&&b==="row"&&(i=Math.max(i,o*u)),p=i/u},g=(a,o,u,b)=>{const{slidesPerGroup:c}=n.params,k=_(),{rows:w,fill:M}=n.params.grid;let I,f,x;if(M==="row"&&c>1){const z=Math.floor(a/(c*w)),T=a-w*c*z,N=z===0?c:Math.min(Math.ceil((u-z*w*c)/w),c);x=Math.floor(T/N),f=T-x*N+z*c,I=f+x*i/w,o.style.order=I}else M==="column"?(f=Math.floor(a/w),x=a-f*w,(f>h||f===h&&x===w-1)&&(x+=1,x>=w&&(x=0,f+=1))):(x=Math.floor(a/p),f=a-x*p);o.row=x,o.column=f,o.style[b("margin-top")]=x!==0?k&&`${k}px`:""},P=(a,o,u)=>{const{centeredSlides:b,roundLengths:c}=n.params,k=_(),{rows:w}=n.params.grid;if(n.virtualSize=(a+k)*i,n.virtualSize=Math.ceil(n.virtualSize/w)-k,n.wrapperEl.style[u("width")]=`${n.virtualSize+k}px`,b){const M=[];for(let I=0;I<o.length;I+=1){let f=o[I];c&&(f=Math.floor(f)),o[I]<n.virtualSize+o[0]&&M.push(f)}o.splice(0,o.length),o.push(...M)}};n.grid={initSlides:$,updateSlide:g,updateWrapperSize:P}}const ne={class:"mx-auto px-4 max-w-[1500px]"},ie={class:"flex items-center justify-between"},de={class:"font-bold font-sans text-gray-800 lg:mt-4 xs:mt-2 xs:text-lg sm:text-xl md:text-2xl lg:text-3xl"},ce={class:"w-full aspect-square overflow-hidden rounded-xl shadow-sm relative"},ue=["src","alt"],me={class:"font-sans mt-4 mb-1 text-center mx-3 text-gray-800 font-medium xs:text-sm sm:text-base md:text-lg"},pe={__name:"CustomTaps",setup(q){const n=y(localStorage.getItem("appLang")||"ar"),F=y([]),i=y([]);y(!1);const p=y(localStorage.getItem("defaultStoreId")||null),h=K();Z(()=>F.value.find(g=>g.id===parseInt(p.value))||null);const _=async()=>{try{const g=await j.get("api/home/get-stores");F.value=g.data.data.data;const P=F.value.find(a=>a.is_default===1);P&&(localStorage.setItem("defaultStoreId",P.id),p.value=P.id)}catch(g){console.error("Error fetching stores:",g)}},$=async()=>{try{const g=await j.get(`/api/home/get-custom-tab/${p.value}`);i.value=g.data.data.data}catch(g){console.error("Error fetching custom tabs:",g)}};return ee(()=>{_(),p.value&&$()}),(g,P)=>(m(),S("div",ne,[(m(!0),S(L,null,W(i.value,a=>(m(),S("div",{key:a.id},[s("div",ie,[s("h2",de,E(n.value==="ar"?a.name_ar:a.name_en),1)]),D(B(X),{modules:[B(U),B(le)],"slides-per-view":a.row_type===1?4:2,grid:a.row_type===2?{rows:2,fill:"row"}:null,"space-between":a.row_type===1?8:16,loop:!0,autoplay:{delay:0,disableOnInteraction:!1},speed:25e3,"grab-cursor":!0,class:"mt-6 pb-1",breakpoints:a.row_type===1?{320:{slidesPerView:2,spaceBetween:8},640:{slidesPerView:2,spaceBetween:12},768:{slidesPerView:3,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20}}:{320:{slidesPerView:2,spaceBetween:8,grid:{rows:2}},640:{slidesPerView:2,spaceBetween:12,grid:{rows:2}},768:{slidesPerView:3,spaceBetween:16,grid:{rows:2}},1024:{slidesPerView:4,spaceBetween:20,grid:{rows:2}}}},{default:R(()=>[(m(!0),S(L,null,W(a.details,(o,u)=>(m(),O(B(Q),{key:u,class:"group flex flex-col items-start cursor-pointer transition-all pb-[1%] rounded-lg shadow-lg duration-300 hover:-translate-y-2",onClick:b=>B(h).push({name:"Product-details",params:{id:o.ids[0]}})},{default:R(()=>{var b;return[s("div",ce,[s("img",{src:((b=o.media[0])==null?void 0:b.url)||"/placeholder.jpg",alt:n.value==="ar"?o.name_ar:o.name_en,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"},null,8,ue),P[0]||(P[0]=s("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),s("p",me,E(n.value==="ar"?o.name_ar:o.name_en),1)]}),_:2},1032,["onClick"]))),128))]),_:2},1032,["modules","slides-per-view","grid","space-between","breakpoints"])]))),128))]))}},ge=J(pe,[["__scopeId","data-v-fe9aa45d"]]);const _e={class:"mx-auto bg-gradient-to mt-16 max-w-7xl px-4 sm:px-6 lg:px-8"},fe={key:0,class:"py-16"},ve={class:"flex flex-col items-center justify-center space-y-4"},ye={class:"text-indigo-600 text-xl font-semibold animate-pulse"},he={key:1,class:"text-center py-16 text-red-600"},we={class:"text-lg font-semibold"},xe={key:2},be={class:"text-center mb-2"},ke={class:"text-4xl sm:text-4xl font-extrabold text-gray-800 tracking-tight animate-fade-in"},Se={key:0},Pe={class:"w-full h-48 overflow-hidden rounded-xl shadow-md relative"},Be=["src","alt"],$e={class:"font-sans mt-4 mb-1 text-gray-800 font-semibold text-sm sm:text-base md:text-lg"},Ie={key:1,class:"my-8"},Fe={class:"relative overflow-hidden rounded-2xl shadow-lg animate-banner-slide"},Me=["src","alt"],Ce={key:2,class:"my-8"},Ve={class:"relative overflow-hidden rounded-2xl shadow-lg animate-banner-slide"},Ee=["src","alt"],je={__name:"SubCategory",setup(q){const n=ae(),F=K(),{t:i,locale:p}=te(),h=y(localStorage.getItem("defaultStoreId")),_=y({}),$=y([]),g=y({title:"",products:[]}),P=y([]),a=y({title:"",products:[]}),o=y({title:"",products:[]}),u=y({title:"",products:[]}),b=y(!1),c=y(null),k=t=>p.value==="ar"?t.name_ar||t.name_en:t.name_en||t.name_ar,w=t=>p.value==="ar"?"منتجات "+(t.name_ar||t.name_en):"Products "+(t.name_en||t.name_ar),M=t=>{t.has_subcategories>0?F.push({name:"subcategory",params:{id:t.id}}):F.push({name:"produts_category",params:{id:t.id}})},I=async()=>{try{const r=(await j.get(`/api/home/products-by-category/${n.params.id}/${h.value}`)).data.data;_.value={id:r.category.id,name_ar:r.category.name_ar,name_en:r.category.name_en,media:r.category.media||[{url:V,name:"default"}]},$.value=r.sub_categories.map(e=>({id:e.id,name_ar:e.name_ar||e.name_en,name_en:e.name_en||e.name_ar,media:e.media.length?e.media:[{url:V,name:"default"}]})),g.value={title:w(_.value),products:(r.products.data||[]).map(e=>{var v,l;return{id:e.id,name:p.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax||0,price:parseFloat(e.base_price||0).toFixed(2),img:((l=(v=e.media)==null?void 0:v.find(d=>d.name==="product_main_image"))==null?void 0:l.url)||e.key_default_image||V}})}}catch(t){console.error("Error fetching category data:",t),c.value=i("category.errorLoading")||"Failed to load category data."}},f=async()=>{try{const t=$.value.map(async e=>((await j.get(`/api/home/products-by-category/${e.id}/${h.value}`)).data.data.products.data||[]).map(d=>{var G,H;return{id:d.id,name:p.value==="ar"?d.name_ar||d.name_en:d.name_en||d.name_ar,tax:d.tax||0,price:parseFloat(d.base_price||0).toFixed(2),img:((H=(G=d.media)==null?void 0:G.find(Y=>Y.name==="product_main_image"))==null?void 0:H.url)||d.key_default_image||V}})),r=await Promise.allSettled(t);P.value=r.filter(e=>e.status==="fulfilled").flatMap(e=>e.value)}catch(t){console.error("Error fetching subcategory products:",t),c.value=i("category.errorLoading")||"Failed to load subcategory products."}},x=async()=>{try{const r=(await j.get(`/api/home/best-sellers/${h.value}`)).data.data.data||[];a.value={title:i("category.bestsellers")||"Best Sellers",products:r.map(e=>{var v,l;return{id:e.id,name:p.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax||0,price:parseFloat(e.base_price||0).toFixed(2),img:((l=(v=e.media)==null?void 0:v.find(d=>d.name==="product_main_image"))==null?void 0:l.url)||e.key_default_image||V}})}}catch(t){console.error("Error fetching best sellers:",t),c.value=i("category.errorLoading")||"Failed to load best sellers."}},z=async()=>{try{const r=(await j.get(`/api/home/new-arrivals/${h.value}`)).data.data.data||[];o.value={title:i("category.newlyarrived")||"New Arrivals",products:r.map(e=>{var v,l;return{id:e.id,name:p.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax||0,price:parseFloat(e.base_price||0).toFixed(2),img:((l=(v=e.media)==null?void 0:v.find(d=>d.name==="product_main_image"))==null?void 0:l.url)||e.key_default_image||V}})}}catch(t){console.error("Error fetching new arrivals:",t),c.value=i("category.errorLoading")||"Failed to load new arrivals."}},T=async()=>{try{const r=(await j.get(`/api/home/exclusive-offers/${h.value}`)).data.data||[];u.value={title:i("category.exclusive")||"Exclusive Offers",products:r.map(e=>{var v,l;return{id:e.id,name:p.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax||0,price:parseFloat(e.base_price||0).toFixed(2),img:((l=(v=e.media)==null?void 0:v.find(d=>d.name==="product_main_image"))==null?void 0:l.url)||e.key_default_image||V}})}}catch(t){console.error("Error fetching exclusive offers:",t),c.value=i("category.errorLoading")||"Failed to load exclusive offers."}},N=async()=>{b.value=!0,c.value=null,await Promise.allSettled([I(),x(),z(),T()]),$.value.length&&await f(),b.value=!1};return se(()=>{n.params.id&&h.value?N():c.value=i("category.missingParams")||"Missing category or store ID."}),re(()=>n.params.id,(t,r)=>{t!==r&&t&&h.value?N():(!t||!h.value)&&(c.value=i("category.missingParams")||"Missing category or store ID.")}),(t,r)=>{var e,v;return m(),S(L,null,[s("div",_e,[b.value?(m(),S("div",fe,[s("div",ve,[r[0]||(r[0]=s("div",{class:"relative w-24 h-24"},[s("div",{class:"absolute inset-0 rounded-full border-4 border-indigo-500 border-t-transparent animate-spin"}),s("div",{class:"absolute inset-4 rounded-full border-4 border-pink-500 border-b-transparent animate-spin animation-delay-200"}),s("div",{class:"absolute inset-8 rounded-full border-4 border-purple-500 border-l-transparent animate-spin animation-delay-400"})],-1)),s("p",ye,E(B(i)("category.loading")),1),r[1]||(r[1]=s("div",{class:"w-1/2 h-2 bg-gray-200 rounded-full overflow-hidden"},[s("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-pink-500 animate-progress"})],-1))])])):c.value?(m(),S("div",he,[s("p",we,E(c.value),1),s("button",{onClick:N,class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded"},E(B(i)("category.retry")),1)])):(m(),S("div",xe,[s("div",be,[s("h1",ke,E(k(_.value)),1)]),$.value.length>=1?(m(),S("div",Se,[r[3]||(r[3]=s("h2",{class:"font-bold font-sans text-gray-800 text-2xl sm:text-3xl lg:text-4xl mb-8 animate-slide-up"},null,-1)),D(B(X),{modules:[B(U),B(oe)],"slides-per-view":3,"space-between":20,loop:$.value.length>3,autoplay:{delay:3e3,disableOnInteraction:!1},speed:1e3,"grab-cursor":!0,navigation:!1,class:"mt-6",breakpoints:{320:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:12},768:{slidesPerView:2,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20}}},{default:R(()=>[(m(!0),S(L,null,W($.value,l=>(m(),O(B(Q),{key:l.id,class:"group flex flex-col items-center cursor-pointer transition-all duration-300 hover:-translate-y-2",onClick:d=>M(l)},{default:R(()=>{var d;return[s("div",Pe,[s("img",{src:(d=l.media[0])==null?void 0:d.url,alt:`${k(l)} image`,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,Be),r[2]||(r[2]=s("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),s("h3",$e,E(k(l)),1)]}),_:2},1032,["onClick"]))),128))]),_:1},8,["modules","loop"])])):C("",!0),(e=_.value.media)!=null&&e.find(l=>l.name==="banner_one_image")?(m(),S("div",Ie,[s("div",Fe,[s("img",{src:_.value.media.find(l=>l.name==="banner_one_image").url,alt:`${k(_.value)} banner one`,class:"w-full h-64 sm:h-70 md:h-76 object-cover transition-transform duration-700 hover:scale-105",loading:"lazy"},null,8,Me),r[4]||(r[4]=s("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end justify-center p-6"},null,-1))])])):C("",!0),s("section",null,[g.value.products.length?(m(),O(A,{key:0,products:g.value,title:w(_.value)},null,8,["products","title"])):C("",!0),D(A,{products:P.value,title:u.value.title},null,8,["products","title"]),u.value.products.length?(m(),O(A,{key:1,products:u.value,title:u.value.title},null,8,["products","title"])):C("",!0),a.value.products.length?(m(),O(A,{key:2,products:a.value,title:a.value.title},null,8,["products","title"])):C("",!0),o.value.products.length?(m(),O(A,{key:3,products:o.value,title:o.value.title},null,8,["products","title"])):C("",!0)]),(v=_.value.media)!=null&&v.find(l=>l.name==="banner_two_image")?(m(),S("div",Ce,[s("div",Ve,[s("img",{src:_.value.media.find(l=>l.name==="banner_two_image").url,alt:`${k(_.value)} banner two`,class:"w-full h-64 sm:h-70 md:h-76 object-cover transition-transform duration-700 hover:scale-105",loading:"lazy"},null,8,Ee),r[5]||(r[5]=s("div",{class:"absolute inset-0 bg-gradient-to-b from-transparent to-black/50 flex items-center justify-center p-6"},null,-1))])])):C("",!0)]))]),D(ge)],64)}}},Te=J(je,[["__scopeId","data-v-1155313b"]]);export{Te as default};
