import{_ as N,k as L,u as M,H as O,j as D,r as v,l as I,o as A,L as B,a as y,c as _,I as V,f as l,t as i,M as c,h as o,e as r,N as P,w as $,s as j,F as R,i as g,a0 as S,O as m,P as b,Q as w,K as T}from"./index-a850403b.js";import{x as E,A as H,O as K}from"./index.es-e78e62b7.js";const Q={class:"max-w-3xl mx-auto p-6 bg-white rounded-xl shadow-lg"},W={class:"text-3xl font-bold text-center mb-8 text-gray-800"},G={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},J={class:"space-y-2"},X={for:"user_id",class:"block text-sm font-medium text-gray-700"},Y={class:"space-y-2"},Z={for:"address_line_1",class:"block text-sm font-medium text-gray-700"},ee={class:"space-y-2"},se={for:"address_line_2",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2"},le={for:"city",class:"block text-sm font-medium text-gray-700"},te={class:"space-y-2"},de={for:"country",class:"block text-sm font-medium text-gray-700"},re={class:"space-y-2"},oe={for:"zip_code",class:"block text-sm font-medium text-gray-700"},ie={class:"space-y-2"},ne={for:"lat",class:"block text-sm font-medium text-gray-700"},ue={class:"space-y-2"},ce={for:"long",class:"block text-sm font-medium text-gray-700"},pe={class:"space-y-2"},me={for:"distance",class:"block text-sm font-medium text-gray-700"},fe={class:"space-y-2"},ve={class:"flex items-center space-x-2"},ye={class:"text-sm font-medium text-gray-700"},_e={class:"mt-6 card"},ge={class:"text-xl font-semibold text-gray-800 mb-4"},be={class:"pt-4 flex justify-between"},he={key:0},xe={key:1,class:"pi pi-spinner pi-spin"},Ve={__name:"update",setup($e){const k=L(),f=M(),n=O(),{t:d}=D(),u=v(!1),h=v(k.params.id),x=v([]),s=v({user_id:null,address_line_1:"",address_line_2:"",city:"",country:"",zip_code:"",is_default:!1,lat:31.984983325941823,long:35.900908045672196,distance:1e3}),F=I(()=>{const a=Number(s.value.distance)||1e3;return{center:{lat:Number(s.value.lat),lng:Number(s.value.long)},radius:a,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}}),U=()=>{g.get("api/user").then(a=>{x.value=a.data.data.data,q()}).catch(a=>{n.add({severity:"error",summary:d("error"),detail:d("address.failed_to_load_users"),life:3e3}),f.push({name:"address"})})},q=async()=>{u.value=!0;try{const a=await g.get(`/api/address/${h.value}`);s.value={...a.data.data,is_default:a.data.data.is_default=="1",lat:a.data.data.lat||31.984983325941823,long:a.data.data.long||35.900908045672196,distance:a.data.data.distance||1e3}}catch{n.add({severity:"error",summary:d("error"),detail:d("address.load_error"),life:3e3}),f.push({name:"address"})}finally{u.value=!1}};function z(a){const e=a.latLng;s.value.lat=e.lat(),s.value.long=e.lng()}const C=async()=>{var a,e;u.value=!0;try{if(!s.value.user_id||!s.value.address_line_1||!s.value.city||!s.value.country){n.add({severity:"error",summary:d("validation_error"),detail:d("address.required_fields_missing"),life:3e3});return}if(s.value.lat<-90||s.value.lat>90){n.add({severity:"error",summary:d("validation_error"),detail:d("address.invalid_lat"),life:3e3});return}if(s.value.long<-180||s.value.long>180){n.add({severity:"error",summary:d("validation_error"),detail:d("address.invalid_long"),life:3e3});return}if(s.value.distance<=0){n.add({severity:"error",summary:d("validation_error"),detail:d("address.invalid_distance"),life:3e3});return}const p={...s.value,is_default:s.value.is_default?"1":"0"};await g.put(`/api/address/${h.value}`,p),f.push({name:"address"}),n.add({severity:"success",summary:d("success"),detail:d("address.updated_successfully"),life:3e3})}catch(p){n.add({severity:"error",summary:d("error"),detail:((e=(a=p.response)==null?void 0:a.data)==null?void 0:e.message)||d("address.update_error"),life:3e3})}finally{u.value=!1}};return A(()=>{U()}),(a,e)=>{const p=B("can");return y(),_(R,null,[V((y(),_("div",Q,[l("h1",W,i(a.$t("address.update_address")),1),l("form",{onSubmit:j(C,["prevent"]),class:"space-y-6"},[l("div",G,[l("div",J,[l("label",X,[c(i(a.$t("user.name"))+" ",1),e[11]||(e[11]=l("span",{class:"text-red-500"},"*",-1))]),o(r(S),{filter:"",modelValue:s.value.user_id,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.user_id=t),options:x.value,optionLabel:"name",optionValue:"id",placeholder:a.$t("user.name"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,8,["modelValue","options","placeholder"])]),l("div",Y,[l("label",Z,[c(i(a.$t("address.line1"))+" ",1),e[12]||(e[12]=l("span",{class:"text-red-500"},"*",-1))]),o(r(m),{id:"address_line_1",modelValue:s.value.address_line_1,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.address_line_1=t),placeholder:a.$t("address.enter_line1"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",ee,[l("label",se,i(a.$t("address.line2")),1),o(r(m),{id:"address_line_2",modelValue:s.value.address_line_2,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.address_line_2=t),placeholder:a.$t("address.enter_line2"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"])]),l("div",ae,[l("label",le,[c(i(a.$t("address.city"))+" ",1),e[13]||(e[13]=l("span",{class:"text-red-500"},"*",-1))]),o(r(m),{id:"city",modelValue:s.value.city,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.city=t),placeholder:a.$t("address.enter_city"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",te,[l("label",de,[c(i(a.$t("address.country"))+" ",1),e[14]||(e[14]=l("span",{class:"text-red-500"},"*",-1))]),o(r(m),{id:"country",modelValue:s.value.country,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.country=t),placeholder:a.$t("address.enter_country"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",re,[l("label",oe,i(a.$t("address.zip_code")),1),o(r(m),{id:"zip_code",modelValue:s.value.zip_code,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.zip_code=t),placeholder:a.$t("address.enter_zip_code"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"])]),l("div",ie,[l("label",ne,[c(i(a.$t("address.lat"))+" ",1),e[15]||(e[15]=l("span",{class:"text-red-500"},"*",-1))]),o(r(b),{id:"lat",modelValue:s.value.lat,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.lat=t),placeholder:a.$t("address.enter_lat"),min:-90,max:90,step:1e-6,decimalPlaces:6,class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",ue,[l("label",ce,[c(i(a.$t("address.long"))+" ",1),e[16]||(e[16]=l("span",{class:"text-red-500"},"*",-1))]),o(r(b),{id:"long",modelValue:s.value.long,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.long=t),placeholder:a.$t("address.enter_long"),min:-180,max:180,step:1e-6,decimalPlaces:6,class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",pe,[l("label",me,[c(i(a.$t("address.distance"))+" (meters) ",1),e[17]||(e[17]=l("span",{class:"text-red-500"},"*",-1))]),o(r(b),{id:"distance",modelValue:s.value.distance,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.distance=t),placeholder:a.$t("address.enter_distance"),min:0,step:100,class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",fe,[l("label",ve,[V(l("input",{type:"checkbox",class:"w-5 h-5 mx-2","onUpdate:modelValue":e[9]||(e[9]=t=>s.value.is_default=t),binary:!0},null,512),[[P,s.value.is_default]]),l("span",ye,i(a.$t("address.set_as_default")),1)])])]),l("div",_e,[l("h2",ge,i(a.$t("address.select_location")),1),o(r(K),{onClick:z,style:{width:"100%",height:"500px"},center:{lat:parseFloat(s.value.lat),lng:parseFloat(s.value.long)},zoom:14},{default:$(()=>[o(r(E),{options:{position:{lat:parseFloat(s.value.lat),lng:parseFloat(s.value.long)}}},null,8,["options"]),o(r(H),{options:F.value},null,8,["options"])]),_:1},8,["center"])]),l("div",be,[o(r(w),{type:"button",label:a.$t("cancel"),icon:"pi pi-times",onClick:e[10]||(e[10]=t=>r(f).push({name:"address"})),class:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow transition-all duration-300",disabled:u.value},null,8,["label","disabled"]),o(r(w),{type:"submit",label:a.$t("update"),icon:"pi pi-check",loading:u.value,class:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",disabled:u.value},{default:$(()=>[u.value?(y(),_("i",xe)):(y(),_("span",he,i(a.$t("update")),1))]),_:1},8,["label","loading","disabled"])])],32)])),[[p,"edit address"]]),o(r(T))],64)}}},Fe=N(Ve,[["__scopeId","data-v-84574609"]]);export{Fe as default};
