import{_ as le,b as oe,I as se,u as re,r as n,w as ne,e as ie,Q as de,o as C,f as k,g as r,h as s,i,j as e,t as d,F as j,l as ce,a as U,S as ue,T as m,U as pe,V as me,W as ge,X as c,x as $,y as B,Y as z,q as _e,s as ve,Z as ye,a0 as M,a2 as be}from"./index-a3454f94.js";const he={class:"grid"},fe={class:"col-12"},xe={class:"card p-4 shadow-2 border-round"},we={class:"text-2xl font-bold"},Ce={class:"flex gap-2"},ke={class:"p-input-icon-left"},$e={class:"card shadow-1 surface-0"},Se={class:"text-center py-4"},Ee={class:"text-xl"},Ne={class:"flex justify-content-center align-items-center py-4"},Ue={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},De={class:"p-paginator-left-content"},Fe={class:"p-paginator-current"},Ve={class:"p-paginator-right-content"},Pe=["disabled"],Re=["disabled"],Ie=["onClick"],Le={key:1,class:"p-paginator-dots"},Te=["disabled"],Ae=["disabled"],je={class:"flex align-items-center justify-content-center"},Be={class:"flex flex-column gap-3"},ze={__name:"index",setup(Me){const F=oe(),g=se(),{t:a}=re(),S=n(!0),V=n([]),b=n(!1),P=n(null),W=n(null),G=n({}),E=n("");n(null);const h=n(!1),_=n(null),f=n(!1),u=n(1),D=n(0),v=n(10),N=n(0),O=n(""),Q=n(""),R=n(""),I=n(""),L=n(0),T=n(0),A=n([]),q=n([{store_name_ar:"شفت 7",store_name_en:"Shift7",category_name_ar:"الأحذية",category_name_en:"Shoes",sub_category_name_ar:"أحذية نسائية رسمية",sub_category_name_en:"Women's Formal Shoes",sub_sub_category_name_ar:"كريم واقي للشمس",sub_sub_category_name_en:"Sunblock & Cream"},{store_name_ar:"شفت مارت",store_name_en:"Shift Mart",category_name_ar:"الخضار والفواكة",category_name_en:"Vegetables & Fruits",sub_category_name_ar:"الفواكة الطازجة",sub_category_name_en:"Fresh Fruits",sub_sub_category_name_ar:"كريم واقي للشمس",sub_sub_category_name_en:"Sunblock & Cream"}]),y=()=>{S.value=!0,U.get("/api/category",{params:{page:u.value,limit:v.value,search:E.value||void 0}}).then(o=>{V.value=o.data.data.data,D.value=o.data.data.total,N.value=o.data.data.last_page,O.value=o.data.data.first_page_url,Q.value=o.data.data.last_page_url,R.value=o.data.data.next_page_url,I.value=o.data.data.prev_page_url,L.value=o.data.data.from,T.value=o.data.data.to,A.value=o.data.data.links,u.value=o.data.data.current_page,S.value=!1}).catch(o=>{g.add({severity:"error",summary:a("error"),detail:a("category.loadError"),life:3e3}),S.value=!1,console.error("Error fetching categories:",o)})};ne([E,v],()=>{u.value=1,y()});const x=o=>{o>=1&&o<=N.value&&(u.value=o,y())},X=o=>{v.value=o.value,u.value=1,y()},Y=o=>{P.value=o,b.value=!0},Z=()=>{U.delete(`/api/category/${P.value}`).then(()=>{g.add({severity:"success",summary:a("success"),detail:a("category.deleteSuccess"),life:3e3}),y(),b.value=!1}).catch(o=>{g.add({severity:"error",summary:a("error"),detail:a("category.deleteError"),life:3e3}),console.error("Error deleting category:",o)})},H=()=>{U.get("/api/export/category",{responseType:"blob"}).then(o=>{const l=new Blob([o.data],{type:"text/csv"}),w=window.URL.createObjectURL(l),t=document.createElement("a");t.href=w,t.setAttribute("download","categories_export.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(w)}).catch(o=>{g.add({severity:"error",summary:a("error"),detail:a("category.exportError"),life:3e3}),console.error("Error exporting categories:",o)})},J=()=>{h.value=!0,_.value=null},K=o=>{_.value=o.files[0]},ee=()=>{if(!_.value){g.add({severity:"warn",summary:a("warning"),detail:a("category.importNoFile"),life:3e3});return}f.value=!0;const o=new FormData;o.append("file",_.value),U.post("/api/import/store",o).then(()=>{g.add({severity:"success",summary:a("success"),detail:a("category.importSuccess"),life:3e3}),y(),h.value=!1,f.value=!1,_.value=null}).catch(l=>{g.add({severity:"error",summary:a("error"),detail:a("category.importError"),life:3e3}),f.value=!1,console.error("Error importing categories:",l)})},ae=()=>{F.push({name:"category-create"})},te=o=>{F.push({name:"category-update",params:{id:o}})};return ie(()=>{y()}),(o,l)=>{const w=de("tooltip");return C(),k("div",he,[r("div",fe,[r("div",xe,[s(e(pe),{class:"mb-4"},{start:i(()=>[r("h2",we,d(e(a)("category.managementTitle")),1)]),end:i(()=>[r("div",Ce,[r("span",ke,[l[10]||(l[10]=r("i",{class:"pi pi-search"},null,-1)),s(e(ue),{modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=t=>E.value=t),placeholder:e(a)("category.search")},null,8,["modelValue","placeholder"])]),s(e(m),{label:e(a)("category.import"),icon:"pi pi-download",class:"exite",onClick:J},null,8,["label"]),s(e(m),{label:e(a)("category.export"),icon:"pi pi-upload",class:"exite",onClick:H},null,8,["label"]),s(e(m),{label:e(a)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:ae},null,8,["label"])])]),_:1}),s(e(me)),r("div",$e,[s(e(z),{ref_key:"dt",ref:W,value:V.value,loading:S.value,"data-key":"id",paginator:!1,rows:v.value,filters:G.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:i(()=>[r("div",Se,[l[11]||(l[11]=r("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),r("p",Ee,d(e(a)("category.noData")),1)])]),loading:i(()=>[r("div",Ne,[s(e(ge),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:i(()=>[s(e(c),{"selection-mode":"multiple","header-style":"width: 3rem"}),s(e(c),{field:"name_en",header:e(a)("id"),sortable:!0,"header-style":"width:5%; min-width:5rem;"},{body:i(t=>[$(d(t.data.id),1)]),_:1},8,["header"]),s(e(c),{field:"name_en",header:e(a)("category.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(t=>[$(d(t.data.name_en),1)]),_:1},8,["header"]),s(e(c),{field:"name_ar",header:e(a)("category.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(t=>[$(d(t.data.name_ar),1)]),_:1},8,["header"]),s(e(c),{field:"parent.name_en",header:e(a)("category.parent"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(t=>{var p;return[$(d(((p=t.data.parent)==null?void 0:p.name_en)||e(a)("category.noParent")),1)]}),_:1},8,["header"]),s(e(c),{field:"store.name_en",header:e(a)("category.store"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(t=>{var p;return[$(d(((p=t.data.store)==null?void 0:p.name_en)||e(a)("category.noStore")),1)]}),_:1},8,["header"]),s(e(c),{header:e(a)("actions"),"header-style":"width:12rem;"},{body:i(t=>[B(s(e(m),{icon:"pi pi-pencil",class:"p-detail",onClick:p=>te(t.data.id)},null,8,["onClick"]),[[w,e(a)("edit"),void 0,{top:!0}]]),B(s(e(m),{icon:"pi pi-trash",class:"p-delete",onClick:p=>Y(t.data.id)},null,8,["onClick"]),[[w,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),r("div",Ue,[r("div",De,[r("span",Fe,d(e(a)("show"))+" "+d(L.value)+" "+d(e(a)("to"))+" "+d(T.value)+" "+d(e(a)("from"))+" "+d(D.value),1)]),r("div",Ve,[r("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:l[1]||(l[1]=t=>x(1))},l[12]||(l[12]=[r("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Pe),r("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!I.value,onClick:l[2]||(l[2]=t=>x(u.value-1))},l[13]||(l[13]=[r("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Re),(C(!0),k(j,null,ce(A.value,(t,p)=>(C(),k(j,{key:p},[t.label&&!isNaN(parseInt(t.label))?(C(),k("button",{key:0,class:_e(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:We=>x(parseInt(t.label))},d(t.label),11,Ie)):t.label==="..."?(C(),k("span",Le,"...")):ve("",!0)],64))),128)),r("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!R.value,onClick:l[3]||(l[3]=t=>x(u.value+1))},l[14]||(l[14]=[r("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Te),r("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===N.value,onClick:l[4]||(l[4]=t=>x(N.value))},l[15]||(l[15]=[r("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ae),s(e(ye),{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=t=>v.value=t),options:[5,10,20,30],onChange:X,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),s(e(M),{visible:b.value,"onUpdate:visible":l[7]||(l[7]=t=>b.value=t),style:{width:"450px"},header:e(a)("category.deleteConfirmTitle"),modal:!0},{footer:i(()=>[s(e(m),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:l[6]||(l[6]=t=>b.value=!1)},null,8,["label"]),s(e(m),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Z},null,8,["label"])]),default:i(()=>[r("div",je,[l[16]||(l[16]=r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),r("span",null,d(e(a)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),s(e(M),{visible:h.value,"onUpdate:visible":l[9]||(l[9]=t=>h.value=t),style:{width:"800px"},header:e(a)("category.importInstructions"),modal:!0},{footer:i(()=>[s(e(be),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:e(a)("category.chooseFile"),onSelect:K,auto:!1,disabled:f.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),s(e(m),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text mt-3",onClick:l[8]||(l[8]=t=>h.value=!1)},null,8,["label"]),s(e(m),{label:e(a)("import"),icon:"pi pi-check",class:"p-button-success",onClick:ee,disabled:!_.value,loading:f.value},null,8,["label","disabled","loading"])]),default:i(()=>[r("div",Be,[r("div",null,[s(e(z),{value:q.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{default:i(()=>[s(e(c),{field:"store_name_ar",header:e(a)("category.storeNameAr")},null,8,["header"]),s(e(c),{field:"store_name_en",header:e(a)("category.storeNameEn")},null,8,["header"]),s(e(c),{field:"category_name_ar",header:e(a)("category.nameAr")},null,8,["header"]),s(e(c),{field:"category_name_en",header:e(a)("category.nameEn")},null,8,["header"]),s(e(c),{field:"sub_category_name_ar",header:e(a)("category.subCategoryNameAr")},null,8,["header"]),s(e(c),{field:"sub_category_name_en",header:e(a)("category.subCategoryNameEn")},null,8,["header"]),s(e(c),{field:"sub_sub_category_name_ar",header:e(a)("category.subSubCategoryNameAr")},null,8,["header"]),s(e(c),{field:"sub_sub_category_name_en",header:e(a)("category.subSubCategoryNameEn")},null,8,["header"])]),_:1},8,["value"])])])]),_:1},8,["visible","header"])])])])}}},Oe=le(ze,[["__scopeId","data-v-d6dfb8fc"]]);export{Oe as default};
