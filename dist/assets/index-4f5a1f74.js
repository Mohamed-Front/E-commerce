import{_ as ie,u as de,D as ce,H as re,r as o,I as ue,l as pe,k as _e,J as r,K as z,o as v,c as x,a as e,b as i,w as c,L as y,g as ve,t as d,e as l,F as G,d as ge,M as he,G as A,m as H,s as me,E as be,p as fe,i as xe}from"./index-22274b14.js";const p=k=>(fe("data-v-de46cd8b"),k=k(),xe(),k),ye={class:"grid"},ke={class:"col-12"},Ce={class:"card p-4 shadow-2 border-round"},we={class:"text-2xl font-bold"},De={class:"flex gap-2"},Te={class:"p-input-icon-left"},Ve=p(()=>e("i",{class:"pi pi-search"},null,-1)),Pe={class:"card shadow-1 surface-0"},Se={class:"text-center py-4"},Ie=p(()=>e("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Ne={class:"text-xl"},$e={class:"flex justify-content-center align-items-center py-4"},Be={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Me={class:"p-paginator-left-content"},Ue={class:"p-paginator-current"},Re={class:"p-paginator-right-content"},Ee=["disabled"],Fe=p(()=>e("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),Le=[Fe],je=["disabled"],ze=p(()=>e("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Ge=[ze],Ae=["onClick"],He={key:1,class:"p-paginator-dots"},Je=["disabled"],Ke=p(()=>e("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Oe=[Ke],Qe=["disabled"],We=p(()=>e("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),qe=[We],Xe={class:"flex align-items-center justify-content-center"},Ye=p(()=>e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Ze={setup(k){const I=de(),{t:s}=ce(),V=re(),C=o(!0),N=o(""),$=o(null),g=o(!1);o(null);const B=o(null),M=o({}),w=o(""),u=o(1),P=o(0),h=o(5),D=o(0),J=o(""),K=o(""),U=o(""),R=o(""),E=o(0),F=o(0),L=o([]),O=()=>{B.value.exportCSV()},Q=t=>{N.value=t,g.value=!0},W=()=>{A.delete(`/api/discount/${N.value}`).then(()=>{m(),g.value=!1,V.add({severity:"success",summary:s("success"),detail:s("discount.deleteSuccess"),life:3e3})}).catch(()=>{V.add({severity:"error",summary:s("error"),detail:s("discount.deleteError"),life:3e3})})},q=()=>{M.value={global:{value:null,matchMode:he.CONTAINS}}};ue(()=>{q()});const m=()=>{C.value=!0,A.get("/api/discount",{params:{page:u.value,per_page:h.value,search:w.value}}).then(t=>{$.value=t.data.data.data,P.value=t.data.data.total,D.value=t.data.data.last_page,J.value=t.data.data.first_page_url,K.value=t.data.data.last_page_url,U.value=t.data.data.next_page_url,R.value=t.data.data.prev_page_url,E.value=t.data.data.from,F.value=t.data.data.to,L.value=t.data.data.links,C.value=!1}).catch(t=>{C.value=!1,V.add({severity:"error",summary:s("error"),detail:s("discount.loadError"),life:3e3}),console.error("Error fetching discounts:",t)})};pe(w,t=>{u.value=1,m()});const b=t=>{t>=1&&t<=D.value&&(u.value=t,m())},X=t=>{h.value=t.value,u.value=1,m()};_e(()=>{m()});const Y=()=>{I.push({name:"discount-create"})},Z=t=>{I.push({name:"discount-update",params:{id:t}})};return(t,n)=>{const ee=r("InputText"),_=r("Button"),te=r("Toolbar"),ae=r("Toast"),T=r("Column"),se=r("ProgressSpinner"),oe=r("DataTable"),le=r("Dropdown"),ne=r("Dialog"),f=z("can"),j=z("tooltip");return v(),x("div",ye,[e("div",ke,[e("div",Ce,[i(te,{class:"mb-4"},{start:c(()=>[e("h2",we,d(l(s)("discount.managementTitle")),1)]),end:c(()=>[e("div",De,[e("span",Te,[Ve,i(ee,{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=a=>w.value=a),placeholder:l(s)("discount.search")},null,8,["modelValue","placeholder"])]),y(i(_,{label:l(s)("discount.export"),icon:"pi pi-upload",class:"p-export",onClick:O},null,8,["label"]),[[f,"list discounts"]]),y(i(_,{label:l(s)("discount.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Y},null,8,["label"]),[[f,"create discounts"]])])]),_:1}),i(ae),e("div",Pe,[y((v(),ve(oe,{ref_key:"dt",ref:B,value:$.value,loading:C.value,"data-key":"id",paginator:!1,rows:h.value,filters:M.value,totalRecords:P.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:c(()=>[e("div",Se,[Ie,e("p",Ne,d(l(s)("discount.noData")),1)])]),loading:c(()=>[e("div",$e,[i(se,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:c(()=>[i(T,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(T,{field:"discount_value",header:l(s)("discount.discount_value"),sortable:!0},{body:c(a=>[H(d(a.data.discount_value),1)]),_:1},8,["header"]),i(T,{field:"expires_at",header:l(s)("discount.expires_at"),sortable:!0},{body:c(a=>[H(d(a.data.expires_at),1)]),_:1},8,["header"]),i(T,{header:l(s)("actions"),headerStyle:"width: 12rem"},{body:c(a=>[y(i(_,{icon:"pi pi-pencil",class:"p-detail",onClick:S=>Z(a.data.id)},null,8,["onClick"]),[[f,"edit discounts"],[j,l(s)("edit"),void 0,{top:!0}]]),y(i(_,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:S=>Q(a.data.id)},null,8,["onClick"]),[[f,"delete discounts"],[j,l(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[f,"list discounts"]]),e("div",Be,[e("div",Me,[e("span",Ue,d(l(s)("show"))+" "+d(E.value)+" "+d(l(s)("to"))+" "+d(F.value)+" "+d(l(s)("from"))+" "+d(P.value),1)]),e("div",Re,[e("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:n[1]||(n[1]=a=>b(1))},Le,8,Ee),e("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!R.value,onClick:n[2]||(n[2]=a=>b(u.value-1))},Ge,8,je),(v(!0),x(G,null,ge(L.value,(a,S)=>(v(),x(G,{key:S},[a.label&&!isNaN(a.label)?(v(),x("button",{key:0,class:me(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:et=>b(parseInt(a.label))},d(a.label),11,Ae)):a.label==="..."?(v(),x("span",He,"...")):be("",!0)],64))),128)),e("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!U.value,onClick:n[3]||(n[3]=a=>b(u.value+1))},Oe,8,Je),e("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===D.value,onClick:n[4]||(n[4]=a=>b(D.value))},qe,8,Qe),i(le,{modelValue:h.value,"onUpdate:modelValue":n[5]||(n[5]=a=>h.value=a),options:[5,10,20,30],optionLabel:"",onChange:X,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(ne,{visible:g.value,"onUpdate:visible":n[7]||(n[7]=a=>g.value=a),style:{width:"450px"},header:l(s)("discount.deleteConfirmTitle"),modal:!0},{footer:c(()=>[i(_,{label:l(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:n[6]||(n[6]=a=>g.value=!1)},null,8,["label"]),i(_,{label:l(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:W},null,8,["label"])]),default:c(()=>[e("div",Xe,[Ye,e("span",null,d(l(s)("discount.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},at=ie(Ze,[["__scopeId","data-v-de46cd8b"]]);export{at as default};
