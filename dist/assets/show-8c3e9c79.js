import{_ as P,b as X,n as Y,L as G,u as H,r as L,I as U,d as J,o as u,e as m,g as c,j as t,f as a,t as l,x as n,s as b,B as g,F as K,h as O,i as j,a as x,$ as Q,X as F,a4 as B,a7 as N,Y as q,a5 as W,p as Z,m as ee}from"./index-b794012a.js";const f=C=>(Z("data-v-47f406ba"),C=C(),ee(),C),ae=["dir"],se={key:0,class:"card mb-6 transform hover:scale-[1.01] transition-transform duration-300"},te={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},le={class:"text-lg"},re={class:"text-lg"},oe={class:"text-lg"},de={class:"card mb-6 transform hover:scale-[1.01] transition-transform duration-300"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ne={class:"space-y-2"},ue=f(()=>a("span",{class:"text-red-500"},"*",-1)),me={key:0,id:"name_en_error",class:"text-red-500"},ce={class:"space-y-2"},_e=f(()=>a("span",{class:"text-red-500"},"*",-1)),be={key:0,id:"name_ar_error",class:"text-red-500"},pe={class:"space-y-2"},ge=f(()=>a("span",{class:"text-red-500"},"*",-1)),ve=f(()=>a("span",{class:"text-red-500"},"*",-1)),he={key:2,id:"ids_error",class:"text-red-500"},fe={class:"space-y-2"},ye=f(()=>a("span",{class:"text-red-500"},"*",-1)),$e={key:0,class:"text-red-500"},we={class:"card mb-6"},ke={key:0,class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},xe={class:"flex justify-between items-start"},Ve={class:"text-lg"},De={class:"text-lg"},Le={key:0},qe=["src","alt"],Ce={class:"flex space-x-2"},Se={key:1,class:"text-gray-500 text-lg"},Ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6"},Fe={class:"space-y-2"},Ue=f(()=>a("span",{class:"text-red-500"},"*",-1)),Ee={key:0,id:"edit_name_en_error",class:"text-red-500"},Te={class:"space-y-2"},je=f(()=>a("span",{class:"text-red-500"},"*",-1)),Be={key:0,id:"edit_name_ar_error",class:"text-red-500"},Ne={class:"space-y-2"},ze=f(()=>a("span",{class:"text-red-500"},"*",-1)),Re={key:0,id:"edit_ids_error",class:"text-red-500"},Ae={class:"space-y-2"},Me=["src","alt"],Pe={setup(C){X();const V=Y(),y=G(),{t:_}=H(),p=L(null),D=L(!1),i=L({custom_tab_id:V.params.id,name_en:"",name_ar:"",ids:[],image:null}),o=L({id:null,custom_tab_id:V.params.id,name_en:"",name_ar:"",ids:[],image:null,media:[]}),S=L([]),E=U(()=>(localStorage.getItem("appLang")||"en")==="en"?"name_en":"name_ar"),h=U(()=>i.value.name_en&&i.value.name_ar&&i.value.ids.length>0&&i.value.image),$=U(()=>o.value.name_en&&o.value.name_ar&&o.value.ids.length>0),I=async()=>{var e;try{const s=await x.get(`/api/custom-tabs/${V.params.id}`);if(s.data.is_success)p.value=s.data.data,((e=p.value)==null?void 0:e.type)==1?x.get("api/category").then(r=>{S.value=r.data.data.data}):x.get("api/product").then(r=>{S.value=r.data.data.data});else throw new Error(s.data.message)}catch{y.add({severity:"error",summary:_("error"),detail:_("custom_tabs.fetch_failed"),life:3e3})}},z=async()=>{var e,s;try{const r=new FormData;r.append("custom_tab_id",i.value.custom_tab_id),r.append("name_en",i.value.name_en),r.append("name_ar",i.value.name_ar),r.append("image",i.value.image),i.value.ids.forEach((k,d)=>{r.append(`ids[${d}]`,k)}),(await x.post("/api/custom-tab-details",r,{headers:{"Content-Type":"multipart/form-data"}})).data.is_success&&(y.add({severity:"success",summary:_("success"),detail:_("custom_tabs.detail_added"),life:3e3}),i.value={custom_tab_id:V.params.id,name_en:"",name_ar:"",ids:[],image:null},await I())}catch(r){y.add({severity:"error",summary:_("error"),detail:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||_("custom_tabs.add_failed"),life:3e3})}},R=async e=>{var s,r;try{(await x.delete(`/api/custom-tab-details/${e}`)).data.is_success&&(y.add({severity:"success",summary:_("success"),detail:_("custom_tabs.detail_deleted"),life:3e3}),await I())}catch(w){y.add({severity:"error",summary:_("error"),detail:((r=(s=w.response)==null?void 0:s.data)==null?void 0:r.message)||_("custom_tabs.delete_failed"),life:3e3})}},A=e=>{o.value={ids:e.ids,id:e.id,custom_tab_id:V.params.id,name_en:e.name_en,name_ar:e.name_ar,image:null,media:e.media},D.value=!0},M=async()=>{var e,s;try{const r=new FormData;r.append("custom_tab_id",o.value.custom_tab_id),r.append("name_en",o.value.name_en),r.append("name_ar",o.value.name_ar),o.value.image&&r.append("image",o.value.image),o.value.ids.forEach((k,d)=>{r.append(`ids[${d}]`,k)}),r.append("_method","PUT"),(await x.post(`/api/custom-tab-details/${o.value.id}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data.is_success&&(y.add({severity:"success",summary:_("success"),detail:_("custom_tabs.detail_updated"),life:3e3}),D.value=!1,await I())}catch(r){y.add({severity:"error",summary:_("error"),detail:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||_("custom_tabs.update_failed"),life:3e3})}},T=(e,s)=>{e==="new"?i.value.image=s.files[0]:o.value.image=s.files[0]};return J(()=>{I()}),(e,s)=>{var r,w,k;return u(),m("div",{class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",dir:e.$t("dir")},[c(t(Q),{position:"top-right"}),p.value?(u(),m("div",se,[a("h1",{class:n(["text-3xl font-bold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},l(p.value.name_en)+" ("+l(e.$t(`custom_tabs.types.${p.value.type_description}`))+") ",3),a("div",te,[a("div",null,[a("p",le,[a("strong",null,l(e.$t("custom_tabs.store"))+":",1),b(" "+l(p.value.store.name_en),1)]),a("p",re,[a("strong",null,l(e.$t("custom_tabs.name_en"))+":",1),b(" "+l(p.value.name_en),1)])]),a("div",null,[a("p",oe,[a("strong",null,l(e.$t("custom_tabs.name_ar"))+":",1),b(" "+l(p.value.name_ar),1)])])])])):g("",!0),a("div",de,[a("h2",{class:n(["text-2xl font-semibold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},l(e.$t("custom_tabs.add_new_detail")),3),a("div",ie,[a("div",ne,[a("label",{class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(l(e.$t("custom_tabs.name_en"))+" ",1),ue],2),c(t(F),{modelValue:i.value.name_en,"onUpdate:modelValue":s[0]||(s[0]=d=>i.value.name_en=d),placeholder:e.$t("custom_tabs.enter_name_en"),class:n(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!t(h)&&!i.value.name_en}]),"aria-describedby":"name_en_error",required:""},null,8,["modelValue","placeholder","class"]),!t(h)&&!i.value.name_en?(u(),m("small",me,l(e.$t("custom_tabs.name_en_required")),1)):g("",!0)]),a("div",ce,[a("label",{class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(l(e.$t("custom_tabs.name_ar"))+" ",1),_e],2),c(t(F),{modelValue:i.value.name_ar,"onUpdate:modelValue":s[1]||(s[1]=d=>i.value.name_ar=d),placeholder:e.$t("custom_tabs.enter_name_ar"),class:n(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!t(h)&&!i.value.name_ar}]),"aria-describedby":"name_ar_error",required:""},null,8,["modelValue","placeholder","class"]),!t(h)&&!i.value.name_ar?(u(),m("small",be,l(e.$t("custom_tabs.name_ar_required")),1)):g("",!0)]),a("div",pe,[((r=p.value)==null?void 0:r.type)==2?(u(),m("label",{key:0,class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(l(e.$t("اختر المنتجات"))+" ",1),ge],2)):(u(),m("label",{key:1,class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(l(e.$t("اختر الفئات"))+" ",1),ve],2)),c(t(B),{modelValue:i.value.ids,"onUpdate:modelValue":s[2]||(s[2]=d=>i.value.ids=d),options:S.value,optionLabel:t(E),optionValue:"id",placeholder:e.$t("custom_tabs.select_ids"),class:n(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":!t(h)&&!i.value.ids.length}]),"aria-describedby":"ids_error",required:""},null,8,["modelValue","options","optionLabel","placeholder","class"]),!t(h)&&!i.value.ids.length?(u(),m("small",he,l(e.$t("custom_tabs.ids_required")),1)):g("",!0)]),a("div",fe,[a("label",{class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(l(e.$t("custom_tabs.image"))+" ",1),ye],2),c(t(N),{mode:"basic",accept:"image/*",maxFileSize:1e6,onSelect:s[3]||(s[3]=d=>T("new",d)),chooseLabel:e.$t("custom_tabs.select_image"),class:"p-button-rounded"},null,8,["chooseLabel"]),!t(h)&&!i.value.image?(u(),m("small",$e,l(e.$t("custom_tabs.image_required")),1)):g("",!0)])]),c(t(q),{label:e.$t("custom_tabs.add_detail"),icon:"pi pi-plus",class:"mt-6 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",onClick:z,disabled:!t(h)},null,8,["label","disabled"])]),a("div",we,[a("h2",{class:n(["text-2xl font-semibold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},l(e.$t("custom_tabs.details")),3),(k=(w=p.value)==null?void 0:w.details)!=null&&k.length?(u(),m("div",ke,[(u(!0),m(K,null,O(p.value.details,d=>(u(),m("div",{key:d.id,class:"border p-4 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow duration-300"},[a("div",xe,[a("div",null,[a("p",Ve,[a("strong",null,l(e.$t("custom_tabs.name_en"))+":",1),b(" "+l(d.name_en),1)]),a("p",De,[a("strong",null,l(e.$t("custom_tabs.name_ar"))+":",1),b(" "+l(d.name_ar),1)]),d.media.length?(u(),m("div",Le,[a("strong",null,l(e.$t("custom_tabs.media"))+":",1),a("img",{src:d.media[0].url,alt:e.$t("custom_tabs.detail_image"),class:"w-32 h-32 object-cover mt-2 rounded-lg"},null,8,qe)])):g("",!0)]),a("div",Ce,[c(t(q),{icon:"pi pi-pencil",class:"p-detail",onClick:v=>A(d)},null,8,["onClick"]),c(t(q),{severity:"danger",icon:"pi pi-trash",class:"p-delete p-button-rounded",onClick:v=>R(d.id)},null,8,["onClick"])])])]))),128))])):(u(),m("p",Se,l(e.$t("custom_tabs.no_details")),1))]),c(t(W),{visible:D.value,"onUpdate:visible":s[9]||(s[9]=d=>D.value=d),header:e.$t("custom_tabs.edit_detail"),modal:!0,class:n(["w-full max-w-3xl bg-white rounded-xl shadow-2xl",{rtl:e.$t("dir")==="rtl"}])},{footer:j(()=>[c(t(q),{label:e.$t("custom_tabs.cancel"),severity:"secondary",class:"p-button-rounded",onClick:s[8]||(s[8]=d=>D.value=!1)},null,8,["label"]),c(t(q),{label:e.$t("custom_tabs.save"),icon:"pi pi-check",class:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",onClick:M,disabled:!t($)},null,8,["label","disabled"])]),default:j(()=>{var d;return[a("div",Ie,[a("div",Fe,[a("label",{class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(l(e.$t("custom_tabs.name_en"))+" ",1),Ue],2),c(t(F),{modelValue:o.value.name_en,"onUpdate:modelValue":s[4]||(s[4]=v=>o.value.name_en=v),placeholder:e.$t("custom_tabs.enter_name_en"),class:n(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!t($)&&!o.value.name_en}]),"aria-describedby":"edit_name_en_error",required:""},null,8,["modelValue","placeholder","class"]),!t($)&&!o.value.name_en?(u(),m("small",Ee,l(e.$t("custom_tabs.name_en_required")),1)):g("",!0)]),a("div",Te,[a("label",{class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(l(e.$t("custom_tabs.name_ar"))+" ",1),je],2),c(t(F),{modelValue:o.value.name_ar,"onUpdate:modelValue":s[5]||(s[5]=v=>o.value.name_ar=v),placeholder:e.$t("custom_tabs.enter_name_ar"),class:n(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!t($)&&!o.value.name_ar}]),"aria-describedby":"edit_name_ar_error",required:""},null,8,["modelValue","placeholder","class"]),!t($)&&!o.value.name_ar?(u(),m("small",Be,l(e.$t("custom_tabs.name_ar_required")),1)):g("",!0)]),a("div",Ne,[a("label",{class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(l(e.$t("custom_tabs.ids"))+" ",1),ze],2),c(t(B),{modelValue:o.value.ids,"onUpdate:modelValue":s[6]||(s[6]=v=>o.value.ids=v),options:S.value,optionLabel:t(E),optionValue:"id",placeholder:e.$t("custom_tabs.select_ids"),class:n(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":!t($)&&!o.value.ids.length}]),"aria-describedby":"ids_error",required:""},null,8,["modelValue","options","optionLabel","placeholder","class"]),!t($)&&!o.value.ids.length?(u(),m("small",Re,l(e.$t("custom_tabs.ids_required")),1)):g("",!0)]),a("div",Ae,[a("label",{class:n(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},l(e.$t("custom_tabs.image")),3),c(t(N),{mode:"basic",accept:"image/*",maxFileSize:1e6,onSelect:s[7]||(s[7]=v=>T("edit",v)),chooseLabel:e.$t("custom_tabs.select_image"),class:"p-button-outlined p-button-rounded"},null,8,["chooseLabel"]),(d=o.value.media)!=null&&d.length?(u(),m("img",{key:0,src:o.value.media[0].url,alt:e.$t("custom_tabs.current_image"),class:"w-32 h-32 object-cover mt-2 rounded-lg"},null,8,Me)):g("",!0)])])]}),_:1},8,["visible","header","class"])],8,ae)}}},Ye=P(Pe,[["__scopeId","data-v-47f406ba"]]);export{Ye as default};
