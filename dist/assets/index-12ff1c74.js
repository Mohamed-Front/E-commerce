import{p as ue,s as ce,v as pe,r as s,x as me,y as ve,o as _e,d as r,e as b,f as h,h as l,i as o,w as n,z as fe,b as S,m as G,t as m,F as H,k as ge,A as be,n as he,B as ye,C as xe}from"./index-606b4cc8.js";const u=y=>(ye("data-v-d68c37c9"),y=y(),xe(),y),we={class:"grid"},Ce={class:"col-12"},ke={class:"my-2"},Ve={class:"my-2 flex gap-2"},Se={class:"p-input-icon-left"},Ue=u(()=>l("i",{class:"pi pi-search"},null,-1)),De=u(()=>l("div",{class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},[l("h5",{class:"m-0"},"Manage Roles")],-1)),Ne={class:"p-paginator p-component p-unselectable-text mt-3"},Pe={class:"p-paginator-left-content"},Te={class:"p-paginator-current"},Me={class:"p-paginator-right-content"},$e={class:"p-paginator-pages"},Ee=["disabled"],Ie=u(()=>l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),Re=[Ie],Be=["disabled"],Fe=u(()=>l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),je=[Fe],ze=["onClick"],Ae={key:1,class:"p-paginator-dots"},Le=["disabled"],qe=u(()=>l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Oe=[qe],Qe=["disabled"],Ye=u(()=>l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Ge=[Ye],He={class:"p-paginator-rpp-options"},Je=u(()=>l("div",{class:"flex align-items-center justify-content-center"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Are you sure you want to delete this role?")],-1)),Ke={class:"field mb-5"},We=u(()=>l("label",{for:"name"},"Name",-1)),Xe={class:"card flex justify-content-center"},Ze={class:"field mb-5"},et=u(()=>l("label",{for:"name"},"Name",-1)),tt={class:"card flex justify-content-center"},at={setup(y){const M=ce(),v=pe(),x=s(!0),i=s({name:"",permissions:[]}),U=s([]),$=s([]),D=s(!1),w=s(!1);s(!1);const _=s(!1);s({});const E=s(null),I=s(null),R=s({}),B=s(!1),F=s(Number),C=s(""),c=s(1),j=s(0),f=s(10),k=s(0),J=s(""),K=s(""),z=s(""),A=s(""),L=s(0),q=s(0),O=s([]),W=()=>{R.value={global:{value:null,matchMode:fe.CONTAINS}}},p=()=>{x.value=!0,S.get("/api/role",{params:{page:c.value,limit:f.value,search:C.value}}).then(t=>{x.value=!1,$.value=t.data.data.data,j.value=t.data.data.total,k.value=t.data.data.last_page,J.value=t.data.data.first_page_url,K.value=t.data.data.last_page_url,z.value=t.data.data.next_page_url,A.value=t.data.data.prev_page_url,L.value=t.data.data.from,q.value=t.data.data.to,O.value=t.data.data.links}).catch(t=>{x.value=!1,console.error("Error fetching roles:",t),v.add({severity:"error",summary:"Error",detail:"Failed to load roles",life:3e3})}),S.get("/api/role/get/permissions").then(t=>{U.value=t.data.permissions}).catch(t=>{console.error("Error fetching permissions:",t)})},g=t=>{t>=1&&t<=k.value&&(c.value=t,p())},X=t=>{f.value=t.value,c.value=1,p()};me(C,t=>{c.value=1,p()});const Z=()=>{M.push({name:"roles-create"})},Q=()=>{w.value=!1,D.value=!1,B.value=!1},ee=()=>{B.value=!0,S.post("api/roles/create",i.value).then(t=>{p(),w.value=!1,v.add({severity:"success",summary:"Successful",detail:"Role Created",life:3e3}),i.value={name:"",permissions:[]}}).catch(t=>{console.error("Error creating role:",t),v.add({severity:"error",summary:"Error",detail:"Failed to create role",life:3e3})})},te=t=>{M.push({name:"roles-update",params:{id:t}})},ae=t=>{F.value=t,_.value=!0},le=()=>{S.delete(`api/role/${F.value}`).then(()=>{p(),_.value=!1,v.add({severity:"success",summary:"Successful",detail:"Role Deleted",life:3e3})}).catch(t=>{console.error("Error deleting role:",t),v.add({severity:"error",summary:"Error",detail:"Failed to delete role",life:3e3})})},oe=()=>{I.value.exportCSV()};return ve(()=>{W()}),_e(()=>{p()}),(t,a)=>{const d=r("Button"),N=r("InputText"),se=r("Toolbar"),ne=r("Toast"),V=r("Column"),ie=r("DataTable"),de=r("Dropdown"),P=r("Dialog"),Y=r("MultiSelect"),re=r("va-card");return b(),h("div",we,[l("div",Ce,[o(re,{class:"card"},{default:n(()=>[o(se,{class:"mb-4"},{start:n(()=>[l("div",ke,[o(d,{label:"New",icon:"pi pi-plus",class:"new mr-2",onClick:Z})])]),end:n(()=>[l("div",Ve,[l("span",Se,[Ue,o(N,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),placeholder:"Search..."},null,8,["modelValue"])]),o(d,{label:"Export",icon:"pi pi-upload",class:"new",onClick:a[1]||(a[1]=e=>oe())})])]),_:1}),o(ne),o(ie,{ref_key:"dt",ref:I,selection:E.value,"onUpdate:selection":a[2]||(a[2]=e=>E.value=e),value:$.value,loading:x.value,"data-key":"id",paginator:!1,rows:f.value,filters:R.value,"responsive-layout":"scroll"},{header:n(()=>[De]),default:n(()=>[o(V,{"selection-mode":"multiple","header-style":"width: 3rem"}),o(V,{field:"id",header:"ID",sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:n(e=>[G(m(e.data.id),1)]),_:1}),o(V,{field:"name",header:"Name",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(e=>[G(m(e.data.name),1)]),_:1}),o(V,{"header-style":"min-width:10rem;"},{body:n(e=>[o(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:T=>te(e.data.id)},null,8,["onClick"]),o(d,{icon:"pi pi-trash",class:"delete mt-2",onClick:T=>ae(e.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","loading","rows","filters"]),l("div",Ne,[l("div",Pe,[l("span",Te," Showing "+m(L.value)+" to "+m(q.value)+" of "+m(j.value)+" entries ",1)]),l("div",Me,[l("span",$e,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:a[3]||(a[3]=e=>g(1))},Re,8,Ee),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!A.value,onClick:a[4]||(a[4]=e=>g(c.value-1))},je,8,Be),(b(!0),h(H,null,ge(O.value,(e,T)=>(b(),h(H,{key:T},[e.label&&!isNaN(e.label)?(b(),h("button",{key:0,class:be(["p-paginator-page p-paginator-element p-link",{"p-highlight":e.active}]),onClick:lt=>g(parseInt(e.label))},m(e.label),11,ze)):e.label==="..."?(b(),h("span",Ae,"...")):he("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!z.value,onClick:a[5]||(a[5]=e=>g(c.value+1))},Oe,8,Le),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===k.value,onClick:a[6]||(a[6]=e=>g(k.value))},Ge,8,Qe)]),l("span",He,[o(de,{modelValue:f.value,"onUpdate:modelValue":a[7]||(a[7]=e=>f.value=e),options:[5,10,20,30],onChange:X,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])]),o(P,{visible:_.value,"onUpdate:visible":a[9]||(a[9]=e=>_.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[o(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[8]||(a[8]=e=>_.value=!1)}),o(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:le})]),default:n(()=>[Je]),_:1},8,["visible"]),o(P,{visible:w.value,"onUpdate:visible":a[12]||(a[12]=e=>w.value=e),style:{width:"450px"},header:"Create Role",modal:!0,class:"p-fluid"},{footer:n(()=>[o(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:Q}),o(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:ee})]),default:n(()=>[l("div",Ke,[We,o(N,{class:"mt-3 w-full",id:"name",modelValue:i.value.name,"onUpdate:modelValue":a[10]||(a[10]=e=>i.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),l("div",Xe,[o(Y,{modelValue:i.value.permissions,"onUpdate:modelValue":a[11]||(a[11]=e=>i.value.permissions=e),display:"chip","option-value":"id",options:U.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"]),o(P,{visible:D.value,"onUpdate:visible":a[15]||(a[15]=e=>D.value=e),style:{width:"450px"},header:"Update Role",modal:!0},{footer:n(()=>[o(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:Q}),o(d,{label:"Update",icon:"pi pi-check",class:"p-button-text",onClick:t.update},null,8,["onClick"])]),default:n(()=>[l("div",Ze,[et,o(N,{class:"mt-3 w-full",id:"name",modelValue:i.value.name,"onUpdate:modelValue":a[13]||(a[13]=e=>i.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),l("div",tt,[o(Y,{modelValue:i.value.permissions,"onUpdate:modelValue":a[14]||(a[14]=e=>i.value.permissions=e),"option-value":"id",options:U.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"])]),_:1})])])}}},st=ue(at,[["__scopeId","data-v-d68c37c9"]]);export{st as default};
