import{a as J,I as X,u as Y,r,m as ee,o as te,K as ae,b as v,c as h,d as o,e as n,w as d,g as e,x,j as le,t as i,F as z,f as se,i as F,M as oe,O as m,P as ne,Q as re,R as ie,S as u,p as $,Z as de,T as ce,s as pe,z as ue,U as ge,W as ve}from"./index-4d7d45a7.js";const me={class:"grid"},ye={class:"col-12"},be={class:"card p-4 shadow-2 border-round"},fe={class:"text-2xl font-bold"},_e={class:"flex gap-2"},he={class:"p-input-icon-left"},xe={class:"card shadow-1 surface-0"},ke={class:"text-center py-4"},Ce={class:"text-xl"},we={class:"flex justify-content-center align-items-center py-4"},$e={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ve={class:"p-paginator-left Rd-content"},Pe={class:"p-paginator-current"},Ue={class:"p-paginator-right-content"},Re=["disabled"],Te=["disabled"],De=["onClick"],Ne={key:1,class:"p-paginator-dots"},Se=["disabled"],Ee=["disabled"],Ie={class:"flex align-items-center justify-content-center"},ze={__name:"index",setup(Me){const y={mounted(s,t){}},U=J(),V=X(),{t:l}=Y(),k=r(!0),R=r([]),b=r(!1),T=r(null),D=r(null),Q=r({}),C=r(""),N=r(null),p=r(1),P=r(0),g=r(10),w=r(0),W=r(""),A=r(""),S=r(""),E=r(""),I=r(0),M=r(0),B=r([]),f=()=>{k.value=!0,F.get("/api/category",{params:{page:p.value,limit:g.value,search:C.value||void 0}}).then(s=>{R.value=s.data.data.data,P.value=s.data.data.total,w.value=s.data.data.last_page,W.value=s.data.data.first_page_url,A.value=s.data.data.last_page_url,S.value=s.data.data.next_page_url,E.value=s.data.data.prev_page_url,I.value=s.data.data.from,M.value=s.data.data.to,B.value=s.data.data.links,k.value=!1}).catch(s=>{V.add({severity:"error",summary:l("error"),detail:l("category.loadError"),life:3e3}),k.value=!1,console.error("Error fetching categories:",s)})};ee([C,g],()=>{p.value=1,f()});const _=s=>{s>=1&&s<=w.value&&(p.value=s,f())},G=s=>{g.value=s.value,p.value=1,f()},K=s=>{T.value=s,b.value=!0},L=()=>{F.delete(`/api/category/${T.value}`).then(()=>{V.add({severity:"success",summary:l("success"),detail:l("category.deleteSuccess"),life:3e3}),f(),b.value=!1}).catch(s=>{V.add({severity:"error",summary:l("error"),detail:l("category.deleteError"),life:3e3})})},O=()=>{D.value.exportCSV()},Z=()=>{U.push({name:"category-create"})},q=s=>{U.push({name:"category-update",params:{id:s}})},H=s=>s===1?"success":"info";return te(()=>{f()}),(s,t)=>{const j=ae("tooltip");return v(),h("div",me,[o("div",ye,[o("div",be,[n(e(ne),{class:"mb-4"},{start:d(()=>[o("h2",fe,i(e(l)("category.managementTitle")),1)]),end:d(()=>[o("div",_e,[o("span",he,[t[9]||(t[9]=o("i",{class:"pi pi-search"},null,-1)),n(e(oe),{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=a=>C.value=a),placeholder:e(l)("category.search")},null,8,["modelValue","placeholder"])]),x(n(e(m),{label:e(l)("category.export"),icon:"pi pi-upload",class:"p-export",onClick:O},null,8,["label"]),[[y,"list categories"]]),x(n(e(m),{label:e(l)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[y,"create categories"]])])]),_:1}),n(e(re)),o("div",xe,[x((v(),le(e(ce),{ref_key:"dt",ref:D,value:R.value,selection:N.value,"onUpdate:selection":t[1]||(t[1]=a=>N.value=a),loading:k.value,"data-key":"id",paginator:!1,rows:g.value,filters:Q.value,totalRecords:P.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[o("div",ke,[t[10]||(t[10]=o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),o("p",Ce,i(e(l)("category.noData")),1)])]),loading:d(()=>[o("div",we,[n(e(ie),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(e(u),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(u),{field:"name_en",header:e(l)("category.nameEn"),sortable:!0},{body:d(a=>[$(i(a.data.name_en),1)]),_:1},8,["header"]),n(e(u),{field:"name_ar",header:e(l)("category.nameAr"),sortable:!0},{body:d(a=>[$(i(a.data.name_ar),1)]),_:1},8,["header"]),n(e(u),{field:"is_market",header:e(l)("category.marketType"),sortable:!0},{body:d(a=>[n(e(de),{value:a.data.is_market?e(l)("category.market"):e(l)("category.nonMarket"),severity:H(a.data.is_market)},null,8,["value","severity"])]),_:1},8,["header"]),n(e(u),{field:"parent.name_en",header:e(l)("category.parent"),sortable:!0},{body:d(a=>{var c;return[$(i(((c=a.data.parent)==null?void 0:c.name_en)||e(l)("category.noParent")),1)]}),_:1},8,["header"]),n(e(u),{field:"store.name_en",header:e(l)("category.store"),sortable:!0},{body:d(a=>{var c;return[$(i(((c=a.data.store)==null?void 0:c.name_en)||""),1)]}),_:1},8,["header"]),n(e(u),{header:e(l)("actions"),headerStyle:"width: 12rem"},{body:d(a=>[x(n(e(m),{icon:"pi pi-pencil",class:"p-detail",onClick:c=>q(a.data.id)},null,8,["onClick"]),[[y,"edit categories"],[j,e(l)("edit"),void 0,{top:!0}]]),x(n(e(m),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:c=>K(a.data.id)},null,8,["onClick"]),[[y,"delete categories"],[j,e(l)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","selection","loading","rows","filters","totalRecords"])),[[y,"list categories"]]),o("div",$e,[o("div",Ve,[o("span",Pe,i(e(l)("show"))+" "+i(I.value)+" "+i(e(l)("to"))+" "+i(M.value)+" "+i(e(l)("from"))+" "+i(P.value),1)]),o("div",Ue,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:t[2]||(t[2]=a=>_(1))},t[11]||(t[11]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Re),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!E.value,onClick:t[3]||(t[3]=a=>_(p.value-1))},t[12]||(t[12]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Te),(v(!0),h(z,null,se(B.value,(a,c)=>(v(),h(z,{key:c},[a.label&&!isNaN(parseInt(a.label))?(v(),h("button",{key:0,class:pe(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Be=>_(parseInt(a.label))},i(a.label),11,De)):a.label==="..."?(v(),h("span",Ne,"...")):ue("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!S.value,onClick:t[4]||(t[4]=a=>_(p.value+1))},t[13]||(t[13]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Se),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===w.value,onClick:t[5]||(t[5]=a=>_(w.value))},t[14]||(t[14]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ee),n(e(ge),{modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=a=>g.value=a),options:[5,10,20,30],onChange:G,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(ve),{visible:b.value,"onUpdate:visible":t[8]||(t[8]=a=>b.value=a),style:{width:"450px"},header:e(l)("category.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(e(m),{label:e(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=a=>b.value=!1)},null,8,["label"]),n(e(m),{label:e(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:L},null,8,["label"])]),default:d(()=>[o("div",Ie,[t[15]||(t[15]=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,i(e(l)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{ze as default};
