import{_ as S,j as P,u as $,k as j,q as B,r as _,o as D,a as u,c as d,f as a,p as T,t as f,e as o,x as v,F as m,d as y,g as b,B as M,C as O,D as F,V as K}from"./index-06a0949a.js";const N=["dir"],R={class:"bg-white rounded-3xl shadow-2xl p-6 w-full max-w-sm my-8 text-center"},E={class:"space-y-6"},L={class:"text-2xl font-bold text-gray-800"},U={class:"text-sm text-gray-500"},q=["onUpdate:modelValue","onInput","onKeydown","aria-label"],z=["disabled","aria-label"],A={class:"text-center text-sm text-gray-500 mt-4"},H=["disabled","aria-label"],G={key:1,class:"text-green-500 text-sm text-center mt-2"},J={__name:"otp",props:{email:String,phone:String,otp_type:String},setup(x){const{t:s,locale:Q}=P(),V=$();j();const n=B(),l=_(["","","","","",""]),h=_([]),i=_([]),t=x;D(()=>{if(!t.email&&!t.phone){i.value=[s("otpVerification.invalidInfo")],V.push({name:"authlog"});return}console.log("OTP Page Props:",{email:t.email,phone:t.phone,otp_type:t.otp_type}),h.value.length>0&&h.value[0].focus()});const w=(e,r)=>{const g=r.target.value.replace(/[^0-9]/g,"");l.value[e]=g.slice(0,1),g&&e<l.value.length-1&&h.value[e+1].focus()},k=e=>{e>0&&l.value[e]===""&&h.value[e-1].focus()},C=async()=>{i.value=[];const e=l.value.join("");if(console.log("Verifying OTP with Props:",{email:t.email,phone:t.phone,otp_type:t.otp_type,otp:e}),e.length!==6||!/^\d{6}$/.test(e)){i.value=[s("otpVerification.invalidOtp")];return}const r=await n.verifyEmail({email:t.email,phone:t.phone,otp:e});r.is_success||(i.value=r.errors)},I=async()=>{i.value=[],console.log("Resending Code with Props:",{email:t.email,phone:t.phone,otp_type:t.otp_type});const e=await n.resendOtp({email:t.email,phone:t.phone,otp_type:t.otp_type});e.is_success||(i.value=e.errors)};return(e,r)=>(u(),d("div",{class:"bg-gray-900 min-h-screen flex items-center justify-center p-4 overflow-hidden",dir:e.$i18n.locale==="ar"?"rtl":"ltr"},[a("div",R,[r[0]||(r[0]=a("div",{class:"flex flex-col items-center mb-8"},[a("img",{src:T,alt:"SHIFT7 Logo",class:"h-16 w-16 object-contain"})],-1)),a("div",E,[a("h2",L,f(o(s)("otpVerification.title")),1),a("p",U,f(o(s)("otpVerification.otpSent")),1),a("div",{class:v(["flex justify-center space-x-2",{"space-x-reverse":e.$i18n.locale==="ar"}])},[(u(!0),d(m,null,y(l.value,(g,c)=>O((u(),d("input",{key:c,type:"text",maxlength:"1",pattern:"[0-9]",class:"w-12 h-12 text-center text-xl font-bold rounded-xl bg-gray-100 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow","onUpdate:modelValue":p=>l.value[c]=p,onInput:p=>w(c,p),onKeydown:K(p=>k(c),["backspace"]),ref_for:!0,ref:p=>{p&&(h.value[c]=p)},"aria-label":o(s)("otpVerification.otpDigit",{number:c+1})},null,40,q)),[[F,l.value[c]]])),128))],2),i.value.length?(u(),d("div",{key:0,class:v(["text-red-500 text-sm",{"text-right":e.$i18n.locale==="ar","text-left":e.$i18n.locale!=="ar"}])},[(u(!0),d(m,null,y(i.value,g=>(u(),d("p",{key:g},f(g),1))),128))],2)):b("",!0),a("button",{onClick:C,disabled:o(n).loading,class:"w-full mt-6 py-3 bg-blue-700 text-white font-bold rounded-xl shadow-lg hover:bg-blue-800 transition-colors duration-300 disabled:bg-gray-400","aria-label":o(s)("otpVerification.verify")},f(o(n).loading?o(s)("otpVerification.verifying"):o(s)("otpVerification.verify")),9,z),a("div",A,[M(f(o(s)("otpVerification.noCode"))+" ",1),a("button",{onClick:I,disabled:o(n).loading,class:"text-blue-600 font-semibold hover:underline","aria-label":o(s)("otpVerification.resend")},f(o(n).loading?o(s)("otpVerification.resending"):o(s)("otpVerification.resend")),9,H)]),o(n).successMsg?(u(),d("div",G,f(o(n).successMsg),1)):b("",!0)])])],8,N))}},X=S(J,[["__scopeId","data-v-6d8215b6"]]);export{X as default};
