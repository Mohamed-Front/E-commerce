import{_ as K,u as O,f as X,G as Z,r,w as ee,o as te,h as n,i as V,b as B,c as se,j as l,e as a,k as o,l as h,m as ae,B as t,a as $,t as c,q as f,x as oe,y as le}from"./index-7330e92f.js";const k=m=>(oe("data-v-afb18778"),m=m(),le(),m),de={class:"grid"},re={class:"col-12"},ne={class:"card p-4 shadow-2 border-round"},ie={class:"text-2xl font-bold"},ce={class:"flex gap-2"},ue={class:"p-input-icon-left"},pe=k(()=>l("i",{class:"pi pi-search"},null,-1)),_e={class:"card shadow-1 surface-0"},ve={class:"text-center py-4"},he=k(()=>l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),fe={class:"text-xl"},me={class:"flex justify-content-center align-items-center py-4"},ge={class:"flex align-items-center justify-content-center"},be=k(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),ye={setup(m){const C=O(),y=X(),{t:e}=Z(),g=r(!0),T=r([]),_=r(!1),D=r(null),P=r(null),L=r({}),b=r("");r(null);const S=r(1),I=r(0),x=r(10),N=r(0),w=()=>{g.value=!0,$.get("/api/address",{params:{page:S.value,per_page:x.value,search:b.value||void 0}}).then(d=>{T.value=d.data.data.data,I.value=d.data.data.total,N.value=d.data.data.last_page,g.value=!1}).catch(d=>{y.add({severity:"error",summary:e("error"),detail:e("address.loadError"),life:3e3}),g.value=!1,console.error("Error fetching addresses:",d)})};ee([S,x,b],()=>{w()});const z=d=>{D.value=d,_.value=!0},E=()=>{$.delete(`/api/address/${D.value}`).then(()=>{y.add({severity:"success",summary:e("success"),detail:e("address.deleteSuccess"),life:3e3}),w(),_.value=!1}).catch(d=>{y.add({severity:"error",summary:e("error"),detail:e("address.deleteError"),life:3e3})})},j=()=>{P.value.exportCSV()},A=()=>{C.push({name:"address-create"})},G=d=>{C.push({name:"address-update",params:{id:d}})},M=d=>d?"success":"info";return te(()=>{w()}),(d,u)=>{const U=n("InputText"),p=n("Button"),q=n("Toolbar"),F=n("Toast"),i=n("Column"),Q=n("Tag"),W=n("ProgressSpinner"),Y=n("DataTable"),H=n("Dialog"),v=V("can"),R=V("tooltip");return B(),se("div",de,[l("div",re,[l("div",ne,[a(q,{class:"mb-4"},{start:o(()=>[l("h2",ie,c(t(e)("address.managementTitle")),1)]),end:o(()=>[l("div",ce,[l("span",ue,[pe,a(U,{modelValue:b.value,"onUpdate:modelValue":u[0]||(u[0]=s=>b.value=s),placeholder:t(e)("address.search")},null,8,["modelValue","placeholder"])]),h(a(p,{label:t(e)("address.export"),icon:"pi pi-upload",class:"p-export",onClick:j},null,8,["label"]),[[v,"list address"]]),h(a(p,{label:t(e)("address.new"),icon:"pi pi-plus",class:"p-button-success",onClick:A},null,8,["label"]),[[v,"create address"]])])]),_:1}),a(F),l("div",_e,[h((B(),ae(Y,{ref_key:"dt",ref:P,value:T.value,loading:g.value,"data-key":"id",paginator:!0,rows:x.value,filters:L.value,totalRecords:I.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:o(()=>[l("div",ve,[he,l("p",fe,c(t(e)("address.noData")),1)])]),loading:o(()=>[l("div",me,[a(W,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:o(()=>[a(i,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(i,{field:"address_line_1",header:t(e)("address.line1"),sortable:!0},{body:o(s=>[f(c(s.data.address_line_1),1)]),_:1},8,["header"]),a(i,{field:"address_line_2",header:t(e)("address.line2"),sortable:!0},{body:o(s=>[f(c(s.data.address_line_2||"-"),1)]),_:1},8,["header"]),a(i,{field:"city",header:t(e)("address.city"),sortable:!0},{body:o(s=>[f(c(s.data.city),1)]),_:1},8,["header"]),a(i,{field:"country",header:t(e)("address.country"),sortable:!0},{body:o(s=>[f(c(s.data.country),1)]),_:1},8,["header"]),a(i,{field:"zip_code",header:t(e)("address.zipCode"),sortable:!0},{body:o(s=>[f(c(s.data.zip_code||"-"),1)]),_:1},8,["header"]),a(i,{field:"is_default",header:t(e)("address.default"),sortable:!0},{body:o(s=>[a(Q,{value:s.data.is_default?t(e)("address.defaultYes"):t(e)("address.defaultNo"),severity:M(s.data.is_default)},null,8,["value","severity"])]),_:1},8,["header"]),a(i,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:o(s=>[h(a(p,{icon:"pi pi-pencil",class:"p-detail",onClick:J=>G(s.data.id)},null,8,["onClick"]),[[v,"edit address"],[R,t(e)("edit"),void 0,{top:!0}]]),h(a(p,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:J=>z(s.data.id)},null,8,["onClick"]),[[v,"delete address"],[R,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[v,"list address"]])]),a(H,{visible:_.value,"onUpdate:visible":u[2]||(u[2]=s=>_.value=s),style:{width:"450px"},header:t(e)("address.deleteConfirmTitle"),modal:!0},{footer:o(()=>[a(p,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:u[1]||(u[1]=s=>_.value=!1)},null,8,["label"]),a(p,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:E},null,8,["label"])]),default:o(()=>[l("div",ge,[be,l("span",null,c(t(e)("address.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},we=K(ye,[["__scopeId","data-v-afb18778"]]);export{we as default};
