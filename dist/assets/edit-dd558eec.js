import{_ as D,b as M,n as R,L as z,u as E,r as b,d as P,o as c,e as _,f as r,t as u,P as X,s as f,g as m,x as g,j as n,B as h,i as Y,F as A,a as k,a3 as C,X as I,Y as L,$ as G,p as H,m as J}from"./index-b794012a.js";const w=x=>(H("data-v-975f642c"),x=x(),J(),x),K={class:"max-w-3xl mx-auto p-6 bg-white rounded-xl shadow-lg"},Q={id:"form-title",class:"text-3xl font-bold text-center mb-8 text-gray-800",role:"heading","aria-level":"1"},W=["onSubmit"],Z={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},ee={class:"space-y-2"},ae={for:"store_id",class:"block text-sm font-medium text-gray-700"},se=w(()=>r("span",{class:"text-red-500"},"*",-1)),te={key:0,id:"store_id_error",class:"text-red-500"},re={class:"space-y-2"},oe={for:"type",class:"block text-sm font-medium text-gray-700"},le=w(()=>r("span",{class:"text-red-500"},"*",-1)),de={key:0,id:"type_error",class:"text-red-500"},ue={class:"space-y-2"},ie={for:"name_ar",class:"block text-sm font-medium text-gray-700"},ne=w(()=>r("span",{class:"text-red-500"},"*",-1)),ce={key:0,id:"name_ar_error",class:"text-red-500"},_e={class:"space-y-2"},me={for:"name_en",class:"block text-sm font-medium text-gray-700"},be=w(()=>r("span",{class:"text-red-500"},"*",-1)),pe={key:0,id:"name_en_error",class:"text-red-500"},ye={class:"space-y-2"},ve={for:"row_type",class:"block text-sm font-medium text-gray-700"},fe=w(()=>r("span",{class:"text-red-500"},"*",-1)),ge={key:0,id:"row_type_error",class:"text-red-500"},he={class:"pt-4 flex justify-center space-x-4"},we={key:0},xe={key:1,class:"pi pi-spinner pi-spin"},$e={setup(x){const v=M(),q=R(),i=z(),{t:e}=E(),d=b(!1),p=b(!1),$=b(!1),S=b([]),V=b([]),t=b({}),o=b({store_id:null,type:null,name_ar:"",name_en:"",row_type:null}),T=[{label:e("custom_tabs.categories"),value:1},{label:e("custom_tabs.products"),value:2}],j=[{label:e("custom_tabs.single_row"),value:1},{label:e("custom_tabs.double_rows"),value:2}],B=async()=>{var a;$.value=!0;try{const s=await k.get("/api/store");V.value=((a=s.data)==null?void 0:a.data.data)||[],V.value.length||i.add({severity:"warn",summary:e("warning"),detail:e("custom_tabs.no_stores_found"),life:3e3})}catch{V.value=[],i.add({severity:"error",summary:e("error"),detail:e("custom_tabs.fetch_stores_failed"),life:3e3})}finally{$.value=!1}},U=async()=>{var a;p.value=!0;try{const s=await k.get("/api/custom-tabs");S.value=((a=s.data)==null?void 0:a.data.data)||[],S.value.length||i.add({severity:"warn",summary:e("warning"),detail:e("custom_tabs.no_tabs_found"),life:3e3})}catch{S.value=[],i.add({severity:"error",summary:e("error"),detail:e("custom_tabs.fetch_failed"),life:3e3})}finally{p.value=!1}},F=async a=>{var s;d.value=!0;try{const y=(s=(await k.get(`/api/custom-tabs/${a}`)).data)==null?void 0:s.data;y?o.value={store_id:y.store_id,type:y.type,name_ar:y.name_ar,name_en:y.name_en,row_type:y.row_type}:(i.add({severity:"error",summary:e("error"),detail:e("custom_tabs.tab_not_found"),life:3e3}),v.push({name:"custom-tabs"}))}catch{i.add({severity:"error",summary:e("error"),detail:e("custom_tabs.fetch_failed"),life:3e3}),v.push({name:"custom-tabs"})}finally{d.value=!1}},N=()=>(t.value={},o.value.store_id||(t.value.store_id=e("custom_tabs.store_id_required")),[1,2].includes(o.value.type)||(t.value.type=e("custom_tabs.type_required")),o.value.name_ar||(t.value.name_ar=e("custom_tabs.name_ar_required")),o.value.name_en||(t.value.name_en=e("custom_tabs.name_en_required")),[1,2].includes(o.value.row_type)||(t.value.row_type=e("custom_tabs.row_type_required")),Object.keys(t.value).length===0),O=async()=>{var a,s;if(!N()){i.add({severity:"error",summary:e("error"),detail:e("custom_tabs.update_failed"),life:3e3});return}d.value=!0;try{await k.put(`/api/custom-tabs/${q.params.id}`,o.value),v.push({name:"custom-tabs"}),i.add({severity:"success",summary:e("success"),detail:e("custom_tabs.updated_successfully"),life:3e3})}catch(l){i.add({severity:"error",summary:e("error"),detail:((s=(a=l.response)==null?void 0:a.data)==null?void 0:s.message)||e("custom_tabs.update_failed"),life:3e3})}finally{d.value=!1}};return P(()=>{B(),U(),q.params.id?F(q.params.id):(i.add({severity:"error",summary:e("error"),detail:e("custom_tabs.invalid_id"),life:3e3}),v.push({name:"custom-tabs"}))}),(a,s)=>(c(),_(A,null,[r("div",K,[r("h1",Q,u(a.$t("custom_tabs.edit_tab")),1),r("form",{onSubmit:X(O,["prevent"]),class:"space-y-6",role:"form","aria-labelledby":"form-title"},[r("div",Z,[r("div",ee,[r("label",ae,[f(u(a.$t("custom_tabs.store_id"))+" ",1),se]),m(n(C),{filter:"",id:"store_id",modelValue:o.value.store_id,"onUpdate:modelValue":s[0]||(s[0]=l=>o.value.store_id=l),options:V.value,optionLabel:"name_en",optionValue:"id",placeholder:$.value?a.$t("loading"):a.$t("custom_tabs.select_store"),disabled:$.value||d.value,class:g(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":t.value.store_id}]),"aria-describedby":"store_id_error",required:""},null,8,["modelValue","options","placeholder","disabled","class"]),t.value.store_id?(c(),_("small",te,u(t.value.store_id),1)):h("",!0)]),r("div",re,[r("label",oe,[f(u(a.$t("custom_tabs.type"))+" ",1),le]),m(n(C),{filter:"",id:"type",modelValue:o.value.type,"onUpdate:modelValue":s[1]||(s[1]=l=>o.value.type=l),options:T,optionLabel:"label",optionValue:"value",placeholder:p.value?a.$t("loading"):a.$t("custom_tabs.select_type"),disabled:p.value||d.value,class:g(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":t.value.type}]),"aria-describedby":"type_error",required:""},null,8,["modelValue","placeholder","disabled","class"]),t.value.type?(c(),_("small",de,u(t.value.type),1)):h("",!0)]),r("div",ue,[r("label",ie,[f(u(a.$t("custom_tabs.name_ar"))+" ",1),ne]),m(n(I),{id:"name_ar",modelValue:o.value.name_ar,"onUpdate:modelValue":s[2]||(s[2]=l=>o.value.name_ar=l),placeholder:a.$t("custom_tabs.enter_name_ar"),class:g(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":t.value.name_ar}]),disabled:d.value,"aria-describedby":"name_ar_error",required:""},null,8,["modelValue","placeholder","class","disabled"]),t.value.name_ar?(c(),_("small",ce,u(t.value.name_ar),1)):h("",!0)]),r("div",_e,[r("label",me,[f(u(a.$t("custom_tabs.name_en"))+" ",1),be]),m(n(I),{id:"name_en",modelValue:o.value.name_en,"onUpdate:modelValue":s[3]||(s[3]=l=>o.value.name_en=l),placeholder:a.$t("custom_tabs.enter_name_en"),class:g(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":t.value.name_en}]),disabled:d.value,"aria-describedby":"name_en_error",required:""},null,8,["modelValue","placeholder","class","disabled"]),t.value.name_en?(c(),_("small",pe,u(t.value.name_en),1)):h("",!0)]),r("div",ye,[r("label",ve,[f(u(a.$t("custom_tabs.row_type"))+" ",1),fe]),m(n(C),{id:"row_type",modelValue:o.value.row_type,"onUpdate:modelValue":s[4]||(s[4]=l=>o.value.row_type=l),options:j,optionLabel:"label",optionValue:"value",placeholder:p.value?a.$t("loading"):a.$t("custom_tabs.select_row_type"),disabled:p.value||d.value,class:g(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":t.value.row_type}]),"aria-describedby":"row_type_error",required:""},null,8,["modelValue","placeholder","disabled","class"]),t.value.row_type?(c(),_("small",ge,u(t.value.row_type),1)):h("",!0)])]),r("div",he,[m(n(L),{type:"submit",label:a.$t("custom_tabs.update_tab"),icon:"pi pi-check",loading:d.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:d.value},{default:Y(()=>[d.value?(c(),_("i",xe)):(c(),_("span",we,u(a.$t("custom_tabs.update_tab")),1))]),_:1},8,["label","loading","disabled"]),m(n(L),{type:"button",label:a.$t("cancel"),icon:"pi pi-times",class:"px-8 py-3 mx-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",onClick:s[5]||(s[5]=l=>n(v).push({name:"custom-tabs"})),disabled:d.value},null,8,["label","disabled"])])],40,W)]),m(n(G))],64))}},ke=D($e,[["__scopeId","data-v-975f642c"]]);export{ke as default};
