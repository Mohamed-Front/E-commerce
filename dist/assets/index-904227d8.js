import{p as U,r as p,o as B,d as i,e as R,f as S,h as l,i as t,w as o,b as T,m as x,t as y,B as $,C as K}from"./index-606b4cc8.js";const m=v=>($("data-v-c1e602d9"),v=v(),K(),v),E={class:"permissions-container"},M={class:"card"},z=m(()=>l("h1",null,"Permissions Management",-1)),j=m(()=>l("p",{class:"subtitle"},"View and manage all system permissions",-1)),q={class:"description-cell"},A={class:"description-cell"},F={class:"description-cell"},G={class:"p-fluid"},H={class:"p-field"},J=m(()=>l("label",{for:"permissionName"},"Permission Name",-1)),L={class:"p-field"},O=m(()=>l("label",{for:"description"},"Description",-1)),Q={setup(v){const _=p({}),d=p(!0),D=p(0),u=p(!1),c=p({id:"",name:"",description:""}),w=()=>{T.get("api/role/get/permissions").then(a=>{_.value=a.data.data,d.value=!1})},b=a=>{u.value=!0,console.log(a),c.value={id:a==null?void 0:a.id,name:a==null?void 0:a.name,description:(a==null?void 0:a.description)||""}},k=()=>{d.value=!0,T.put(`/api/role/permission/${c.value.id}`,{description:c.value.description}).then(()=>{w(),u.value=!1}).catch(a=>{console.error("Update failed:",a)}).finally(()=>{d.value=!1})};return B(()=>{w()}),(a,n)=>{const s=i("Column"),f=i("Tag"),r=i("Button"),h=i("DataTable"),g=i("TabPanel"),I=i("TabView"),N=i("InputText"),V=i("Textarea"),P=i("Dialog");return R(),S("div",E,[l("div",M,[z,j,t(I,{activeIndex:D.value,"onUpdate:activeIndex":n[0]||(n[0]=e=>D.value=e)},{default:o(()=>[t(g,{header:"Permissions"},{default:o(()=>[t(h,{value:_.value.permissions,stripedRows:"",class:"p-datatable-sm",loading:d.value,dataKey:"id"},{default:o(()=>[t(s,{field:"id",header:"ID",sortable:""}),t(s,{field:"name",header:"Name",sortable:""},{body:o(({data:e})=>[t(f,{value:e.name,severity:"info"},null,8,["value"])]),_:1}),t(s,{field:"description",header:"Description"},{body:o(({data:e})=>[l("div",q,[x(y(e.description||"No description")+" ",1),t(r,{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-sm",onClick:C=>b(e)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","loading"])]),_:1}),t(g,{header:"User Permissions"},{default:o(()=>[t(h,{value:_.value.users,stripedRows:"",class:"p-datatable-sm",loading:d.value,dataKey:"id"},{default:o(()=>[t(s,{field:"id",header:"ID",sortable:""}),t(s,{field:"name",header:"Name",sortable:""},{body:o(({data:e})=>[t(f,{value:e.name,severity:e.name.includes("delete")?"danger":e.name.includes("edit")?"warning":"success"},null,8,["value","severity"])]),_:1}),t(s,{field:"description",header:"Description"},{body:o(({data:e})=>[l("div",A,[x(y(e.description||"No description")+" ",1),t(r,{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-sm",onClick:C=>b(e)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","loading"])]),_:1}),t(g,{header:"Role Permissions"},{default:o(()=>[t(h,{value:_.value.roles,stripedRows:"",class:"p-datatable-sm",loading:d.value,dataKey:"id"},{default:o(()=>[t(s,{field:"id",header:"ID",sortable:""}),t(s,{field:"name",header:"Name",sortable:""},{body:o(({data:e})=>[t(f,{value:e.name,severity:e.name.includes("delete")?"danger":e.name.includes("edit")?"warning":"info"},null,8,["value","severity"])]),_:1}),t(s,{field:"description",header:"Description"},{body:o(({data:e})=>[l("div",F,[x(y(e.description||"No description")+" ",1),t(r,{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-sm",onClick:C=>b(e)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","loading"])]),_:1})]),_:1},8,["activeIndex"]),t(P,{visible:u.value,"onUpdate:visible":n[4]||(n[4]=e=>u.value=e),modal:"",header:"Update Description",style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:o(()=>[t(r,{label:"Cancel",icon:"pi pi-times",onClick:n[3]||(n[3]=e=>u.value=!1),class:"p-button-text"}),t(r,{label:"Save",icon:"pi pi-check",onClick:k,loading:d.value,autofocus:""},null,8,["loading"])]),default:o(()=>[l("div",G,[l("div",H,[J,t(N,{id:"permissionName",modelValue:c.value.name,"onUpdate:modelValue":n[1]||(n[1]=e=>c.value.name=e),disabled:""},null,8,["modelValue"])]),l("div",L,[O,t(V,{id:"description",modelValue:c.value.description,"onUpdate:modelValue":n[2]||(n[2]=e=>c.value.description=e),rows:"5",autoResize:""},null,8,["modelValue"])])])]),_:1},8,["visible"])])])}}},X=U(Q,[["__scopeId","data-v-c1e602d9"]]);export{X as default};
