import{u as q,b as H,I as J,r,w as K,R as ee,d as te,S as E,o as c,e as h,f as l,g as i,i as d,j as e,x as k,c as ae,t as n,F,h as le,T as se,a as j,U as oe,V as f,W as re,X as ie,Y as ne,Z as b,p as z,a3 as de,$ as pe,s as ue,z as ce,a0 as ve,a2 as ge}from"./index-23aef111.js";const me={class:"grid"},he={class:"col-12"},fe={class:"card p-4 shadow-2 border-round"},be={class:"text-2xl font-bold"},_e={class:"flex gap-2"},ye={class:"p-input-icon-left"},xe={class:"card shadow-1 surface-0"},we={class:"text-center py-4"},ke={class:"text-xl"},Ce={class:"flex justify-content-center align-items-center py-4"},$e={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ve={class:"p-paginator-left-content"},Pe={class:"p-paginator-current"},Ne={class:"p-paginator-right-content"},Ue=["disabled"],De=["disabled"],Re=["onClick"],Te={key:1,class:"p-paginator-dots"},Me=["disabled"],Se=["disabled"],Be={class:"flex align-items-center justify-content-center"},je={__name:"index",setup(Ie){const{t:s}=q(),O=H(),C=J(),_=r(!0),P=r(""),v=r(!1),N=r(null);r(null);const U=r(null),D=r({}),y=r(""),p=r(1),$=r(0),u=r(10),x=r(0),W=r(""),A=r(""),R=r(""),T=r(""),M=r(0),S=r(0),B=r([]),G=()=>{D.value={global:{value:null,matchMode:se.CONTAINS}}},g=()=>{_.value=!0,j.get("/api/order",{params:{page:p.value,limit:u.value,search:y.value||void 0}}).then(o=>{N.value=o.data.data.data,$.value=o.data.data.total,x.value=o.data.data.last_page,W.value=o.data.data.first_page_url,A.value=o.data.data.last_page_url,R.value=o.data.data.next_page_url,T.value=o.data.data.prev_page_url,M.value=o.data.data.from,S.value=o.data.data.to,B.value=o.data.data.links,_.value=!1}).catch(o=>{C.add({severity:"error",summary:s("error"),detail:s("order.loadError"),life:3e3}),_.value=!1,console.error("Error fetching data:",o)})};K([y,u],()=>{p.value=1,g()});const m=o=>{o>=1&&o<=x.value&&(p.value=o,g())},L=o=>{u.value=o.value,p.value=1,g()},Q=o=>{P.value=o,v.value=!0},X=()=>{j.delete(`/api/order/${P.value}`).then(()=>{C.add({severity:"success",summary:s("success"),detail:s("order.deleteSuccess"),life:3e3}),g(),v.value=!1}).catch(o=>{C.add({severity:"error",summary:s("error"),detail:s("order.deleteError"),life:3e3})})},Y=()=>{U.value.exportCSV()},Z=o=>{O.push({name:"order-show",params:{id:o}})};return ee(()=>{G()}),te(()=>{g()}),(o,t)=>{const w=E("can"),I=E("tooltip");return c(),h("div",me,[l("div",he,[l("div",fe,[i(e(re),{class:"mb-4"},{start:d(()=>[l("h2",be,n(e(s)("order.managementTitle")),1)]),end:d(()=>[l("div",_e,[l("span",ye,[t[8]||(t[8]=l("i",{class:"pi pi-search"},null,-1)),i(e(oe),{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=a=>y.value=a),placeholder:e(s)("order.search")},null,8,["modelValue","placeholder"])]),k(i(e(f),{label:e(s)("order.export"),icon:"pi pi-upload",class:"p-export",onClick:Y},null,8,["label"]),[[w,"export orders"]])])]),_:1}),i(e(ie)),l("div",xe,[k((c(),ae(e(pe),{ref_key:"dt",ref:U,value:N.value,loading:_.value,"data-key":"id",paginator:!1,rows:u.value,filters:D.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[l("div",we,[t[9]||(t[9]=l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),l("p",ke,n(e(s)("order.noData")),1)])]),loading:d(()=>[l("div",Ce,[i(e(ne),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(e(b),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(b),{field:"id",header:e(s)("order.id"),sortable:!0,"header-style":"width:14%; min-width:8rem;"},{body:d(a=>[z(n(a.data.id),1)]),_:1},8,["header"]),i(e(b),{field:"total_price",header:e(s)("order.totalPrice"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[z(" $"+n(a.data.total_price),1)]),_:1},8,["header"]),i(e(b),{field:"status",header:e(s)("order.status"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[i(e(de),{value:a.data.status===0?e(s)("order.pending"):e(s)("order.completed"),severity:a.data.status===0?"warning":"success"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(b),{header:e(s)("actions"),"header-style":"min-width:10rem;"},{body:d(a=>[k(i(e(f),{icon:"pi pi-eye",class:"p-detail",onClick:V=>Z(a.data.id)},null,8,["onClick"]),[[w,"view orders"],[I,e(s)("view"),void 0,{top:!0}]]),k(i(e(f),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:V=>Q(a.data.id)},null,8,["onClick"]),[[w,"delete orders"],[I,e(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[w,"list orders"]]),l("div",$e,[l("div",Ve,[l("span",Pe,n(e(s)("show"))+" "+n(M.value)+" "+n(e(s)("to"))+" "+n(S.value)+" "+n(e(s)("from"))+" "+n($.value),1)]),l("div",Ne,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:t[1]||(t[1]=a=>m(1))},t[10]||(t[10]=[l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Ue),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!T.value,onClick:t[2]||(t[2]=a=>m(p.value-1))},t[11]||(t[11]=[l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,De),(c(!0),h(F,null,le(B.value,(a,V)=>(c(),h(F,{key:V},[a.label&&!isNaN(parseInt(a.label))?(c(),h("button",{key:0,class:ue(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Ee=>m(parseInt(a.label))},n(a.label),11,Re)):a.label==="..."?(c(),h("span",Te,"...")):ce("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!R.value,onClick:t[3]||(t[3]=a=>m(p.value+1))},t[12]||(t[12]=[l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Me),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===x.value,onClick:t[4]||(t[4]=a=>m(x.value))},t[13]||(t[13]=[l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Se),i(e(ve),{modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=a=>u.value=a),options:[5,10,20,30],onChange:L,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(e(ge),{visible:v.value,"onUpdate:visible":t[7]||(t[7]=a=>v.value=a),style:{width:"450px"},header:e(s)("order.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(e(f),{label:e(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=a=>v.value=!1)},null,8,["label"]),i(e(f),{label:e(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:d(()=>[l("div",Be,[t[14]||(t[14]=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,n(e(s)("order.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{je as default};
