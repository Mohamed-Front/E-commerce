import{_ as U,k as W,j as X,i as Y,r as m,m as Z,a as o,c as _,e as t,t as g,u as d,g as S,w as V,f as p,b as x,F as A,d as O,h as F}from"./index-90a6bf85.js";import{b as B,S as z,A as D,a as M}from"./productsSwiper-12ab8ffc.js";import{N as R,C as ee}from"./CustomTaps-5fe27b40.js";/* empty css                   */import{_ as f}from"./banner-addtion-03b7a236.js";const ae={class:"mx-auto bg-gradient-to mt-16 max-w-7xl px-4 sm:px-6 lg:px-8"},te={key:0,class:"text-center py-16 animate-pulse"},se={class:"text-gray-600 text-lg font-medium"},le={key:1,class:"text-center py-16 text-red-600"},re={class:"text-lg font-semibold"},ne={key:2},oe={class:"text-center mb-8"},ie={class:"text-4xl sm:text-4xl font-extrabold text-gray-800 tracking-tight animate-fade-in"},de={class:"font-bold font-sans text-gray-800 text-2xl sm:text-3xl lg:text-4xl mb-8 animate-slide-up"},ce={class:"w-full h-48 overflow-hidden rounded-xl shadow-md relative"},me=["src","alt"],ue={class:"font-sans mt-4 mb-1 text-gray-800 font-semibold text-sm sm:text-base md:text-lg"},_e={key:0,class:"my-8"},ge={class:"relative overflow-hidden rounded-2xl shadow-lg animate-banner-slide"},ve=["src","alt"],pe={key:1,class:"mt-16"},fe={class:"font-bold font-sans text-gray-800 text-2xl sm:text-3xl lg:text-4xl mb-8"},ye={class:"w-full h-48 overflow-hidden rounded-xl shadow-md relative"},he=["src","alt"],xe={class:"font-sans mt-4 mb-1 text-gray-800 font-semibold text-sm sm:text-base md:text-lg"},be={class:"text-gray-600 text-sm"},we={key:1,class:"my-8"},ke={class:"relative overflow-hidden rounded-2xl shadow-lg animate-banner-slide"},Fe=["src","alt"],Be={__name:"products",setup($e){const I=W(),T=X(),{t:i,locale:y}=Y(),h=m(localStorage.getItem("defaultStoreId")),c=m({}),b=m([]),C=m({title:"",products:[]}),w=m([]),$=m({title:"",products:[]}),P=m({title:"",products:[]}),k=m({title:"",products:[]}),E=m(!1),u=m(null),v=l=>y.value==="ar"?l.name_ar||l.name_en:l.name_en||l.name_ar,q=async()=>{try{const s=(await F.get(`/api/home/products-by-category/${I.params.id}/${h.value}`)).data.data;c.value={id:s.category.id,name_ar:s.category.name_ar,name_en:s.category.name_en,media:s.category.media||[{url:f,name:"default"}]},b.value=s.sub_categories.map(e=>({id:e.id,name_ar:e.name_ar||e.name_en,name_en:e.name_en||e.name_ar,media:e.media.length?e.media:[{url:f,name:"default"}]})),C.value={title:v(c.value),products:(s.products.data||[]).map(e=>{var n,a;return{id:e.id,name:y.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax||0,price:parseFloat(e.base_price||0).toFixed(2),img:((a=(n=e.media)==null?void 0:n.find(r=>r.name==="product_main_image"))==null?void 0:a.url)||e.key_default_image||f}})}}catch(l){console.error("Error fetching category data:",l),u.value=i("category.errorLoading")||"Failed to load category data."}},G=async()=>{try{const l=b.value.map(async e=>((await F.get(`/api/home/products-by-category/${e.id}/${h.value}`)).data.data.products.data||[]).map(r=>{var j,L;return{id:r.id,name:y.value==="ar"?r.name_ar||r.name_en:r.name_en||r.name_ar,tax:r.tax||0,price:parseFloat(r.base_price||0).toFixed(2),img:((L=(j=r.media)==null?void 0:j.find(Q=>Q.name==="product_main_image"))==null?void 0:L.url)||r.key_default_image||f}})),s=await Promise.allSettled(l);w.value=s.filter(e=>e.status==="fulfilled").flatMap(e=>e.value)}catch(l){console.error("Error fetching subcategory products:",l),u.value=i("category.errorLoading")||"Failed to load subcategory products."}},H=async()=>{try{const s=(await F.get(`/api/home/best-sellers/${h.value}`)).data.data.data||[];$.value={title:i("category.bestsellers")||"Best Sellers",products:s.map(e=>{var n,a;return{id:e.id,name:y.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax||0,price:parseFloat(e.base_price||0).toFixed(2),img:((a=(n=e.media)==null?void 0:n.find(r=>r.name==="product_main_image"))==null?void 0:a.url)||e.key_default_image||f}})}}catch(l){console.error("Error fetching best sellers:",l),u.value=i("category.errorLoading")||"Failed to load best sellers."}},J=async()=>{try{const s=(await F.get(`/api/home/new-arrivals/${h.value}`)).data.data.data||[];P.value={title:i("category.newlyarrived")||"New Arrivals",products:s.map(e=>{var n,a;return{id:e.id,name:y.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax||0,price:parseFloat(e.base_price||0).toFixed(2),img:((a=(n=e.media)==null?void 0:n.find(r=>r.name==="product_main_image"))==null?void 0:a.url)||e.key_default_image||f}})}}catch(l){console.error("Error fetching new arrivals:",l),u.value=i("category.errorLoading")||"Failed to load new arrivals."}},K=async()=>{try{const s=(await F.get(`/api/home/exclusive-offers/${h.value}`)).data.data||[];k.value={title:i("category.exclusive")||"Exclusive Offers",products:s.map(e=>{var n,a;return{id:e.id,name:y.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax||0,price:parseFloat(e.base_price||0).toFixed(2),img:((a=(n=e.media)==null?void 0:n.find(r=>r.name==="product_main_image"))==null?void 0:a.url)||e.key_default_image||f}})}}catch(l){console.error("Error fetching exclusive offers:",l),u.value=i("category.errorLoading")||"Failed to load exclusive offers."}},N=async()=>{E.value=!0,u.value=null,await Promise.allSettled([q(),H(),J(),K()]),b.value.length&&await G(),E.value=!1};return Z(()=>{I.params.id&&h.value?N():u.value=i("category.missingParams")||"Missing category or store ID."}),(l,s)=>{var e,n;return o(),_("div",ae,[E.value?(o(),_("div",te,[t("p",se,g(d(i)("category.loading")),1)])):u.value?(o(),_("div",le,[t("p",re,g(u.value),1),t("button",{onClick:N,class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded"},g(d(i)("category.retry")),1)])):(o(),_("div",ne,[t("div",oe,[t("h1",ie,g(v(c.value)),1)]),t("div",null,[t("h2",de,g(d(i)("category.subCategories")),1),S(d(M),{modules:[d(D),d(R)],"slides-per-view":3,"space-between":20,loop:b.value.length>3,autoplay:{delay:3e3,disableOnInteraction:!1},speed:1e3,"grab-cursor":!0,navigation:!1,class:"mt-6 pb-12",breakpoints:{320:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:12},768:{slidesPerView:2,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20}}},{default:V(()=>[(o(!0),_(A,null,O(b.value,a=>(o(),x(d(z),{key:a.id,class:"group flex flex-col items-center cursor-pointer transition-all duration-300 hover:-translate-y-2",onClick:r=>d(T).push(`/categories/${a.id}`)},{default:V(()=>{var r;return[t("div",ce,[t("img",{src:(r=a.media[0])==null?void 0:r.url,alt:`${v(a)} image`,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,me),s[0]||(s[0]=t("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),t("h3",ue,g(v(a)),1)]}),_:2},1032,["onClick"]))),128))]),_:1},8,["modules","loop"])]),(e=c.value.media)!=null&&e.find(a=>a.name==="banner_one_image")?(o(),_("div",_e,[t("div",ge,[t("img",{src:c.value.media.find(a=>a.name==="banner_one_image").url,alt:`${v(c.value)} banner one`,class:"w-full h-64 sm:h-70 md:h-76 object-cover transition-transform duration-700 hover:scale-105",loading:"lazy"},null,8,ve),s[1]||(s[1]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end justify-center p-6"},null,-1))])])):p("",!0),t("section",null,[C.value.products.length?(o(),x(B,{key:0,products:C.value,title:v(c.value)},null,8,["products","title"])):p("",!0),w.value.length?(o(),_("div",pe,[t("h2",fe,g(d(i)("منتجات الفئة")),1),S(d(M),{modules:[d(D),d(R)],"slides-per-view":3,"space-between":20,loop:w.value.length>3,autoplay:{delay:3e3,disableOnInteraction:!1},speed:1e3,"grab-cursor":!0,navigation:!1,class:"mt-6 pb-12",breakpoints:{320:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:12},768:{slidesPerView:2,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20}}},{default:V(()=>[(o(!0),_(A,null,O(w.value,a=>(o(),x(d(z),{key:a.id,class:"group flex flex-col items-center cursor-pointer transition-all duration-300 hover:-translate-y-2"},{default:V(()=>[t("div",ye,[t("img",{src:a.img,alt:`${a.name} image`,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,he),s[2]||(s[2]=t("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),t("h3",xe,g(a.name),1),t("p",be,"$"+g(a.price),1)]),_:2},1024))),128))]),_:1},8,["modules","loop"])])):p("",!0),S(B,{products:w.value,title:k.value.title},null,8,["products","title"]),k.value.products.length?(o(),x(B,{key:2,products:k.value,title:k.value.title},null,8,["products","title"])):p("",!0),$.value.products.length?(o(),x(B,{key:3,products:$.value,title:$.value.title},null,8,["products","title"])):p("",!0),P.value.products.length?(o(),x(B,{key:4,products:P.value,title:P.value.title},null,8,["products","title"])):p("",!0)]),(n=c.value.media)!=null&&n.find(a=>a.name==="banner_two_image")?(o(),_("div",we,[t("div",ke,[t("img",{src:c.value.media.find(a=>a.name==="banner_two_image").url,alt:`${v(c.value)} banner two`,class:"w-full h-64 sm:h-70 md:h-76 object-cover transition-transform duration-700 hover:scale-105",loading:"lazy"},null,8,Fe),s[3]||(s[3]=t("div",{class:"absolute inset-0 bg-gradient-to-b from-transparent to-black/50 flex items-center justify-center p-6"},null,-1))])])):p("",!0)])),S(ee)])}}},Ie=U(Be,[["__scopeId","data-v-ba3eb107"]]);export{Ie as default};
