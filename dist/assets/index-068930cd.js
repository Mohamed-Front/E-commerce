import{a as J,I as K,u as O,r,m as ee,o as ae,Q as te,b as v,c as h,d as o,e as n,w as d,g as e,x,j as le,t as i,F as z,f as se,i as F,S as oe,T as m,U as ne,V as re,W as ie,X as u,p as $,a1 as de,Y as ce,s as pe,z as ue,Z as ge,a0 as ve}from"./index-6e5060df.js";const me={class:"grid"},ye={class:"col-12"},be={class:"card p-4 shadow-2 border-round"},fe={class:"text-2xl font-bold"},_e={class:"flex gap-2"},he={class:"p-input-icon-left"},xe={class:"card shadow-1 surface-0"},ke={class:"text-center py-4"},Ce={class:"text-xl"},we={class:"flex justify-content-center align-items-center py-4"},$e={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ve={class:"p-paginator-left Rd-content"},Pe={class:"p-paginator-current"},Ue={class:"p-paginator-right-content"},Te=["disabled"],De=["disabled"],Ne=["onClick"],Re={key:1,class:"p-paginator-dots"},Se=["disabled"],Ee=["disabled"],Ie={class:"flex align-items-center justify-content-center"},ze={__name:"index",setup(Be){const y={mounted(s,a){}},U=J(),V=K(),{t:l}=O(),k=r(!0),T=r([]),b=r(!1),D=r(null),N=r(null),Q=r({}),C=r(""),R=r(null),p=r(1),P=r(0),g=r(10),w=r(0),W=r(""),A=r(""),S=r(""),E=r(""),I=r(0),B=r(0),M=r([]),f=()=>{k.value=!0,F.get("/api/category",{params:{page:p.value,limit:g.value,search:C.value||void 0}}).then(s=>{T.value=s.data.data.data,P.value=s.data.data.total,w.value=s.data.data.last_page,W.value=s.data.data.first_page_url,A.value=s.data.data.last_page_url,S.value=s.data.data.next_page_url,E.value=s.data.data.prev_page_url,I.value=s.data.data.from,B.value=s.data.data.to,M.value=s.data.data.links,k.value=!1}).catch(s=>{V.add({severity:"error",summary:l("error"),detail:l("category.loadError"),life:3e3}),k.value=!1,console.error("Error fetching categories:",s)})};ee([C,g],()=>{p.value=1,f()});const _=s=>{s>=1&&s<=w.value&&(p.value=s,f())},G=s=>{g.value=s.value,p.value=1,f()},L=s=>{D.value=s,b.value=!0},X=()=>{F.delete(`/api/category/${D.value}`).then(()=>{V.add({severity:"success",summary:l("success"),detail:l("category.deleteSuccess"),life:3e3}),f(),b.value=!1}).catch(s=>{V.add({severity:"error",summary:l("error"),detail:l("category.deleteError"),life:3e3})})},Y=()=>{N.value.exportCSV()},Z=()=>{U.push({name:"category-create"})},q=s=>{U.push({name:"category-update",params:{id:s}})},H=s=>s===1?"success":"info";return ae(()=>{f()}),(s,a)=>{const j=te("tooltip");return v(),h("div",me,[o("div",ye,[o("div",be,[n(e(ne),{class:"mb-4"},{start:d(()=>[o("h2",fe,i(e(l)("category.managementTitle")),1)]),end:d(()=>[o("div",_e,[o("span",he,[a[9]||(a[9]=o("i",{class:"pi pi-search"},null,-1)),n(e(oe),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=t=>C.value=t),placeholder:e(l)("category.search")},null,8,["modelValue","placeholder"])]),x(n(e(m),{label:e(l)("category.export"),icon:"pi pi-upload",class:"p-export",onClick:Y},null,8,["label"]),[[y,"list categories"]]),x(n(e(m),{label:e(l)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[y,"create categories"]])])]),_:1}),n(e(re)),o("div",xe,[x((v(),le(e(ce),{ref_key:"dt",ref:N,value:T.value,selection:R.value,"onUpdate:selection":a[1]||(a[1]=t=>R.value=t),loading:k.value,"data-key":"id",paginator:!1,rows:g.value,filters:Q.value,totalRecords:P.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[o("div",ke,[a[10]||(a[10]=o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),o("p",Ce,i(e(l)("category.noData")),1)])]),loading:d(()=>[o("div",we,[n(e(ie),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(e(u),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(u),{field:"name_en",header:e(l)("category.nameEn"),sortable:!0},{body:d(t=>[$(i(t.data.name_en),1)]),_:1},8,["header"]),n(e(u),{field:"name_ar",header:e(l)("category.nameAr"),sortable:!0},{body:d(t=>[$(i(t.data.name_ar),1)]),_:1},8,["header"]),n(e(u),{field:"is_market",header:e(l)("category.marketType"),sortable:!0},{body:d(t=>[n(e(de),{value:t.data.is_market?e(l)("category.market"):e(l)("category.nonMarket"),severity:H(t.data.is_market)},null,8,["value","severity"])]),_:1},8,["header"]),n(e(u),{field:"parent.name_en",header:e(l)("category.parent"),sortable:!0},{body:d(t=>{var c;return[$(i(((c=t.data.parent)==null?void 0:c.name_en)||e(l)("category.noParent")),1)]}),_:1},8,["header"]),n(e(u),{field:"store.name_en",header:e(l)("category.store"),sortable:!0},{body:d(t=>{var c;return[$(i(((c=t.data.store)==null?void 0:c.name_en)||""),1)]}),_:1},8,["header"]),n(e(u),{header:e(l)("actions"),headerStyle:"width: 12rem"},{body:d(t=>[x(n(e(m),{icon:"pi pi-pencil",class:"p-detail",onClick:c=>q(t.data.id)},null,8,["onClick"]),[[y,"edit categories"],[j,e(l)("edit"),void 0,{top:!0}]]),x(n(e(m),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:c=>L(t.data.id)},null,8,["onClick"]),[[y,"delete categories"],[j,e(l)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","selection","loading","rows","filters","totalRecords"])),[[y,"list categories"]]),o("div",$e,[o("div",Ve,[o("span",Pe,i(e(l)("show"))+" "+i(I.value)+" "+i(e(l)("to"))+" "+i(B.value)+" "+i(e(l)("from"))+" "+i(P.value),1)]),o("div",Ue,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:a[2]||(a[2]=t=>_(1))},a[11]||(a[11]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Te),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!E.value,onClick:a[3]||(a[3]=t=>_(p.value-1))},a[12]||(a[12]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,De),(v(!0),h(z,null,se(M.value,(t,c)=>(v(),h(z,{key:c},[t.label&&!isNaN(parseInt(t.label))?(v(),h("button",{key:0,class:pe(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Me=>_(parseInt(t.label))},i(t.label),11,Ne)):t.label==="..."?(v(),h("span",Re,"...")):ue("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!S.value,onClick:a[4]||(a[4]=t=>_(p.value+1))},a[13]||(a[13]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Se),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===w.value,onClick:a[5]||(a[5]=t=>_(w.value))},a[14]||(a[14]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ee),n(e(ge),{modelValue:g.value,"onUpdate:modelValue":a[6]||(a[6]=t=>g.value=t),options:[5,10,20,30],onChange:G,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(ve),{visible:b.value,"onUpdate:visible":a[8]||(a[8]=t=>b.value=t),style:{width:"450px"},header:e(l)("category.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(e(m),{label:e(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=t=>b.value=!1)},null,8,["label"]),n(e(m),{label:e(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:d(()=>[o("div",Ie,[a[15]||(a[15]=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,i(e(l)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{ze as default};
