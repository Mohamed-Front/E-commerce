import{_ as re,d as ne,I as ie,u as de,r as n,w as ce,e as ue,S as pe,o as f,f as U,g as r,h as o,j as i,k as e,x as h,c as ve,t as d,F as A,i as me,b as L,U as ge,V as p,W as be,X as ye,Y as _e,Z as c,q as D,a3 as fe,$ as G,v as he,z as xe,a0 as ke,a2 as O,a4 as we}from"./index-264675fd.js";const Ce={class:"grid"},$e={class:"col-12"},Ue={class:"card p-4 shadow-2 border-round"},De={class:"text-2xl font-bold"},Ee={class:"flex gap-2"},Re={class:"p-input-icon-left"},Ve={class:"card shadow-1 surface-0"},Le={class:"text-center py-4"},Ne={class:"text-xl"},Pe={class:"flex justify-content-center align-items-center py-4"},Fe={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ie={class:"p-paginator-left-content"},Se={class:"p-paginator-current"},Te={class:"p-paginator-right-content"},Be=["disabled"],je=["disabled"],Me=["onClick"],ze={key:1,class:"p-paginator-dots"},Ae=["disabled"],Ge=["disabled"],Oe={class:"flex align-items-center justify-content-center"},We={class:"flex flex-column gap-3"},qe={__name:"index",setup(Qe){const g={mounted(s,l){}},P=ne(),m=ie(),{t:a}=de(),E=n(!0),F=n([]),x=n(!1),I=n(null),W=n(null),q=n({}),R=n(""),S=n(null),k=n(!1),b=n(null),w=n(!1),v=n(1),N=n(0),y=n(10),V=n(0),Q=n(""),X=n(""),T=n(""),B=n(""),j=n(0),M=n(0),z=n([]),Y=n([{brand_name_ar:"ليستر",brand_name_en:"Luster"},{brand_name_ar:"لوكس",brand_name_en:"Lux"},{brand_name_ar:"مارفلوس",brand_name_en:"Marvelous"}]),_=()=>{E.value=!0,L.get("/api/category",{params:{page:v.value,limit:y.value,search:R.value||void 0}}).then(s=>{F.value=s.data.data.data,N.value=s.data.data.total,V.value=s.data.data.last_page,Q.value=s.data.data.first_page_url,X.value=s.data.data.last_page_url,T.value=s.data.data.next_page_url,B.value=s.data.data.prev_page_url,j.value=s.data.data.from,M.value=s.data.data.to,z.value=s.data.data.links,E.value=!1}).catch(s=>{m.add({severity:"error",summary:a("error"),detail:a("category.loadError"),life:3e3}),E.value=!1,console.error("Error fetching categories:",s)})};ce([R,y],()=>{v.value=1,_()});const C=s=>{s>=1&&s<=V.value&&(v.value=s,_())},Z=s=>{y.value=s.value,v.value=1,_()},H=s=>{I.value=s,x.value=!0},J=()=>{L.delete(`/api/category/${I.value}`).then(()=>{m.add({severity:"success",summary:a("success"),detail:a("category.deleteSuccess"),life:3e3}),_(),x.value=!1}).catch(s=>{m.add({severity:"error",summary:a("error"),detail:a("category.deleteError"),life:3e3})})},K=()=>{L.get("/api/export/brands",{responseType:"blob"}).then(s=>{const l=new Blob([s.data],{type:"text/csv"}),$=window.URL.createObjectURL(l),t=document.createElement("a");t.href=$,t.setAttribute("download","brands_export.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL($)}).catch(s=>{m.add({severity:"error",summary:a("error"),detail:a("category.exportError"),life:3e3}),console.error("Error exporting brands:",s)})},ee=()=>{k.value=!0,b.value=null},ae=s=>{b.value=s.files[0]},te=()=>{if(!b.value){m.add({severity:"warn",summary:a("warning"),detail:a("category.importNoFile"),life:3e3});return}w.value=!0;const s=new FormData;s.append("file",b.value),L.post("/api/import/brands",s).then(()=>{m.add({severity:"success",summary:a("success"),detail:a("category.importSuccess"),life:3e3}),_(),k.value=!1,w.value=!1,b.value=null}).catch(l=>{m.add({severity:"error",summary:a("error"),detail:a("category.importError"),life:3e3}),w.value=!1,console.error("Error importing brands:",l)})},le=()=>{P.push({name:"category-create"})},se=s=>{P.push({name:"category-update",params:{id:s}})},oe=s=>s===1?"success":"info";return ue(()=>{_()}),(s,l)=>{const $=pe("tooltip");return f(),U("div",Ce,[r("div",$e,[r("div",Ue,[o(e(be),{class:"mb-4"},{start:i(()=>[r("h2",De,d(e(a)("category.managementTitle")),1)]),end:i(()=>[r("div",Ee,[r("span",Re,[l[11]||(l[11]=r("i",{class:"pi pi-search"},null,-1)),o(e(ge),{modelValue:R.value,"onUpdate:modelValue":l[0]||(l[0]=t=>R.value=t),placeholder:e(a)("category.search")},null,8,["modelValue","placeholder"])]),h(o(e(p),{label:e(a)("category.import"),icon:"pi pi-download",class:"other",onClick:ee},null,8,["label"]),[[g,"import brands"]]),h(o(e(p),{label:e(a)("category.export"),icon:"pi pi-upload",class:"exite",onClick:K},null,8,["label"]),[[g,"export brands"]]),h(o(e(p),{label:e(a)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:le},null,8,["label"]),[[g,"create categories"]])])]),_:1}),o(e(ye)),r("div",Ve,[h((f(),ve(e(G),{ref_key:"dt",ref:W,value:F.value,selection:S.value,"onUpdate:selection":l[1]||(l[1]=t=>S.value=t),loading:E.value,"data-key":"id",paginator:!1,rows:y.value,filters:q.value,totalRecords:N.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:i(()=>[r("div",Le,[l[12]||(l[12]=r("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),r("p",Ne,d(e(a)("category.noData")),1)])]),loading:i(()=>[r("div",Pe,[o(e(_e),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:i(()=>[o(e(c),{"selection-mode":"multiple","header-style":"width: 3rem"}),o(e(c),{field:"name_en",header:e(a)("id"),sortable:!0},{body:i(t=>[D(d(t.data.id),1)]),_:1},8,["header"]),o(e(c),{field:"name_en",header:e(a)("category.nameEn"),sortable:!0},{body:i(t=>[D(d(t.data.name_en),1)]),_:1},8,["header"]),o(e(c),{field:"name_ar",header:e(a)("category.nameAr"),sortable:!0},{body:i(t=>[D(d(t.data.name_ar),1)]),_:1},8,["header"]),o(e(c),{field:"is_market",header:e(a)("category.marketType"),sortable:!0},{body:i(t=>[o(e(fe),{value:t.data.is_market?e(a)("category.market"):e(a)("category.nonMarket"),severity:oe(t.data.is_market)},null,8,["value","severity"])]),_:1},8,["header"]),o(e(c),{field:"parent.name_en",header:e(a)("category.parent"),sortable:!0},{body:i(t=>{var u;return[D(d(((u=t.data.parent)==null?void 0:u.name_en)||e(a)("category.noParent")),1)]}),_:1},8,["header"]),o(e(c),{field:"store.name_en",header:e(a)("category.store"),sortable:!0},{body:i(t=>{var u;return[D(d(((u=t.data.store)==null?void 0:u.name_en)||""),1)]}),_:1},8,["header"]),o(e(c),{header:e(a)("actions"),"header-style":"width: 12rem"},{body:i(t=>[h(o(e(p),{icon:"pi pi-pencil",class:"p-detail",onClick:u=>se(t.data.id)},null,8,["onClick"]),[[g,"edit categories"],[$,e(a)("edit"),void 0,{top:!0}]]),h(o(e(p),{icon:"pi pi-trash",class:"p-delete",onClick:u=>H(t.data.id)},null,8,["onClick"]),[[g,"delete categories"],[$,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","selection","loading","rows","filters","totalRecords"])),[[g,"list categories"]]),r("div",Fe,[r("div",Ie,[r("span",Se,d(e(a)("show"))+" "+d(j.value)+" "+d(e(a)("to"))+" "+d(M.value)+" "+d(e(a)("from"))+" "+d(N.value),1)]),r("div",Te,[r("button",{class:"p-paginator-first p-paginator-element p-link",disabled:v.value===1,onClick:l[2]||(l[2]=t=>C(1))},l[13]||(l[13]=[r("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Be),r("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!B.value,onClick:l[3]||(l[3]=t=>C(v.value-1))},l[14]||(l[14]=[r("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,je),(f(!0),U(A,null,me(z.value,(t,u)=>(f(),U(A,{key:u},[t.label&&!isNaN(parseInt(t.label))?(f(),U("button",{key:0,class:he(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Xe=>C(parseInt(t.label))},d(t.label),11,Me)):t.label==="..."?(f(),U("span",ze,"...")):xe("",!0)],64))),128)),r("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!T.value,onClick:l[4]||(l[4]=t=>C(v.value+1))},l[15]||(l[15]=[r("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Ae),r("button",{class:"p-paginator-last p-paginator-element p-link",disabled:v.value===V.value,onClick:l[5]||(l[5]=t=>C(V.value))},l[16]||(l[16]=[r("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ge),o(e(ke),{modelValue:y.value,"onUpdate:modelValue":l[6]||(l[6]=t=>y.value=t),options:[5,10,20,30],onChange:Z,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),o(e(O),{visible:x.value,"onUpdate:visible":l[8]||(l[8]=t=>x.value=t),style:{width:"450px"},header:e(a)("category.deleteConfirmTitle"),modal:!0},{footer:i(()=>[o(e(p),{label:e(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[7]||(l[7]=t=>x.value=!1)},null,8,["label"]),o(e(p),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:J},null,8,["label"])]),default:i(()=>[r("div",Oe,[l[17]||(l[17]=r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),r("span",null,d(e(a)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(e(O),{visible:k.value,"onUpdate:visible":l[10]||(l[10]=t=>k.value=t),style:{width:"600px"},header:e(a)("category.importInstructions"),modal:!0},{footer:i(()=>[o(e(we),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:e(a)("category.chooseFile"),onSelect:ae,auto:!1,disabled:w.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),o(e(p),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text mt-3",onClick:l[9]||(l[9]=t=>k.value=!1)},null,8,["label"]),o(e(p),{label:e(a)("import"),icon:"pi pi-check",class:"p-button-success",onClick:te,disabled:!b.value,loading:w.value},null,8,["label","disabled","loading"])]),default:i(()=>[r("div",We,[r("div",null,[o(e(G),{value:Y.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{default:i(()=>[o(e(c),{field:"brand_name_ar",header:e(a)("category.brandNameAr")},null,8,["header"]),o(e(c),{field:"brand_name_en",header:e(a)("category.brandNameEn")},null,8,["header"])]),_:1},8,["value"])])])]),_:1},8,["visible","header"])])])])}}},Ze=re(qe,[["__scopeId","data-v-5e71f011"]]);export{Ze as default};
