import{_ as J,a as O,I as X,u as Y,r as i,m as Z,o as ee,v as c,K as V,b as $,c as te,d as r,e as a,w as l,x as v,j as ae,g as t,i as B,t as p,p as k}from"./index-3d79394e.js";const oe={class:"grid"},se={class:"col-12"},re={class:"card p-4 shadow-2 border-round"},le={class:"text-2xl font-bold"},ne={class:"flex gap-2"},ie={class:"p-input-icon-left"},ce={class:"card shadow-1 surface-0"},de={class:"text-center py-4"},ue={class:"text-xl"},pe={class:"flex justify-content-center align-items-center py-4"},ge={class:"flex align-items-center justify-content-center"},_e={__name:"index",setup(me){const C=O(),w=X(),{t:e}=Y(),y=i(!0),P=i([]),_=i(!1),T=i(null),D=i(null),I=i({}),h=i("");i(null);const f=i(1),R=i(0),b=i(10),L=i(0),x=()=>{y.value=!0,B.get("/api/category",{params:{page:f.value,per_page:b.value,search:h.value||void 0}}).then(s=>{P.value=s.data.data.data,R.value=s.data.data.total,L.value=s.data.data.last_page,f.value=s.data.data.current_page,y.value=!1}).catch(s=>{w.add({severity:"error",summary:e("error"),detail:e("category.loadError"),life:3e3}),y.value=!1,console.error("Error fetching categories:",s)})};Z([h,b],()=>{f.value=1,x()});const E=s=>{f.value=s.page+1,b.value=s.rows,x()},N=s=>{T.value=s,_.value=!0},M=()=>{B.delete(`/api/category/${T.value}`).then(()=>{w.add({severity:"success",summary:e("success"),detail:e("category.deleteSuccess"),life:3e3}),x(),_.value=!1}).catch(s=>{w.add({severity:"error",summary:e("error"),detail:e("category.deleteError"),life:3e3})})},j=()=>{D.value.exportCSV()},U=()=>{C.push({name:"category-create"})},z=s=>{C.push({name:"category-update",params:{id:s}})},A=s=>s===1?"success":"info";return ee(()=>{x()}),(s,n)=>{const F=c("InputText"),g=c("Button"),G=c("Toolbar"),K=c("Toast"),d=c("Column"),Q=c("Tag"),W=c("ProgressSpinner"),q=c("DataTable"),H=c("Dialog"),m=V("can"),S=V("tooltip");return $(),te("div",oe,[r("div",se,[r("div",re,[a(G,{class:"mb-4"},{start:l(()=>[r("h2",le,p(t(e)("category.managementTitle")),1)]),end:l(()=>[r("div",ne,[r("span",ie,[n[3]||(n[3]=r("i",{class:"pi pi-search"},null,-1)),a(F,{modelValue:h.value,"onUpdate:modelValue":n[0]||(n[0]=o=>h.value=o),placeholder:t(e)("category.search")},null,8,["modelValue","placeholder"])]),v(a(g,{label:t(e)("category.export"),icon:"pi pi-upload",class:"p-export",onClick:j},null,8,["label"]),[[m,"list categories"]]),v(a(g,{label:t(e)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:U},null,8,["label"]),[[m,"create categories"]])])]),_:1}),a(K),r("div",ce,[v(($(),ae(q,{ref_key:"dt",ref:D,value:P.value,loading:y.value,"data-key":"id",paginator:!0,rows:b.value,filters:I.value,totalRecords:R.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm",onPage:E},{empty:l(()=>[r("div",de,[n[4]||(n[4]=r("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),r("p",ue,p(t(e)("category.noData")),1)])]),loading:l(()=>[r("div",pe,[a(W,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:l(()=>[a(d,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(d,{field:"name_en",header:t(e)("category.nameEn"),sortable:!0},{body:l(o=>[k(p(o.data.name_en),1)]),_:1},8,["header"]),a(d,{field:"name_ar",header:t(e)("category.nameAr"),sortable:!0},{body:l(o=>[k(p(o.data.name_ar),1)]),_:1},8,["header"]),a(d,{field:"is_market",header:t(e)("category.marketType"),sortable:!0},{body:l(o=>[a(Q,{value:o.data.is_market?t(e)("category.market"):t(e)("category.nonMarket"),severity:A(o.data.is_market)},null,8,["value","severity"])]),_:1},8,["header"]),a(d,{field:"parent.name_en",header:t(e)("category.parent"),sortable:!0},{body:l(o=>{var u;return[k(p(((u=o.data.parent)==null?void 0:u.name_en)||t(e)("category.noParent")),1)]}),_:1},8,["header"]),a(d,{field:"store.name_en",header:t(e)("category.store"),sortable:!0},{body:l(o=>{var u;return[k(p(((u=o.data.store)==null?void 0:u.name_en)||""),1)]}),_:1},8,["header"]),a(d,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:l(o=>[v(a(g,{icon:"pi pi-pencil",class:"p-detail",onClick:u=>z(o.data.id)},null,8,["onClick"]),[[m,"edit categories"],[S,t(e)("edit"),void 0,{top:!0}]]),v(a(g,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:u=>N(o.data.id)},null,8,["onClick"]),[[m,"delete categories"],[S,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[m,"list categories"]])]),a(H,{visible:_.value,"onUpdate:visible":n[2]||(n[2]=o=>_.value=o),style:{width:"450px"},header:t(e)("category.deleteConfirmTitle"),modal:!0},{footer:l(()=>[a(g,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:n[1]||(n[1]=o=>_.value=!1)},null,8,["label"]),a(g,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:M},null,8,["label"])]),default:l(()=>[r("div",ge,[n[5]||(n[5]=r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),r("span",null,p(t(e)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},ye=J(_e,[["__scopeId","data-v-cdb85006"]]);export{ye as default};
