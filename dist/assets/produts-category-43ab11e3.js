import{_ as S,k as j,u as z,j as B,r as o,l as R,m as E,o as M,p as N,a as l,c as i,f as e,t as d,e as v,F as W,d as D,h as V,i as A,s as U}from"./index-4abc91ca.js";import{d as q}from"./banner-addtion-e4104052.js";const G={class:"mx-auto mt-16 max-w-7xl px-4 sm:px-6 lg:px-8 pb-16"},H={key:0,class:"py-16"},J={class:"flex flex-col items-center justify-center space-y-4"},K={class:"text-indigo-600 text-xl font-semibold animate-pulse"},O={key:1,class:"text-center mb-10 py-16 text-red-600"},Q={class:"text-lg font-semibold"},T={key:2},X={class:"font-bold font-sans text-gray-800 lg:mt-4 xs:mt-2 xs:text-lg sm:text-xl md:text-2xl lg:text-3xl text-center animate-fade-in"},Y={class:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-10 mb-10"},Z=["onClick"],ee={class:"w-full h-60 overflow-hidden rounded-t-lg relative"},te=["src","alt"],se={class:"p-4 w-full"},ae={class:"font-sans text-gray-800 font-medium text-base line-clamp-2 h-12"},oe={class:"flex items-center w-full justify-between mt-3"},ne={class:"font-sans text-[#A6853B] font-semibold text-lg"},re={class:"mt-8 bg-white flex justify-center"},le={__name:"produts-category",setup(ie){const b=j(),L=z(),{t:g,locale:h}=B(),y=o(localStorage.getItem("defaultStoreId")),_=o({title:"",products:[]}),f=o(!1),u=o(null),n=o(1),c=o(12),w=o(0),m=o(window.innerWidth>=1024),$=()=>{m.value=window.innerWidth>=1024,c.value=m.value?12:6},p=async(r=1)=>{f.value=!0,u.value=null;try{const t=(await A.get(`/api/home/products-by-category/${b.params.id}/${y.value}`,{params:{page:r,limit:c.value}})).data.data;_.value={title:h.value==="ar"?`منتجات ${t.category.name_ar||t.category.name_en}`:`Products ${t.category.name_en||t.category.name_ar}`,products:(t.products.data||[]).map(s=>{var x,P;return{id:s.id,name:h.value==="ar"?`${s.name_ar||s.name_en} ${s.sub_name_ar||s.sub_name_en}`:`${s.name_en||s.name_ar} ${s.sub_name_en||s.sub_name_ar}`,price:parseFloat(s.base_price||0).toFixed(2),img:((P=(x=s.media)==null?void 0:x.find(F=>F.name==="product_main_image"))==null?void 0:P.url)||s.key_default_image||q}})},n.value=t.products.current_page,w.value=t.products.total}catch(a){console.error("Error fetching products:",a),u.value=g("products.errorLoading")||"Failed to load products."}finally{f.value=!1}},I=R(()=>_.value.products),C=r=>{n.value=r.page+1,p(n.value)},k=()=>{const r=window.innerWidth>=1024;r!==m.value&&(m.value=r,c.value=m.value?12:6,n.value=1,p(n.value))};return E(()=>{b.params.id&&y.value?($(),p(n.value)):u.value=g("products.missingParams")||"Missing category or store ID."}),M(()=>{window.addEventListener("resize",k)}),N(()=>{window.removeEventListener("resize",k)}),(r,a)=>(l(),i("div",G,[f.value?(l(),i("div",H,[e("div",J,[a[1]||(a[1]=e("div",{class:"relative w-24 h-24"},[e("div",{class:"absolute inset-0 rounded-full border-4 border-indigo-500 border-t-transparent animate-spin"}),e("div",{class:"absolute inset-4 rounded-full border-4 border-pink-500 border-b-transparent animate-spin animation-delay-200"}),e("div",{class:"absolute inset-8 rounded-full border-4 border-purple-500 border-l-transparent animate-spin animation-delay-400"})],-1)),e("p",K,d(v(g)("products.loading")),1),a[2]||(a[2]=e("div",{class:"w-1/2 h-2 bg-gray-200 rounded-full overflow-hidden"},[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-pink-500 animate-progress"})],-1))])])):u.value?(l(),i("div",O,[e("p",Q,d(u.value),1),e("button",{onClick:p,class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"},d(v(g)("products.retry")),1)])):(l(),i("div",T,[e("h2",X,d(_.value.title),1),e("div",Y,[(l(!0),i(W,null,D(I.value,(t,s)=>(l(),i("div",{key:t.id,class:"group flex flex-col items-start cursor-pointer h-full bg-white transition-all pb-4 rounded-lg shadow-lg duration-300 hover:-translate-y-2 hover:shadow-xl",onClick:x=>v(L).push({name:"Product-details",params:{id:t.id}})},[e("div",ee,[e("img",{src:t.img,alt:t.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,te),a[3]||(a[3]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),e("div",se,[e("p",ae,d(t.name),1),e("div",oe,[e("span",ne," $"+d(t.price),1)])])],8,Z))),128))]),e("div",re,[V(v(U),{rows:c.value,totalRecords:w.value,pageLinkSize:3,first:(n.value-1)*c.value,onPage:a[0]||(a[0]=t=>C(t)),template:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])]))]))}},ce=S(le,[["__scopeId","data-v-3a44993d"]]);export{ce as default};
