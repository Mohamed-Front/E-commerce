import{u as J,y as K,j as O,r as i,n as ee,o as ae,T as I,a as v,c as h,f as d,h as o,w as n,e,A as y,b as te,t as r,F as j,d as se,i as F,V as le,W as g,X as de,C as oe,Y as ie,Z as c,N as x,a5 as re,$ as ne,q as ue,g as ce,a0 as pe,a2 as ve}from"./index-deb4792e.js";const ge={class:"grid"},fe={class:"col-12"},me={class:"card p-4 shadow-2 border-round"},_e={class:"text-2xl font-bold"},be={class:"flex gap-2"},he={class:"p-input-icon-left"},ye={class:"card shadow-1 surface-0"},xe={class:"text-center py-4"},ke={class:"text-xl"},Ce={class:"flex justify-content-center align-items-center py-4"},we={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},$e={class:"p-paginator-left-content"},Ve={class:"p-paginator-current"},Ne={class:"p-paginator-right-content"},Pe=["disabled"],De=["disabled"],Se=["onClick"],Ue={key:1,class:"p-paginator-dots"},Re=["disabled"],Te=["disabled"],ze={class:"flex align-items-center justify-content-center"},Ie={__name:"index",setup(Ae){const P=J(),$=K(),{t:s}=O(),k=i(!0),D=i([]),f=i(!1),S=i(null),U=i(null),M=i({}),C=i("");i(null);const u=i(1),V=i(0),p=i(10),w=i(0),W=i(""),Y=i(""),R=i(""),T=i(""),z=i(0),A=i(0),B=i([]),m=()=>{k.value=!0,F.get("/api/address",{params:{page:u.value,limit:p.value,search:C.value||void 0}}).then(l=>{D.value=l.data.data.data,V.value=l.data.data.total,w.value=l.data.data.last_page,W.value=l.data.data.first_page_url,Y.value=l.data.data.last_page_url,R.value=l.data.data.next_page_url,T.value=l.data.data.prev_page_url,z.value=l.data.data.from,A.value=l.data.data.to,B.value=l.data.data.links,k.value=!1}).catch(l=>{$.add({severity:"error",summary:s("error"),detail:s("address.loadError"),life:3e3}),k.value=!1,console.error("Error fetching addresses:",l)})};ee([C,p],()=>{u.value=1,m()});const _=l=>{l>=1&&l<=w.value&&(u.value=l,m())},q=l=>{p.value=l.value,u.value=1,m()},G=l=>{S.value=l,f.value=!0},L=()=>{F.delete(`/api/address/${S.value}`).then(()=>{$.add({severity:"success",summary:s("success"),detail:s("address.deleteSuccess"),life:3e3}),m(),f.value=!1}).catch(l=>{$.add({severity:"error",summary:s("error"),detail:s("address.deleteError"),life:3e3})})},Q=()=>{U.value.exportCSV()},X=()=>{P.push({name:"address-create"})},Z=l=>{P.push({name:"address-update",params:{id:l}})},H=l=>l?"success":"info";return ae(()=>{m()}),(l,t)=>{const b=I("can"),E=I("tooltip");return v(),h("div",ge,[d("div",fe,[d("div",me,[o(e(de),{class:"mb-4"},{start:n(()=>[d("h2",_e,r(e(s)("address.managementTitle")),1)]),end:n(()=>[d("div",be,[d("span",he,[t[8]||(t[8]=d("i",{class:"pi pi-search"},null,-1)),o(e(le),{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=a=>C.value=a),placeholder:e(s)("address.search")},null,8,["modelValue","placeholder"])]),y(o(e(g),{label:e(s)("address.export"),icon:"pi pi-upload",class:"p-export",onClick:Q},null,8,["label"]),[[b,"list address"]]),y(o(e(g),{label:e(s)("address.new"),icon:"pi pi-plus",class:"p-button-success",onClick:X},null,8,["label"]),[[b,"create address"]])])]),_:1}),o(e(oe)),d("div",ye,[y((v(),te(e(ne),{ref_key:"dt",ref:U,value:D.value,loading:k.value,"data-key":"id",paginator:!1,rows:p.value,filters:M.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[d("div",xe,[t[9]||(t[9]=d("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),d("p",ke,r(e(s)("address.noData")),1)])]),loading:n(()=>[d("div",Ce,[o(e(ie),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[o(e(c),{"selection-mode":"multiple","header-style":"width: 3rem"}),o(e(c),{field:"address_line_1",header:e(s)("address.line1"),sortable:!0},{body:n(a=>[x(r(a.data.address_line_1),1)]),_:1},8,["header"]),o(e(c),{field:"address_line_2",header:e(s)("address.line2"),sortable:!0},{body:n(a=>[x(r(a.data.address_line_2||"-"),1)]),_:1},8,["header"]),o(e(c),{field:"city",header:e(s)("address.city"),sortable:!0},{body:n(a=>[x(r(a.data.city),1)]),_:1},8,["header"]),o(e(c),{field:"country",header:e(s)("address.country"),sortable:!0},{body:n(a=>[x(r(a.data.country),1)]),_:1},8,["header"]),o(e(c),{field:"zip_code",header:e(s)("address.zipCode"),sortable:!0},{body:n(a=>[x(r(a.data.zip_code||"-"),1)]),_:1},8,["header"]),o(e(c),{field:"is_default",header:e(s)("address.default"),sortable:!0},{body:n(a=>[o(e(re),{value:a.data.is_default?e(s)("address.defaultYes"):e(s)("address.defaultNo"),severity:H(a.data.is_default)},null,8,["value","severity"])]),_:1},8,["header"]),o(e(c),{header:e(s)("actions"),headerStyle:"width: 12rem"},{body:n(a=>[y(o(e(g),{icon:"pi pi-pencil",class:"p-detail",onClick:N=>Z(a.data.id)},null,8,["onClick"]),[[b,"edit address"],[E,e(s)("edit"),void 0,{top:!0}]]),y(o(e(g),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:N=>G(a.data.id)},null,8,["onClick"]),[[b,"delete address"],[E,e(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list address"]]),d("div",we,[d("div",$e,[d("span",Ve,r(e(s)("show"))+" "+r(z.value)+" "+r(e(s)("to"))+" "+r(A.value)+" "+r(e(s)("from"))+" "+r(V.value),1)]),d("div",Ne,[d("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:t[1]||(t[1]=a=>_(1))},t[10]||(t[10]=[d("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Pe),d("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!T.value,onClick:t[2]||(t[2]=a=>_(u.value-1))},t[11]||(t[11]=[d("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,De),(v(!0),h(j,null,se(B.value,(a,N)=>(v(),h(j,{key:N},[a.label&&!isNaN(parseInt(a.label))?(v(),h("button",{key:0,class:ue(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Be=>_(parseInt(a.label))},r(a.label),11,Se)):a.label==="..."?(v(),h("span",Ue,"...")):ce("",!0)],64))),128)),d("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!R.value,onClick:t[3]||(t[3]=a=>_(u.value+1))},t[12]||(t[12]=[d("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Re),d("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===w.value,onClick:t[4]||(t[4]=a=>_(w.value))},t[13]||(t[13]=[d("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Te),o(e(pe),{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value=a),options:[5,10,20,30],onChange:q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),o(e(ve),{visible:f.value,"onUpdate:visible":t[7]||(t[7]=a=>f.value=a),style:{width:"450px"},header:e(s)("address.deleteConfirmTitle"),modal:!0},{footer:n(()=>[o(e(g),{label:e(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=a=>f.value=!1)},null,8,["label"]),o(e(g),{label:e(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:L},null,8,["label"])]),default:n(()=>[d("div",ze,[t[14]||(t[14]=d("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),d("span",null,r(e(s)("address.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{Ie as default};
