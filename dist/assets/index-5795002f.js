import{a as J,I as K,u as O,r as i,m as ee,o as te,Q as j,b as v,c as f,d as o,e as r,w as d,g as e,x,j as ae,t as n,F as z,f as le,i as F,S as se,T as m,U as oe,V as re,W as ie,X as u,p as $,a1 as ne,Y as de,s as ce,z as pe,Z as ue,a0 as ge}from"./index-6e5060df.js";const ve={class:"grid"},me={class:"col-12"},ye={class:"card p-4 shadow-2 border-round"},he={class:"text-2xl font-bold"},_e={class:"flex gap-2"},be={class:"p-input-icon-left"},fe={class:"card shadow-1 surface-0"},xe={class:"text-center py-4"},ke={class:"text-xl"},we={class:"flex justify-content-center align-items-center py-4"},Ce={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},$e={class:"p-paginator-left-content"},Ve={class:"p-paginator-current"},Pe={class:"p-paginator-right-content"},Te=["disabled"],Ue=["disabled"],De=["onClick"],Ne={key:1,class:"p-paginator-dots"},Se=["disabled"],Ee=["disabled"],Re={class:"flex align-items-center justify-content-center"},je={__name:"index",setup(Ie){const T=J(),V=K(),{t:a}=O(),k=i(!0),U=i([]),y=i(!1),D=i(null),N=i(null),Q=i({}),w=i("");i(null);const c=i(1),P=i(0),g=i(10),C=i(0),W=i(""),A=i(""),S=i(""),E=i(""),R=i(0),I=i(0),B=i([]),h=()=>{k.value=!0,F.get("/api/category",{params:{page:c.value,limit:g.value,search:w.value||void 0}}).then(s=>{U.value=s.data.data.data,P.value=s.data.data.total,C.value=s.data.data.last_page,W.value=s.data.data.first_page_url,A.value=s.data.data.last_page_url,S.value=s.data.data.next_page_url,E.value=s.data.data.prev_page_url,R.value=s.data.data.from,I.value=s.data.data.to,B.value=s.data.data.links,c.value=s.data.data.current_page,k.value=!1}).catch(s=>{V.add({severity:"error",summary:a("error"),detail:a("category.loadError"),life:3e3}),k.value=!1,console.error("Error fetching categories:",s)})};ee([w,g],()=>{c.value=1,h()});const _=s=>{s>=1&&s<=C.value&&(c.value=s,h())},G=s=>{g.value=s.value,c.value=1,h()},L=s=>{D.value=s,y.value=!0},X=()=>{F.delete(`/api/category/${D.value}`).then(()=>{V.add({severity:"success",summary:a("success"),detail:a("category.deleteSuccess"),life:3e3}),h(),y.value=!1}).catch(s=>{V.add({severity:"error",summary:a("error"),detail:a("category.deleteError"),life:3e3}),console.error("Error deleting category:",s)})},Y=()=>{N.value.exportCSV()},Z=()=>{T.push({name:"category-create"})},q=s=>{T.push({name:"category-update",params:{id:s}})},H=s=>s===1?"success":"info";return te(()=>{h()}),(s,l)=>{const b=j("can"),M=j("tooltip");return v(),f("div",ve,[o("div",me,[o("div",ye,[r(e(oe),{class:"mb-4"},{start:d(()=>[o("h2",he,n(e(a)("category.managementTitle")),1)]),end:d(()=>[o("div",_e,[o("span",be,[l[8]||(l[8]=o("i",{class:"pi pi-search"},null,-1)),r(e(se),{modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=t=>w.value=t),placeholder:e(a)("category.search")},null,8,["modelValue","placeholder"])]),x(r(e(m),{label:e(a)("category.export"),icon:"pi pi-upload",class:"p-export",onClick:Y},null,8,["label"]),[[b,"list categories"]]),x(r(e(m),{label:e(a)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[b,"create categories"]])])]),_:1}),r(e(re)),o("div",fe,[x((v(),ae(e(de),{ref_key:"dt",ref:N,value:U.value,loading:k.value,"data-key":"id",paginator:!1,rows:g.value,filters:Q.value,totalRecords:P.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[o("div",xe,[l[9]||(l[9]=o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),o("p",ke,n(e(a)("category.noData")),1)])]),loading:d(()=>[o("div",we,[r(e(ie),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[r(e(u),{"selection-mode":"multiple","header-style":"width: 3rem"}),r(e(u),{field:"name_en",header:e(a)("category.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[$(n(t.data.name_en),1)]),_:1},8,["header"]),r(e(u),{field:"name_ar",header:e(a)("category.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[$(n(t.data.name_ar),1)]),_:1},8,["header"]),r(e(u),{field:"is_market",header:e(a)("category.marketType"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[r(e(ne),{value:t.data.is_market?e(a)("category.market"):e(a)("category.nonMarket"),severity:H(t.data.is_market)},null,8,["value","severity"])]),_:1},8,["header"]),r(e(u),{field:"parent.name_en",header:e(a)("category.parent"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>{var p;return[$(n(((p=t.data.parent)==null?void 0:p.name_en)||e(a)("category.noParent")),1)]}),_:1},8,["header"]),r(e(u),{field:"store.name_en",header:e(a)("category.store"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>{var p;return[$(n(((p=t.data.store)==null?void 0:p.name_en)||e(a)("category.noStore")),1)]}),_:1},8,["header"]),r(e(u),{header:e(a)("actions"),"header-style":"width:12rem;"},{body:d(t=>[x(r(e(m),{icon:"pi pi-pencil",class:"p-detail",onClick:p=>q(t.data.id)},null,8,["onClick"]),[[b,"edit categories"],[M,e(a)("edit"),void 0,{top:!0}]]),x(r(e(m),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:p=>L(t.data.id)},null,8,["onClick"]),[[b,"delete categories"],[M,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list categories"]]),o("div",Ce,[o("div",$e,[o("span",Ve,n(e(a)("show"))+" "+n(R.value)+" "+n(e(a)("to"))+" "+n(I.value)+" "+n(e(a)("from"))+" "+n(P.value),1)]),o("div",Pe,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:l[1]||(l[1]=t=>_(1))},l[10]||(l[10]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Te),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!E.value,onClick:l[2]||(l[2]=t=>_(c.value-1))},l[11]||(l[11]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Ue),(v(!0),f(z,null,le(B.value,(t,p)=>(v(),f(z,{key:p},[t.label&&!isNaN(parseInt(t.label))?(v(),f("button",{key:0,class:ce(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Be=>_(parseInt(t.label))},n(t.label),11,De)):t.label==="..."?(v(),f("span",Ne,"...")):pe("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!S.value,onClick:l[3]||(l[3]=t=>_(c.value+1))},l[12]||(l[12]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Se),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===C.value,onClick:l[4]||(l[4]=t=>_(C.value))},l[13]||(l[13]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ee),r(e(ue),{modelValue:g.value,"onUpdate:modelValue":l[5]||(l[5]=t=>g.value=t),options:[5,10,20,30],onChange:G,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),r(e(ge),{visible:y.value,"onUpdate:visible":l[7]||(l[7]=t=>y.value=t),style:{width:"450px"},header:e(a)("category.deleteConfirmTitle"),modal:!0},{footer:d(()=>[r(e(m),{label:e(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[6]||(l[6]=t=>y.value=!1)},null,8,["label"]),r(e(m),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:d(()=>[o("div",Re,[l[14]||(l[14]=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,n(e(a)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{je as default};
