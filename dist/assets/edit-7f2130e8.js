import{_ as I,u as R,k as S,A as D,j as M,r as b,o as z,a as c,c as m,f as r,t as u,v as A,B as f,h as _,x as g,e as n,g as h,w as E,F as G,i as $,a1 as q,R as T,T as C,O as H}from"./index-e54ddec3.js";const J={class:"max-w-3xl mx-auto p-6 bg-white rounded-xl shadow-lg"},K={id:"form-title",class:"text-3xl font-bold text-center mb-8 text-gray-800",role:"heading","aria-level":"1"},P={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Q={class:"space-y-2"},W={for:"store_id",class:"block text-sm font-medium text-gray-700"},X={key:0,id:"store_id_error",class:"text-red-500"},Y={class:"space-y-2"},Z={for:"type",class:"block text-sm font-medium text-gray-700"},ee={key:0,id:"type_error",class:"text-red-500"},ae={class:"space-y-2"},se={for:"name_ar",class:"block text-sm font-medium text-gray-700"},te={key:0,id:"name_ar_error",class:"text-red-500"},re={class:"space-y-2"},le={for:"name_en",class:"block text-sm font-medium text-gray-700"},oe={key:0,id:"name_en_error",class:"text-red-500"},de={class:"space-y-2"},ue={for:"row_type",class:"block text-sm font-medium text-gray-700"},ie={key:0,id:"row_type_error",class:"text-red-500"},ne={class:"pt-4 flex justify-center space-x-4"},ce={key:0},me={key:1,class:"pi pi-spinner pi-spin"},_e={__name:"edit",setup(be){const v=R(),V=S(),i=D(),{t:a}=M(),d=b(!1),p=b(!1),w=b(!1),k=b([]),x=b([]),t=b({}),l=b({store_id:null,type:null,name_ar:"",name_en:"",row_type:null}),j=[{label:a("custom_tabs.categories"),value:1},{label:a("custom_tabs.products"),value:2}],B=[{label:a("custom_tabs.single_row"),value:1},{label:a("custom_tabs.double_rows"),value:2}],L=async()=>{var s;w.value=!0;try{const e=await $.get("/api/store");x.value=((s=e.data)==null?void 0:s.data.data)||[],x.value.length||i.add({severity:"warn",summary:a("warning"),detail:a("custom_tabs.no_stores_found"),life:3e3})}catch{x.value=[],i.add({severity:"error",summary:a("error"),detail:a("custom_tabs.fetch_stores_failed"),life:3e3})}finally{w.value=!1}},U=async()=>{var s;p.value=!0;try{const e=await $.get("/api/custom-tabs");k.value=((s=e.data)==null?void 0:s.data.data)||[],k.value.length||i.add({severity:"warn",summary:a("warning"),detail:a("custom_tabs.no_tabs_found"),life:3e3})}catch{k.value=[],i.add({severity:"error",summary:a("error"),detail:a("custom_tabs.fetch_failed"),life:3e3})}finally{p.value=!1}},F=async s=>{var e;d.value=!0;try{const y=(e=(await $.get(`/api/custom-tabs/${s}`)).data)==null?void 0:e.data;y?l.value={store_id:y.store_id,type:y.type,name_ar:y.name_ar,name_en:y.name_en,row_type:y.row_type}:(i.add({severity:"error",summary:a("error"),detail:a("custom_tabs.tab_not_found"),life:3e3}),v.push({name:"custom-tabs"}))}catch{i.add({severity:"error",summary:a("error"),detail:a("custom_tabs.fetch_failed"),life:3e3}),v.push({name:"custom-tabs"})}finally{d.value=!1}},N=()=>(t.value={},l.value.store_id||(t.value.store_id=a("custom_tabs.store_id_required")),[1,2].includes(l.value.type)||(t.value.type=a("custom_tabs.type_required")),l.value.name_ar||(t.value.name_ar=a("custom_tabs.name_ar_required")),l.value.name_en||(t.value.name_en=a("custom_tabs.name_en_required")),[1,2].includes(l.value.row_type)||(t.value.row_type=a("custom_tabs.row_type_required")),Object.keys(t.value).length===0),O=async()=>{var s,e;if(!N()){i.add({severity:"error",summary:a("error"),detail:a("custom_tabs.update_failed"),life:3e3});return}d.value=!0;try{await $.put(`/api/custom-tabs/${V.params.id}`,l.value),v.push({name:"custom-tabs"}),i.add({severity:"success",summary:a("success"),detail:a("custom_tabs.updated_successfully"),life:3e3})}catch(o){i.add({severity:"error",summary:a("error"),detail:((e=(s=o.response)==null?void 0:s.data)==null?void 0:e.message)||a("custom_tabs.update_failed"),life:3e3})}finally{d.value=!1}};return z(()=>{L(),U(),V.params.id?F(V.params.id):(i.add({severity:"error",summary:a("error"),detail:a("custom_tabs.invalid_id"),life:3e3}),v.push({name:"custom-tabs"}))}),(s,e)=>(c(),m(G,null,[r("div",J,[r("h1",K,u(s.$t("custom_tabs.edit_tab")),1),r("form",{onSubmit:A(O,["prevent"]),class:"space-y-6",role:"form","aria-labelledby":"form-title"},[r("div",P,[r("div",Q,[r("label",W,[f(u(s.$t("custom_tabs.store_id"))+" ",1),e[6]||(e[6]=r("span",{class:"text-red-500"},"*",-1))]),_(n(q),{filter:"",id:"store_id",modelValue:l.value.store_id,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.store_id=o),options:x.value,optionLabel:"name_en",optionValue:"id",placeholder:w.value?s.$t("loading"):s.$t("custom_tabs.select_store"),disabled:w.value||d.value,class:g(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":t.value.store_id}]),"aria-describedby":"store_id_error",required:""},null,8,["modelValue","options","placeholder","disabled","class"]),t.value.store_id?(c(),m("small",X,u(t.value.store_id),1)):h("",!0)]),r("div",Y,[r("label",Z,[f(u(s.$t("custom_tabs.type"))+" ",1),e[7]||(e[7]=r("span",{class:"text-red-500"},"*",-1))]),_(n(q),{filter:"",id:"type",modelValue:l.value.type,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.type=o),options:j,optionLabel:"label",optionValue:"value",placeholder:p.value?s.$t("loading"):s.$t("custom_tabs.select_type"),disabled:p.value||d.value,class:g(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":t.value.type}]),"aria-describedby":"type_error",required:""},null,8,["modelValue","placeholder","disabled","class"]),t.value.type?(c(),m("small",ee,u(t.value.type),1)):h("",!0)]),r("div",ae,[r("label",se,[f(u(s.$t("custom_tabs.name_ar"))+" ",1),e[8]||(e[8]=r("span",{class:"text-red-500"},"*",-1))]),_(n(T),{id:"name_ar",modelValue:l.value.name_ar,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.name_ar=o),placeholder:s.$t("custom_tabs.enter_name_ar"),class:g(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":t.value.name_ar}]),disabled:d.value,"aria-describedby":"name_ar_error",required:""},null,8,["modelValue","placeholder","class","disabled"]),t.value.name_ar?(c(),m("small",te,u(t.value.name_ar),1)):h("",!0)]),r("div",re,[r("label",le,[f(u(s.$t("custom_tabs.name_en"))+" ",1),e[9]||(e[9]=r("span",{class:"text-red-500"},"*",-1))]),_(n(T),{id:"name_en",modelValue:l.value.name_en,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.name_en=o),placeholder:s.$t("custom_tabs.enter_name_en"),class:g(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":t.value.name_en}]),disabled:d.value,"aria-describedby":"name_en_error",required:""},null,8,["modelValue","placeholder","class","disabled"]),t.value.name_en?(c(),m("small",oe,u(t.value.name_en),1)):h("",!0)]),r("div",de,[r("label",ue,[f(u(s.$t("custom_tabs.row_type"))+" ",1),e[10]||(e[10]=r("span",{class:"text-red-500"},"*",-1))]),_(n(q),{id:"row_type",modelValue:l.value.row_type,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.row_type=o),options:B,optionLabel:"label",optionValue:"value",placeholder:p.value?s.$t("loading"):s.$t("custom_tabs.select_row_type"),disabled:p.value||d.value,class:g(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":t.value.row_type}]),"aria-describedby":"row_type_error",required:""},null,8,["modelValue","placeholder","disabled","class"]),t.value.row_type?(c(),m("small",ie,u(t.value.row_type),1)):h("",!0)])]),r("div",ne,[_(n(C),{type:"submit",label:s.$t("custom_tabs.update_tab"),icon:"pi pi-check",loading:d.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:d.value},{default:E(()=>[d.value?(c(),m("i",me)):(c(),m("span",ce,u(s.$t("custom_tabs.update_tab")),1))]),_:1},8,["label","loading","disabled"]),_(n(C),{type:"button",label:s.$t("cancel"),icon:"pi pi-times",class:"px-8 py-3 mx-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",onClick:e[5]||(e[5]=o=>n(v).push({name:"custom-tabs"})),disabled:d.value},null,8,["label","disabled"])])],32)]),_(n(H))],64))}},ye=I(_e,[["__scopeId","data-v-d35446fb"]]);export{ye as default};
