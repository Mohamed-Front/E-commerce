import{p as ee,v as se,s as te,L as oe,r as c,o as ae,d as _,z as le,e as r,f as n,B as re,i,w as M,J as k,F as ne,b as V,h as e,t as v,n as g,D as de,E as ie,G as ue,m as p}from"./index-e42b945c.js";const a=h=>(ie("data-v-30978b5b"),h=h(),ue(),h),ce={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},pe=a(()=>e("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Edit User",-1)),me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"space-y-2"},ve=a(()=>e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},[p(" Name "),e("span",{class:"text-red-500"},"*")],-1)),ge={key:0,class:"text-red-500 text-xs"},be={class:"space-y-2"},fe=a(()=>e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},[p(" Phone "),e("span",{class:"text-red-500"},"*")],-1)),he={key:0,class:"text-red-500 text-xs"},xe={class:"space-y-2"},ye=a(()=>e("label",{for:"type",class:"block text-sm font-medium text-gray-700"},[p(" Type "),e("span",{class:"text-red-500"},"*")],-1)),we={key:0,class:"text-red-500 text-xs"},ke={class:"space-y-2"},Ve=a(()=>e("label",{for:"role",class:"block text-sm font-medium text-gray-700"},[p(" Role "),e("span",{class:"text-red-500"},"*")],-1)),De={key:0,class:"text-red-500 text-xs"},Ue={class:"space-y-2"},Ce=a(()=>e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},[p(" Email "),e("span",{class:"text-red-500"},"*")],-1)),Ie={key:0,class:"text-red-500 text-xs"},Fe={class:"space-y-2"},Pe=a(()=>e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},[p(" Password "),e("span",{class:"text-red-500"},"*")],-1)),Se={key:0,class:"text-red-500 text-xs"},Te={class:"md:col-span-2 space-y-2"},Be=a(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Profile Image",-1)),Ee={class:"flex justify-center"},Re=["onDragover","onDrop"],je={key:0,class:"p-4"},Ne={class:"relative group"},Ge=["src"],Le={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Me={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},ze=["onClick"],Ae=a(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Je=[Ae],Oe=a(()=>e("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[e("i",{class:"pi pi-pencil text-sm"})],-1)),$e=a(()=>e("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change photo",-1)),qe={key:1,class:"p-8 flex flex-col items-center justify-center"},He=a(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Ke=a(()=>e("p",{class:"text-sm text-center text-gray-600 mb-1"},[e("span",{class:"text-blue-500 font-medium"},"Click to upload"),p(" or drag and drop ")],-1)),Qe=a(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1)),We=[He,Ke,Qe],Xe={class:"pt-4 flex justify-center"},Ye={key:0},Ze={key:1,class:"pi pi-spinner pi-spin"},es={setup(h){const z=se(),D=te(),{t:A}=oe(),l=c(),m=c(!1),U=c([]),x=c(null),y=c(null),b=c(!1),t=c({name:"",phone:"",type:null,role_id:null,email:"",password:""}),J=async()=>{try{const s=await V.get("api/role");U.value=s.data.data.data,H()}catch(s){console.error("Error fetching roles:",s)}},O=s=>{s.preventDefault(),b.value=!0},$=()=>{b.value=!1},q=s=>{x.value=s;const o=new FileReader;o.onload=u=>{y.value=u.target.result},o.readAsDataURL(s),b.value=!1},C=s=>{var u,f,w;const o=((u=s.target.files)==null?void 0:u[0])||((w=(f=s.dataTransfer)==null?void 0:f.files)==null?void 0:w[0]);o&&o.type.match("image.*")&&q(o)},H=()=>{V.get(`api/user/${D.currentRoute._value.params.id}`).then(s=>{t.value.name=s.data.data.name,t.value.email=s.data.data.email,t.value.phone=s.data.data.phone,t.value.type=s.data.data.type})},K=()=>{x.value=null,y.value=null},Q=async()=>{m.value=!0;const s=new FormData;s.append("name",t.value.name),s.append("phone",t.value.phone),s.append("type",t.value.type),s.append("role_id",t.value.role_id),s.append("email",t.value.email),s.append("password",t.value.password),x.value&&s.append("image",x.value),V.post("/api/user",s).then(o=>{router.push({name:"users"}),m.value=!1}).catch(o=>{console.error("Error:",o),z.add({severity:"error",summary:A("error"),detail:o.response.data.message,life:3e3}),m.value=!1})};return ae(()=>{J(),console.log(D)}),(s,o)=>{const u=_("InputText"),f=_("Dropdown"),w=_("Password"),W=_("Button"),X=_("Form"),Y=_("Toast"),Z=le("can");return r(),n(ne,null,[re((r(),n("div",ce,[pe,i(X,{ref_key:"form",ref:l,model:t.value,rules:s.rules,onSubmit:k(Q,["prevent"]),class:"space-y-6"},{default:M(()=>{var I,F,P,S,T,B,E,R,j,N,G,L;return[e("div",me,[e("div",_e,[ve,i(u,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=d=>t.value.name=d),placeholder:"Enter full name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(F=(I=l.value)==null?void 0:I.errors)!=null&&F.name?(r(),n("small",ge,v(l.value.errors.name[0].message),1)):g("",!0)]),e("div",be,[fe,i(u,{id:"phone",modelValue:t.value.phone,"onUpdate:modelValue":o[1]||(o[1]=d=>t.value.phone=d),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(S=(P=l.value)==null?void 0:P.errors)!=null&&S.phone?(r(),n("small",he,v(l.value.errors.phone[0].message),1)):g("",!0)]),e("div",xe,[ye,i(f,{id:"type",modelValue:t.value.type,"onUpdate:modelValue":o[2]||(o[2]=d=>t.value.type=d),options:[{label:"Admin",value:1},{label:"Manager",value:2},{label:"User",value:3}],optionLabel:"label",optionValue:"value",placeholder:"Select user type",class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(B=(T=l.value)==null?void 0:T.errors)!=null&&B.type?(r(),n("small",we,v(l.value.errors.type[0].message),1)):g("",!0)]),e("div",ke,[Ve,i(f,{id:"role",modelValue:t.value.role_id,"onUpdate:modelValue":o[3]||(o[3]=d=>t.value.role_id=d),options:U.value,optionLabel:"name",optionValue:"id",placeholder:"Select role",class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options"]),(R=(E=l.value)==null?void 0:E.errors)!=null&&R.role_id?(r(),n("small",De,v(l.value.errors.role_id[0].message),1)):g("",!0)]),e("div",Ue,[Ce,i(u,{id:"email",modelValue:t.value.email,"onUpdate:modelValue":o[4]||(o[4]=d=>t.value.email=d),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(N=(j=l.value)==null?void 0:j.errors)!=null&&N.email?(r(),n("small",Ie,v(l.value.errors.email[0].message),1)):g("",!0)]),e("div",Fe,[Pe,i(w,{id:"password",modelValue:t.value.password,"onUpdate:modelValue":o[5]||(o[5]=d=>t.value.password=d),placeholder:"••••••••",toggleMask:"",feedback:!1,inputClass:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",class:"w-full"},null,8,["modelValue"]),(L=(G=l.value)==null?void 0:G.errors)!=null&&L.password?(r(),n("small",Se,v(l.value.errors.password[0].message),1)):g("",!0)]),e("div",Te,[Be,e("div",Ee,[e("label",{onDragover:k(O,["prevent"]),onDragleave:$,onDrop:k(C,["prevent"]),class:de([{"border-blue-500 bg-blue-50":b.value,"border-gray-300":!b.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:C,accept:"image/*",class:"hidden"},null,32),y.value?(r(),n("div",je,[e("div",Ne,[e("img",{src:y.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ge),e("div",Le,[e("div",Me,[e("button",{type:"button",onClick:k(K,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Je,8,ze),Oe])])]),$e])):(r(),n("div",qe,We))],42,Re)])])]),e("div",Xe,[i(W,{type:"submit",label:"Create User",icon:"pi pi-user-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:m.value},{default:M(()=>[m.value?(r(),n("i",Ze)):(r(),n("span",Ye,"Create User"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules","onSubmit"])])),[[Z,"edit users"]]),i(Y)],64)}}},ts=ee(es,[["__scopeId","data-v-30978b5b"]]);export{ts as default};
