import{b as H,L as J,u as K,r as o,w as O,d as ee,V as j,o as m,e as f,f as a,g as n,i as r,j as e,z as x,c as te,t as d,F as z,h as ae,a as F,X as le,Y as v,Z as se,$ as oe,a0 as ne,a1 as y,s as P,a2 as ie,x as de,B as re,a3 as ce,a5 as pe}from"./index-b794012a.js";const ue={class:"grid"},me={class:"col-12"},ve={class:"card p-4 shadow-2 border-round"},_e={class:"text-2xl font-bold"},he={class:"flex gap-2"},ge={class:"p-input-icon-left"},be=a("i",{class:"pi pi-search"},null,-1),fe={class:"card shadow-1 surface-0"},xe={class:"text-center py-4"},ye=a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1),ke={class:"text-xl"},we={class:"flex justify-content-center align-items-center py-4"},Ce={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},$e={class:"p-paginator-left-content"},Ve={class:"p-paginator-current"},Pe={class:"p-paginator-right-content"},De=["disabled"],Ne=a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1),Ue=[Ne],Be=["disabled"],Ee=a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1),Re=[Ee],Me=["onClick"],Te={key:1,class:"p-paginator-dots"},Ie=["disabled"],Se=a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1),je=[Se],ze=["disabled"],Fe=a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1),Le=[Fe],Ae={class:"flex align-items-center justify-content-center"},Ge=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1),Ye={setup(Qe){const D=H(),$=J(),{t:l}=K(),k=o(!0),N=o([]),_=o(!1),U=o(null),B=o(null),L=o({}),w=o("");o(null);const c=o(1),V=o(0),p=o(10),C=o(0),A=o(""),G=o(""),E=o(""),R=o(""),M=o(0),T=o(0),I=o([]),h=()=>{k.value=!0,F.get("/api/model",{params:{page:c.value,limit:p.value,search:w.value||void 0}}).then(s=>{N.value=s.data.data.data,V.value=s.data.data.total,C.value=s.data.data.last_page,A.value=s.data.data.first_page_url,G.value=s.data.data.last_page_url,E.value=s.data.data.next_page_url,R.value=s.data.data.prev_page_url,M.value=s.data.data.from,T.value=s.data.data.to,I.value=s.data.data.links,k.value=!1}).catch(s=>{$.add({severity:"error",summary:l("error"),detail:l("model.loadError"),life:3e3}),k.value=!1,console.error("Error fetching models:",s)})};O([w,p],()=>{c.value=1,h()});const g=s=>{s>=1&&s<=C.value&&(c.value=s,h())},Q=s=>{p.value=s.value,c.value=1,h()},W=s=>{U.value=s,_.value=!0},X=()=>{F.delete(`/api/model/${U.value}`).then(()=>{$.add({severity:"success",summary:l("success"),detail:l("model.deleteSuccess"),life:3e3}),h(),_.value=!1}).catch(s=>{$.add({severity:"error",summary:l("error"),detail:l("model.deleteError"),life:3e3}),console.error("Error deleting model:",s)})},Y=()=>{B.value.exportCSV()},Z=()=>{D.push({name:"model-create"})},q=s=>{D.push({name:"model-edit",params:{id:s}})};return ee(()=>{h()}),(s,i)=>{const b=j("can"),S=j("tooltip");return m(),f("div",ue,[a("div",me,[a("div",ve,[n(e(se),{class:"mb-4"},{start:r(()=>[a("h2",_e,d(e(l)("model.managementTitle")),1)]),end:r(()=>[a("div",he,[a("span",ge,[be,n(e(le),{modelValue:w.value,"onUpdate:modelValue":i[0]||(i[0]=t=>w.value=t),placeholder:e(l)("model.search")},null,8,["modelValue","placeholder"])]),x(n(e(v),{label:e(l)("model.export"),icon:"pi pi-upload",class:"p-export",onClick:Y},null,8,["label"]),[[b,"list models"]]),x(n(e(v),{label:e(l)("model.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[b,"create models"]])])]),_:1}),n(e(oe)),a("div",fe,[x((m(),te(e(ie),{ref_key:"dt",ref:B,value:N.value,loading:k.value,"data-key":"id",paginator:!1,rows:p.value,filters:L.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[a("div",xe,[ye,a("p",ke,d(e(l)("model.noData")),1)])]),loading:r(()=>[a("div",we,[n(e(ne),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[n(e(y),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(y),{field:"name_ar",header:e(l)("model.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[P(d(t.data.name_ar),1)]),_:1},8,["header"]),n(e(y),{field:"name_en",header:e(l)("model.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[P(d(t.data.name_en),1)]),_:1},8,["header"]),n(e(y),{field:"brand.name_en",header:e(l)("model.brand"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>{var u;return[P(d(((u=t.data.brand)==null?void 0:u.name_en)||e(l)("model.noBrand")),1)]}),_:1},8,["header"]),n(e(y),{header:e(l)("actions"),"header-style":"width: 12rem"},{body:r(t=>[x(n(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:u=>q(t.data.id)},null,8,["onClick"]),[[b,"edit models"],[S,e(l)("edit"),void 0,{top:!0}]]),x(n(e(v),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:u=>W(t.data.id)},null,8,["onClick"]),[[b,"delete models"],[S,e(l)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list models"]]),a("div",Ce,[a("div",$e,[a("span",Ve,d(e(l)("show"))+" "+d(M.value)+" "+d(e(l)("to"))+" "+d(T.value)+" "+d(e(l)("from"))+" "+d(V.value),1)]),a("div",Pe,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:i[1]||(i[1]=t=>g(1))},Ue,8,De),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!R.value,onClick:i[2]||(i[2]=t=>g(c.value-1))},Re,8,Be),(m(!0),f(z,null,ae(I.value,(t,u)=>(m(),f(z,{key:u},[t.label&&!isNaN(parseInt(t.label))?(m(),f("button",{key:0,class:de(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:We=>g(parseInt(t.label))},d(t.label),11,Me)):t.label==="..."?(m(),f("span",Te,"...")):re("",!0)],64))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!E.value,onClick:i[3]||(i[3]=t=>g(c.value+1))},je,8,Ie),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===C.value,onClick:i[4]||(i[4]=t=>g(C.value))},Le,8,ze),n(e(ce),{filter:"",modelValue:p.value,"onUpdate:modelValue":i[5]||(i[5]=t=>p.value=t),options:[5,10,20,30],onChange:Q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(pe),{visible:_.value,"onUpdate:visible":i[7]||(i[7]=t=>_.value=t),style:{width:"450px"},header:e(l)("model.deleteConfirmTitle"),modal:!0},{footer:r(()=>[n(e(v),{label:e(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:i[6]||(i[6]=t=>_.value=!1)},null,8,["label"]),n(e(v),{label:e(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:r(()=>[a("div",Ae,[Ge,a("span",null,d(e(l)("model.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{Ye as default};
