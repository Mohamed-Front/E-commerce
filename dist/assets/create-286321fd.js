import{p as G,x as R,r as u,o as q,B as A,D as k,e as n,f as i,h as e,I as E,t as c,F as _,k as y,J as T,n as I,b as V,K as P,q as F,s as L,m as J}from"./index-37defb63.js";const g=m=>(F("data-v-fd925fd2"),m=m(),L(),m),K={class:"permission-manager"},O=g(()=>e("h1",null,"Role Permissions Manager",-1)),j={class:"controls"},z={class:"name-input"},H=g(()=>e("label",{for:"roleName"},[J(" Role Name "),e("span",{class:"required"},"*")],-1)),Q={key:0,class:"loading"},W={key:0,class:"table-view"},X=g(()=>e("thead",null,[e("tr",null,[e("th",null,"Group"),e("th",null,"Permission"),e("th",null,"Description"),e("th",null,"Select")])],-1)),Y=["rowspan"],Z=["id","checked",".indeterminate","onChange"],N=["for"],ee=["onClick","disabled"],te=["id","value"],se={key:1,class:"card-view"},oe={class:"permission-groups"},le={class:"group-header"},ne=["id","checked",".indeterminate","onChange"],ie=["for"],ae={class:"permission-items"},de={class:"permission-info"},ce=["id","value"],re=["for"],ue=["onClick","disabled"],ve=["disabled"],pe={class:"modal-content"},_e=g(()=>e("h3",null,"Permission Description",-1)),he={setup(m){const M=R(),v=u({}),w=u(!0),a=u([]),h=u(""),f=u(!1),C=u(""),b=u(!1),U=()=>{V.get("api/role/get/permissions").then(d=>{v.value=d.data.data,w.value=!1})},x=(d,s)=>{const l=(v.value[d]||[]).map(t=>t.id);s.target.checked?a.value=[...new Set([...a.value,...l])]:a.value=a.value.filter(t=>!l.includes(t))},D=d=>{const s=v.value[d]||[];return s.length===0?!1:s.every(p=>a.value.includes(p.id))},S=d=>{const s=v.value[d]||[];if(s.length===0)return!1;const p=s.some(t=>a.value.includes(t.id)),l=s.every(t=>a.value.includes(t.id));return p&&!l},$=d=>{C.value=d||"No description available",f.value=!0},B=()=>{if(!h.value){alert("Please enter a role name");return}const d={name:h.value,permissions:a.value};V.post("/api/role",d).then(s=>{M.push({name:"roles"})}).catch(s=>{console.error("Error:",s)})};return q(()=>{U()}),(d,s)=>{const p=A("can");return k((n(),i("div",K,[O,e("div",j,[e("div",z,[H,k(e("input",{type:"text",id:"roleName","onUpdate:modelValue":s[0]||(s[0]=l=>h.value=l),placeholder:"Enter role name",required:""},null,512),[[E,h.value]])]),e("button",{onClick:s[1]||(s[1]=l=>b.value=!b.value),class:"view-toggle"},c(b.value?"Switch to Card View":"Switch to Table View"),1)]),w.value?(n(),i("div",Q,"Loading permissions...")):(n(),i(_,{key:1},[b.value?(n(),i("div",W,[e("table",null,[X,e("tbody",null,[(n(!0),i(_,null,y(v.value,(l,t)=>(n(),i(_,{key:t},[(n(!0),i(_,null,y(l,o=>(n(),i("tr",{key:o.id},[l.indexOf(o)===0?(n(),i("td",{key:0,rowspan:l.length},[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${t}-table`,checked:D(t),".indeterminate":S(t),onChange:r=>x(t,r)},null,40,Z),e("label",{for:`group-${t}-table`},c(t.charAt(0).toUpperCase()+t.slice(1)),9,N)],8,Y)):I("",!0),e("td",null,c(o.name),1),e("td",null,[e("button",{onClick:r=>$(o.description),class:"description-btn",disabled:!o.description},c(o.description?"View":"None"),9,ee)]),e("td",null,[k(e("input",{class:"mx-2 my-auto",type:"checkbox",id:`permission-${o.id}-table`,value:o.id,"onUpdate:modelValue":s[2]||(s[2]=r=>a.value=r)},null,8,te),[[P,a.value]])])]))),128))],64))),128))])])])):(n(),i("div",se,[e("div",oe,[(n(!0),i(_,null,y(v.value,(l,t)=>(n(),i("div",{key:t,class:"permission-group"},[e("div",le,[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${t}`,checked:D(t),".indeterminate":S(t),onChange:o=>x(t,o)},null,40,ne),e("label",{for:`group-${t}`},c(t.charAt(0).toUpperCase()+t.slice(1)),9,ie)]),e("div",ae,[(n(!0),i(_,null,y(l,o=>(n(),i("div",{key:o.id,class:"permission-item"},[e("div",de,[k(e("input",{type:"checkbox",id:`permission-${o.id}`,value:o.id,"onUpdate:modelValue":s[3]||(s[3]=r=>a.value=r)},null,8,ce),[[P,a.value]]),e("label",{for:`permission-${o.id}`},c(o.name),9,re)]),e("button",{onClick:r=>$(o.description),class:"description-btn",disabled:!o.description},c(o.description?"View Description":"No Description"),9,ue)]))),128))])]))),128))])]))],64)),e("button",{onClick:B,class:"submit-btn",disabled:a.value.length===0||!h.value}," Create Role with Selected Permissions ",8,ve),f.value?(n(),i("div",{key:2,class:"modal-overlay",onClick:s[5]||(s[5]=T(l=>f.value=!1,["self"]))},[e("div",pe,[_e,e("p",null,c(C.value),1),e("button",{onClick:s[4]||(s[4]=l=>f.value=!1),class:"close-modal"},"Close")])])):I("",!0)])),[[p,"create roles"]])}}},fe=G(he,[["__scopeId","data-v-fd925fd2"]]);export{fe as default};
