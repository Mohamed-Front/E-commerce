import{u as J,y as K,k as O,r as i,m as ee,o as te,a4 as ae,T as z,a as u,b as _,e as s,f as n,w as d,h as e,A as y,g as le,t as r,F as A,d as se,i as F,V as oe,W as v,X as ie,C as ne,Y as re,Z as m,N as V,$ as de,q as pe,n as ce,a0 as ue,a2 as ve}from"./index-30883687.js";const me={class:"grid"},ge={class:"col-12"},he={class:"card p-4 shadow-2 border-round"},be={class:"text-2xl font-bold"},fe={class:"flex gap-2"},_e={class:"p-input-icon-left"},ye={class:"card shadow-1 surface-0"},xe={class:"text-center py-4"},we={class:"text-xl"},ke={class:"flex justify-content-center align-items-center py-4"},Ce={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},$e={class:"p-paginator-left-content"},Pe={class:"p-paginator-current"},Ve={class:"p-paginator-right-content"},De=["disabled"],Ne=["disabled"],Te=["onClick"],Ue={key:1,class:"p-paginator-dots"},Ee=["disabled"],Re=["disabled"],Be={class:"flex align-items-center justify-content-center"},ze={__name:"index",setup(Ie){const D=J(),C=K(),{t:l}=O(),x=i(!0),N=i([]),g=i(!1),T=i(null),U=i(null),M=i({}),w=i("");i(null);const p=i(1),$=i(0),c=i(10),k=i(0),W=i(""),q=i(""),E=i(""),R=i(""),B=i(0),I=i(0),S=i([]),h=()=>{x.value=!0,F.get("/api/product",{params:{page:p.value,limit:c.value,search:w.value||void 0}}).then(o=>{N.value=o.data.data.data,$.value=o.data.data.total,k.value=o.data.data.last_page,W.value=o.data.data.first_page_url,q.value=o.data.data.last_page_url,E.value=o.data.data.next_page_url,R.value=o.data.data.prev_page_url,B.value=o.data.data.from,I.value=o.data.data.to,S.value=o.data.data.links,x.value=!1}).catch(o=>{C.add({severity:"error",summary:l("error"),detail:l("product.loadError"),life:3e3}),x.value=!1,console.error("Error fetching products:",o)})};ee([w,c],()=>{p.value=1,h()});const b=o=>{o>=1&&o<=k.value&&(p.value=o,h())},G=o=>{c.value=o.value,p.value=1,h()},L=o=>{T.value=o,g.value=!0},Q=()=>{F.delete(`/api/product/${T.value}`).then(()=>{C.add({severity:"success",summary:l("success"),detail:l("product.deleteSuccess"),life:3e3}),h(),g.value=!1}).catch(o=>{C.add({severity:"error",summary:l("error"),detail:l("product.deleteError"),life:3e3}),console.error("Error deleting product:",o)})},X=()=>{U.value.exportCSV()},Y=()=>{D.push({name:"product-create"})},Z=o=>{D.push({name:"product-update",params:{id:o}})};return te(()=>{h()}),(o,t)=>{const H=ae("Tag"),f=z("can"),j=z("tooltip");return u(),_("div",me,[s("div",ge,[s("div",he,[n(e(ie),{class:"mb-4"},{start:d(()=>[s("h2",be,r(e(l)("product.managementTitle")),1)]),end:d(()=>[s("div",fe,[s("span",_e,[t[8]||(t[8]=s("i",{class:"pi pi-search"},null,-1)),n(e(oe),{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=a=>w.value=a),placeholder:e(l)("product.search")},null,8,["modelValue","placeholder"])]),y(n(e(v),{label:e(l)("product.export"),icon:"pi pi-upload",class:"p-export",onClick:X},null,8,["label"]),[[f,"list products"]]),y(n(e(v),{label:e(l)("product.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Y},null,8,["label"]),[[f,"create products"]])])]),_:1}),n(e(ne)),s("div",ye,[y((u(),le(e(de),{ref_key:"dt",ref:U,value:N.value,loading:x.value,"data-key":"id",paginator:!1,rows:c.value,filters:M.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",xe,[t[9]||(t[9]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",we,r(e(l)("product.noData")),1)])]),loading:d(()=>[s("div",ke,[n(e(re),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(e(m),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(m),{field:"name_ar",header:e(l)("product.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[V(r(a.data.name_ar),1)]),_:1},8,["header"]),n(e(m),{field:"name_en",header:e(l)("product.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[V(r(a.data.name_en),1)]),_:1},8,["header"]),n(e(m),{field:"base_price",header:e(l)("product.basePrice"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[V(r(a.data.base_price),1)]),_:1},8,["header"]),n(e(m),{field:"is_displayed",header:e(l)("product.isDisplayed"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[n(H,{value:a.data.is_displayed?e(l)("yes"):e(l)("no"),severity:a.data.is_displayed?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),n(e(m),{header:e(l)("actions"),"header-style":"width: 12rem"},{body:d(a=>[y(n(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:P=>Z(a.data.id)},null,8,["onClick"]),[[f,"edit products"],[j,e(l)("edit"),void 0,{top:!0}]]),y(n(e(v),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:P=>L(a.data.id)},null,8,["onClick"]),[[f,"delete products"],[j,e(l)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[f,"list products"]]),s("div",Ce,[s("div",$e,[s("span",Pe,r(e(l)("show"))+" "+r(B.value)+" "+r(e(l)("to"))+" "+r(I.value)+" "+r(e(l)("from"))+" "+r($.value),1)]),s("div",Ve,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:t[1]||(t[1]=a=>b(1))},t[10]||(t[10]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,De),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!R.value,onClick:t[2]||(t[2]=a=>b(p.value-1))},t[11]||(t[11]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Ne),(u(!0),_(A,null,se(S.value,(a,P)=>(u(),_(A,{key:P},[a.label&&!isNaN(parseInt(a.label))?(u(),_("button",{key:0,class:pe(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Se=>b(parseInt(a.label))},r(a.label),11,Te)):a.label==="..."?(u(),_("span",Ue,"...")):ce("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!E.value,onClick:t[3]||(t[3]=a=>b(p.value+1))},t[12]||(t[12]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Ee),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===k.value,onClick:t[4]||(t[4]=a=>b(k.value))},t[13]||(t[13]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Re),n(e(ue),{modelValue:c.value,"onUpdate:modelValue":t[5]||(t[5]=a=>c.value=a),options:[5,10,20,30],onChange:G,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(ve),{visible:g.value,"onUpdate:visible":t[7]||(t[7]=a=>g.value=a),style:{width:"450px"},header:e(l)("product.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(e(v),{label:e(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=a=>g.value=!1)},null,8,["label"]),n(e(v),{label:e(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Q},null,8,["label"])]),default:d(()=>[s("div",Be,[t[14]||(t[14]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,r(e(l)("product.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{ze as default};
