import{_ as ie,u as ce,G as de,f as re,r as o,g as ue,w as pe,o as _e,h as r,i as G,b as v,c as x,j as e,e as i,k as d,l as y,m as ve,t as c,B as l,F as L,n as ge,p as he,a as q,q as A,s as me,v as fe,x as be,y as xe}from"./index-7330e92f.js";const p=k=>(be("data-v-9f0600f6"),k=k(),xe(),k),ye={class:"grid"},ke={class:"col-12"},Ce={class:"card p-4 shadow-2 border-round"},we={class:"text-2xl font-bold"},De={class:"flex gap-2"},Te={class:"p-input-icon-left"},Ve=p(()=>e("i",{class:"pi pi-search"},null,-1)),Pe={class:"card shadow-1 surface-0"},Se={class:"text-center py-4"},Ie=p(()=>e("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Ne={class:"text-xl"},$e={class:"flex justify-content-center align-items-center py-4"},Be={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ue={class:"p-paginator-left-content"},Me={class:"p-paginator-current"},Re={class:"p-paginator-right-content"},Ee=["disabled"],Fe=p(()=>e("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),je=[Fe],ze=["disabled"],Ge=p(()=>e("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Le=[Ge],qe=["onClick"],Ae={key:1,class:"p-paginator-dots"},Oe=["disabled"],Qe=p(()=>e("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),We=[Qe],He=["disabled"],Je=p(()=>e("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Ke=[Je],Xe={class:"flex align-items-center justify-content-center"},Ye=p(()=>e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Ze={setup(k){const I=ce(),{t:s}=de(),V=re(),C=o(!0),N=o(""),$=o(null),g=o(!1);o(null);const B=o(null),U=o({}),w=o(""),u=o(1),P=o(0),h=o(5),D=o(0),O=o(""),Q=o(""),M=o(""),R=o(""),E=o(0),F=o(0),j=o([]),W=()=>{B.value.exportCSV()},H=t=>{N.value=t,g.value=!0},J=()=>{q.delete(`/api/discount/${N.value}`).then(()=>{m(),g.value=!1,V.add({severity:"success",summary:s("success"),detail:s("discount.deleteSuccess"),life:3e3})}).catch(()=>{V.add({severity:"error",summary:s("error"),detail:s("discount.deleteError"),life:3e3})})},K=()=>{U.value={global:{value:null,matchMode:he.CONTAINS}}};ue(()=>{K()});const m=()=>{C.value=!0,q.get("/api/discount",{params:{page:u.value,per_page:h.value,search:w.value}}).then(t=>{$.value=t.data.data.data,P.value=t.data.data.total,D.value=t.data.data.last_page,O.value=t.data.data.first_page_url,Q.value=t.data.data.last_page_url,M.value=t.data.data.next_page_url,R.value=t.data.data.prev_page_url,E.value=t.data.data.from,F.value=t.data.data.to,j.value=t.data.data.links,C.value=!1}).catch(t=>{C.value=!1,V.add({severity:"error",summary:s("error"),detail:s("discount.loadError"),life:3e3}),console.error("Error fetching discounts:",t)})};pe(w,t=>{u.value=1,m()});const f=t=>{t>=1&&t<=D.value&&(u.value=t,m())},X=t=>{h.value=t.value,u.value=1,m()};_e(()=>{m()});const Y=()=>{I.push({name:"discount-create"})},Z=t=>{I.push({name:"discount-update",params:{id:t}})};return(t,n)=>{const ee=r("InputText"),_=r("Button"),te=r("Toolbar"),ae=r("Toast"),T=r("Column"),se=r("ProgressSpinner"),oe=r("DataTable"),le=r("Dropdown"),ne=r("Dialog"),b=G("can"),z=G("tooltip");return v(),x("div",ye,[e("div",ke,[e("div",Ce,[i(te,{class:"mb-4"},{start:d(()=>[e("h2",we,c(l(s)("discount.managementTitle")),1)]),end:d(()=>[e("div",De,[e("span",Te,[Ve,i(ee,{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=a=>w.value=a),placeholder:l(s)("discount.search")},null,8,["modelValue","placeholder"])]),y(i(_,{label:l(s)("discount.export"),icon:"pi pi-upload",class:"p-export",onClick:W},null,8,["label"]),[[b,"list discounts"]]),y(i(_,{label:l(s)("discount.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Y},null,8,["label"]),[[b,"create discounts"]])])]),_:1}),i(ae),e("div",Pe,[y((v(),ve(oe,{ref_key:"dt",ref:B,value:$.value,loading:C.value,"data-key":"id",paginator:!1,rows:h.value,filters:U.value,totalRecords:P.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[e("div",Se,[Ie,e("p",Ne,c(l(s)("discount.noData")),1)])]),loading:d(()=>[e("div",$e,[i(se,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(T,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(T,{field:"discount_value",header:l(s)("discount.discount_value"),sortable:!0},{body:d(a=>[A(c(a.data.discount_value),1)]),_:1},8,["header"]),i(T,{field:"expires_at",header:l(s)("discount.expires_at"),sortable:!0},{body:d(a=>[A(c(a.data.expires_at),1)]),_:1},8,["header"]),i(T,{header:l(s)("actions"),headerStyle:"width: 12rem"},{body:d(a=>[y(i(_,{icon:"pi pi-pencil",class:"p-detail",onClick:S=>Z(a.data.id)},null,8,["onClick"]),[[b,"edit discounts"],[z,l(s)("edit"),void 0,{top:!0}]]),y(i(_,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:S=>H(a.data.id)},null,8,["onClick"]),[[b,"delete discounts"],[z,l(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list discounts"]]),e("div",Be,[e("div",Ue,[e("span",Me,c(l(s)("show"))+" "+c(E.value)+" "+c(l(s)("to"))+" "+c(F.value)+" "+c(l(s)("from"))+" "+c(P.value),1)]),e("div",Re,[e("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:n[1]||(n[1]=a=>f(1))},je,8,Ee),e("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!R.value,onClick:n[2]||(n[2]=a=>f(u.value-1))},Le,8,ze),(v(!0),x(L,null,ge(j.value,(a,S)=>(v(),x(L,{key:S},[a.label&&!isNaN(a.label)?(v(),x("button",{key:0,class:me(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:et=>f(parseInt(a.label))},c(a.label),11,qe)):a.label==="..."?(v(),x("span",Ae,"...")):fe("",!0)],64))),128)),e("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!M.value,onClick:n[3]||(n[3]=a=>f(u.value+1))},We,8,Oe),e("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===D.value,onClick:n[4]||(n[4]=a=>f(D.value))},Ke,8,He),i(le,{modelValue:h.value,"onUpdate:modelValue":n[5]||(n[5]=a=>h.value=a),options:[5,10,20,30],optionLabel:"",onChange:X,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(ne,{visible:g.value,"onUpdate:visible":n[7]||(n[7]=a=>g.value=a),style:{width:"450px"},header:l(s)("discount.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(_,{label:l(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:n[6]||(n[6]=a=>g.value=!1)},null,8,["label"]),i(_,{label:l(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:J},null,8,["label"])]),default:d(()=>[e("div",Xe,[Ye,e("span",null,c(l(s)("discount.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},at=ie(Ze,[["__scopeId","data-v-9f0600f6"]]);export{at as default};
