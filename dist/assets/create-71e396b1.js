import{_ as B,b as G,r as u,d as T,V as q,z as k,o as i,e as a,f as e,t as r,s as E,A as F,F as p,h as y,P as R,B as V,a as x,Q as I,p as z,m as L}from"./index-b794012a.js";const P=b=>(z("data-v-45427bb7"),b=b(),L(),b),O={class:"permission-manager"},Q={class:"controls"},j={class:"name-input"},H={for:"roleName"},J=P(()=>e("span",{class:"required"},"*",-1)),K=["placeholder"],W={key:0,class:"loading"},X={key:0,class:"table-view"},Y=P(()=>e("thead",null,[e("tr",null,[e("th",null,"Group"),e("th",null,"Permission"),e("th",null,"Description"),e("th",null,"Select")])],-1)),Z=["rowspan"],N=["id","checked",".indeterminate","onChange"],ee=["for"],te=["onClick","disabled"],se=["id","value"],oe={key:1,class:"card-view"},le={class:"permission-groups"},ne={class:"group-header"},ie=["id","checked",".indeterminate","onChange"],ae=["for"],de={class:"permission-items"},re={class:"permission-info"},ce=["id","value"],ue=["for"],ve=["onClick","disabled"],_e=["disabled"],pe={class:"modal-content"},he={setup(b){const M=G(),v=u({}),g=u(!0),d=u([]),h=u(""),m=u(!1),w=u(""),f=u(!1),U=()=>{x.get("api/role/get/permissions").then(l=>{v.value=l.data.data,g.value=!1})},C=(l,s)=>{const n=(v.value[l]||[]).map(t=>t.id);s.target.checked?d.value=[...new Set([...d.value,...n])]:d.value=d.value.filter(t=>!n.includes(t))},$=l=>{const s=v.value[l]||[];return s.length===0?!1:s.every(_=>d.value.includes(_.id))},D=l=>{const s=v.value[l]||[];if(s.length===0)return!1;const _=s.some(t=>d.value.includes(t.id)),n=s.every(t=>d.value.includes(t.id));return _&&!n},S=l=>{w.value=l||"No description available",m.value=!0},A=()=>{if(!h.value){alert("Please enter a role name");return}const l={name:h.value,permissions:d.value};x.post("/api/role",l).then(s=>{M.push({name:"roles"})}).catch(s=>{console.error("Error:",s)})};return T(()=>{U()}),(l,s)=>{const _=q("can");return k((i(),a("div",O,[e("h1",null,r(l.$t("role.role_Permissions_Manager")),1),e("div",Q,[e("div",j,[e("label",H,[E(r(l.$t("role.role_Name")),1),J]),k(e("input",{type:"text",id:"roleName","onUpdate:modelValue":s[0]||(s[0]=n=>h.value=n),placeholder:l.$t("role.enter_role_name"),required:""},null,8,K),[[F,h.value]])]),e("button",{onClick:s[1]||(s[1]=n=>f.value=!f.value),class:"view-toggle"},r(f.value?"Switch to Card View":"Switch to Table View"),1)]),g.value?(i(),a("div",W,r(l.$t("role.loading_permissions")),1)):(i(),a(p,{key:1},[f.value?(i(),a("div",X,[e("table",null,[Y,e("tbody",null,[(i(!0),a(p,null,y(v.value,(n,t)=>(i(),a(p,{key:t},[(i(!0),a(p,null,y(n,o=>(i(),a("tr",{key:o.id},[n.indexOf(o)===0?(i(),a("td",{key:0,rowspan:n.length},[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${t}-table`,checked:$(t),".indeterminate":D(t),onChange:c=>C(t,c)},null,40,N),e("label",{for:`group-${t}-table`},r(t.charAt(0).toUpperCase()+t.slice(1)),9,ee)],8,Z)):V("",!0),e("td",null,r(o.name),1),e("td",null,[e("button",{onClick:c=>S(o.description),class:"description-btn",disabled:!o.description},r(o.description?"View":"None"),9,te)]),e("td",null,[k(e("input",{class:"mx-2 my-auto",type:"checkbox",id:`permission-${o.id}-table`,value:o.id,"onUpdate:modelValue":s[2]||(s[2]=c=>d.value=c)},null,8,se),[[I,d.value]])])]))),128))],64))),128))])])])):(i(),a("div",oe,[e("div",le,[(i(!0),a(p,null,y(v.value,(n,t)=>(i(),a("div",{key:t,class:"permission-group"},[e("div",ne,[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${t}`,checked:$(t),".indeterminate":D(t),onChange:o=>C(t,o)},null,40,ie),e("label",{for:`group-${t}`},r(t.charAt(0).toUpperCase()+t.slice(1)),9,ae)]),e("div",de,[(i(!0),a(p,null,y(n,o=>(i(),a("div",{key:o.id,class:"permission-item"},[e("div",re,[k(e("input",{type:"checkbox",id:`permission-${o.id}`,value:o.id,"onUpdate:modelValue":s[3]||(s[3]=c=>d.value=c)},null,8,ce),[[I,d.value]]),e("label",{for:`permission-${o.id}`},r(o.name),9,ue)]),e("button",{onClick:c=>S(o.description),class:"description-btn",disabled:!o.description},r(o.description?"View Description":"No Description"),9,ve)]))),128))])]))),128))])]))],64)),e("button",{onClick:A,class:"submit-btn",disabled:d.value.length===0||!h.value},r(l.$t("role.create_Role_with_Selected_Permissions")),9,_e),m.value?(i(),a("div",{key:2,class:"modal-overlay",onClick:s[5]||(s[5]=R(n=>m.value=!1,["self"]))},[e("div",pe,[e("h3",null,r(l.$t("role.permission_Description")),1),e("p",null,r(w.value),1),e("button",{onClick:s[4]||(s[4]=n=>m.value=!1),class:"close-modal"},"Close")])])):V("",!0)])),[[_,"create roles"]])}}},me=B(he,[["__scopeId","data-v-45427bb7"]]);export{me as default};
