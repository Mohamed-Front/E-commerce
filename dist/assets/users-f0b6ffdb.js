import{j as J,u as K,M as X,r as i,n as ee,m as te,o as ae,P as j,a as c,c as y,f as l,h as n,w as d,e,A as _,b as se,t as r,F as A,d as le,Y as oe,i as z,R as ie,T as v,Z as ne,N as re,C as de,$ as m,O as N,a4 as ue,a0 as pe,x as ce,g as ve,a1 as me,a2 as ge}from"./index-ef49bc5b.js";const he={class:"grid"},fe={class:"col-12"},be={class:"card p-4 shadow-2 border-round"},ye={class:"text-2xl font-bold"},_e={class:"flex gap-2"},we={class:"p-input-icon-left"},xe={class:"card shadow-1 surface-0"},ke={class:"text-center py-4"},Ce={class:"text-xl"},$e={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ne={class:"p-paginator-left-content"},Pe={class:"p-paginator-current"},Ue={class:"p-paginator-right-content"},De=["disabled"],Me=["disabled"],Re=["onClick"],Te={key:1,class:"p-paginator-dots"},Be=["disabled"],Se=["disabled"],Ee={class:"flex align-items-center justify-content-center"},Ae={__name:"users",setup(Fe){const{t:o}=J(),P=K(),C=X(),w=i(!0),U=i(""),D=i(null),g=i(!1);i(null);const M=i(null),R=i({}),x=i(""),u=i(1),$=i(0),p=i(10),k=i(0),G=i(""),O=i(""),T=i(""),B=i(""),S=i(0),E=i(0),F=i([]),L=()=>{R.value={global:{value:null,matchMode:oe.CONTAINS}}},h=()=>{w.value=!0,z.get("/api/user",{params:{page:u.value,limit:p.value,search:x.value||void 0}}).then(a=>{D.value=a.data.data.data,$.value=a.data.data.total,k.value=a.data.data.last_page,G.value=a.data.data.first_page_url,O.value=a.data.data.last_page_url,T.value=a.data.data.next_page_url,B.value=a.data.data.prev_page_url,S.value=a.data.data.from,E.value=a.data.data.to,F.value=a.data.data.links,w.value=!1}).catch(a=>{C.add({severity:"error",summary:o("error"),detail:o("user.loadError"),life:3e3}),w.value=!1,console.error("Error fetching data:",a)})};ee([x,p],()=>{u.value=1,h()});const f=a=>{a>=1&&a<=k.value&&(u.value=a,h())},Q=a=>{p.value=a.value,u.value=1,h()},W=a=>{U.value=a,g.value=!0},Y=()=>{z.delete(`/api/user/${U.value}`).then(()=>{C.add({severity:"success",summary:o("success"),detail:o("user.deleteSuccess"),life:3e3}),h(),g.value=!1}).catch(a=>{C.add({severity:"error",summary:o("error"),detail:o("user.deleteError"),life:3e3})})},Z=()=>{M.value.exportCSV()},q=()=>{P.push({name:"user-create"})},H=a=>{P.push({name:"user-edit",params:{id:a}})};return te(()=>{L()}),ae(()=>{h()}),(a,t)=>{const b=j("can"),I=j("tooltip");return c(),y("div",he,[l("div",fe,[l("div",be,[n(e(ne),{class:"mb-4"},{start:d(()=>[l("h2",ye,r(a.$t("user.managementTitle")),1)]),end:d(()=>[l("div",_e,[l("span",we,[t[8]||(t[8]=l("i",{class:"pi pi-search"},null,-1)),n(e(ie),{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),placeholder:a.$t("user.search")},null,8,["modelValue","placeholder"])]),_(n(e(v),{label:a.$t("user.export"),icon:"pi pi-upload",class:"p-export",onClick:Z},null,8,["label"]),[[b,"export users"]]),_(n(e(v),{label:a.$t("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:q},null,8,["label"]),[[b,"create users"]])])]),_:1}),n(e(re)),l("div",xe,[_((c(),se(e(pe),{ref_key:"dt",ref:M,value:D.value,loading:w.value,"data-key":"id",paginator:!1,rows:p.value,filters:R.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[l("div",ke,[t[9]||(t[9]=l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),l("p",Ce,r(e(o)("user.noData")),1)])]),loading:d(()=>[l("div",$e,[n(e(de),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(e(m),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(m),{field:"name",header:e(o)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(s=>[N(r(s.data.name),1)]),_:1},8,["header"]),n(e(m),{field:"email",header:a.$t("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(s=>[N(r(s.data.email),1)]),_:1},8,["header"]),n(e(m),{field:"phone",header:e(o)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(s=>[N(r(s.data.phone),1)]),_:1},8,["header"]),n(e(m),{field:"type_description",header:e(o)("user.type"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(s=>[n(e(ue),{value:s.data.type_description,severity:{Admin:"info",Customer:"success",Guest:"danger"}[s.data.type_description]||"warning"},null,8,["value","severity"])]),_:1},8,["header"]),n(e(m),{header:e(o)("actions"),"header-style":"min-width:10rem;"},{body:d(s=>[_(n(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:V=>H(s.data.id)},null,8,["onClick"]),[[b,"edit users"],[I,e(o)("edit"),void 0,{top:!0}]]),_(n(e(v),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:V=>W(s.data.id)},null,8,["onClick"]),[[b,"delete users"],[I,e(o)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list users"]]),l("div",Ve,[l("div",Ne,[l("span",Pe,r(e(o)("show"))+" "+r(S.value)+" "+r(e(o)("to"))+" "+r(E.value)+" "+r(e(o)("from"))+" "+r($.value),1)]),l("div",Ue,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:t[1]||(t[1]=s=>f(1))},t[10]||(t[10]=[l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,De),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!B.value,onClick:t[2]||(t[2]=s=>f(u.value-1))},t[11]||(t[11]=[l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Me),(c(!0),y(A,null,le(F.value,(s,V)=>(c(),y(A,{key:V},[s.label&&!isNaN(parseInt(s.label))?(c(),y("button",{key:0,class:ce(["p-paginator-page p-paginator-element p-link",{"p-highlight":s.active}]),onClick:Ie=>f(parseInt(s.label))},r(s.label),11,Re)):s.label==="..."?(c(),y("span",Te,"...")):ve("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!T.value,onClick:t[3]||(t[3]=s=>f(u.value+1))},t[12]||(t[12]=[l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Be),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===k.value,onClick:t[4]||(t[4]=s=>f(k.value))},t[13]||(t[13]=[l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Se),n(e(me),{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=s=>p.value=s),options:[5,10,20,30],onChange:Q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(ge),{visible:g.value,"onUpdate:visible":t[7]||(t[7]=s=>g.value=s),style:{width:"450px"},header:e(o)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(e(v),{label:e(o)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=s=>g.value=!1)},null,8,["label"]),n(e(v),{label:e(o)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Y},null,8,["label"])]),default:d(()=>[l("div",Ee,[t[14]||(t[14]=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,r(e(o)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{Ae as default};
