import{u as ne,b as re,L as de,r as i,w as ce,U as ue,d as pe,V as W,o as v,e as g,f as s,g as n,i as d,j as e,z as w,c as ve,t as r,F as A,h as me,W as he,a as P,X as G,Y as p,Z as _e,$ as ge,a0 as fe,a1 as U,s as O,a2 as be,x as ye,B as Q,a3 as xe,a4 as ke,a5 as X}from"./index-b794012a.js";const we={class:"grid"},Ce={class:"col-12"},Ve={class:"card p-4 shadow-2 border-round"},$e={class:"text-2xl font-bold"},Pe={class:"flex gap-2"},Ue={class:"p-input-icon-left"},De=s("i",{class:"pi pi-search"},null,-1),Re={class:"card shadow-1 surface-0"},Ee={class:"text-center py-4"},Ne=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1),Me={class:"text-xl"},Be={class:"flex justify-content-center align-items-center py-4"},Se={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Te={class:"p-paginator-left-content"},Fe={class:"p-paginator-current"},Ie={class:"p-paginator-right-content"},je=["disabled"],ze=s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1),qe=[ze],Le=["disabled"],We=s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1),Ae=[We],Ge=["onClick"],Oe={key:1,class:"p-paginator-dots"},Qe=["disabled"],Xe=s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1),Ye=[Xe],Ze=["disabled"],He=s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1),Je=[He],Ke={class:"field mb-5"},ea={for:"name"},aa={key:0,class:"p-error"},la={class:"field"},ta={for:"permissions"},sa={class:"flex align-items-center justify-content-center"},oa=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1),da={setup(ia){const{t:a}=ne(),Y=re(),m=de(),C=i(!0),c=i({name:"",permissions:[]}),E=i([]),N=i([]),f=i(!1),b=i(!1),M=i(null),B=i(null),S=i({}),y=i(!1),T=i(null),V=i(""),u=i(1),D=i(0),h=i(10),$=i(0),Z=i(""),H=i(""),F=i(""),I=i(""),j=i(0),z=i(0),q=i([]),J=()=>{S.value={global:{value:null,matchMode:he.CONTAINS}}},_=()=>{C.value=!0,P.get("/api/role",{params:{page:u.value,limit:h.value,search:V.value||void 0}}).then(t=>{N.value=t.data.data.data,D.value=t.data.data.total,$.value=t.data.data.last_page,Z.value=t.data.data.first_page_url,H.value=t.data.data.last_page_url,F.value=t.data.data.next_page_url,I.value=t.data.data.prev_page_url,j.value=t.data.data.from,z.value=t.data.data.to,q.value=t.data.data.links,C.value=!1}).catch(t=>{m.add({severity:"error",summary:a("error"),detail:a("role.loadError"),life:3e3}),C.value=!1,console.error("Error fetching roles:",t)}),P.get("/api/role/get/permissions").then(t=>{E.value=t.data.permissions}).catch(t=>{m.add({severity:"error",summary:a("error"),detail:a("role.loadPermissionsError"),life:3e3}),console.error("Error fetching permissions:",t)})},x=t=>{t>=1&&t<=$.value&&(u.value=t,_())},K=t=>{h.value=t.value,u.value=1,_()};ce([V,h],()=>{u.value=1,_()});const ee=()=>{c.value={name:"",permissions:[]},y.value=!1,f.value=!0},ae=()=>{f.value=!1,y.value=!1},le=()=>{y.value=!0,c.value.name.trim()&&P.post("/api/role",c.value).then(()=>{_(),f.value=!1,m.add({severity:"success",summary:a("success"),detail:a("role.createSuccess"),life:3e3}),c.value={name:"",permissions:[]}}).catch(t=>{m.add({severity:"error",summary:a("error"),detail:a("role.createError"),life:3e3}),console.error("Error creating role:",t)})},te=t=>{Y.push({name:"roles-update",params:{id:t}})},se=t=>{T.value=t,b.value=!0},oe=()=>{P.delete(`/api/role/${T.value}`).then(()=>{_(),b.value=!1,m.add({severity:"success",summary:a("success"),detail:a("role.deleteSuccess"),life:3e3})}).catch(t=>{m.add({severity:"error",summary:a("error"),detail:a("role.deleteError"),life:3e3}),console.error("Error deleting role:",t)})},ie=()=>{B.value.exportCSV()};return ue(()=>{J()}),pe(()=>{_()}),(t,o)=>{const k=W("can"),L=W("tooltip");return v(),g("div",we,[s("div",Ce,[s("div",Ve,[n(e(_e),{class:"mb-4"},{start:d(()=>[s("h2",$e,r(e(a)("role.manage_Roles")),1)]),end:d(()=>[s("div",Pe,[s("span",Ue,[De,n(e(G),{modelValue:V.value,"onUpdate:modelValue":o[0]||(o[0]=l=>V.value=l),placeholder:e(a)("role.search")},null,8,["modelValue","placeholder"])]),w(n(e(p),{label:e(a)("role.export"),icon:"pi pi-upload",class:"p-export",onClick:ie},null,8,["label"]),[[k,"export roles"]]),w(n(e(p),{label:e(a)("role.new"),icon:"pi pi-plus",class:"p-button-success",onClick:ee},null,8,["label"]),[[k,"create roles"]])])]),_:1}),n(e(ge)),s("div",Re,[w((v(),ve(e(be),{ref_key:"dt",ref:B,selection:M.value,"onUpdate:selection":o[1]||(o[1]=l=>M.value=l),value:N.value,loading:C.value,"data-key":"id",paginator:!1,rows:h.value,filters:S.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",Ee,[Ne,s("p",Me,r(e(a)("role.noData")),1)])]),loading:d(()=>[s("div",Be,[n(e(fe),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(e(U),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(U),{field:"id",header:e(a)("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:d(l=>[O(r(l.data.id),1)]),_:1},8,["header"]),n(e(U),{field:"name",header:e(a)("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[O(r(l.data.name),1)]),_:1},8,["header"]),n(e(U),{header:e(a)("actions"),"header-style":"min-width:10rem;"},{body:d(l=>[w(n(e(p),{icon:"pi pi-pencil",class:"p-detail",onClick:R=>te(l.data.id)},null,8,["onClick"]),[[k,"edit roles"],[L,e(a)("edit"),void 0,{top:!0}]]),w(n(e(p),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:R=>se(l.data.id)},null,8,["onClick"]),[[k,"delete roles"],[L,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["selection","value","loading","rows","filters","totalRecords"])),[[k,"list roles"]]),s("div",Se,[s("div",Te,[s("span",Fe,r(e(a)("show"))+" "+r(j.value)+" "+r(e(a)("to"))+" "+r(z.value)+" "+r(e(a)("from"))+" "+r(D.value),1)]),s("div",Ie,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:o[2]||(o[2]=l=>x(1))},qe,8,je),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!I.value,onClick:o[3]||(o[3]=l=>x(u.value-1))},Ae,8,Le),(v(!0),g(A,null,me(q.value,(l,R)=>(v(),g(A,{key:R},[l.label&&!isNaN(parseInt(l.label))?(v(),g("button",{key:0,class:ye(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:na=>x(parseInt(l.label))},r(l.label),11,Ge)):l.label==="..."?(v(),g("span",Oe,"...")):Q("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!F.value,onClick:o[4]||(o[4]=l=>x(u.value+1))},Ye,8,Qe),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===$.value,onClick:o[5]||(o[5]=l=>x($.value))},Je,8,Ze),n(e(xe),{modelValue:h.value,"onUpdate:modelValue":o[6]||(o[6]=l=>h.value=l),options:[5,10,20,30],onChange:K,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(X),{visible:f.value,"onUpdate:visible":o[9]||(o[9]=l=>f.value=l),style:{width:"450px"},header:e(a)("role.createTitle"),modal:!0,class:"p-fluid"},{footer:d(()=>[n(e(p),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:ae},null,8,["label"]),n(e(p),{label:e(a)("save"),icon:"pi pi-check",class:"p-button-text",onClick:le},null,8,["label"])]),default:d(()=>[s("div",Ke,[s("label",ea,r(e(a)("role.name")),1),n(e(G),{class:"mt-3 w-full",id:"name",modelValue:c.value.name,"onUpdate:modelValue":o[7]||(o[7]=l=>c.value.name=l),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:y.value&&!c.value.name},null,8,["modelValue","invalid"]),y.value&&!c.value.name?(v(),g("small",aa,r(e(a)("role.nameRequired")),1)):Q("",!0)]),s("div",la,[s("label",ta,r(e(a)("role.permissions")),1),n(e(ke),{id:"permissions",modelValue:c.value.permissions,"onUpdate:modelValue":o[8]||(o[8]=l=>c.value.permissions=l),display:"chip","option-value":"id",options:E.value,"option-label":"name",placeholder:e(a)("role.selectPermissions"),class:"w-full"},null,8,["modelValue","options","placeholder"])])]),_:1},8,["visible","header"]),n(e(X),{visible:b.value,"onUpdate:visible":o[11]||(o[11]=l=>b.value=l),style:{width:"460px"},header:e(a)("role.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(e(p),{label:e(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:o[10]||(o[10]=l=>b.value=!1)},null,8,["label"]),n(e(p),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:oe},null,8,["label"])]),default:d(()=>[s("div",sa,[oa,s("span",null,r(e(a)("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{da as default};
