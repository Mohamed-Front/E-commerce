import{_ as le,u as ne,j as ie,D as de,r as l,m as re,n as ce,o as ue,a3 as c,Q as j,a as v,c as h,f as t,h as i,w as r,x,b as pe,t as d,e as n,F as z,d as ve,Y as _e,i as L,E as Q,v as me,g as ge}from"./index-39233d5b.js";const be={class:"grid"},fe={class:"col-12"},he={class:"card p-4 shadow-2 border-round"},xe={class:"text-2xl font-bold"},ye={class:"flex gap-2"},ke={class:"p-input-icon-left"},Ce={class:"card shadow-1 surface-0"},we={class:"text-center py-4"},De={class:"text-xl"},Te={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Pe={class:"p-paginator-left-content"},Ne={class:"p-paginator-current"},$e={class:"p-paginator-right-content"},Se=["disabled"],Be=["disabled"],Ue=["onClick"],Ie={key:1,class:"p-paginator-dots"},Me=["disabled"],Re=["disabled"],Ee={class:"flex align-items-center justify-content-center"},Fe={__name:"index",setup(je){const P=ne(),{t:o}=ie(),D=de(),y=l(!0),N=l(""),$=l(null),_=l(!1);l(null);const S=l(null),B=l({}),k=l(""),u=l(1),T=l(0),m=l(5),C=l(0),A=l(""),G=l(""),U=l(""),I=l(""),M=l(0),R=l(0),E=l([]),O=()=>{S.value.exportCSV()},W=a=>{N.value=a,_.value=!0},Y=()=>{L.delete(`/api/discount/${N.value}`).then(()=>{g(),_.value=!1,D.add({severity:"success",summary:o("success"),detail:o("discount.deleteSuccess"),life:3e3})}).catch(()=>{D.add({severity:"error",summary:o("error"),detail:o("discount.deleteError"),life:3e3})})},q=()=>{B.value={global:{value:null,matchMode:_e.CONTAINS}}};re(()=>{q()});const g=()=>{y.value=!0,L.get("/api/discount",{params:{page:u.value,limit:m.value,search:k.value}}).then(a=>{$.value=a.data.data.data,T.value=a.data.data.total,C.value=a.data.data.last_page,A.value=a.data.data.first_page_url,G.value=a.data.data.last_page_url,U.value=a.data.data.next_page_url,I.value=a.data.data.prev_page_url,M.value=a.data.data.from,R.value=a.data.data.to,E.value=a.data.data.links,y.value=!1}).catch(a=>{y.value=!1,D.add({severity:"error",summary:o("error"),detail:o("discount.loadError"),life:3e3}),console.error("Error fetching discounts:",a)})};ce(k,a=>{u.value=1,g()});const b=a=>{a>=1&&a<=C.value&&(u.value=a,g())},H=a=>{m.value=a.value,u.value=1,g()};ue(()=>{g()});const J=()=>{P.push({name:"discount-create"})},K=a=>{P.push({name:"discount-update",params:{id:a}})};return(a,e)=>{const X=c("InputText"),p=c("Button"),Z=c("Toolbar"),ee=c("Toast"),w=c("Column"),te=c("ProgressSpinner"),ae=c("DataTable"),se=c("Dropdown"),oe=c("Dialog"),f=j("can"),F=j("tooltip");return v(),h("div",be,[t("div",fe,[t("div",he,[i(Z,{class:"mb-4"},{start:r(()=>[t("h2",xe,d(n(o)("discount.managementTitle")),1)]),end:r(()=>[t("div",ye,[t("span",ke,[e[8]||(e[8]=t("i",{class:"pi pi-search"},null,-1)),i(X,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),placeholder:n(o)("discount.search")},null,8,["modelValue","placeholder"])]),x(i(p,{label:n(o)("discount.export"),icon:"pi pi-upload",class:"p-export",onClick:O},null,8,["label"]),[[f,"list discounts"]]),x(i(p,{label:n(o)("discount.new"),icon:"pi pi-plus",class:"p-button-success",onClick:J},null,8,["label"]),[[f,"create discounts"]])])]),_:1}),i(ee),t("div",Ce,[x((v(),pe(ae,{ref_key:"dt",ref:S,value:$.value,loading:y.value,"data-key":"id",paginator:!1,rows:m.value,filters:B.value,totalRecords:T.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[t("div",we,[e[9]||(e[9]=t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),t("p",De,d(n(o)("discount.noData")),1)])]),loading:r(()=>[t("div",Te,[i(te,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[i(w,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(w,{field:"discount_value",header:n(o)("discount.discount_value"),sortable:!0},{body:r(s=>[Q(d(s.data.discount_value),1)]),_:1},8,["header"]),i(w,{field:"expires_at",header:n(o)("discount.expires_at"),sortable:!0},{body:r(s=>[Q(d(s.data.expires_at),1)]),_:1},8,["header"]),i(w,{header:n(o)("actions"),headerStyle:"width: 12rem"},{body:r(s=>[x(i(p,{icon:"pi pi-pencil",class:"p-detail",onClick:V=>K(s.data.id)},null,8,["onClick"]),[[f,"edit discounts"],[F,n(o)("edit"),void 0,{top:!0}]]),x(i(p,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:V=>W(s.data.id)},null,8,["onClick"]),[[f,"delete discounts"],[F,n(o)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[f,"list discounts"]]),t("div",Ve,[t("div",Pe,[t("span",Ne,d(n(o)("show"))+" "+d(M.value)+" "+d(n(o)("to"))+" "+d(R.value)+" "+d(n(o)("from"))+" "+d(T.value),1)]),t("div",$e,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:e[1]||(e[1]=s=>b(1))},e[10]||(e[10]=[t("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Se),t("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!I.value,onClick:e[2]||(e[2]=s=>b(u.value-1))},e[11]||(e[11]=[t("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Be),(v(!0),h(z,null,ve(E.value,(s,V)=>(v(),h(z,{key:V},[s.label&&!isNaN(s.label)?(v(),h("button",{key:0,class:me(["p-paginator-page p-paginator-element p-link",{"p-highlight":s.active}]),onClick:ze=>b(parseInt(s.label))},d(s.label),11,Ue)):s.label==="..."?(v(),h("span",Ie,"...")):ge("",!0)],64))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!U.value,onClick:e[3]||(e[3]=s=>b(u.value+1))},e[12]||(e[12]=[t("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Me),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===C.value,onClick:e[4]||(e[4]=s=>b(C.value))},e[13]||(e[13]=[t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Re),i(se,{filter:"",modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=s=>m.value=s),options:[5,10,20,30],optionLabel:"",onChange:H,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(oe,{visible:_.value,"onUpdate:visible":e[7]||(e[7]=s=>_.value=s),style:{width:"450px"},header:n(o)("discount.deleteConfirmTitle"),modal:!0},{footer:r(()=>[i(p,{label:n(o)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[6]||(e[6]=s=>_.value=!1)},null,8,["label"]),i(p,{label:n(o)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Y},null,8,["label"])]),default:r(()=>[t("div",Ee,[e[14]||(e[14]=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),t("span",null,d(n(o)("discount.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Qe=le(Fe,[["__scopeId","data-v-1a9c6bc5"]]);export{Qe as default};
