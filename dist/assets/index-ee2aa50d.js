import{_ as E,r as m,o as S,l as n,m as M,s as z,a as f,c as w,b as a,t as _,h as o,q as p,g as $,F,e as R,v as j,p as q,f as A}from"./index-5f332ad0.js";const H=h=>(q("data-v-38601006"),h=h(),A(),h),K={class:"permissions-container"},L={class:"card"},O={class:"header"},G={class:"subtitle"},J={class:"toolbar"},Q={class:"empty-message"},W=H(()=>a("i",{class:"pi pi-database",style:{"font-size":"2rem"}},null,-1)),X={class:"p-fluid"},Y={class:"p-field"},Z={for:"permissionName"},ee={class:"p-field"},se={for:"description"},oe={setup(h){const D=m([]),g=m([]),l=m(!0),y=m(0),v=m(!1),c=m({id:"",name:"",description:""}),T=e=>{const s={};return e.forEach(t=>{const r=t.name.match(/^(list|show|create|edit|delete)\s+(.+)/),d=r?r[2]:"other";s[d]||(s[d]={name:d.charAt(0).toUpperCase()+d.slice(1),value:d,permissions:[]}),s[d].permissions.push(t)}),Object.values(s).sort((t,r)=>t.name.localeCompare(r.name))},b=()=>{l.value=!0,$.get("api/role/all/permissions").then(e=>{D.value=e.data.data,g.value=T(e.data.data),l.value=!1}).catch(e=>{console.error("Error fetching permissions:",e),l.value=!1})},k=e=>{v.value=!0,c.value={id:e.id,name:e.name,description:e.description||""}},C=()=>{l.value=!0,$.put(`/api/role/permission/${c.value.id}`,{description:c.value.description}).then(()=>{b(),v.value=!1}).catch(e=>{console.error("Update failed:",e)}).finally(()=>{l.value=!1})};return S(()=>{b()}),(e,s)=>{const t=n("Button"),r=n("Column"),d=n("Tag"),V=n("DataTable"),x=n("TabPanel"),I=n("TabView"),B=n("InputText"),N=n("Textarea"),P=n("Dialog"),U=M("can");return z((f(),w("div",K,[a("div",L,[a("div",O,[a("h1",null,_(e.$t("permission.permissions_Management")),1),a("p",G,_(e.$t("permission.view_and_manage_all_system_permissions_grouped_by_modules")),1)]),a("div",J,[o(t,{icon:"pi pi-refresh",label:e.$t("permission.refresh"),onClick:b,loading:l.value},null,8,["label","loading"])]),o(I,{activeIndex:y.value,"onUpdate:activeIndex":s[0]||(s[0]=i=>y.value=i),class:"grouped-tabs"},{default:p(()=>[(f(!0),w(F,null,R(g.value,i=>(f(),j(x,{key:i.value,header:i.name},{default:p(()=>[o(V,{value:i.permissions,stripedRows:"",class:"p-datatable-sm",loading:l.value,dataKey:"id",scrollable:"",scrollHeight:"flex"},{empty:p(()=>[a("div",Q,[W,a("p",null,_(e.$t("permission.no_permissions_found_in_this_group")),1)])]),default:p(()=>[o(r,{field:"id",header:e.$t("permission.id"),sortable:"",style:{width:"80px"}},null,8,["header"]),o(r,{field:"name",header:e.$t("permission.name"),sortable:""},{body:p(({data:u})=>[o(d,{value:u.name,severity:u.name.includes("delete")?"danger":u.name.includes("edit")?"warning":u.name.includes("create")?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),o(r,{header:e.$t("permission.actions"),style:{width:"100px"}},{body:p(({data:u})=>[o(t,{icon:"pi pi-cog",class:"p-button-rounded p-button-text p-button-sm",onClick:ae=>k(u)},null,8,["onClick"])]),_:1},8,["header"])]),_:2},1032,["value","loading"])]),_:2},1032,["header"]))),128))]),_:1},8,["activeIndex"]),o(P,{visible:v.value,"onUpdate:visible":s[4]||(s[4]=i=>v.value=i),modal:"",header:e.$t("permission.update_Permission_Description"),style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:p(()=>[o(t,{label:e.$t("permission.cancel"),icon:"pi pi-times",onClick:s[3]||(s[3]=i=>v.value=!1),class:"p-button-text"},null,8,["label"]),o(t,{label:e.$t("permission.save"),icon:"pi pi-check",onClick:C,loading:l.value,autofocus:""},null,8,["label","loading"])]),default:p(()=>[a("div",X,[a("div",Y,[a("label",Z,_(e.$t("permission.permission_Name")),1),o(B,{id:"permissionName",modelValue:c.value.name,"onUpdate:modelValue":s[1]||(s[1]=i=>c.value.name=i),disabled:""},null,8,["modelValue"])]),a("div",ee,[a("label",se,_(e.$t("permission.description")),1),o(N,{id:"description",modelValue:c.value.description,"onUpdate:modelValue":s[2]||(s[2]=i=>c.value.description=i),rows:"5",autoResize:"",placeholder:e.$t("permission.enter_permission_description")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])),[[U,"list permissions"]])}}},te=E(oe,[["__scopeId","data-v-38601006"]]);export{te as default};
