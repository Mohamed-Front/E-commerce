import{u as Z,b as q,L as H,r as o,w as J,U as K,d as ee,V as S,o as u,e as _,f as a,g as r,i as d,j as e,z as $,c as te,t as n,F as E,h as ae,W as se,a as F,X as le,Y as x,Z as oe,$ as ie,a0 as re,a1 as g,s as I,a6 as ne,a2 as de,x as ce,B as pe,a3 as ue,a5 as ve}from"./index-b794012a.js";const he={class:"grid"},_e={class:"col-12"},ge={class:"card p-4 shadow-2 border-round"},me={class:"text-2xl font-bold"},fe={class:"flex gap-2"},be={class:"p-input-icon-left"},ye=a("i",{class:"pi pi-search"},null,-1),xe={class:"card shadow-1 surface-0"},we={class:"text-center py-4"},ke=a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1),Ce={class:"text-xl"},$e={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Pe={class:"p-paginator-left-content"},Ne={class:"p-paginator-current"},Ue={class:"p-paginator-right-content"},Be=["disabled"],De=a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1),Me=[De],Re=["disabled"],Te=a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1),Se=[Te],Ee=["onClick"],Fe={key:1,class:"p-paginator-dots"},Ie=["disabled"],je=a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1),ze=[je],Oe=["disabled"],Le=a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1),We=[Le],Ae={class:"flex align-items-center justify-content-center"},Ge=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1),Ze={setup(Qe){const{t:s}=Z(),j=q(),w=H(),m=o(!0),z=o(""),f=o(!1),V=o(null);o(null);const P=o(null),N=o({}),b=o(""),c=o(1),k=o(0),p=o(10),y=o(0),O=o(""),L=o(""),U=o(""),B=o(""),D=o(0),M=o(0),R=o([]),W=()=>{N.value={global:{value:null,matchMode:se.CONTAINS}}},v=()=>{m.value=!0,F.get("/api/order",{params:{page:c.value,limit:p.value,search:b.value||void 0}}).then(l=>{V.value=l.data.data.data,k.value=l.data.data.total,y.value=l.data.data.last_page,O.value=l.data.data.first_page_url,L.value=l.data.data.last_page_url,U.value=l.data.data.next_page_url,B.value=l.data.data.prev_page_url,D.value=l.data.data.from,M.value=l.data.data.to,R.value=l.data.data.links,m.value=!1}).catch(l=>{w.add({severity:"error",summary:s("error"),detail:s("order.loadError"),life:3e3}),m.value=!1,console.error("Error fetching data:",l)})};J([b,p],()=>{c.value=1,v()});const h=l=>{l>=1&&l<=y.value&&(c.value=l,v())},A=l=>{p.value=l.value,c.value=1,v()},G=()=>{F.delete(`/api/order/${z.value}`).then(()=>{w.add({severity:"success",summary:s("success"),detail:s("order.deleteSuccess"),life:3e3}),v(),f.value=!1}).catch(l=>{w.add({severity:"error",summary:s("error"),detail:s("order.deleteError"),life:3e3})})},Q=()=>{P.value.exportCSV()},X=l=>{j.push({name:"order-show",params:{id:l}})};return K(()=>{W()}),ee(()=>{v()}),(l,i)=>{const C=S("can"),Y=S("tooltip");return u(),_("div",he,[a("div",_e,[a("div",ge,[r(e(oe),{class:"mb-4"},{start:d(()=>[a("h2",me,n(e(s)("order.managementTitle")),1)]),end:d(()=>[a("div",fe,[a("span",be,[ye,r(e(le),{modelValue:b.value,"onUpdate:modelValue":i[0]||(i[0]=t=>b.value=t),placeholder:e(s)("order.search")},null,8,["modelValue","placeholder"])]),$(r(e(x),{label:e(s)("order.export"),icon:"pi pi-upload",class:"p-export",onClick:Q},null,8,["label"]),[[C,"export orders"]])])]),_:1}),r(e(ie)),a("div",xe,[$((u(),te(e(de),{ref_key:"dt",ref:P,value:V.value,loading:m.value,"data-key":"id",paginator:!1,rows:p.value,filters:N.value,totalRecords:k.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[a("div",we,[ke,a("p",Ce,n(e(s)("order.noData")),1)])]),loading:d(()=>[a("div",$e,[r(e(re),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[r(e(g),{"selection-mode":"multiple","header-style":"width: 3rem"}),r(e(g),{field:"id",header:e(s)("order.id"),sortable:!0,"header-style":"width:14%; min-width:8rem;"},{body:d(t=>[I(n(t.data.id),1)]),_:1},8,["header"]),r(e(g),{field:"total_price",header:e(s)("order.totalPrice"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[I(" $"+n(t.data.total_price),1)]),_:1},8,["header"]),r(e(g),{field:"status",header:e(s)("order.status"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[r(e(ne),{value:t.data.status===0?e(s)("order.pending"):e(s)("order.completed"),severity:t.data.status===0?"warning":"success"},null,8,["value","severity"])]),_:1},8,["header"]),r(e(g),{header:e(s)("actions"),"header-style":"min-width:10rem;"},{body:d(t=>[$(r(e(x),{icon:"pi pi-eye",class:"p-detail",onClick:T=>X(t.data.id)},null,8,["onClick"]),[[C,"show orders"],[Y,e(s)("view"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[C,"list orders"]]),a("div",Ve,[a("div",Pe,[a("span",Ne,n(e(s)("show"))+" "+n(D.value)+" "+n(e(s)("to"))+" "+n(M.value)+" "+n(e(s)("from"))+" "+n(k.value),1)]),a("div",Ue,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:i[1]||(i[1]=t=>h(1))},Me,8,Be),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!B.value,onClick:i[2]||(i[2]=t=>h(c.value-1))},Se,8,Re),(u(!0),_(E,null,ae(R.value,(t,T)=>(u(),_(E,{key:T},[t.label&&!isNaN(parseInt(t.label))?(u(),_("button",{key:0,class:ce(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Xe=>h(parseInt(t.label))},n(t.label),11,Ee)):t.label==="..."?(u(),_("span",Fe,"...")):pe("",!0)],64))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!U.value,onClick:i[3]||(i[3]=t=>h(c.value+1))},ze,8,Ie),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===y.value,onClick:i[4]||(i[4]=t=>h(y.value))},We,8,Oe),r(e(ue),{modelValue:p.value,"onUpdate:modelValue":i[5]||(i[5]=t=>p.value=t),options:[5,10,20,30],onChange:A,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),r(e(ve),{visible:f.value,"onUpdate:visible":i[7]||(i[7]=t=>f.value=t),style:{width:"450px"},header:e(s)("order.deleteConfirmTitle"),modal:!0},{footer:d(()=>[r(e(x),{label:e(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:i[6]||(i[6]=t=>f.value=!1)},null,8,["label"]),r(e(x),{label:e(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:G},null,8,["label"])]),default:d(()=>[a("div",Ae,[Ge,a("span",null,n(e(s)("order.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{Ze as default};
