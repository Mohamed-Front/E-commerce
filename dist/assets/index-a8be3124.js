import{_ as ne,u as ie,E as re,B as de,r as n,G as pe,k as ue,j as ce,H as p,I as z,o as _,c as x,a as s,b as i,w as r,J as y,g as ve,t as d,e as o,F as A,d as _e,K as me,D as G,l as L,p as ge,C as be}from"./index-e0fe619d.js";const fe={class:"grid"},he={class:"col-12"},xe={class:"card p-4 shadow-2 border-round"},ye={class:"text-2xl font-bold"},ke={class:"flex gap-2"},Ce={class:"p-input-icon-left"},we={class:"card shadow-1 surface-0"},Te={class:"text-center py-4"},De={class:"text-xl"},Ve={class:"flex justify-content-center align-items-center py-4"},Se={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Pe={class:"p-paginator-left-content"},Ne={class:"p-paginator-current"},$e={class:"p-paginator-right-content"},Be=["disabled"],Ee=["disabled"],Ie=["onClick"],Me={key:1,class:"p-paginator-dots"},Ue=["disabled"],Re=["disabled"],Fe={class:"flex align-items-center justify-content-center"},je={__name:"index",setup(ze){const S=ie(),T=re(),{t:a}=de(),k=n(!0),P=n("");n({});const N=n(null);n(!1),n(!1);const m=n(!1);n(null);const $=n(null),B=n({}),C=n(""),u=n(1),D=n(0),g=n(10),w=n(0),H=n(""),J=n(""),E=n(""),I=n(""),M=n(0),U=n(0),R=n([]),K=()=>{$.value.exportCSV()},O=l=>{P.value=l,m.value=!0},Q=()=>{G.delete(`/api/store/${P.value}`).then(()=>{b(),m.value=!1,T.add({severity:"success",summary:a("success"),detail:a("store.deletedSuccess"),life:3e3})}).catch(()=>{T.add({severity:"error",summary:a("error"),detail:a("store.deleteError"),life:3e3})})},W=()=>{B.value={global:{value:null,matchMode:me.CONTAINS}}};pe(()=>{W()});const b=()=>{k.value=!0,G.get("/api/store",{params:{page:u.value,limit:g.value,search:C.value}}).then(l=>{k.value=!1,N.value=l.data.data.data,D.value=l.data.data.total,w.value=l.data.data.last_page,H.value=l.data.data.first_page_url,J.value=l.data.data.last_page_url,E.value=l.data.data.next_page_url,I.value=l.data.data.prev_page_url,M.value=l.data.data.from,U.value=l.data.data.to,R.value=l.data.data.links}).catch(l=>{k.value=!1,T.add({severity:"error",summary:a("error"),detail:a("store.loadError"),life:3e3}),console.error("Error fetching data:",l)})};ue(C,l=>{u.value=1,b()});const f=l=>{l>=1&&l<=w.value&&(u.value=l,b())},q=l=>{g.value=l.value,u.value=1,b()};ce(()=>{b()});const X=()=>{S.push({name:"store-create"})},Y=l=>{S.push({name:"store-edit",params:{id:l}})};return(l,e)=>{const Z=p("InputText"),c=p("Button"),ee=p("Toolbar"),te=p("Toast"),v=p("Column"),F=p("Tag"),ae=p("ProgressSpinner"),se=p("DataTable"),le=p("Dropdown"),oe=p("Dialog"),h=z("can"),j=z("tooltip");return _(),x("div",fe,[s("div",he,[s("div",xe,[i(ee,{class:"mb-4"},{start:r(()=>[s("h2",ye,d(o(a)("store.managementTitle")),1)]),end:r(()=>[s("div",ke,[s("span",Ce,[e[8]||(e[8]=s("i",{class:"pi pi-search"},null,-1)),i(Z,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value=t),placeholder:o(a)("store.search")},null,8,["modelValue","placeholder"])]),y(i(c,{label:o(a)("store.export"),icon:"pi pi-upload",class:"p-export",onClick:K},null,8,["label"]),[[h,"list stores"]]),y(i(c,{label:o(a)("store.new"),icon:"pi pi-plus",class:"p-button-success",onClick:X},null,8,["label"]),[[h,"create stores"]])])]),_:1}),i(te),s("div",we,[y((_(),ve(se,{ref_key:"dt",ref:$,value:N.value,loading:k.value,"data-key":"id",paginator:!1,rows:g.value,filters:B.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[s("div",Te,[e[9]||(e[9]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",De,d(o(a)("store.noData")),1)])]),loading:r(()=>[s("div",Ve,[i(ae,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[i(v,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(v,{field:"name_en",header:o(a)("store.nameEn"),sortable:!0},{body:r(t=>[L(d(t.data.name_en),1)]),_:1},8,["header"]),i(v,{field:"name_ar",header:o(a)("store.nameAr"),sortable:!0},{body:r(t=>[L(d(t.data.name_ar),1)]),_:1},8,["header"]),i(v,{field:"is_default",header:o(a)("store.isDefault"),sortable:!0},{body:r(t=>[i(F,{value:t.data.is_default?o(a)("store.yes"):o(a)("store.no"),severity:t.data.is_default?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(v,{field:"has_market",header:o(a)("store.hasMarket"),sortable:!0},{body:r(t=>[i(F,{value:t.data.has_market?o(a)("store.yes"):o(a)("store.no"),severity:t.data.has_market?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(v,{header:o(a)("actions"),headerStyle:"width: 12rem"},{body:r(t=>[y(i(c,{icon:"pi pi-pencil",class:"p-detail",onClick:V=>Y(t.data.id)},null,8,["onClick"]),[[h,"edit stores"],[j,o(a)("edit"),void 0,{top:!0}]]),y(i(c,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:V=>O(t.data.id)},null,8,["onClick"]),[[h,"delete stores"],[j,o(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[h,"list stores"]]),s("div",Se,[s("div",Pe,[s("span",Ne,d(o(a)("show"))+" "+d(M.value)+" "+d(o(a)("to"))+" "+d(U.value)+" "+d(o(a)("from"))+" "+d(D.value),1)]),s("div",$e,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:e[1]||(e[1]=t=>f(1))},e[10]||(e[10]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Be),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!I.value,onClick:e[2]||(e[2]=t=>f(u.value-1))},e[11]||(e[11]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Ee),(_(!0),x(A,null,_e(R.value,(t,V)=>(_(),x(A,{key:V},[t.label&&!isNaN(t.label)?(_(),x("button",{key:0,class:ge(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Ae=>f(parseInt(t.label))},d(t.label),11,Ie)):t.label==="..."?(_(),x("span",Me,"...")):be("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!E.value,onClick:e[3]||(e[3]=t=>f(u.value+1))},e[12]||(e[12]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Ue),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===w.value,onClick:e[4]||(e[4]=t=>f(w.value))},e[13]||(e[13]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Re),i(le,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t),options:[5,10,20,30],optionLabel:"",onChange:q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(oe,{visible:m.value,"onUpdate:visible":e[7]||(e[7]=t=>m.value=t),style:{width:"450px"},header:o(a)("store.deleteConfirmTitle"),modal:!0},{footer:r(()=>[i(c,{label:o(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[6]||(e[6]=t=>m.value=!1)},null,8,["label"]),i(c,{label:o(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Q},null,8,["label"])]),default:r(()=>[s("div",Fe,[e[14]||(e[14]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,d(o(a)("store.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Le=ne(je,[["__scopeId","data-v-b3298778"]]);export{Le as default};
