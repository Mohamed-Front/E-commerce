import{_ as O,u as N,H as R,j as z,r as u,l as G,o as H,a3 as w,L as J,a as c,c as p,I as K,f as t,t as r,e as n,M as _,h as m,G as g,q as C,w as Q,F as W,i as I}from"./index-4abc91ca.js";const X={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},Y={class:"text-3xl font-bold text-center mb-8 text-gray-800"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee={class:"space-y-2"},te={for:"name_en",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2"},oe={for:"name_ar",class:"block text-sm font-medium text-gray-700"},se={class:"space-y-2"},le={for:"parent_id",class:"block text-sm font-medium text-gray-700"},ne={class:"space-y-2"},re={for:"store_id",class:"block text-sm font-medium text-gray-700"},ie={class:"space-y-2 md:col-span-2"},de={class:"block text-sm font-medium text-gray-700"},ue={class:"flex items-center space-x-4"},ce={class:"text-sm text-gray-600"},pe={class:"space-y-2"},ge={class:"block text-sm font-medium text-gray-700"},me={class:"flex justify-center"},be={key:0,class:"p-4 w-full h-full"},ve={class:"relative group w-full h-full"},_e=["src","alt"],fe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},ye={key:1,class:"p-4 flex flex-col items-center justify-center"},xe={class:"text-sm text-center text-gray-600"},he={class:"text-blue-500 font-medium"},we={class:"space-y-2"},ke={class:"block text-sm font-medium text-gray-700"},De={class:"flex justify-center"},Ve={key:0,class:"p-4 w-full h-full"},je={class:"relative group w-full h-full"},Te=["src","alt"],Ce={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ie={key:1,class:"p-4 flex flex-col items-center justify-center"},Ue={class:"text-sm text-center text-gray-600"},Pe={class:"text-blue-500 font-medium"},$e={class:"space-y-2 md:col-span-2"},Be={class:"block text-sm font-medium text-gray-700"},Le={class:"flex justify-center"},Se={key:0,class:"p-4 w-full h-full"},Ee={class:"relative group w-full h-full"},Ae=["src","alt"],Fe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},qe={key:1,class:"p-4 flex flex-col items-center justify-center"},Me={class:"text-sm text-center text-gray-600"},Oe={class:"text-blue-500 font-medium"},Ne={class:"pt-4 flex justify-center space-x-4"},Re={key:0},ze={key:1,class:"pi pi-spinner pi-spin"},Ge={__name:"create",setup(He){const U=N(),P=R(),{t:a}=z(),b=u(!1),$=G(()=>localStorage.getItem("appLang")=="ar"?"name_ar":"name_en"),s=u({name_en:"",name_ar:"",is_market:!1,parent_id:null,store_id:null,image:null,banner_one_image:null,banner_two_image:null}),k=u(null),D=u(null),V=u(null),B=u([]),L=u([]),f=u(!1),y=u(!1),x=u(!1),S=async()=>{try{const l=await I.get("/api/category");B.value=l.data.data.data}catch(l){console.error("Error fetching parent categories:",l)}},E=async()=>{try{const l=await I.get("/api/store");L.value=l.data.data.data}catch(l){console.error("Error fetching stores:",l)}},A=(l,e)=>{const d=new FileReader;d.onload=i=>{switch(e){case"image":s.value.image=l,k.value=i.target.result,f.value=!1;break;case"banner_one":s.value.banner_one_image=l,D.value=i.target.result,y.value=!1;break;case"banner_two":s.value.banner_two_image=l,V.value=i.target.result,x.value=!1;break}},d.readAsDataURL(l)},v=(l,e)=>{var i,j,h;const d=((i=l.target.files)==null?void 0:i[0])||((h=(j=l.dataTransfer)==null?void 0:j.files)==null?void 0:h[0]);d&&d.type.match("image.*")&&A(d,e)},T=l=>{switch(l){case"image":s.value.image=null,k.value=null;break;case"banner_one":s.value.banner_one_image=null,D.value=null;break;case"banner_two":s.value.banner_two_image=null,V.value=null;break}},F=async()=>{var e,d;b.value=!0;const l=new FormData;l.append("name_en",s.value.name_en),l.append("name_ar",s.value.name_ar),l.append("is_market",s.value.is_market?"1":"0"),l.append("parent_id",s.value.parent_id||""),l.append("store_id",s.value.store_id||""),s.value.image&&l.append("image",s.value.image),s.value.banner_one_image&&l.append("banner_one_image",s.value.banner_one_image),s.value.banner_two_image&&l.append("banner_two_image",s.value.banner_two_image);try{const i=await I.post("/api/category",l);U.push({name:"categories"}),P.add({severity:"success",summary:a("success"),detail:a("category.createSuccess"),life:3e3})}catch(i){console.error("Error:",i),P.add({severity:"error",summary:a("error"),detail:((d=(e=i.response)==null?void 0:e.data)==null?void 0:d.message)||a("category.createError"),life:3e3})}finally{b.value=!1}};return H(()=>{S(),E()}),(l,e)=>{const d=w("InputText"),i=w("Dropdown"),j=w("InputSwitch"),h=w("Button"),q=w("Toast"),M=J("can");return c(),p(W,null,[K((c(),p("div",X,[t("h1",Y,r(n(a)("category.createTitle")),1),t("form",{onSubmit:g(F,["prevent"]),class:"space-y-6"},[t("div",Z,[t("div",ee,[t("label",te,[_(r(n(a)("category.nameEn"))+" ",1),e[21]||(e[21]=t("span",{class:"text-red-500"},"*",-1))]),m(d,{id:"name_en",modelValue:s.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.name_en=o),placeholder:n(a)("category.nameEnPlaceholder"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",ae,[t("label",oe,[_(r(n(a)("category.nameAr"))+" ",1),e[22]||(e[22]=t("span",{class:"text-red-500"},"*",-1))]),m(d,{id:"name_ar",modelValue:s.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.name_ar=o),placeholder:n(a)("category.nameArPlaceholder"),dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",se,[t("label",le,r(n(a)("category.parent")),1),m(i,{filter:"",modelValue:s.value.parent_id,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.parent_id=o),options:B.value,optionLabel:$.value,optionValue:"id",placeholder:n(a)("category.selectParent"),class:"w-full",showClear:!0},null,8,["modelValue","options","optionLabel","placeholder"])]),t("div",ne,[t("label",re,[_(r(n(a)("category.store"))+" ",1),e[23]||(e[23]=t("span",{class:"text-red-500"},"*",-1))]),m(i,{filter:"",modelValue:s.value.store_id,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.store_id=o),options:L.value,optionLabel:$.value,optionValue:"id",placeholder:n(a)("category.selectStore"),class:"w-full",required:""},null,8,["modelValue","options","optionLabel","placeholder"])]),t("div",ie,[t("label",de,r(n(a)("category.marketType")),1),t("div",ue,[m(j,{modelValue:s.value.is_market,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.is_market=o)},null,8,["modelValue"]),t("span",ce,r(s.value.is_market?n(a)("category.market"):n(a)("category.nonMarket")),1)])]),t("div",pe,[t("label",ge,r(n(a)("category.image")),1),t("div",me,[t("label",{onDragover:e[7]||(e[7]=g(o=>f.value=!0,["prevent"])),onDragleave:e[8]||(e[8]=o=>f.value=!1),onDrop:e[9]||(e[9]=g(o=>v(o,"image"),["prevent"])),class:C([{"border-blue-500 bg-blue-50":f.value,"border-gray-300":!f.value},"cursor-pointer w-full h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[5]||(e[5]=o=>v(o,"image")),accept:"image/*",class:"hidden"},null,32),k.value?(c(),p("div",be,[t("div",ve,[t("img",{src:k.value,alt:n(a)("category.imagePreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,_e),t("div",fe,[t("button",{type:"button",onClick:e[6]||(e[6]=g(o=>T("image"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[24]||(e[24]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(c(),p("div",ye,[e[25]||(e[25]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",xe,[t("span",he,r(n(a)("category.clickToUpload")),1),_(" "+r(n(a)("category.orDragAndDrop")),1)])]))],34)])]),t("div",we,[t("label",ke,r(n(a)("category.bannerOne")),1),t("div",De,[t("label",{onDragover:e[12]||(e[12]=g(o=>y.value=!0,["prevent"])),onDragleave:e[13]||(e[13]=o=>y.value=!1),onDrop:e[14]||(e[14]=g(o=>v(o,"banner_one"),["prevent"])),class:C([{"border-blue-500 bg-blue-50":y.value,"border-gray-300":!y.value},"cursor-pointer w-full h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[10]||(e[10]=o=>v(o,"banner_one")),accept:"image/*",class:"hidden"},null,32),D.value?(c(),p("div",Ve,[t("div",je,[t("img",{src:D.value,alt:n(a)("category.bannerOnePreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Te),t("div",Ce,[t("button",{type:"button",onClick:e[11]||(e[11]=g(o=>T("banner_one"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[26]||(e[26]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(c(),p("div",Ie,[e[27]||(e[27]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",Ue,[t("span",Pe,r(n(a)("category.clickToUpload")),1),_(" "+r(n(a)("category.orDragAndDrop")),1)])]))],34)])]),t("div",$e,[t("label",Be,r(n(a)("category.bannerTwo")),1),t("div",Le,[t("label",{onDragover:e[17]||(e[17]=g(o=>x.value=!0,["prevent"])),onDragleave:e[18]||(e[18]=o=>x.value=!1),onDrop:e[19]||(e[19]=g(o=>v(o,"banner_two"),["prevent"])),class:C([{"border-blue-500 bg-blue-50":x.value,"border-gray-300":!x.value},"cursor-pointer w-full max-w-2xl h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[15]||(e[15]=o=>v(o,"banner_two")),accept:"image/*",class:"hidden"},null,32),V.value?(c(),p("div",Se,[t("div",Ee,[t("img",{src:V.value,alt:n(a)("category.bannerTwoPreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ae),t("div",Fe,[t("button",{type:"button",onClick:e[16]||(e[16]=g(o=>T("banner_two"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[28]||(e[28]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(c(),p("div",qe,[e[29]||(e[29]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",Me,[t("span",Oe,r(n(a)("category.clickToUpload")),1),_(" "+r(n(a)("category.orDragAndDrop")),1)])]))],34)])])]),t("div",Ne,[m(h,{type:"button",label:n(a)("cancel"),icon:"pi pi-times",onClick:e[20]||(e[20]=o=>n(U).go(-1)),class:"px-6 py-3 mx-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:b.value},null,8,["label","disabled"]),m(h,{type:"submit",label:n(a)("category.createButton"),icon:"pi pi-plus",loading:b.value,class:"px-8 mx-2 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:b.value},{default:Q(()=>[b.value?(c(),p("i",ze)):(c(),p("span",Re,r(n(a)("category.createButton")),1))]),_:1},8,["label","loading","disabled"])])],32)])),[[M,"create categories"]]),m(q)],64)}}},Ke=O(Ge,[["__scopeId","data-v-516375ac"]]);export{Ke as default};
