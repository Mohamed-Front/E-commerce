import{_ as X,u as Y,k as Z,D as ee,j as ae,r as k,l as P,n as se,o as te,a as u,c as m,h as _,e as b,f as s,t,v as i,E as p,g as v,F as le,d as re,w as M,i as q,P as oe,R as E,ag as Q,a5 as G,T as C,a2 as de}from"./index-5ecb99ce.js";import{l as ie}from"./lodash-ceb3546b.js";const ne=["dir"],ue={key:0,class:"card mb-6 transform hover:scale-[1.01] transition-transform duration-300"},me={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ce={class:"text-lg"},_e={class:"text-lg"},be={class:"text-lg"},pe={class:"card mb-6 transform hover:scale-[1.01] transition-transform duration-300"},ge={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ve={class:"space-y-2"},fe={key:0,id:"name_en_error",class:"text-red-500"},ye={class:"space-y-2"},he={key:0,id:"name_ar_error",class:"text-red-500"},$e={class:"space-y-2"},we={key:2,id:"ids_error",class:"text-red-500"},ke={class:"space-y-2"},xe={key:0,class:"text-red-500"},Ve={class:"card mb-6"},De={key:0,class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},qe={class:"flex justify-between items-start"},Ce={class:"text-lg"},Fe={class:"text-lg"},Le={key:0},Ee=["src","alt"],Se={class:"flex space-x-2"},Ie={key:1,class:"text-gray-500 text-lg"},Ue={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6"},Pe={class:"space-y-2"},Te={key:0,id:"edit_name_en_error",class:"text-red-500"},je={class:"space-y-2"},Ne={key:0,id:"edit_name_ar_error",class:"text-red-500"},ze={class:"space-y-2"},Be={key:0,id:"edit_ids_error",class:"text-red-500"},Re={class:"space-y-2"},Ae=["src","alt"],Me={__name:"show",setup(Qe){Y();const V=Z(),y=ee(),{t:n}=ae(),c=k(null),D=k(!1),T=k(""),o=k({custom_tab_id:V.params.id,name_en:"",name_ar:"",ids:[],image:null}),r=k({id:null,custom_tab_id:V.params.id,name_en:"",name_ar:"",ids:[],image:null,media:[]}),S=k([]),I=k(localStorage.getItem("appLang")||"en"),j=P(()=>I.value==="en"?"name_en":"name_ar"),h=P(()=>o.value.name_en&&o.value.name_ar&&o.value.ids.length>0&&o.value.image),$=P(()=>r.value.name_en&&r.value.name_ar&&r.value.ids.length>0),F=async()=>{try{const e=await q.get(`/api/custom-tabs/${V.params.id}`);if(e.data.is_success)c.value=e.data.data,await U();else throw new Error(e.data.message)}catch{y.add({severity:"error",summary:n("error"),detail:n("custom_tabs.fetch_failed"),life:3e3})}},U=async()=>{var e,a;try{const l=((e=c.value)==null?void 0:e.type)==2?"/api/product":"/api/category",f=await q.get(l,{params:{search:T.value||void 0}});S.value=f.data.data.data.map(g=>({...g,label:I.value==="en"?g.name_en:g.name_ar,value:g.id}))}catch{y.add({severity:"error",summary:n("error"),detail:((a=c.value)==null?void 0:a.type)==2?n("product.loadError"):n("category.loadError"),life:3e3})}},H=ie.debounce(U,300),N=e=>{T.value=e.value,H()};se(I,()=>{U()});const J=async()=>{var e,a;try{const l=new FormData;l.append("custom_tab_id",o.value.custom_tab_id),l.append("name_en",o.value.name_en),l.append("name_ar",o.value.name_ar),l.append("image",o.value.image),o.value.ids.forEach((g,x)=>{l.append(`ids[${x}]`,g)}),(await q.post("/api/custom-tab-details",l,{headers:{"Content-Type":"multipart/form-data"}})).data.is_success&&(y.add({severity:"success",summary:n("success"),detail:n("custom_tabs.detail_added"),life:3e3}),o.value={custom_tab_id:V.params.id,name_en:"",name_ar:"",ids:[],image:null},await F())}catch(l){y.add({severity:"error",summary:n("error"),detail:((a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message)||n("custom_tabs.add_failed"),life:3e3})}},K=async e=>{var a,l;try{(await q.delete(`/api/custom-tab-details/${e}`)).data.is_success&&(y.add({severity:"success",summary:n("success"),detail:n("custom_tabs.detail_deleted"),life:3e3}),await F())}catch(f){y.add({severity:"error",summary:n("error"),detail:((l=(a=f.response)==null?void 0:a.data)==null?void 0:l.message)||n("custom_tabs.delete_failed"),life:3e3})}},O=e=>{r.value={id:e.id,custom_tab_id:V.params.id,name_en:e.name_en,name_ar:e.name_ar,ids:e.ids,image:null,media:e.media},D.value=!0},W=async()=>{var e,a;try{const l=new FormData;l.append("custom_tab_id",r.value.custom_tab_id),l.append("name_en",r.value.name_en),l.append("name_ar",r.value.name_ar),r.value.image&&l.append("image",r.value.image),r.value.ids.forEach((g,x)=>{l.append(`ids[${x}]`,g)}),l.append("_method","PUT"),(await q.post(`/api/custom-tab-details/${r.value.id}`,l,{headers:{"Content-Type":"multipart/form-data"}})).data.is_success&&(y.add({severity:"success",summary:n("success"),detail:n("custom_tabs.detail_updated"),life:3e3}),D.value=!1,await F())}catch(l){y.add({severity:"error",summary:n("error"),detail:((a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message)||n("custom_tabs.update_failed"),life:3e3})}},z=(e,a)=>{e==="new"?o.value.image=a.files[0]:r.value.image=a.files[0]};return te(()=>{F()}),(e,a)=>{var l,f,g,x,B;return u(),m("div",{class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",dir:e.$t("dir")},[_(b(oe),{position:"top-right"}),c.value?(u(),m("div",ue,[s("h1",{class:i(["text-3xl font-bold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},t(c.value.name_ar),3),s("div",me,[s("div",null,[s("p",ce,[s("strong",null,t(e.$t("custom_tabs.store"))+":",1),p(" "+t(c.value.store.name_en),1)]),s("p",_e,[s("strong",null,t(e.$t("custom_tabs.name_en"))+":",1),p(" "+t(c.value.name_en),1)])]),s("div",null,[s("p",be,[s("strong",null,t(e.$t("custom_tabs.name_ar"))+":",1),p(" "+t(c.value.name_ar),1)])])])])):v("",!0),s("div",pe,[s("h2",{class:i(["text-2xl font-semibold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},t(e.$t("custom_tabs.add_new_detail")),3),s("div",ge,[s("div",ve,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[p(t(e.$t("custom_tabs.name_en"))+" ",1),a[10]||(a[10]=s("span",{class:"text-red-500"},"*",-1))],2),_(b(E),{modelValue:o.value.name_en,"onUpdate:modelValue":a[0]||(a[0]=d=>o.value.name_en=d),placeholder:e.$t("custom_tabs.enter_name_en"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!h.value&&!o.value.name_en}]),"aria-describedby":"name_en_error",required:""},null,8,["modelValue","placeholder","class"]),!h.value&&!o.value.name_en?(u(),m("small",fe,t(e.$t("custom_tabs.name_en_required")),1)):v("",!0)]),s("div",ye,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[p(t(e.$t("custom_tabs.name_ar"))+" ",1),a[11]||(a[11]=s("span",{class:"text-red-500"},"*",-1))],2),_(b(E),{modelValue:o.value.name_ar,"onUpdate:modelValue":a[1]||(a[1]=d=>o.value.name_ar=d),placeholder:e.$t("custom_tabs.enter_name_ar"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!h.value&&!o.value.name_ar}]),"aria-describedby":"name_ar_error",required:""},null,8,["modelValue","placeholder","class"]),!h.value&&!o.value.name_ar?(u(),m("small",he,t(e.$t("custom_tabs.name_ar_required")),1)):v("",!0)]),s("div",$e,[((l=c.value)==null?void 0:l.type)==2?(u(),m("label",{key:0,class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[p(t(e.$t("custom_tabs.select_products"))+" ",1),a[12]||(a[12]=s("span",{class:"text-red-500"},"*",-1))],2)):(u(),m("label",{key:1,class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[p(t(e.$t("custom_tabs.select_categories"))+" ",1),a[13]||(a[13]=s("span",{class:"text-red-500"},"*",-1))],2)),_(b(Q),{modelValue:o.value.ids,"onUpdate:modelValue":a[2]||(a[2]=d=>o.value.ids=d),options:S.value,optionLabel:j.value,optionValue:"id",placeholder:((f=c.value)==null?void 0:f.type)==2?e.$t("custom_tabs.select_products"):e.$t("custom_tabs.select_categories"),class:i(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":!h.value&&!o.value.ids.length}]),"aria-describedby":"ids_error",filter:"",filterPlaceholder:((g=c.value)==null?void 0:g.type)==2?e.$t("custom_tabs.search_products"):e.$t("custom_tabs.search_categories"),onFilter:N,required:""},null,8,["modelValue","options","optionLabel","placeholder","class","filterPlaceholder"]),!h.value&&!o.value.ids.length?(u(),m("small",we,t(e.$t("custom_tabs.ids_required")),1)):v("",!0)]),s("div",ke,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[p(t(e.$t("custom_tabs.image"))+" ",1),a[14]||(a[14]=s("span",{class:"text-red-500"},"*",-1))],2),_(b(G),{mode:"basic",accept:"image/*",maxFileSize:1e6,onSelect:a[3]||(a[3]=d=>z("new",d)),chooseLabel:e.$t("custom_tabs.select_image"),class:"p-button-rounded"},null,8,["chooseLabel"]),!h.value&&!o.value.image?(u(),m("small",xe,t(e.$t("custom_tabs.image_required")),1)):v("",!0)])]),_(b(C),{label:e.$t("custom_tabs.add_detail"),icon:"pi pi-plus",class:"mt-6 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",onClick:J,disabled:!h.value},null,8,["label","disabled"])]),s("div",Ve,[s("h2",{class:i(["text-2xl font-semibold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},t(e.$t("custom_tabs.details")),3),(B=(x=c.value)==null?void 0:x.details)!=null&&B.length?(u(),m("div",De,[(u(!0),m(le,null,re(c.value.details,d=>(u(),m("div",{key:d.id,class:"border p-4 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow duration-300"},[s("div",qe,[s("div",null,[s("p",Ce,[s("strong",null,t(e.$t("custom_tabs.name_en"))+":",1),p(" "+t(d.name_en),1)]),s("p",Fe,[s("strong",null,t(e.$t("custom_tabs.name_ar"))+":",1),p(" "+t(d.name_ar),1)]),d.media.length?(u(),m("div",Le,[s("strong",null,t(e.$t("custom_tabs.media"))+":",1),s("img",{src:d.media[0].url,alt:e.$t("custom_tabs.detail_image"),class:"w-32 h-32 object-cover mt-2 rounded-lg"},null,8,Ee)])):v("",!0)]),s("div",Se,[_(b(C),{icon:"pi pi-pencil",class:"p-detail p-button-rounded",onClick:L=>O(d)},null,8,["onClick"]),_(b(C),{severity:"danger",icon:"pi pi-trash",class:"p-delete p-button-rounded",onClick:L=>K(d.id)},null,8,["onClick"])])])]))),128))])):(u(),m("p",Ie,t(e.$t("custom_tabs.no_details")),1))]),_(b(de),{visible:D.value,"onUpdate:visible":a[9]||(a[9]=d=>D.value=d),header:e.$t("custom_tabs.edit_detail"),modal:!0,class:i(["w-full max-w-3xl bg-white rounded-xl shadow-2xl",{rtl:e.$t("dir")==="rtl"}])},{footer:M(()=>[_(b(C),{label:e.$t("custom_tabs.cancel"),severity:"secondary",class:"p-button-rounded",onClick:a[8]||(a[8]=d=>D.value=!1)},null,8,["label"]),_(b(C),{label:e.$t("custom_tabs.save"),icon:"pi pi-check",class:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",onClick:W,disabled:!$.value},null,8,["label","disabled"])]),default:M(()=>{var d,L,R,A;return[s("div",Ue,[s("div",Pe,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[p(t(e.$t("custom_tabs.name_en"))+" ",1),a[15]||(a[15]=s("span",{class:"text-red-500"},"*",-1))],2),_(b(E),{modelValue:r.value.name_en,"onUpdate:modelValue":a[4]||(a[4]=w=>r.value.name_en=w),placeholder:e.$t("custom_tabs.enter_name_en"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!$.value&&!r.value.name_en}]),"aria-describedby":"edit_name_en_error",required:""},null,8,["modelValue","placeholder","class"]),!$.value&&!r.value.name_en?(u(),m("small",Te,t(e.$t("custom_tabs.name_en_required")),1)):v("",!0)]),s("div",je,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[p(t(e.$t("custom_tabs.name_ar"))+" ",1),a[16]||(a[16]=s("span",{class:"text-red-500"},"*",-1))],2),_(b(E),{modelValue:r.value.name_ar,"onUpdate:modelValue":a[5]||(a[5]=w=>r.value.name_ar=w),placeholder:e.$t("custom_tabs.enter_name_ar"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!$.value&&!r.value.name_ar}]),"aria-describedby":"edit_name_ar_error",required:""},null,8,["modelValue","placeholder","class"]),!$.value&&!r.value.name_ar?(u(),m("small",Ne,t(e.$t("custom_tabs.name_ar_required")),1)):v("",!0)]),s("div",ze,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[p(t(((d=c.value)==null?void 0:d.type)==2?e.$t("custom_tabs.select_products"):e.$t("custom_tabs.select_categories"))+" ",1),a[17]||(a[17]=s("span",{class:"text-red-500"},"*",-1))],2),_(b(Q),{modelValue:r.value.ids,"onUpdate:modelValue":a[6]||(a[6]=w=>r.value.ids=w),options:S.value,optionLabel:j.value,optionValue:"id",placeholder:((L=c.value)==null?void 0:L.type)==2?e.$t("custom_tabs.select_products"):e.$t("custom_tabs.select_categories"),class:i(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":!$.value&&!r.value.ids.length}]),"aria-describedby":"edit_ids_error",filter:"",filterPlaceholder:((R=c.value)==null?void 0:R.type)==2?e.$t("custom_tabs.search_products"):e.$t("custom_tabs.search_categories"),onFilter:N,required:""},null,8,["modelValue","options","optionLabel","placeholder","class","filterPlaceholder"]),!$.value&&!r.value.ids.length?(u(),m("small",Be,t(e.$t("custom_tabs.ids_required")),1)):v("",!0)]),s("div",Re,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},t(e.$t("custom_tabs.image")),3),_(b(G),{mode:"basic",accept:"image/*",maxFileSize:1e6,onSelect:a[7]||(a[7]=w=>z("edit",w)),chooseLabel:e.$t("custom_tabs.select_image"),class:"p-button-outlined p-button-rounded"},null,8,["chooseLabel"]),(A=r.value.media)!=null&&A.length?(u(),m("img",{key:0,src:r.value.media[0].url,alt:e.$t("custom_tabs.current_image"),class:"w-32 h-32 object-cover mt-2 rounded-lg"},null,8,Ae)):v("",!0)])])]}),_:1},8,["visible","header","class"])],8,ne)}}},Je=X(Me,[["__scopeId","data-v-8f528f22"]]);export{Je as default};
