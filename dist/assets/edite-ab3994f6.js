import{_ as J,z as O,u as q,f as H,G as K,r as c,o as Q,h as b,i as W,b as d,c as i,l as X,e as u,k as E,D as x,p as Y,a as N,j as e,t as S,v as T,s as Z,B as ee,x as ae,y as te,n as B}from"./index-12f18b3e.js";const n=g=>(ae("data-v-14e3d351"),g=g(),te(),g),se={class:"max-w-5xl p-6 mx-auto bg-white shadow-lg rounded-xl"},oe=n(()=>e("h1",{class:"mb-8 text-3xl font-bold text-center text-gray-800"},"Edit Brand",-1)),ne={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},re={class:"space-y-2"},le=n(()=>e("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[B(" English Name "),e("span",{class:"text-red-500"},"*")],-1)),de={key:0,class:"text-xs text-red-500"},ie={class:"space-y-2"},ce=n(()=>e("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[B(" Arabic Name "),e("span",{class:"text-red-500"},"*")],-1)),ue={key:0,class:"text-xs text-red-500"},pe={class:"space-y-2 md:col-span-2"},me=n(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Brand Logo",-1)),_e={class:"flex justify-center"},ge=["onDragover","onDrop"],ve={key:0,class:"p-4"},he={class:"relative group"},fe=["src"],be={class:"absolute inset-0 flex items-center justify-center transition-all duration-300 bg-black bg-opacity-0 rounded-lg group-hover:bg-opacity-30"},xe={class:"space-x-3 transition-all duration-300 transform translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0"},ye=["onClick"],we=n(()=>e("i",{class:"text-sm pi pi-trash"},null,-1)),ke=[we],De={class:"p-2 text-gray-700 transition bg-white rounded-full cursor-pointer hover:bg-gray-100"},Be=n(()=>e("i",{class:"text-sm pi pi-pencil"},null,-1)),Ce=n(()=>e("p",{class:"mt-2 text-sm text-center text-gray-500"},"Click or drag to change logo",-1)),Ie={key:1,class:"flex flex-col items-center justify-center p-8"},Ve=n(()=>e("div",{class:"p-4 mb-4 bg-blue-100 rounded-full"},[e("i",{class:"text-2xl text-blue-500 pi pi-image"})],-1)),Fe=n(()=>e("p",{class:"mb-1 text-sm text-center text-gray-600"},[e("span",{class:"font-medium text-blue-500"},"Click to upload"),B(" or drag and drop ")],-1)),je=n(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)),Ee=[Ve,Fe,je],Ne={class:"flex justify-center pt-4 space-x-4"},Se={key:0},Te={key:1,class:"pi pi-spinner pi-spin"},Ue={setup(g){const U=O(),y=q(),w=H(),{t:k}=K(),p=c(),o=c(!1),v=c(null),m=c(null),_=c(!1),C=c(U.params.id),r=c({name_en:"",name_ar:"",image:null}),G=async()=>{var t,a;try{o.value=!0;const s=await N.get(`/api/brand/${C.value}`);r.value=s.data.data,s.data.data.media[0].url&&(m.value=s.data.data.media[0].url),o.value=!1}catch(s){console.error("Error fetching brand:",s),w.add({severity:"error",summary:k("error"),detail:((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch brand",life:3e3}),o.value=!1,y.push({name:"brand"})}};Q(()=>{G()});const P=t=>{t.preventDefault(),_.value=!0},R=()=>{_.value=!1},A=t=>{v.value=t;const a=new FileReader;a.onload=s=>{m.value=s.target.result},a.readAsDataURL(t),_.value=!1},D=t=>{var s,l,h;const a=((s=t.target.files)==null?void 0:s[0])||((h=(l=t.dataTransfer)==null?void 0:l.files)==null?void 0:h[0]);a&&a.type.match("image.*")&&A(a)},L=()=>{v.value=null,m.value=null,r.value.image=null},M=async()=>{o.value=!0;const t=new FormData;t.append("name_en",r.value.name_en),t.append("name_ar",r.value.name_ar),t.append("_method","post"),v.value?t.append("image",v.value):r.value.image===null&&t.append("remove_image","true"),N.post(`/api/brand/${C.value}`,t).then(a=>{y.push({name:"brand"}),w.add({severity:"success",summary:k("success"),detail:"Brand updated successfully",life:3e3}),o.value=!1}).catch(a=>{var s,l;console.error("Error:",a),w.add({severity:"error",summary:k("error"),detail:((l=(s=a.response)==null?void 0:s.data)==null?void 0:l.message)||"An error occurred",life:3e3}),o.value=!1})};return(t,a)=>{const s=b("InputText"),l=b("Button"),h=b("Form"),$=b("Toast"),z=W("can");return d(),i(Y,null,[X((d(),i("div",se,[oe,u(h,{ref_key:"form",ref:p,onSubmit:x(M,["prevent"]),class:"space-y-6"},{default:E(()=>{var I,V,F,j;return[e("div",ne,[e("div",re,[le,u(s,{id:"name_en",modelValue:r.value.name_en,"onUpdate:modelValue":a[0]||(a[0]=f=>r.value.name_en=f),placeholder:"Enter brand name in English",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(V=(I=p.value)==null?void 0:I.errors)!=null&&V.name_en?(d(),i("small",de,S(p.value.errors.name_en[0]),1)):T("",!0)]),e("div",ie,[ce,u(s,{id:"name_ar",modelValue:r.value.name_ar,"onUpdate:modelValue":a[1]||(a[1]=f=>r.value.name_ar=f),placeholder:"أدخل اسم العلامة التجارية بالعربية",dir:"rtl",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(j=(F=p.value)==null?void 0:F.errors)!=null&&j.name_ar?(d(),i("small",ue,S(p.value.errors.name_ar[0]),1)):T("",!0)]),e("div",pe,[me,e("div",_e,[e("label",{onDragover:x(P,["prevent"]),onDragleave:R,onDrop:x(D,["prevent"]),class:Z([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"w-full max-w-md transition-colors duration-300 border-2 border-dashed cursor-pointer rounded-xl"])},[e("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32),m.value?(d(),i("div",ve,[e("div",he,[e("img",{src:m.value,alt:"Preview",class:"object-contain w-full h-64 transition-transform duration-300 rounded-lg shadow-md group-hover:scale-105"},null,8,fe),e("div",be,[e("div",xe,[e("button",{type:"button",onClick:x(L,["stop"]),class:"p-2 text-white transition bg-red-500 rounded-full hover:bg-red-600"},ke,8,ye),e("label",De,[Be,e("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32)])])])]),Ce])):(d(),i("div",Ie,Ee))],42,ge)])])]),e("div",Ne,[u(l,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:a[2]||(a[2]=f=>ee(y).go(-1)),class:"flex items-center justify-center px-6 py-3 mx-2 space-x-2 text-gray-700 transition-all duration-300 bg-gray-200 rounded-lg shadow-md hover:bg-gray-300 hover:shadow-lg",disabled:o.value},null,8,["disabled"]),u(l,{type:"submit",label:"Update Brand",icon:"pi pi-check",loading:o.value,class:"flex items-center justify-center px-8 py-3 space-x-2 text-white transition-all duration-300 rounded-lg shadow-md bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 hover:shadow-lg",disabled:o.value},{default:E(()=>[o.value?(d(),i("i",Te)):(d(),i("span",Se,"Update Brand"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["onSubmit"])])),[[z,"edit brands"]]),u($)],64)}}},Pe=J(Ue,[["__scopeId","data-v-14e3d351"]]);export{Pe as default};
