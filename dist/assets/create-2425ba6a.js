import{_ as M,u as P,f as q,G,r as i,A as I,o as O,h as w,i as $,b as p,c as _,l as H,B as s,j as e,t as n,n as D,e as g,D as k,s as J,k as K,p as Q,a as T,x as W,y as X}from"./index-12f18b3e.js";const v=h=>(W("data-v-3b5f2ae8"),h=h(),X(),h),Y=["dir"],Z={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ee=["onSubmit"],te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={class:"space-y-2"},oe={for:"name_en",class:"block text-sm font-medium text-gray-700"},se=v(()=>e("span",{class:"text-red-500"},"*",-1)),le={class:"space-y-2"},re={for:"name_ar",class:"block text-sm font-medium text-gray-700"},ne=v(()=>e("span",{class:"text-red-500"},"*",-1)),de={class:"space-y-2"},ie={for:"brand_id",class:"block text-sm font-medium text-gray-700"},ce=v(()=>e("span",{class:"text-red-500"},"*",-1)),ue={class:"md:col-span-2 space-y-2"},me={class:"block text-sm font-medium text-gray-700"},pe={class:"flex justify-center"},_e=["onDragover","onDrop"],ge={key:0,class:"p-4"},ve={class:"relative group"},be=["src"],fe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},he={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},ye=["onClick","title"],xe=v(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),we=[xe],De=["title"],ke=v(()=>e("i",{class:"pi pi-pencil text-sm"},null,-1)),Ie=[ke],Ve={class:"mt-2 text-center text-sm text-gray-500"},Be={key:1,class:"p-8 flex flex-col items-center justify-center"},Le=v(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Se={class:"text-sm text-center text-gray-600 mb-1"},Te={class:"text-blue-500 font-medium"},je={class:"text-xs text-gray-400"},Ce={class:"pt-4 flex justify-center space-x-4"},Fe={key:0},Ue={key:1,class:"pi pi-spinner pi-spin"},Ee={setup(h){const V=P(),c=q(),{t}=G();i();const u=i(!1),y=i(null),x=i(null),b=i(!1),B=i([]),L=I(()=>localStorage.getItem("appLang")||"en"),j=I(()=>L.value==="en"?"name_en":"name_ar"),C=I(()=>L.value==="ar"),l=i({name_en:"",name_ar:"",brand_id:null});O(async()=>{try{const a=await T.get("/api/brand");B.value=a.data.data.data}catch(a){console.error("Error fetching brands:",a),c.add({severity:"error",summary:t("error"),detail:t("error.brandLoad"),life:3e3})}});const F=a=>{a.preventDefault(),b.value=!0},U=()=>{b.value=!1},E=a=>{if(a.size>2*1024*1024){c.add({severity:"error",summary:t("error"),detail:t("validation.imageSize"),life:3e3});return}if(!a.type.match("image.*")){c.add({severity:"error",summary:t("error"),detail:t("validation.imageInvalid"),life:3e3});return}y.value=a;const o=new FileReader;o.onload=r=>{x.value=r.target.result},o.readAsDataURL(a),b.value=!1},S=a=>{var r,d,f;const o=((r=a.target.files)==null?void 0:r[0])||((f=(d=a.dataTransfer)==null?void 0:d.files)==null?void 0:f[0]);o&&E(o)},R=()=>{y.value=null,x.value=null},z=async()=>{var o,r;if(!l.value.name_en||!l.value.name_ar||!l.value.brand_id){c.add({severity:"error",summary:t("error"),detail:t("validation.requiredFields"),life:3e3});return}u.value=!0;const a=new FormData;a.append("name_en",l.value.name_en),a.append("name_ar",l.value.name_ar),a.append("brand_id",l.value.brand_id),y.value&&a.append("image",y.value);try{await T.post("/api/model",a),V.push({name:"model"}),c.add({severity:"success",summary:t("success"),detail:t("model.createSuccess"),life:3e3})}catch(d){console.error("Error:",d),c.add({severity:"error",summary:t("error"),detail:((r=(o=d.response)==null?void 0:o.data)==null?void 0:r.message)||t("error.createError"),life:3e3})}finally{u.value=!1}};return(a,o)=>{const r=w("InputText"),d=w("Dropdown"),f=w("Button"),A=w("Toast"),N=$("can");return p(),_(Q,null,[H((p(),_("div",{class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg",dir:s(C)?"rtl":"ltr"},[e("h1",Z,n(s(t)("model.createTitle")),1),e("form",{onSubmit:k(z,["prevent"]),class:"space-y-6"},[e("div",te,[e("div",ae,[e("label",oe,[D(n(s(t)("model.nameEn"))+" ",1),se]),g(r,{id:"name_en",modelValue:l.value.name_en,"onUpdate:modelValue":o[0]||(o[0]=m=>l.value.name_en=m),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"])]),e("div",le,[e("label",re,[D(n(s(t)("model.nameAr"))+" ",1),ne]),g(r,{id:"name_ar",modelValue:l.value.name_ar,"onUpdate:modelValue":o[1]||(o[1]=m=>l.value.name_ar=m),dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"])]),e("div",de,[e("label",ie,[D(n(s(t)("model.brand"))+" ",1),ce]),g(d,{id:"brand_id",modelValue:l.value.brand_id,"onUpdate:modelValue":o[2]||(o[2]=m=>l.value.brand_id=m),options:B.value,optionLabel:s(j),optionValue:"id",class:"w-full"},null,8,["modelValue","options","optionLabel"])]),e("div",ue,[e("label",me,n(s(t)("model.image")),1),e("div",pe,[e("label",{onDragover:k(F,["prevent"]),onDragleave:U,onDrop:k(S,["prevent"]),class:J([{"border-blue-500 bg-blue-50":b.value,"border-gray-300":!b.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:S,accept:"image/*",class:"hidden"},null,32),x.value?(p(),_("div",ge,[e("div",ve,[e("img",{src:x.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,be),e("div",fe,[e("div",he,[e("button",{type:"button",onClick:k(R,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition",title:s(t)("model.deleteImage")},we,8,ye),e("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition",title:s(t)("model.editImage")},Ie,8,De)])])]),e("p",Ve,n(s(t)("model.changeImage")),1)])):(p(),_("div",Be,[Le,e("p",Se,[e("span",Te,n(s(t)("model.uploadClick")),1),D(" "+n(s(t)("model.uploadDrag")),1)]),e("p",je,n(s(t)("model.imageFormat")),1)]))],42,_e)])])]),e("div",Ce,[g(f,{type:"button",label:s(t)("model.cancelButton"),icon:"pi pi-times",onClick:o[3]||(o[3]=m=>s(V).go(-1)),class:"px-6 py-3 mx-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:u.value},null,8,["label","disabled"]),g(f,{type:"submit",label:s(t)("model.createButton"),icon:"pi pi-plus",loading:u.value,class:"px-8 mx-2 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:u.value},{default:K(()=>[u.value?(p(),_("i",Ue)):(p(),_("span",Fe,n(s(t)("model.createButton")),1))]),_:1},8,["label","loading","disabled"])])],40,ee)],8,Y)),[[N,"create models"]]),g(A)],64)}}},Ae=M(Ee,[["__scopeId","data-v-3b5f2ae8"]]);export{Ae as default};
