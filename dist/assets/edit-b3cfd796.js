import{p as Y,H as N,u as Z,x as ee,y as ae,L as te,r as c,o as se,d as b,B as oe,e as d,f as i,D as le,i as p,w as P,J as x,F as ne,b as I,h as e,t as C,n as F,j as R,G as re,q as de,s as ie,m as y}from"./index-e7ee9ceb.js";const l=f=>(de("data-v-b5fb191e"),f=f(),ie(),f),ce={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ue=l(()=>e("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Edit Model",-1)),pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me={class:"space-y-2"},_e=l(()=>e("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[y(" English Name "),e("span",{class:"text-red-500"},"*")],-1)),ge={key:0,class:"text-red-500 text-xs"},ve={class:"space-y-2"},be=l(()=>e("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[y(" Arabic Name "),e("span",{class:"text-red-500"},"*")],-1)),fe={key:0,class:"text-red-500 text-xs"},he={class:"space-y-2"},xe=l(()=>e("label",{for:"brand_id",class:"block text-sm font-medium text-gray-700"},[y(" Brand "),e("span",{class:"text-red-500"},"*")],-1)),ye={key:0,class:"text-red-500 text-xs"},we={class:"md:col-span-2 space-y-2"},ke=l(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Model Image",-1)),De={class:"flex justify-center"},Ve=["onDragover","onDrop"],Ie={key:0,class:"p-4"},Ce={class:"relative group"},Fe=["src"],Me={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Se={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ue=["onClick"],je=l(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Be=[je],Le={class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition cursor-pointer"},Te=l(()=>e("i",{class:"pi pi-pencil text-sm"},null,-1)),Ee=l(()=>e("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change image",-1)),Ne={key:1,class:"p-8 flex flex-col items-center justify-center"},Pe=l(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Re=l(()=>e("p",{class:"text-sm text-center text-gray-600 mb-1"},[e("span",{class:"text-blue-500 font-medium"},"Click to upload"),y(" or drag and drop ")],-1)),Ge=l(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)),Ae=[Pe,Re,Ge],$e={class:"pt-4 flex justify-center space-x-4"},Je={key:0},qe={key:1,class:"pi pi-spinner pi-spin"},ze={setup(f){const G=N(()=>localStorage.getItem("appLang")||"en"),A=N(()=>G.value==="en"?"name_en":"name_ar"),$=Z(),w=ee(),k=ae(),{t:D}=te(),u=c(),n=c(!1),h=c(null),_=c(null),g=c(!1),M=c($.params.id),S=c([]),o=c({name_en:"",name_ar:"",brand_id:null,image:null}),J=async()=>{var t,a;try{n.value=!0;const[s,r]=await Promise.all([I.get(`/api/model/${M.value}`),I.get("/api/brand")]);o.value=s.data.data,S.value=r.data.data.data,s.data.data&&(_.value=s.data.data.media[0].url),n.value=!1}catch(s){console.error("Error fetching data:",s),k.add({severity:"error",summary:D("error"),detail:((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch data",life:3e3}),n.value=!1,w.push({name:"model"})}};se(()=>{J()});const q=t=>{t.preventDefault(),g.value=!0},z=()=>{g.value=!1},H=t=>{h.value=t;const a=new FileReader;a.onload=s=>{_.value=s.target.result},a.readAsDataURL(t),g.value=!1},V=t=>{var s,r,v;const a=((s=t.target.files)==null?void 0:s[0])||((v=(r=t.dataTransfer)==null?void 0:r.files)==null?void 0:v[0]);a&&a.type.match("image.*")&&H(a)},O=()=>{h.value=null,_.value=null,o.value.image=null},K=async()=>{n.value=!0;const t=new FormData;t.append("name_en",o.value.name_en),t.append("name_ar",o.value.name_ar),t.append("brand_id",o.value.brand_id),t.append("_method","PUT"),h.value?t.append("image",h.value):o.value.image===null&&t.append("remove_image","true"),I.post(`/api/model/${M.value}`,t).then(a=>{w.push({name:"model"}),k.add({severity:"success",summary:D("success"),detail:"Model updated successfully",life:3e3}),n.value=!1}).catch(a=>{var s,r;console.error("Error:",a),k.add({severity:"error",summary:D("error"),detail:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"An error occurred",life:3e3}),n.value=!1})};return(t,a)=>{const s=b("InputText"),r=b("Dropdown"),v=b("Button"),Q=b("Form"),W=b("Toast"),X=oe("can");return d(),i(ne,null,[le((d(),i("div",ce,[ue,p(Q,{ref_key:"form",ref:u,onSubmit:x(K,["prevent"]),class:"space-y-6"},{default:P(()=>{var U,j,B,L,T,E;return[e("div",pe,[e("div",me,[_e,p(s,{id:"name_en",modelValue:o.value.name_en,"onUpdate:modelValue":a[0]||(a[0]=m=>o.value.name_en=m),placeholder:"Enter model name in English",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(j=(U=u.value)==null?void 0:U.errors)!=null&&j.name_en?(d(),i("small",ge,C(u.value.errors.name_en[0]),1)):F("",!0)]),e("div",ve,[be,p(s,{id:"name_ar",modelValue:o.value.name_ar,"onUpdate:modelValue":a[1]||(a[1]=m=>o.value.name_ar=m),placeholder:"أدخل اسم الموديل بالعربية",dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(L=(B=u.value)==null?void 0:B.errors)!=null&&L.name_ar?(d(),i("small",fe,C(u.value.errors.name_ar[0]),1)):F("",!0)]),e("div",he,[xe,p(r,{id:"brand_id",modelValue:o.value.brand_id,"onUpdate:modelValue":a[2]||(a[2]=m=>o.value.brand_id=m),options:S.value,optionLabel:R(A),optionValue:"id",placeholder:"Select a brand",class:"w-full"},null,8,["modelValue","options","optionLabel"]),(E=(T=u.value)==null?void 0:T.errors)!=null&&E.brand_id?(d(),i("small",ye,C(u.value.errors.brand_id[0]),1)):F("",!0)]),e("div",we,[ke,e("div",De,[e("label",{onDragover:x(q,["prevent"]),onDragleave:z,onDrop:x(V,["prevent"]),class:re([{"border-blue-500 bg-blue-50":g.value,"border-gray-300":!g.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:V,accept:"image/*",class:"hidden"},null,32),_.value?(d(),i("div",Ie,[e("div",Ce,[e("img",{src:_.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Fe),e("div",Me,[e("div",Se,[e("button",{type:"button",onClick:x(O,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Be,8,Ue),e("label",Le,[Te,e("input",{type:"file",onChange:V,accept:"image/*",class:"hidden"},null,32)])])])]),Ee])):(d(),i("div",Ne,Ae))],42,Ve)])])]),e("div",$e,[p(v,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:a[3]||(a[3]=m=>R(w).go(-1)),class:"px-6 mx-2 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:n.value},null,8,["disabled"]),p(v,{type:"submit",label:"Update Model",icon:"pi pi-check",loading:n.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:n.value},{default:P(()=>[n.value?(d(),i("i",qe)):(d(),i("span",Je,"Update Model"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["onSubmit"])])),[[X,"edit models"]]),p(W)],64)}}},Oe=Y(ze,[["__scopeId","data-v-b5fb191e"]]);export{Oe as default};
