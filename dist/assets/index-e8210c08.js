import{p as pe,s as me,v as ve,r as o,x as _e,y as fe,o as ge,d as r,z as be,e as p,f as v,h as l,i as s,w as n,A as he,b as U,B as w,C as ye,m as J,t as _,F as K,k as we,D as xe,n as Ce,E as ke,G as Ve}from"./index-e42b945c.js";const u=x=>(ke("data-v-d75abd8f"),x=x(),Ve(),x),De={class:"grid"},Se={class:"col-12"},Ue={class:"my-2"},Ne={class:"my-2 flex gap-2"},Pe={class:"p-input-icon-left"},Te=u(()=>l("i",{class:"pi pi-search"},null,-1)),Ee=u(()=>l("div",{class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},[l("h5",{class:"m-0"},"Manage Roles")],-1)),Me={class:"p-paginator p-component p-unselectable-text mt-3"},$e={class:"p-paginator-left-content"},Ie={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Re={class:"p-paginator-pages"},Fe=["disabled"],je=u(()=>l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),ze=[je],Ae=["disabled"],Le=u(()=>l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),qe=[Le],Ge=["onClick"],Oe={key:1,class:"p-paginator-dots"},Qe=["disabled"],Ye=u(()=>l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),He=[Ye],Je=["disabled"],Ke=u(()=>l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),We=[Ke],Xe={class:"p-paginator-rpp-options"},Ze=u(()=>l("div",{class:"flex align-items-center justify-content-center"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Are you sure you want to delete this role?")],-1)),et={class:"field mb-5"},tt=u(()=>l("label",{for:"name"},"Name",-1)),at={class:"card flex justify-content-center"},lt={class:"field mb-5"},ot=u(()=>l("label",{for:"name"},"Name",-1)),st={class:"card flex justify-content-center"},nt={setup(x){const $=me(),f=ve(),C=o(!0),i=o({name:"",permissions:[]}),N=o([]),I=o([]),P=o(!1),k=o(!1);o(!1);const g=o(!1);o({});const B=o(null),R=o(null),F=o({}),j=o(!1),z=o(Number),V=o(""),c=o(1),A=o(0),b=o(10),D=o(0),W=o(""),X=o(""),L=o(""),q=o(""),G=o(0),O=o(0),Q=o([]),Z=()=>{F.value={global:{value:null,matchMode:he.CONTAINS}}},m=()=>{C.value=!0,U.get("/api/role",{params:{page:c.value,limit:b.value,search:V.value}}).then(t=>{C.value=!1,I.value=t.data.data.data,A.value=t.data.data.total,D.value=t.data.data.last_page,W.value=t.data.data.first_page_url,X.value=t.data.data.last_page_url,L.value=t.data.data.next_page_url,q.value=t.data.data.prev_page_url,G.value=t.data.data.from,O.value=t.data.data.to,Q.value=t.data.data.links}).catch(t=>{C.value=!1,console.error("Error fetching roles:",t),f.add({severity:"error",summary:"Error",detail:"Failed to load roles",life:3e3})}),U.get("/api/role/get/permissions").then(t=>{N.value=t.data.permissions}).catch(t=>{console.error("Error fetching permissions:",t)})},h=t=>{t>=1&&t<=D.value&&(c.value=t,m())},ee=t=>{b.value=t.value,c.value=1,m()};_e(V,t=>{c.value=1,m()});const te=()=>{$.push({name:"roles-create"})},Y=()=>{k.value=!1,P.value=!1,j.value=!1},ae=()=>{j.value=!0,U.post("api/roles/create",i.value).then(t=>{m(),k.value=!1,f.add({severity:"success",summary:"Successful",detail:"Role Created",life:3e3}),i.value={name:"",permissions:[]}}).catch(t=>{console.error("Error creating role:",t),f.add({severity:"error",summary:"Error",detail:"Failed to create role",life:3e3})})},le=t=>{$.push({name:"roles-update",params:{id:t}})},oe=t=>{z.value=t,g.value=!0},se=()=>{U.delete(`api/role/${z.value}`).then(()=>{m(),g.value=!1,f.add({severity:"success",summary:"Successful",detail:"Role Deleted",life:3e3})}).catch(t=>{console.error("Error deleting role:",t),f.add({severity:"error",summary:"Error",detail:"Failed to delete role",life:3e3})})},ne=()=>{R.value.exportCSV()};return fe(()=>{Z()}),ge(()=>{m()}),(t,a)=>{const d=r("Button"),T=r("InputText"),ie=r("Toolbar"),de=r("Toast"),S=r("Column"),re=r("DataTable"),ue=r("Dropdown"),E=r("Dialog"),H=r("MultiSelect"),ce=r("va-card"),y=be("can");return p(),v("div",De,[l("div",Se,[s(ce,{class:"card"},{default:n(()=>[s(ie,{class:"mb-4"},{start:n(()=>[l("div",Ue,[w(s(d,{label:"New",icon:"pi pi-plus",class:"new mr-2",onClick:te},null,512),[[y,"create roles"]])])]),end:n(()=>[w((p(),v("div",Ne,[l("span",Pe,[Te,s(T,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),placeholder:"Search..."},null,8,["modelValue"])]),s(d,{label:"Export",icon:"pi pi-upload",class:"new",onClick:a[1]||(a[1]=e=>ne())})])),[[y,"list roles"]])]),_:1}),s(de),w((p(),ye(re,{ref_key:"dt",ref:R,selection:B.value,"onUpdate:selection":a[2]||(a[2]=e=>B.value=e),value:I.value,loading:C.value,"data-key":"id",paginator:!1,rows:b.value,filters:F.value,"responsive-layout":"scroll"},{header:n(()=>[Ee]),default:n(()=>[s(S,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(S,{field:"id",header:"ID",sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:n(e=>[J(_(e.data.id),1)]),_:1}),s(S,{field:"name",header:"Name",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(e=>[J(_(e.data.name),1)]),_:1}),s(S,{"header-style":"min-width:10rem;"},{body:n(e=>[w(s(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:M=>le(e.data.id)},null,8,["onClick"]),[[y,"edit roles"]]),w(s(d,{icon:"pi pi-trash",class:"delete mt-2",onClick:M=>oe(e.data.id)},null,8,["onClick"]),[[y,"delete roles"]])]),_:1})]),_:1},8,["selection","value","loading","rows","filters"])),[[y,"list roles"]]),l("div",Me,[l("div",$e,[l("span",Ie," Showing "+_(G.value)+" to "+_(O.value)+" of "+_(A.value)+" entries ",1)]),l("div",Be,[l("span",Re,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:a[3]||(a[3]=e=>h(1))},ze,8,Fe),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!q.value,onClick:a[4]||(a[4]=e=>h(c.value-1))},qe,8,Ae),(p(!0),v(K,null,we(Q.value,(e,M)=>(p(),v(K,{key:M},[e.label&&!isNaN(e.label)?(p(),v("button",{key:0,class:xe(["p-paginator-page p-paginator-element p-link",{"p-highlight":e.active}]),onClick:it=>h(parseInt(e.label))},_(e.label),11,Ge)):e.label==="..."?(p(),v("span",Oe,"...")):Ce("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!L.value,onClick:a[5]||(a[5]=e=>h(c.value+1))},He,8,Qe),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===D.value,onClick:a[6]||(a[6]=e=>h(D.value))},We,8,Je)]),l("span",Xe,[s(ue,{modelValue:b.value,"onUpdate:modelValue":a[7]||(a[7]=e=>b.value=e),options:[5,10,20,30],onChange:ee,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])]),s(E,{visible:g.value,"onUpdate:visible":a[9]||(a[9]=e=>g.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[s(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[8]||(a[8]=e=>g.value=!1)}),s(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:se})]),default:n(()=>[Ze]),_:1},8,["visible"]),s(E,{visible:k.value,"onUpdate:visible":a[12]||(a[12]=e=>k.value=e),style:{width:"450px"},header:"Create Role",modal:!0,class:"p-fluid"},{footer:n(()=>[s(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:Y}),s(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:ae})]),default:n(()=>[l("div",et,[tt,s(T,{class:"mt-3 w-full",id:"name",modelValue:i.value.name,"onUpdate:modelValue":a[10]||(a[10]=e=>i.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),l("div",at,[s(H,{modelValue:i.value.permissions,"onUpdate:modelValue":a[11]||(a[11]=e=>i.value.permissions=e),display:"chip","option-value":"id",options:N.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"]),s(E,{visible:P.value,"onUpdate:visible":a[15]||(a[15]=e=>P.value=e),style:{width:"450px"},header:"Update Role",modal:!0},{footer:n(()=>[s(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:Y}),s(d,{label:"Update",icon:"pi pi-check",class:"p-button-text",onClick:t.update},null,8,["onClick"])]),default:n(()=>[l("div",lt,[ot,s(T,{class:"mt-3 w-full",id:"name",modelValue:i.value.name,"onUpdate:modelValue":a[13]||(a[13]=e=>i.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),l("div",st,[s(H,{modelValue:i.value.permissions,"onUpdate:modelValue":a[14]||(a[14]=e=>i.value.permissions=e),"option-value":"id",options:N.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"])]),_:1})])])}}},rt=pe(nt,[["__scopeId","data-v-d75abd8f"]]);export{rt as default};
