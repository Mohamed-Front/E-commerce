import{_ as M,u as A,k as O,M as P,j as G,r as D,l as S,o as H,a as n,c as u,h as m,e as c,f as s,t,x as i,O as b,g,F as J,d as K,w as T,i as k,N as Q,R as F,ah as I,a5 as N,T as q,a2 as W}from"./index-5d7df6f4.js";const X=["dir"],Y={key:0,class:"card mb-6 transform hover:scale-[1.01] transition-transform duration-300"},Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ee={class:"text-lg"},ae={class:"text-lg"},se={class:"text-lg"},te={class:"card mb-6 transform hover:scale-[1.01] transition-transform duration-300"},le={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},re={class:"space-y-2"},oe={key:0,id:"name_en_error",class:"text-red-500"},de={class:"space-y-2"},ie={key:0,id:"name_ar_error",class:"text-red-500"},ne={class:"space-y-2"},ue={key:2,id:"ids_error",class:"text-red-500"},me={class:"space-y-2"},ce={key:0,class:"text-red-500"},_e={class:"card mb-6"},be={key:0,class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},pe={class:"flex justify-between items-start"},ge={class:"text-lg"},ve={class:"text-lg"},ye={key:0},fe=["src","alt"],he={class:"flex space-x-2"},$e={key:1,class:"text-gray-500 text-lg"},we={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6"},ke={class:"space-y-2"},xe={key:0,id:"edit_name_en_error",class:"text-red-500"},Ve={class:"space-y-2"},De={key:0,id:"edit_name_ar_error",class:"text-red-500"},qe={class:"space-y-2"},Le={key:0,id:"edit_ids_error",class:"text-red-500"},Ce={class:"space-y-2"},Fe=["src","alt"],Se={__name:"show",setup(Ue){A();const x=O(),f=P(),{t:_}=G(),p=D(null),V=D(!1),d=D({custom_tab_id:x.params.id,name_en:"",name_ar:"",ids:[],image:null}),r=D({id:null,custom_tab_id:x.params.id,name_en:"",name_ar:"",ids:[],image:null,media:[]}),L=D([]),U=S(()=>(localStorage.getItem("appLang")||"en")==="en"?"name_en":"name_ar"),y=S(()=>d.value.name_en&&d.value.name_ar&&d.value.ids.length>0&&d.value.image),h=S(()=>r.value.name_en&&r.value.name_ar&&r.value.ids.length>0),C=async()=>{var e;try{const a=await k.get(`/api/custom-tabs/${x.params.id}`);if(a.data.is_success)p.value=a.data.data,((e=p.value)==null?void 0:e.type)==1?k.get("api/category").then(l=>{L.value=l.data.data.data}):k.get("api/product").then(l=>{L.value=l.data.data.data});else throw new Error(a.data.message)}catch{f.add({severity:"error",summary:_("error"),detail:_("custom_tabs.fetch_failed"),life:3e3})}},j=async()=>{var e,a;try{const l=new FormData;l.append("custom_tab_id",d.value.custom_tab_id),l.append("name_en",d.value.name_en),l.append("name_ar",d.value.name_ar),l.append("image",d.value.image),d.value.ids.forEach((w,o)=>{l.append(`ids[${o}]`,w)}),(await k.post("/api/custom-tab-details",l,{headers:{"Content-Type":"multipart/form-data"}})).data.is_success&&(f.add({severity:"success",summary:_("success"),detail:_("custom_tabs.detail_added"),life:3e3}),d.value={custom_tab_id:x.params.id,name_en:"",name_ar:"",ids:[],image:null},await C())}catch(l){f.add({severity:"error",summary:_("error"),detail:((a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message)||_("custom_tabs.add_failed"),life:3e3})}},z=async e=>{var a,l;try{(await k.delete(`/api/custom-tab-details/${e}`)).data.is_success&&(f.add({severity:"success",summary:_("success"),detail:_("custom_tabs.detail_deleted"),life:3e3}),await C())}catch($){f.add({severity:"error",summary:_("error"),detail:((l=(a=$.response)==null?void 0:a.data)==null?void 0:l.message)||_("custom_tabs.delete_failed"),life:3e3})}},B=e=>{r.value={ids:e.ids,id:e.id,custom_tab_id:x.params.id,name_en:e.name_en,name_ar:e.name_ar,image:null,media:e.media},V.value=!0},R=async()=>{var e,a;try{const l=new FormData;l.append("custom_tab_id",r.value.custom_tab_id),l.append("name_en",r.value.name_en),l.append("name_ar",r.value.name_ar),r.value.image&&l.append("image",r.value.image),r.value.ids.forEach((w,o)=>{l.append(`ids[${o}]`,w)}),l.append("_method","PUT"),(await k.post(`/api/custom-tab-details/${r.value.id}`,l,{headers:{"Content-Type":"multipart/form-data"}})).data.is_success&&(f.add({severity:"success",summary:_("success"),detail:_("custom_tabs.detail_updated"),life:3e3}),V.value=!1,await C())}catch(l){f.add({severity:"error",summary:_("error"),detail:((a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message)||_("custom_tabs.update_failed"),life:3e3})}},E=(e,a)=>{e==="new"?d.value.image=a.files[0]:r.value.image=a.files[0]};return H(()=>{C()}),(e,a)=>{var l,$,w;return n(),u("div",{class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",dir:e.$t("dir")},[m(c(Q),{position:"top-right"}),p.value?(n(),u("div",Y,[s("h1",{class:i(["text-3xl font-bold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},t(p.value.name_en)+" ("+t(e.$t(`custom_tabs.types.${p.value.type_description}`))+") ",3),s("div",Z,[s("div",null,[s("p",ee,[s("strong",null,t(e.$t("custom_tabs.store"))+":",1),b(" "+t(p.value.store.name_en),1)]),s("p",ae,[s("strong",null,t(e.$t("custom_tabs.name_en"))+":",1),b(" "+t(p.value.name_en),1)])]),s("div",null,[s("p",se,[s("strong",null,t(e.$t("custom_tabs.name_ar"))+":",1),b(" "+t(p.value.name_ar),1)])])])])):g("",!0),s("div",te,[s("h2",{class:i(["text-2xl font-semibold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},t(e.$t("custom_tabs.add_new_detail")),3),s("div",le,[s("div",re,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(t(e.$t("custom_tabs.name_en"))+" ",1),a[10]||(a[10]=s("span",{class:"text-red-500"},"*",-1))],2),m(c(F),{modelValue:d.value.name_en,"onUpdate:modelValue":a[0]||(a[0]=o=>d.value.name_en=o),placeholder:e.$t("custom_tabs.enter_name_en"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!y.value&&!d.value.name_en}]),"aria-describedby":"name_en_error",required:""},null,8,["modelValue","placeholder","class"]),!y.value&&!d.value.name_en?(n(),u("small",oe,t(e.$t("custom_tabs.name_en_required")),1)):g("",!0)]),s("div",de,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(t(e.$t("custom_tabs.name_ar"))+" ",1),a[11]||(a[11]=s("span",{class:"text-red-500"},"*",-1))],2),m(c(F),{modelValue:d.value.name_ar,"onUpdate:modelValue":a[1]||(a[1]=o=>d.value.name_ar=o),placeholder:e.$t("custom_tabs.enter_name_ar"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!y.value&&!d.value.name_ar}]),"aria-describedby":"name_ar_error",required:""},null,8,["modelValue","placeholder","class"]),!y.value&&!d.value.name_ar?(n(),u("small",ie,t(e.$t("custom_tabs.name_ar_required")),1)):g("",!0)]),s("div",ne,[((l=p.value)==null?void 0:l.type)==2?(n(),u("label",{key:0,class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(t(e.$t("اختر المنتجات"))+" ",1),a[12]||(a[12]=s("span",{class:"text-red-500"},"*",-1))],2)):(n(),u("label",{key:1,class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(t(e.$t("اختر الفئات"))+" ",1),a[13]||(a[13]=s("span",{class:"text-red-500"},"*",-1))],2)),m(c(I),{modelValue:d.value.ids,"onUpdate:modelValue":a[2]||(a[2]=o=>d.value.ids=o),options:L.value,optionLabel:U.value,optionValue:"id",placeholder:e.$t("custom_tabs.select_ids"),class:i(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":!y.value&&!d.value.ids.length}]),"aria-describedby":"ids_error",required:""},null,8,["modelValue","options","optionLabel","placeholder","class"]),!y.value&&!d.value.ids.length?(n(),u("small",ue,t(e.$t("custom_tabs.ids_required")),1)):g("",!0)]),s("div",me,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(t(e.$t("custom_tabs.image"))+" ",1),a[14]||(a[14]=s("span",{class:"text-red-500"},"*",-1))],2),m(c(N),{mode:"basic",accept:"image/*",maxFileSize:1e6,onSelect:a[3]||(a[3]=o=>E("new",o)),chooseLabel:e.$t("custom_tabs.select_image"),class:"p-button-rounded"},null,8,["chooseLabel"]),!y.value&&!d.value.image?(n(),u("small",ce,t(e.$t("custom_tabs.image_required")),1)):g("",!0)])]),m(c(q),{label:e.$t("custom_tabs.add_detail"),icon:"pi pi-plus",class:"mt-6 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",onClick:j,disabled:!y.value},null,8,["label","disabled"])]),s("div",_e,[s("h2",{class:i(["text-2xl font-semibold mb-6 text-gray-800",{"text-right":e.$t("dir")==="rtl"}])},t(e.$t("custom_tabs.details")),3),(w=($=p.value)==null?void 0:$.details)!=null&&w.length?(n(),u("div",be,[(n(!0),u(J,null,K(p.value.details,o=>(n(),u("div",{key:o.id,class:"border p-4 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow duration-300"},[s("div",pe,[s("div",null,[s("p",ge,[s("strong",null,t(e.$t("custom_tabs.name_en"))+":",1),b(" "+t(o.name_en),1)]),s("p",ve,[s("strong",null,t(e.$t("custom_tabs.name_ar"))+":",1),b(" "+t(o.name_ar),1)]),o.media.length?(n(),u("div",ye,[s("strong",null,t(e.$t("custom_tabs.media"))+":",1),s("img",{src:o.media[0].url,alt:e.$t("custom_tabs.detail_image"),class:"w-32 h-32 object-cover mt-2 rounded-lg"},null,8,fe)])):g("",!0)]),s("div",he,[m(c(q),{icon:"pi pi-pencil",class:"p-detail",onClick:v=>B(o)},null,8,["onClick"]),m(c(q),{severity:"danger",icon:"pi pi-trash",class:"p-delete p-button-rounded",onClick:v=>z(o.id)},null,8,["onClick"])])])]))),128))])):(n(),u("p",$e,t(e.$t("custom_tabs.no_details")),1))]),m(c(W),{visible:V.value,"onUpdate:visible":a[9]||(a[9]=o=>V.value=o),header:e.$t("custom_tabs.edit_detail"),modal:!0,class:i(["w-full max-w-3xl bg-white rounded-xl shadow-2xl",{rtl:e.$t("dir")==="rtl"}])},{footer:T(()=>[m(c(q),{label:e.$t("custom_tabs.cancel"),severity:"secondary",class:"p-button-rounded",onClick:a[8]||(a[8]=o=>V.value=!1)},null,8,["label"]),m(c(q),{label:e.$t("custom_tabs.save"),icon:"pi pi-check",class:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",onClick:R,disabled:!h.value},null,8,["label","disabled"])]),default:T(()=>{var o;return[s("div",we,[s("div",ke,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(t(e.$t("custom_tabs.name_en"))+" ",1),a[15]||(a[15]=s("span",{class:"text-red-500"},"*",-1))],2),m(c(F),{modelValue:r.value.name_en,"onUpdate:modelValue":a[4]||(a[4]=v=>r.value.name_en=v),placeholder:e.$t("custom_tabs.enter_name_en"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!h.value&&!r.value.name_en}]),"aria-describedby":"edit_name_en_error",required:""},null,8,["modelValue","placeholder","class"]),!h.value&&!r.value.name_en?(n(),u("small",xe,t(e.$t("custom_tabs.name_en_required")),1)):g("",!0)]),s("div",Ve,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(t(e.$t("custom_tabs.name_ar"))+" ",1),a[16]||(a[16]=s("span",{class:"text-red-500"},"*",-1))],2),m(c(F),{modelValue:r.value.name_ar,"onUpdate:modelValue":a[5]||(a[5]=v=>r.value.name_ar=v),placeholder:e.$t("custom_tabs.enter_name_ar"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":!h.value&&!r.value.name_ar}]),"aria-describedby":"edit_name_ar_error",required:""},null,8,["modelValue","placeholder","class"]),!h.value&&!r.value.name_ar?(n(),u("small",De,t(e.$t("custom_tabs.name_ar_required")),1)):g("",!0)]),s("div",qe,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[b(t(e.$t("custom_tabs.ids"))+" ",1),a[17]||(a[17]=s("span",{class:"text-red-500"},"*",-1))],2),m(c(I),{modelValue:r.value.ids,"onUpdate:modelValue":a[6]||(a[6]=v=>r.value.ids=v),options:L.value,optionLabel:U.value,optionValue:"id",placeholder:e.$t("custom_tabs.select_ids"),class:i(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":!h.value&&!r.value.ids.length}]),"aria-describedby":"ids_error",required:""},null,8,["modelValue","options","optionLabel","placeholder","class"]),!h.value&&!r.value.ids.length?(n(),u("small",Le,t(e.$t("custom_tabs.ids_required")),1)):g("",!0)]),s("div",Ce,[s("label",{class:i(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},t(e.$t("custom_tabs.image")),3),m(c(N),{mode:"basic",accept:"image/*",maxFileSize:1e6,onSelect:a[7]||(a[7]=v=>E("edit",v)),chooseLabel:e.$t("custom_tabs.select_image"),class:"p-button-outlined p-button-rounded"},null,8,["chooseLabel"]),(o=r.value.media)!=null&&o.length?(n(),u("img",{key:0,src:r.value.media[0].url,alt:e.$t("custom_tabs.current_image"),class:"w-32 h-32 object-cover mt-2 rounded-lg"},null,8,Fe)):g("",!0)])])]}),_:1},8,["visible","header","class"])],8,X)}}},Te=M(Se,[["__scopeId","data-v-78ddcd05"]]);export{Te as default};
