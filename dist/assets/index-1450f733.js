import{_ as ce,a as me,I as ve,r as o,m as fe,J as ge,o as be,v as u,K as Q,b as m,c as _,d as a,e as s,w as n,x as V,j as _e,t as i,F as W,f as he,L as ye,i as $,p as H,s as we,z as Ce}from"./index-a74d0a8d.js";const ke={class:"grid"},xe={class:"col-12"},Ve={class:"card p-4 shadow-2 border-round"},$e={class:"text-2xl font-bold"},De={class:"flex gap-2"},Pe={class:"p-input-icon-left"},Ue={class:"card shadow-1 surface-0"},Se={class:"text-center py-4"},Te={class:"text-xl"},Ne={class:"flex justify-content-center align-items-center py-4"},Me={class:"p-paginator p-component p-unselectable-text mt-3"},Re={class:"p-paginator-left-content"},Ee={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Fe={class:"p-paginator-pages"},Ie=["disabled"],je=["disabled"],Le=["onClick"],ze={key:1,class:"p-paginator-dots"},qe=["disabled"],Ae=["disabled"],Ge={class:"p-paginator-rpp-options"},Je={class:"flex align-items-center justify-content-center"},Ke={class:"field mb-5"},Oe={class:"card flex justify-content-center"},Qe={class:"field mb-5"},We={class:"card flex justify-content-center"},He={__name:"index",setup(Xe){const N=me(),v=ve(),h=o(!0),r=o({name:"",permissions:[]}),D=o([]),M=o([]),P=o(!1),y=o(!1);o(!1);const f=o(!1);o({});const R=o(null),E=o(null),B=o({}),F=o(!1),I=o(Number),w=o(""),p=o(1),j=o(0),g=o(10),C=o(0),X=o(""),Y=o(""),L=o(""),z=o(""),q=o(0),A=o(0),G=o([]),Z=()=>{B.value={global:{value:null,matchMode:ye.CONTAINS}}},c=()=>{h.value=!0,$.get("/api/role",{params:{page:p.value,limit:g.value,search:w.value}}).then(e=>{h.value=!1,M.value=e.data.data.data,j.value=e.data.data.total,C.value=e.data.data.last_page,X.value=e.data.data.first_page_url,Y.value=e.data.data.last_page_url,L.value=e.data.data.next_page_url,z.value=e.data.data.prev_page_url,q.value=e.data.data.from,A.value=e.data.data.to,G.value=e.data.data.links}).catch(e=>{h.value=!1,console.error("Error fetching roles:",e),v.add({severity:"error",summary:"Error",detail:"Failed to load roles",life:3e3})}),$.get("/api/role/get/permissions").then(e=>{D.value=e.data.permissions}).catch(e=>{console.error("Error fetching permissions:",e)})},b=e=>{e>=1&&e<=C.value&&(p.value=e,c())},ee=e=>{g.value=e.value,p.value=1,c()};fe(w,e=>{p.value=1,c()});const le=()=>{N.push({name:"roles-create"})},J=()=>{y.value=!1,P.value=!1,F.value=!1},te=()=>{F.value=!0,$.post("api/roles/create",r.value).then(e=>{c(),y.value=!1,v.add({severity:"success",summary:"Successful",detail:"Role Created",life:3e3}),r.value={name:"",permissions:[]}}).catch(e=>{console.error("Error creating role:",e),v.add({severity:"error",summary:"Error",detail:"Failed to create role",life:3e3})})},ae=e=>{N.push({name:"roles-update",params:{id:e}})},oe=e=>{I.value=e,f.value=!0},se=()=>{$.delete(`api/role/${I.value}`).then(()=>{c(),f.value=!1,v.add({severity:"success",summary:"Successful",detail:"Role Deleted",life:3e3})}).catch(e=>{console.error("Error deleting role:",e),v.add({severity:"error",summary:"Error",detail:"Failed to delete role",life:3e3})})},ne=()=>{E.value.exportCSV()};return ge(()=>{Z()}),be(()=>{c()}),(e,l)=>{const U=u("InputText"),d=u("Button"),ie=u("Toolbar"),re=u("Toast"),k=u("Column"),de=u("ProgressSpinner"),ue=u("DataTable"),pe=u("Dropdown"),S=u("Dialog"),K=u("MultiSelect"),x=Q("can"),O=Q("tooltip");return m(),_("div",ke,[a("div",xe,[a("div",Ve,[s(ie,{class:"mb-4"},{start:n(()=>[a("h2",$e,i(e.$t("role.manage_Roles")),1)]),end:n(()=>[a("div",De,[a("span",Pe,[l[15]||(l[15]=a("i",{class:"pi pi-search"},null,-1)),s(U,{modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=t=>w.value=t),placeholder:e.$t("user.search")},null,8,["modelValue","placeholder"])]),s(d,{label:e.$t("user.export"),icon:"pi pi-upload",class:"p-export",onClick:ne},null,8,["label"]),V(s(d,{label:e.$t("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:le},null,8,["label"]),[[x,"create roles"]])])]),_:1}),s(re),a("div",Ue,[V((m(),_e(ue,{ref_key:"dt",ref:E,selection:R.value,"onUpdate:selection":l[1]||(l[1]=t=>R.value=t),value:M.value,loading:h.value,"data-key":"id",paginator:!1,rows:g.value,filters:B.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[a("div",Se,[l[16]||(l[16]=a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),a("p",Te,i(e.$t("role.noData")),1)])]),loading:n(()=>[a("div",Ne,[s(de,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[s(k,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(k,{field:"id",header:e.$t("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:n(t=>[H(i(t.data.id),1)]),_:1},8,["header"]),s(k,{field:"name",header:e.$t("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(t=>[H(i(t.data.name),1)]),_:1},8,["header"]),s(k,{"header-style":"min-width:10rem;"},{body:n(t=>[V(s(d,{icon:"pi pi-pencil",class:"p-detail",onClick:T=>ae(t.data.id)},null,8,["onClick"]),[[x,"edit roles"],[O,e.$t("edit"),void 0,{top:!0}]]),V(s(d,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:T=>oe(t.data.id)},null,8,["onClick"]),[[x,"delete roles"],[O,e.$t("delete"),void 0,{top:!0}]])]),_:1})]),_:1},8,["selection","value","loading","rows","filters"])),[[x,"list roles"]]),a("div",Me,[a("div",Re,[a("span",Ee,i(e.$t("showing"))+" "+i(q.value)+" "+i(e.$t("to"))+" "+i(A.value)+" "+i(e.$t("of"))+" "+i(j.value)+" "+i(e.$t("entries")),1)]),a("div",Be,[a("span",Fe,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:l[2]||(l[2]=t=>b(1))},l[17]||(l[17]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Ie),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!z.value,onClick:l[3]||(l[3]=t=>b(p.value-1))},l[18]||(l[18]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,je),(m(!0),_(W,null,he(G.value,(t,T)=>(m(),_(W,{key:T},[t.label&&!isNaN(t.label)?(m(),_("button",{key:0,class:we(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Ye=>b(parseInt(t.label))},i(t.label),11,Le)):t.label==="..."?(m(),_("span",ze,"...")):Ce("",!0)],64))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!L.value,onClick:l[4]||(l[4]=t=>b(p.value+1))},l[19]||(l[19]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,qe),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===C.value,onClick:l[5]||(l[5]=t=>b(C.value))},l[20]||(l[20]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ae)]),a("span",Ge,[s(pe,{modelValue:g.value,"onUpdate:modelValue":l[6]||(l[6]=t=>g.value=t),options:[5,10,20,30],optionLabel:"label",optionValue:"value",onChange:ee,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])]),s(S,{visible:f.value,"onUpdate:visible":l[8]||(l[8]=t=>f.value=t),style:{width:"450px"},header:e.$t("role.deleteConfirmTitle"),modal:!0},{footer:n(()=>[s(d,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[7]||(l[7]=t=>f.value=!1)},null,8,["label"]),s(d,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:se},null,8,["label"])]),default:n(()=>[a("div",Je,[l[21]||(l[21]=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,i(e.$t("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),s(S,{visible:y.value,"onUpdate:visible":l[11]||(l[11]=t=>y.value=t),style:{width:"450px"},header:"Create Role",modal:!0,class:"p-fluid"},{footer:n(()=>[s(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:J}),s(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:te})]),default:n(()=>[a("div",Ke,[l[22]||(l[22]=a("label",{for:"name"},"Name",-1)),s(U,{class:"mt-3 w-full",id:"name",modelValue:r.value.name,"onUpdate:modelValue":l[9]||(l[9]=t=>r.value.name=t),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),a("div",Oe,[s(K,{modelValue:r.value.permissions,"onUpdate:modelValue":l[10]||(l[10]=t=>r.value.permissions=t),display:"chip","option-value":"id",options:D.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"]),s(S,{visible:P.value,"onUpdate:visible":l[14]||(l[14]=t=>P.value=t),style:{width:"450px"},header:"Update Role",modal:!0},{footer:n(()=>[s(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:J}),s(d,{label:"Update",icon:"pi pi-check",class:"p-button-text",onClick:e.update},null,8,["onClick"])]),default:n(()=>[a("div",Qe,[l[23]||(l[23]=a("label",{for:"name"},"Name",-1)),s(U,{class:"mt-3 w-full",id:"name",modelValue:r.value.name,"onUpdate:modelValue":l[12]||(l[12]=t=>r.value.name=t),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),a("div",We,[s(K,{modelValue:r.value.permissions,"onUpdate:modelValue":l[13]||(l[13]=t=>r.value.permissions=t),"option-value":"id",options:D.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"])])])])}}},el=ce(He,[["__scopeId","data-v-835c3a8b"]]);export{el as default};
