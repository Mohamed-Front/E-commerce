import{_ as q,l as z,u as G,k as H,r as c,v as J,o as K,a as l,b as p,e as r,t as g,h as o,f as V,w as f,g as _,j as k,F as N,d as C,i as B}from"./index-180ec140.js";import{b as F,a as L,A as P,S as E}from"./productsSwiper-84e39ad7.js";const Q={class:"mx-auto bg-[#FAF7F0] mt-16 max-w-7xl px-4"},U={key:0,class:"text-center py-10"},W={class:"text-gray-600"},X={key:1,class:"text-center py-10 text-red-600"},Y={key:2},Z={class:"mt-16"},ee={class:"font-bold font-sans text-gray-800 lg:mt-20 xs:mt-10 xs:text-lg sm:text-xl md:text-2xl lg:text-3xl"},ae={class:"w-full h-48 overflow-hidden rounded-xl shadow-md relative"},te=["src","alt"],se={class:"font-sans mt-4 mb-1 text-gray-800 font-semibold xs:text-sm sm:text-base md:text-lg"},le={class:"text-gray-600 text-sm"},re=["src","alt"],oe={__name:"hasmarket",setup(ne){const v=z(),O=G(),{t:i,locale:h}=H(),S=c({title:"",products:[]}),y=c({title:"Best Sellers",products:[]}),w=c({title:"New Arrivals",products:[]}),x=c([]),A=c(""),D=c(""),j=c(""),m=c(!1),u=c(null),M=async()=>{var a,d,e;m.value=!0,u.value=null;try{const n=(await B.get(`api/home/store-details/${v.params.id}`)).data.data,b=n.store.media||[];A.value=((a=b.find(s=>s.name==="main_banner_image"))==null?void 0:a.url)||"/default-banner.png",D.value=((d=b.find(s=>s.name==="slider_images_one"))==null?void 0:d.url)||"/default-slider.png",j.value=((e=b.find(s=>s.name==="slider_images_two"))==null?void 0:e.url)||"/default-slider.png",n.store.markets?x.value=n.store.markets.map(s=>({id:s.id,title:h.value==="ar"?s.name_ar:s.name_en,media:s.media?s.media.map(I=>({url:I.url||"/default-market-image.png",name:I.name})):[{url:"/default-market-image.png",name:"default"}]})):x.value=[]}catch(t){console.error("Error fetching store details:",t),u.value=i("category.errorLoading")||"Failed to load store details."}finally{m.value=!1}},R=async()=>{m.value=!0,u.value=null;try{const d=(await B.get(`api/home/best-sellers/${v.params.id}`)).data.data.data||[];y.value={title:i("category.bestSellers")||"Best Sellers",products:d.map(e=>{var t;return{id:e.id,name:h.value==="ar"?e.name_ar:e.name_en,price:parseFloat(e.base_price).toFixed(2),img:((t=e.media.find(n=>n.name==="product_main_image"))==null?void 0:t.url)||"/default-product.png"}})}}catch(a){console.error("Error fetching best sellers:",a),u.value=i("category.errorLoading")||"Failed to load best sellers."}finally{m.value=!1}},T=async()=>{m.value=!0,u.value=null;try{const d=(await B.get(`api/home/new-arrivals/${v.params.id}`)).data.data.data||[];w.value={title:i("category.newArrivals")||"New Arrivals",products:d.map(e=>{var t;return{id:e.id,name:h.value==="ar"?e.name_ar:e.name_en,price:parseFloat(e.base_price).toFixed(2),img:((t=e.media.find(n=>n.name==="product_main_image"))==null?void 0:t.url)||"/default-product.png"}})}}catch(a){console.error("Error fetching new arrivals:",a),u.value=i("category.errorLoading")||"Failed to load new arrivals."}finally{m.value=!1}},$=async()=>{await Promise.all([M(),R(),T()])};return J(()=>v.params.id,a=>{a&&$()},{immediate:!0}),K($),(a,d)=>(l(),p("div",Q,[m.value?(l(),p("div",U,[r("p",W,g(o(i)("category.loading")),1)])):u.value?(l(),p("div",X,[r("p",null,g(u.value),1)])):(l(),p("div",Y,[r("div",Z,[r("h2",ee,g(o(i)("category.markets")),1),V(o(L),{modules:[o(P)],"slides-per-view":3,"space-between":16,loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1},speed:1e3,"grab-cursor":!0,class:"mt-6 pb-8",breakpoints:{320:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:12},768:{slidesPerView:2,spaceBetween:16},1024:{slidesPerView:3,spaceBetween:20}}},{default:f(()=>[(l(!0),p(N,null,C(x.value,e=>(l(),_(o(E),{key:e.id,class:"group flex flex-col items-center cursor-pointer transition-all duration-300 hover:-translate-y-2",onClick:t=>o(O).push(`/markets/${e.id}`)},{default:f(()=>[r("div",ae,[V(o(L),{modules:[o(P)],"slides-per-view":1,"space-between":0,loop:e.media.length>1,autoplay:{delay:2e3,disableOnInteraction:!1},speed:800,class:"w-full h-full"},{default:f(()=>[(l(!0),p(N,null,C(e.media,(t,n)=>(l(),_(o(E),{key:n,class:"w-full h-full"},{default:f(()=>[r("img",{src:t.url,alt:`${e.title} image ${n+1}`,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"},null,8,te)]),_:2},1024))),128))]),_:2},1032,["modules","loop"]),d[0]||(d[0]=r("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),r("h1",se,g(e.title),1),r("p",le,g(o(i)("category.allCategories")),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modules"])]),r("section",null,[r("img",{src:A.value,alt:o(i)("category.storeBanner"),class:"mt-10 w-full rounded-lg"},null,8,re),S.value.products.length?(l(),_(F,{key:0,products:S.value},null,8,["products"])):k("",!0),y.value.products.length?(l(),_(F,{key:1,products:y.value},null,8,["products"])):k("",!0),w.value.products.length?(l(),_(F,{key:2,products:w.value},null,8,["products"])):k("",!0)])]))]))}},ce=q(oe,[["__scopeId","data-v-45c5a9a5"]]);export{ce as default};
