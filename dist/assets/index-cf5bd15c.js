import{_ as se,a as oe,u as ie,I as re,r as s,J as de,m as pe,o as ce,v as p,K as j,b as v,c as h,d as a,e as i,w as d,x,j as ue,t as r,g as o,F as z,f as ve,L as _e,i as L,p as A,s as me,z as be}from"./index-3d79394e.js";const ge={class:"grid"},fe={class:"col-12"},he={class:"card p-4 shadow-2 border-round"},xe={class:"text-2xl font-bold"},ye={class:"flex gap-2"},ke={class:"p-input-icon-left"},Ce={class:"card shadow-1 surface-0"},we={class:"text-center py-4"},Te={class:"text-xl"},De={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Pe={class:"p-paginator-left-content"},Be={class:"p-paginator-current"},Ne={class:"p-paginator-right-content"},$e=["disabled"],Se=["disabled"],Ie=["onClick"],Ue={key:1,class:"p-paginator-dots"},Me=["disabled"],Re=["disabled"],Ee={class:"flex align-items-center justify-content-center"},Fe={__name:"index",setup(je){const P=oe(),{t:n}=ie(),T=re(),y=s(!0),B=s(""),N=s(null),_=s(!1);s(null);const $=s(null),S=s({}),k=s(""),c=s(1),D=s(0),m=s(10),C=s(0),G=s(""),J=s(""),I=s(""),U=s(""),M=s(0),R=s(0),E=s([]),K=()=>{$.value.exportCSV()},O=t=>{B.value=t,_.value=!0},Q=()=>{L.delete(`/api/brand/${B.value}`).then(()=>{b(),_.value=!1,T.add({severity:"success",summary:n("success"),detail:n("brand.deleteSuccess"),life:3e3})}).catch(()=>{T.add({severity:"error",summary:n("error"),detail:n("brand.deleteError"),life:3e3})})},W=()=>{S.value={global:{value:null,matchMode:_e.CONTAINS}}};de(()=>{W()});const b=()=>{y.value=!0,L.get("/api/brand",{params:{page:c.value,per_page:m.value,search:k.value}}).then(t=>{N.value=t.data.data.data,D.value=t.data.data.total,C.value=t.data.data.last_page,G.value=t.data.data.first_page_url,J.value=t.data.data.last_page_url,I.value=t.data.data.next_page_url,U.value=t.data.data.prev_page_url,M.value=t.data.data.from,R.value=t.data.data.to,E.value=t.data.data.links,y.value=!1}).catch(t=>{y.value=!1,T.add({severity:"error",summary:n("error"),detail:n("brand.loadError"),life:3e3}),console.error("Error fetching brands:",t)})};pe(k,t=>{c.value=1,b()});const g=t=>{t>=1&&t<=C.value&&(c.value=t,b())},q=t=>{m.value=t.value,c.value=1,b()};ce(()=>{b()});const H=()=>{P.push({name:"brand-create"})},X=t=>{P.push({name:"brand-edit",params:{id:t}})};return(t,e)=>{const Y=p("InputText"),u=p("Button"),Z=p("Toolbar"),ee=p("Toast"),w=p("Column"),ae=p("ProgressSpinner"),te=p("DataTable"),le=p("Dropdown"),ne=p("Dialog"),f=j("can"),F=j("tooltip");return v(),h("div",ge,[a("div",fe,[a("div",he,[i(Z,{class:"mb-4"},{start:d(()=>[a("h2",xe,r(o(n)("brand.managementTitle")),1)]),end:d(()=>[a("div",ye,[a("span",ke,[e[8]||(e[8]=a("i",{class:"pi pi-search"},null,-1)),i(Y,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),placeholder:o(n)("brand.search")},null,8,["modelValue","placeholder"])]),x(i(u,{label:o(n)("brand.export"),icon:"pi pi-upload",class:"p-export",onClick:K},null,8,["label"]),[[f,"list brands"]]),x(i(u,{label:o(n)("brand.new"),icon:"pi pi-plus",class:"p-button-success",onClick:H},null,8,["label"]),[[f,"create brands"]])])]),_:1}),i(ee),a("div",Ce,[x((v(),ue(te,{ref_key:"dt",ref:$,value:N.value,loading:y.value,"data-key":"id",paginator:!1,rows:m.value,filters:S.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[a("div",we,[e[9]||(e[9]=a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),a("p",Te,r(o(n)("brand.noData")),1)])]),loading:d(()=>[a("div",De,[i(ae,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(w,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(w,{field:"name_en",header:o(n)("brand.name_en"),sortable:!0},{body:d(l=>[A(r(l.data.name_en),1)]),_:1},8,["header"]),i(w,{field:"name_ar",header:o(n)("brand.name_ar"),sortable:!0},{body:d(l=>[A(r(l.data.name_ar),1)]),_:1},8,["header"]),i(w,{header:o(n)("actions"),headerStyle:"width: 12rem"},{body:d(l=>[x(i(u,{icon:"pi pi-pencil",class:"p-detail",onClick:V=>X(l.data.id)},null,8,["onClick"]),[[f,"edit brands"],[F,o(n)("edit"),void 0,{top:!0}]]),x(i(u,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:V=>O(l.data.id)},null,8,["onClick"]),[[f,"delete brands"],[F,o(n)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[f,"list brands"]]),a("div",Ve,[a("div",Pe,[a("span",Be,r(o(n)("show"))+" "+r(M.value)+" "+r(o(n)("to"))+" "+r(R.value)+" "+r(o(n)("from"))+" "+r(D.value),1)]),a("div",Ne,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:e[1]||(e[1]=l=>g(1))},e[10]||(e[10]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,$e),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!U.value,onClick:e[2]||(e[2]=l=>g(c.value-1))},e[11]||(e[11]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Se),(v(!0),h(z,null,ve(E.value,(l,V)=>(v(),h(z,{key:V},[l.label&&!isNaN(l.label)?(v(),h("button",{key:0,class:me(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:ze=>g(parseInt(l.label))},r(l.label),11,Ie)):l.label==="..."?(v(),h("span",Ue,"...")):be("",!0)],64))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!I.value,onClick:e[3]||(e[3]=l=>g(c.value+1))},e[12]||(e[12]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Me),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===C.value,onClick:e[4]||(e[4]=l=>g(C.value))},e[13]||(e[13]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Re),i(le,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value=l),options:[5,10,20,30],optionLabel:"",onChange:q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(ne,{visible:_.value,"onUpdate:visible":e[7]||(e[7]=l=>_.value=l),style:{width:"450px"},header:o(n)("brand.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(u,{label:o(n)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[6]||(e[6]=l=>_.value=!1)},null,8,["label"]),i(u,{label:o(n)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Q},null,8,["label"])]),default:d(()=>[a("div",Ee,[e[14]||(e[14]=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,r(o(n)("brand.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Ae=se(Fe,[["__scopeId","data-v-8f3c9993"]]);export{Ae as default};
