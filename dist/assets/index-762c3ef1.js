import{p as E,r as u,o as $,d as l,e as b,f as y,h as o,i as e,w as d,b as w,F as R,k as z,J as A,m as F,t as M,B as j,C as H}from"./index-f9345899.js";const _=v=>(j("data-v-168d5af8"),v=v(),H(),v),J={class:"permissions-container"},K={class:"card"},L=_(()=>o("div",{class:"header"},[o("h1",null,"Permissions Management"),o("p",{class:"subtitle"},"View and manage all system permissions grouped by modules")],-1)),O={class:"toolbar"},q={class:"description-cell"},G=_(()=>o("div",{class:"empty-message"},[o("i",{class:"pi pi-database",style:{"font-size":"2rem"}}),o("p",null,"No permissions found in this group")],-1)),Q={class:"p-fluid"},W={class:"p-field"},X=_(()=>o("label",{for:"permissionName"},"Permission Name",-1)),Y={class:"p-field"},Z=_(()=>o("label",{for:"description"},"Description",-1)),ee={setup(v){const C=u({}),h=u([]),c=u(!0),g=u(0),m=u(!1),p=u({id:"",name:"",description:""}),k=t=>{const s=[];for(const[n,r]of Object.entries(t))s.push({name:n.charAt(0).toUpperCase()+n.slice(1),value:n,permissions:r});return s.sort((n,r)=>n.name.localeCompare(r.name)),s},f=()=>{c.value=!0,w.get("api/role/get/permissions").then(t=>{C.value=t.data.data,h.value=k(t.data.data),c.value=!1}).catch(t=>{console.error("Error fetching permissions:",t),c.value=!1})},x=t=>{m.value=!0,p.value={id:t.id,name:t.name,description:t.description||""}},D=()=>{c.value=!0,w.put(`/api/role/permission/${p.value.id}`,{description:p.value.description}).then(()=>{f(),m.value=!1}).catch(t=>{console.error("Update failed:",t)}).finally(()=>{c.value=!1})};return $(()=>{f()}),(t,s)=>{const n=l("Button"),r=l("Column"),T=l("Tag"),V=l("DataTable"),I=l("TabPanel"),N=l("TabView"),P=l("InputText"),B=l("Textarea"),U=l("Dialog");return b(),y("div",J,[o("div",K,[L,o("div",O,[e(n,{icon:"pi pi-refresh",label:"Refresh",onClick:f,loading:c.value},null,8,["loading"])]),e(N,{activeIndex:g.value,"onUpdate:activeIndex":s[0]||(s[0]=a=>g.value=a),class:"grouped-tabs"},{default:d(()=>[(b(!0),y(R,null,z(h.value,a=>(b(),A(I,{key:a.value,header:a.name},{default:d(()=>[e(V,{value:a.permissions,stripedRows:"",class:"p-datatable-sm",loading:c.value,dataKey:"id",scrollable:"",scrollHeight:"flex"},{empty:d(()=>[G]),default:d(()=>[e(r,{field:"id",header:"ID",sortable:"",style:{width:"80px"}}),e(r,{field:"name",header:"Name",sortable:""},{body:d(({data:i})=>[e(T,{value:i.name,severity:i.name.includes("delete")?"danger":i.name.includes("edit")?"warning":i.name.includes("create")?"success":"info"},null,8,["value","severity"])]),_:1}),e(r,{field:"description",header:"Description"},{body:d(({data:i})=>[o("div",q,[F(M(i.description||"No description")+" ",1),e(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-sm",onClick:S=>x(i)},null,8,["onClick"])])]),_:1}),e(r,{header:"Actions",style:{width:"100px"}},{body:d(({data:i})=>[e(n,{icon:"pi pi-cog",class:"p-button-rounded p-button-text p-button-sm",onClick:S=>x(i)},null,8,["onClick"])]),_:1})]),_:2},1032,["value","loading"])]),_:2},1032,["header"]))),128))]),_:1},8,["activeIndex"]),e(U,{visible:m.value,"onUpdate:visible":s[4]||(s[4]=a=>m.value=a),modal:"",header:"Update Permission Description",style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:d(()=>[e(n,{label:"Cancel",icon:"pi pi-times",onClick:s[3]||(s[3]=a=>m.value=!1),class:"p-button-text"}),e(n,{label:"Save",icon:"pi pi-check",onClick:D,loading:c.value,autofocus:""},null,8,["loading"])]),default:d(()=>[o("div",Q,[o("div",W,[X,e(P,{id:"permissionName",modelValue:p.value.name,"onUpdate:modelValue":s[1]||(s[1]=a=>p.value.name=a),disabled:""},null,8,["modelValue"])]),o("div",Y,[Z,e(B,{id:"description",modelValue:p.value.description,"onUpdate:modelValue":s[2]||(s[2]=a=>p.value.description=a),rows:"5",autoResize:"",placeholder:"Enter permission description..."},null,8,["modelValue"])])])]),_:1},8,["visible"])])])}}},oe=E(ee,[["__scopeId","data-v-168d5af8"]]);export{oe as default};
