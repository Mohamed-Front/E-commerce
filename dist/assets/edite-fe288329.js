import{p as X,y as Y,x as Z,L as ee,r as c,o as te,d as h,B as se,e as r,f as n,D as oe,i as u,w as G,J as k,F as ae,b as D,h as e,t as b,n as f,G as le,q as re,s as ne,m as p}from"./index-37defb63.js";const a=x=>(re("data-v-60187451"),x=x(),ne(),x),de={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ie=a(()=>e("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Edit User",-1)),ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ce={class:"space-y-2"},pe=a(()=>e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},[p(" Name "),e("span",{class:"text-red-500"},"*")],-1)),me={key:0,class:"text-red-500 text-xs"},_e={class:"space-y-2"},ve=a(()=>e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},[p(" Phone "),e("span",{class:"text-red-500"},"*")],-1)),ge={key:0,class:"text-red-500 text-xs"},he={class:"space-y-2"},be=a(()=>e("label",{for:"type",class:"block text-sm font-medium text-gray-700"},[p(" Type "),e("span",{class:"text-red-500"},"*")],-1)),fe={key:0,class:"text-red-500 text-xs"},xe={class:"space-y-2"},ye=a(()=>e("label",{for:"role",class:"block text-sm font-medium text-gray-700"},[p(" Role "),e("span",{class:"text-red-500"},"*")],-1)),we={key:0,class:"text-red-500 text-xs"},ke={class:"space-y-2"},Ve=a(()=>e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},[p(" Email "),e("span",{class:"text-red-500"},"*")],-1)),De={key:0,class:"text-red-500 text-xs"},Ue={class:"md:col-span-2 space-y-2"},Ie=a(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Profile Image",-1)),Ce={class:"flex justify-center"},Fe=["onDragover","onDrop"],Se={key:0,class:"p-4"},Re={class:"relative group"},Te=["src"],Be={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},je={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ee=["onClick"],Ne=a(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Pe=[Ne],Ge=a(()=>e("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[e("i",{class:"pi pi-pencil text-sm"})],-1)),Le=a(()=>e("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change photo",-1)),Me={key:1,class:"p-8 flex flex-col items-center justify-center"},Ae=a(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Je=a(()=>e("p",{class:"text-sm text-center text-gray-600 mb-1"},[e("span",{class:"text-blue-500 font-medium"},"Click to upload"),p(" or drag and drop ")],-1)),$e=a(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1)),qe=[Ae,Je,$e],ze={class:"pt-4 flex justify-center"},Oe={key:0},He={key:1,class:"pi pi-spinner pi-spin"},Ke={setup(x){const L=Y(),V=Z(),{t:M}=ee(),l=c(),m=c(!1),U=c([]),y=c(null),_=c(null),v=c(!1),s=c({name:"",phone:"",type:null,role_id:null,email:""}),A=async()=>{try{const t=await D.get("api/role");U.value=t.data.data.data,z()}catch(t){console.error("Error fetching roles:",t)}},J=t=>{t.preventDefault(),v.value=!0},$=()=>{v.value=!1},q=t=>{y.value=t;const o=new FileReader;o.onload=i=>{_.value=i.target.result},o.readAsDataURL(t),v.value=!1},I=t=>{var i,g,w;const o=((i=t.target.files)==null?void 0:i[0])||((w=(g=t.dataTransfer)==null?void 0:g.files)==null?void 0:w[0]);o&&o.type.match("image.*")&&q(o)},z=()=>{D.get(`api/user/${V.currentRoute._value.params.id}`).then(t=>{s.value.name=t.data.data.name,s.value.email=t.data.data.email,s.value.type=t.data.data.type,_.value=t.data.data.media[0].url,s.value.phone=t.data.data.phone,s.value.role_id=t.data.data.roles[0].id})},O=()=>{y.value=null,_.value=null},H=async()=>{m.value=!0;const t=new FormData;t.append("name",s.value.name),t.append("phone",s.value.phone),t.append("type",s.value.type),t.append("role_id",s.value.role_id),t.append("email",s.value.email),y.value&&t.append("image",y.value),D.post(`/api/user/${V.currentRoute._value.params.id}`,t).then(o=>{V.push({name:"users"})}).catch(o=>{console.error("Error:",o),L.add({severity:"error",summary:M("error"),detail:o.response.data.message,life:3e3}),m.value=!1})};return te(()=>{A()}),(t,o)=>{const i=h("InputText"),g=h("Dropdown"),w=h("Button"),K=h("Form"),Q=h("Toast"),W=se("can");return r(),n(ae,null,[oe((r(),n("div",de,[ie,u(K,{ref_key:"form",ref:l,model:s.value,rules:t.rules,onSubmit:k(H,["prevent"]),class:"space-y-6"},{default:G(()=>{var C,F,S,R,T,B,j,E,N,P;return[e("div",ue,[e("div",ce,[pe,u(i,{id:"name",modelValue:s.value.name,"onUpdate:modelValue":o[0]||(o[0]=d=>s.value.name=d),placeholder:"Enter full name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(F=(C=l.value)==null?void 0:C.errors)!=null&&F.name?(r(),n("small",me,b(l.value.errors.name[0].message),1)):f("",!0)]),e("div",_e,[ve,u(i,{id:"phone",modelValue:s.value.phone,"onUpdate:modelValue":o[1]||(o[1]=d=>s.value.phone=d),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(R=(S=l.value)==null?void 0:S.errors)!=null&&R.phone?(r(),n("small",ge,b(l.value.errors.phone[0].message),1)):f("",!0)]),e("div",he,[be,u(g,{id:"type",modelValue:s.value.type,"onUpdate:modelValue":o[2]||(o[2]=d=>s.value.type=d),options:[{label:"Admin",value:1},{label:"customer",value:2},{label:"User",value:2}],optionLabel:"label",optionValue:"value",placeholder:"Select user type",class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(B=(T=l.value)==null?void 0:T.errors)!=null&&B.type?(r(),n("small",fe,b(l.value.errors.type[0].message),1)):f("",!0)]),e("div",xe,[ye,u(g,{id:"role",modelValue:s.value.role_id,"onUpdate:modelValue":o[3]||(o[3]=d=>s.value.role_id=d),options:U.value,optionLabel:"name",optionValue:"id",placeholder:"Select role",class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options"]),(E=(j=l.value)==null?void 0:j.errors)!=null&&E.role_id?(r(),n("small",we,b(l.value.errors.role_id[0].message),1)):f("",!0)]),e("div",ke,[Ve,u(i,{id:"email",modelValue:s.value.email,"onUpdate:modelValue":o[4]||(o[4]=d=>s.value.email=d),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(P=(N=l.value)==null?void 0:N.errors)!=null&&P.email?(r(),n("small",De,b(l.value.errors.email[0].message),1)):f("",!0)]),e("div",Ue,[Ie,e("div",Ce,[e("label",{onDragover:k(J,["prevent"]),onDragleave:$,onDrop:k(I,["prevent"]),class:le([{"border-blue-500 bg-blue-50":v.value,"border-gray-300":!v.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:I,accept:"image/*",class:"hidden"},null,32),_.value?(r(),n("div",Se,[e("div",Re,[e("img",{src:_.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Te),e("div",Be,[e("div",je,[e("button",{type:"button",onClick:k(O,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Pe,8,Ee),Ge])])]),Le])):(r(),n("div",Me,qe))],42,Fe)])])]),e("div",ze,[u(w,{type:"submit",label:"Update User",icon:"pi pi-user-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:m.value},{default:G(()=>[m.value?(r(),n("i",He)):(r(),n("span",Oe,"Update User"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules","onSubmit"])])),[[W,"edit users"]]),u(Q)],64)}}},We=X(Ke,[["__scopeId","data-v-60187451"]]);export{We as default};
