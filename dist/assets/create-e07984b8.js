import{p as U,s as B,r as u,o as E,e as n,f as i,h as e,E as y,G as R,t as c,F as p,k,H as A,n as D,b as I,I as V,B as T,C as q,m as F}from"./index-f9345899.js";const f=_=>(T("data-v-6dc40391"),_=_(),q(),_),L={class:"permission-manager"},H=f(()=>e("h1",null,"Role Permissions Manager",-1)),O={class:"controls"},j={class:"name-input"},z=f(()=>e("label",{for:"roleName"},[F(" Role Name "),e("span",{class:"required"},"*")],-1)),J={key:0,class:"loading"},K={key:0,class:"table-view"},Q=f(()=>e("thead",null,[e("tr",null,[e("th",null,"Group"),e("th",null,"Permission"),e("th",null,"Description"),e("th",null,"Select")])],-1)),W=["rowspan"],X=["id","checked",".indeterminate","onChange"],Y=["for"],Z=["onClick","disabled"],N=["id","value"],ee={key:1,class:"card-view"},te={class:"permission-groups"},se={class:"group-header"},oe=["id","checked",".indeterminate","onChange"],le=["for"],ne={class:"permission-items"},ie={class:"permission-info"},ae=["id","value"],de=["for"],ce=["onClick","disabled"],re=["disabled"],ue={class:"modal-content"},ve=f(()=>e("h3",null,"Permission Description",-1)),pe={setup(_){const P=B(),v=u({}),C=u(!0),a=u([]),h=u(""),b=u(!1),g=u(""),m=u(!1),M=()=>{I.get("api/role/get/permissions").then(d=>{v.value=d.data.data,C.value=!1})},w=(d,s)=>{const o=(v.value[d]||[]).map(t=>t.id);s.target.checked?a.value=[...new Set([...a.value,...o])]:a.value=a.value.filter(t=>!o.includes(t))},x=d=>{const s=v.value[d]||[];return s.length===0?!1:s.every(l=>a.value.includes(l.id))},S=d=>{const s=v.value[d]||[];if(s.length===0)return!1;const l=s.some(t=>a.value.includes(t.id)),o=s.every(t=>a.value.includes(t.id));return l&&!o},$=d=>{g.value=d||"No description available",b.value=!0},G=()=>{if(!h.value){alert("Please enter a role name");return}const d={name:h.value,permissions:a.value};I.post("/api/role",d).then(s=>{P.push({name:"roles"})}).catch(s=>{console.error("Error:",s)})};return E(()=>{M()}),(d,s)=>(n(),i("div",L,[H,e("div",O,[e("div",j,[z,y(e("input",{type:"text",id:"roleName","onUpdate:modelValue":s[0]||(s[0]=l=>h.value=l),placeholder:"Enter role name",required:""},null,512),[[R,h.value]])]),e("button",{onClick:s[1]||(s[1]=l=>m.value=!m.value),class:"view-toggle"},c(m.value?"Switch to Card View":"Switch to Table View"),1)]),C.value?(n(),i("div",J,"Loading permissions...")):(n(),i(p,{key:1},[m.value?(n(),i("div",K,[e("table",null,[Q,e("tbody",null,[(n(!0),i(p,null,k(v.value,(l,o)=>(n(),i(p,{key:o},[(n(!0),i(p,null,k(l,t=>(n(),i("tr",{key:t.id},[l.indexOf(t)===0?(n(),i("td",{key:0,rowspan:l.length},[e("input",{type:"checkbox",id:`group-${o}-table`,checked:x(o),".indeterminate":S(o),onChange:r=>w(o,r)},null,40,X),e("label",{for:`group-${o}-table`},c(o.charAt(0).toUpperCase()+o.slice(1)),9,Y)],8,W)):D("",!0),e("td",null,c(t.name),1),e("td",null,[e("button",{onClick:r=>$(t.description),class:"description-btn",disabled:!t.description},c(t.description?"View":"None"),9,Z)]),e("td",null,[y(e("input",{class:"mx-2",type:"checkbox",id:`permission-${t.id}-table`,value:t.id,"onUpdate:modelValue":s[2]||(s[2]=r=>a.value=r)},null,8,N),[[V,a.value]])])]))),128))],64))),128))])])])):(n(),i("div",ee,[e("div",te,[(n(!0),i(p,null,k(v.value,(l,o)=>(n(),i("div",{key:o,class:"permission-group"},[e("div",se,[e("input",{type:"checkbox",id:`group-${o}`,checked:x(o),".indeterminate":S(o),onChange:t=>w(o,t)},null,40,oe),e("label",{for:`group-${o}`},c(o.charAt(0).toUpperCase()+o.slice(1)),9,le)]),e("div",ne,[(n(!0),i(p,null,k(l,t=>(n(),i("div",{key:t.id,class:"permission-item"},[e("div",ie,[y(e("input",{type:"checkbox",id:`permission-${t.id}`,value:t.id,"onUpdate:modelValue":s[3]||(s[3]=r=>a.value=r)},null,8,ae),[[V,a.value]]),e("label",{for:`permission-${t.id}`},c(t.name),9,de)]),e("button",{onClick:r=>$(t.description),class:"description-btn",disabled:!t.description},c(t.description?"View Description":"No Description"),9,ce)]))),128))])]))),128))])]))],64)),e("button",{onClick:G,class:"submit-btn",disabled:a.value.length===0||!h.value}," Create Role with Selected Permissions ",8,re),b.value?(n(),i("div",{key:2,class:"modal-overlay",onClick:s[5]||(s[5]=A(l=>b.value=!1,["self"]))},[e("div",ue,[ve,e("p",null,c(g.value),1),e("button",{onClick:s[4]||(s[4]=l=>b.value=!1),class:"close-modal"},"Close")])])):D("",!0)]))}},_e=U(pe,[["__scopeId","data-v-6dc40391"]]);export{_e as default};
