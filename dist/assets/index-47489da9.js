import{_ as K,u as X,M as ee,j as te,r as n,m as ae,n as se,o as le,P as j,a as v,c as x,f as o,h as r,w as i,e,A as k,b as oe,t as d,F as A,d as ne,Y as re,i as V,R as ie,T as m,Z as de,N as ce,C as ue,$ as g,O as F,a4 as I,a0 as pe,x as ve,g as me,a1 as ge,a2 as fe}from"./index-ef49bc5b.js";const _e={class:"grid"},be={class:"col-12"},he={class:"card p-4 shadow-2 border-round"},ye={class:"text-2xl font-bold"},xe={class:"flex gap-2"},ke={class:"p-input-icon-left"},we={class:"card shadow-1 surface-0"},Ce={class:"text-center py-4"},$e={class:"text-xl"},Re={class:"flex justify-content-center align-items-center py-4"},Ue={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ve={class:"p-paginator-left-content"},Ne={class:"p-paginator-current"},Ee={class:"p-paginator-right-content"},Pe=["disabled"],Se=["disabled"],Me=["onClick"],Te={key:1,class:"p-paginator-dots"},De=["disabled"],Be=["disabled"],Le={class:"flex align-items-center justify-content-center"},je={__name:"index",setup(Ae){const N=X(),f=ee(),{t}=te(),w=n(!0),E=n("");n({});const P=n(null);n(!1),n(!1);const _=n(!1);n(null);const O=n(null),S=n({}),C=n(""),c=n(1),R=n(0),b=n(10),$=n(0),z=n(""),G=n(""),M=n(""),T=n(""),D=n(0),B=n(0),L=n([]),Q=()=>{V.get("/api/export/store",{responseType:"blob"}).then(l=>{const a=new Blob([l.data],{type:"text/csv"}),u=window.URL.createObjectURL(a),p=document.createElement("a");p.href=u,p.setAttribute("download","stores_export.csv"),document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(u),f.add({severity:"success",summary:t("success"),detail:t("store.exportSuccess"),life:3e3})}).catch(l=>{f.add({severity:"error",summary:t("error"),detail:t("store.exportError"),life:3e3}),console.error("Error exporting stores:",l)})},W=l=>{E.value=l,_.value=!0},Y=()=>{V.delete(`/api/store/${E.value}`).then(()=>{h(),_.value=!1,f.add({severity:"success",summary:t("success"),detail:t("store.deletedSuccess"),life:3e3})}).catch(()=>{f.add({severity:"error",summary:t("error"),detail:t("store.deleteError"),life:3e3})})},Z=()=>{S.value={global:{value:null,matchMode:re.CONTAINS}}};ae(()=>{Z()});const h=()=>{w.value=!0,V.get("/api/store",{params:{page:c.value,limit:b.value,search:C.value}}).then(l=>{w.value=!1,P.value=l.data.data.data,R.value=l.data.data.total,$.value=l.data.data.last_page,z.value=l.data.data.first_page_url,G.value=l.data.data.last_page_url,M.value=l.data.data.next_page_url,T.value=l.data.data.prev_page_url,D.value=l.data.data.from,B.value=l.data.data.to,L.value=l.data.data.links}).catch(l=>{w.value=!1,f.add({severity:"error",summary:t("error"),detail:t("store.loadError"),life:3e3}),console.error("Error fetching data:",l)})};se(C,l=>{c.value=1,h()});const y=l=>{l>=1&&l<=$.value&&(c.value=l,h())},q=l=>{b.value=l.value,c.value=1,h()};le(()=>{h()});const H=()=>{N.push({name:"store-create"})},J=l=>{N.push({name:"store-edit",params:{id:l}})};return(l,a)=>{const u=j("can"),p=j("tooltip");return v(),x("div",_e,[o("div",be,[o("div",he,[r(e(de),{class:"mb-4"},{start:i(()=>[o("h2",ye,d(e(t)("store.managementTitle")),1)]),end:i(()=>[o("div",xe,[o("span",ke,[a[8]||(a[8]=o("i",{class:"pi pi-search"},null,-1)),r(e(ie),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=s=>C.value=s),placeholder:e(t)("store.search")},null,8,["modelValue","placeholder"])]),k(r(e(m),{label:e(t)("store.export"),icon:"pi pi-upload",class:"p-export",onClick:Q},null,8,["label"]),[[u,"list stores"]]),k(r(e(m),{label:e(t)("store.new"),icon:"pi pi-plus",class:"p-button-success",onClick:H},null,8,["label"]),[[u,"create stores"]])])]),_:1}),r(e(ce)),o("div",we,[k((v(),oe(e(pe),{ref_key:"dt",ref:O,value:P.value,loading:w.value,"data-key":"id",paginator:!1,rows:b.value,filters:S.value,totalRecords:R.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:i(()=>[o("div",Ce,[a[9]||(a[9]=o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),o("p",$e,d(e(t)("store.noData")),1)])]),loading:i(()=>[o("div",Re,[r(e(ue),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:i(()=>[r(e(g),{"selection-mode":"multiple","header-style":"width: 3rem"}),r(e(g),{field:"name_en",header:e(t)("store.nameEn"),sortable:!0},{body:i(s=>[F(d(s.data.name_en),1)]),_:1},8,["header"]),r(e(g),{field:"name_ar",header:e(t)("store.nameAr"),sortable:!0},{body:i(s=>[F(d(s.data.name_ar),1)]),_:1},8,["header"]),r(e(g),{field:"is_default",header:e(t)("store.isDefault"),sortable:!0},{body:i(s=>[r(e(I),{value:s.data.is_default?e(t)("store.yes"):e(t)("store.no"),severity:s.data.is_default?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),r(e(g),{field:"has_market",header:e(t)("store.hasMarket"),sortable:!0},{body:i(s=>[r(e(I),{value:s.data.has_market?e(t)("store.yes"):e(t)("store.no"),severity:s.data.has_market?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),r(e(g),{header:e(t)("actions"),headerStyle:"width: 12rem"},{body:i(s=>[k(r(e(m),{icon:"pi pi-pencil",class:"p-detail",onClick:U=>J(s.data.id)},null,8,["onClick"]),[[u,"edit stores"],[p,e(t)("edit"),void 0,{top:!0}]]),k(r(e(m),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:U=>W(s.data.id)},null,8,["onClick"]),[[u,"delete stores"],[p,e(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[u,"list stores"]]),o("div",Ue,[o("div",Ve,[o("span",Ne,d(e(t)("show"))+" "+d(D.value)+" "+d(e(t)("to"))+" "+d(B.value)+" "+d(e(t)("from"))+" "+d(R.value),1)]),o("div",Ee,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:a[1]||(a[1]=s=>y(1))},a[10]||(a[10]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Pe),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!T.value,onClick:a[2]||(a[2]=s=>y(c.value-1))},a[11]||(a[11]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Se),(v(!0),x(A,null,ne(L.value,(s,U)=>(v(),x(A,{key:U},[s.label&&!isNaN(s.label)?(v(),x("button",{key:0,class:ve(["p-paginator-page p-paginator-element p-link",{"p-highlight":s.active}]),onClick:Fe=>y(parseInt(s.label))},d(s.label),11,Me)):s.label==="..."?(v(),x("span",Te,"...")):me("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!M.value,onClick:a[3]||(a[3]=s=>y(c.value+1))},a[12]||(a[12]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,De),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===$.value,onClick:a[4]||(a[4]=s=>y($.value))},a[13]||(a[13]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Be),r(e(ge),{filter:"",modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=s=>b.value=s),options:[5,10,20,30],optionLabel:"",onChange:q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),r(e(fe),{visible:_.value,"onUpdate:visible":a[7]||(a[7]=s=>_.value=s),style:{width:"450px"},header:e(t)("store.deleteConfirmTitle"),modal:!0},{footer:i(()=>[r(e(m),{label:e(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[6]||(a[6]=s=>_.value=!1)},null,8,["label"]),r(e(m),{variant:l.outline,label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Y},null,8,["variant","label"])]),default:i(()=>[o("div",Le,[a[14]||(a[14]=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,d(e(t)("store.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Oe=K(je,[["__scopeId","data-v-7112fe5a"]]);export{Oe as default};
