import{b as J,L as K,u as O,r as o,w as ee,d as ae,V as j,o as v,e as b,f as l,g as d,i as n,j as e,z as y,c as te,t as r,F as A,h as se,a as F,X as le,Y as _,Z as de,$ as oe,a0 as ie,a1 as u,s as x,a6 as re,a2 as ne,x as ce,B as ue,a3 as pe,a5 as ve}from"./index-b794012a.js";const _e={class:"grid"},he={class:"col-12"},ge={class:"card p-4 shadow-2 border-round"},fe={class:"text-2xl font-bold"},me={class:"flex gap-2"},be={class:"p-input-icon-left"},ye=l("i",{class:"pi pi-search"},null,-1),xe={class:"card shadow-1 surface-0"},ke={class:"text-center py-4"},Ce=l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1),we={class:"text-xl"},$e={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Pe={class:"p-paginator-left-content"},De={class:"p-paginator-current"},Ne={class:"p-paginator-right-content"},Se=["disabled"],Ue=l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1),ze=[Ue],Re=["disabled"],Be=l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1),Te=[Be],Ee=["onClick"],Ie={key:1,class:"p-paginator-dots"},je=["disabled"],Ae=l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1),Fe=[Ae],Le=["disabled"],Me=l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1),Ye=[Me],Ge={class:"flex align-items-center justify-content-center"},Qe=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1),qe={setup(We){const D=J(),$=K(),{t}=O(),k=o(!0),N=o([]),h=o(!1),S=o(null),U=o(null),L=o({}),C=o("");o(null);const c=o(1),V=o(0),p=o(10),w=o(0),M=o(""),Y=o(""),z=o(""),R=o(""),B=o(0),T=o(0),E=o([]),g=()=>{k.value=!0,F.get("/api/address",{params:{page:c.value,limit:p.value,search:C.value||void 0}}).then(s=>{N.value=s.data.data.data,V.value=s.data.data.total,w.value=s.data.data.last_page,M.value=s.data.data.first_page_url,Y.value=s.data.data.last_page_url,z.value=s.data.data.next_page_url,R.value=s.data.data.prev_page_url,B.value=s.data.data.from,T.value=s.data.data.to,E.value=s.data.data.links,k.value=!1}).catch(s=>{$.add({severity:"error",summary:t("error"),detail:t("address.loadError"),life:3e3}),k.value=!1,console.error("Error fetching addresses:",s)})};ee([C,p],()=>{c.value=1,g()});const f=s=>{s>=1&&s<=w.value&&(c.value=s,g())},G=s=>{p.value=s.value,c.value=1,g()},Q=s=>{S.value=s,h.value=!0},W=()=>{F.delete(`/api/address/${S.value}`).then(()=>{$.add({severity:"success",summary:t("success"),detail:t("address.deleteSuccess"),life:3e3}),g(),h.value=!1}).catch(s=>{$.add({severity:"error",summary:t("error"),detail:t("address.deleteError"),life:3e3})})},X=()=>{U.value.exportCSV()},Z=()=>{D.push({name:"address-create"})},q=s=>{D.push({name:"address-update",params:{id:s}})},H=s=>s?"success":"info";return ae(()=>{g()}),(s,i)=>{const m=j("can"),I=j("tooltip");return v(),b("div",_e,[l("div",he,[l("div",ge,[d(e(de),{class:"mb-4"},{start:n(()=>[l("h2",fe,r(e(t)("address.managementTitle")),1)]),end:n(()=>[l("div",me,[l("span",be,[ye,d(e(le),{modelValue:C.value,"onUpdate:modelValue":i[0]||(i[0]=a=>C.value=a),placeholder:e(t)("address.search")},null,8,["modelValue","placeholder"])]),y(d(e(_),{label:e(t)("address.export"),icon:"pi pi-upload",class:"p-export",onClick:X},null,8,["label"]),[[m,"list address"]]),y(d(e(_),{label:e(t)("address.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[m,"create address"]])])]),_:1}),d(e(oe)),l("div",xe,[y((v(),te(e(ne),{ref_key:"dt",ref:U,value:N.value,loading:k.value,"data-key":"id",paginator:!1,rows:p.value,filters:L.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[l("div",ke,[Ce,l("p",we,r(e(t)("address.noData")),1)])]),loading:n(()=>[l("div",$e,[d(e(ie),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[d(e(u),{"selection-mode":"multiple","header-style":"width: 3rem"}),d(e(u),{field:"address_line_1",header:e(t)("address.line1"),sortable:!0},{body:n(a=>[x(r(a.data.address_line_1),1)]),_:1},8,["header"]),d(e(u),{field:"address_line_2",header:e(t)("address.line2"),sortable:!0},{body:n(a=>[x(r(a.data.address_line_2||"-"),1)]),_:1},8,["header"]),d(e(u),{field:"city",header:e(t)("address.city"),sortable:!0},{body:n(a=>[x(r(a.data.city),1)]),_:1},8,["header"]),d(e(u),{field:"country",header:e(t)("address.country"),sortable:!0},{body:n(a=>[x(r(a.data.country),1)]),_:1},8,["header"]),d(e(u),{field:"zip_code",header:e(t)("address.zipCode"),sortable:!0},{body:n(a=>[x(r(a.data.zip_code||"-"),1)]),_:1},8,["header"]),d(e(u),{field:"is_default",header:e(t)("address.default"),sortable:!0},{body:n(a=>[d(e(re),{value:a.data.is_default?e(t)("address.defaultYes"):e(t)("address.defaultNo"),severity:H(a.data.is_default)},null,8,["value","severity"])]),_:1},8,["header"]),d(e(u),{header:e(t)("actions"),headerStyle:"width: 12rem"},{body:n(a=>[y(d(e(_),{icon:"pi pi-pencil",class:"p-detail",onClick:P=>q(a.data.id)},null,8,["onClick"]),[[m,"edit address"],[I,e(t)("edit"),void 0,{top:!0}]]),y(d(e(_),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:P=>Q(a.data.id)},null,8,["onClick"]),[[m,"delete address"],[I,e(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[m,"list address"]]),l("div",Ve,[l("div",Pe,[l("span",De,r(e(t)("show"))+" "+r(B.value)+" "+r(e(t)("to"))+" "+r(T.value)+" "+r(e(t)("from"))+" "+r(V.value),1)]),l("div",Ne,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:i[1]||(i[1]=a=>f(1))},ze,8,Se),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!R.value,onClick:i[2]||(i[2]=a=>f(c.value-1))},Te,8,Re),(v(!0),b(A,null,se(E.value,(a,P)=>(v(),b(A,{key:P},[a.label&&!isNaN(parseInt(a.label))?(v(),b("button",{key:0,class:ce(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Xe=>f(parseInt(a.label))},r(a.label),11,Ee)):a.label==="..."?(v(),b("span",Ie,"...")):ue("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!z.value,onClick:i[3]||(i[3]=a=>f(c.value+1))},Fe,8,je),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===w.value,onClick:i[4]||(i[4]=a=>f(w.value))},Ye,8,Le),d(e(pe),{modelValue:p.value,"onUpdate:modelValue":i[5]||(i[5]=a=>p.value=a),options:[5,10,20,30],onChange:G,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),d(e(ve),{visible:h.value,"onUpdate:visible":i[7]||(i[7]=a=>h.value=a),style:{width:"450px"},header:e(t)("address.deleteConfirmTitle"),modal:!0},{footer:n(()=>[d(e(_),{label:e(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:i[6]||(i[6]=a=>h.value=!1)},null,8,["label"]),d(e(_),{label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:W},null,8,["label"])]),default:n(()=>[l("div",Ge,[Qe,l("span",null,r(e(t)("address.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{qe as default};
