import{_ as oe,u as se,H as ie,j as re,r,n as ne,o as de,L as ce,a as f,c as _,f as s,h as i,w as d,e,t as n,F as A,d as pe,i as R,O as ue,Q as p,X as me,K as ve,Y as ge,Z as b,M as k,I as B,$ as be,v as ye,g as O,a0 as he,a1 as z,a4 as fe}from"./index-fa403798.js";const _e={class:"grid"},xe={class:"col-12"},we={class:"card p-4 shadow-2 border-round"},Ce={class:"text-2xl font-bold"},ke={class:"flex gap-2"},$e={class:"p-input-icon-left"},Ee={class:"card shadow-1 surface-0"},Ue={class:"text-center py-4"},Pe={class:"text-xl"},Re={class:"flex justify-content-center align-items-center py-4"},De={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Le={class:"p-paginator-left-content"},Ne={class:"p-paginator-current"},Se={class:"p-paginator-right-content"},Ve=["disabled"],je=["disabled"],Fe=["onClick","aria-label"],Ie={key:1,class:"p-paginator-dots"},Te=["disabled"],Ae=["disabled"],Be={class:"flex align-items-center justify-content-center"},Oe={class:"flex flex-column gap-3"},ze={key:0,class:"mt-2"},Me={class:"font-semibold"},Qe={__name:"index",setup(qe){const L=se(),g=ie(),{t}=re(),$=r(!0),N=r([]),x=r(!1),S=r(null),M=r(null),Q=r({}),E=r("");r(null);const w=r(!1),v=r(null),U=r(!1),u=r(1),D=r(0),y=r(10),P=r(0),q=r(""),G=r(""),V=r(""),j=r(""),F=r(0),I=r(0),T=r([]),H=r([{id:"شفت 7",arabic_name:"Shift7",english_name:"الأحذية",Top_Parent:"shift7"}]),h=()=>{$.value=!0,R.get("/api/category",{params:{page:u.value,limit:y.value,search:E.value||void 0}}).then(o=>{N.value=o.data.data.data,D.value=o.data.data.total,P.value=o.data.data.last_page,q.value=o.data.data.first_page_url,G.value=o.data.data.last_page_url,V.value=o.data.data.next_page_url,j.value=o.data.data.prev_page_url,F.value=o.data.data.from,I.value=o.data.data.to,T.value=o.data.data.links,u.value=o.data.data.current_page,$.value=!1}).catch(o=>{g.add({severity:"error",summary:t("error"),detail:t("category.loadError"),life:3e3}),$.value=!1,console.error("Error fetching categories:",o)})};ne([E,y],()=>{u.value=1,h()});const C=o=>{o>=1&&o<=P.value&&(u.value=o,h())},K=o=>{y.value=o.value,u.value=1,h()},W=o=>{S.value=o,x.value=!0},X=()=>{R.delete(`/api/category/${S.value}`).then(()=>{g.add({severity:"success",summary:t("success"),detail:t("category.deleteSuccess"),life:3e3}),h(),x.value=!1}).catch(o=>{g.add({severity:"error",summary:t("error"),detail:t("category.deleteError"),life:3e3}),console.error("Error deleting category:",o)})},Y=()=>{R.get("/api/export/category",{responseType:"blob"}).then(o=>{const l=new Blob([o.data],{type:"text/csv"}),c=window.URL.createObjectURL(l),a=document.createElement("a");a.href=c,a.setAttribute("download","categories_export.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(c)}).catch(o=>{g.add({severity:"error",summary:t("error"),detail:t("category.exportError"),life:3e3}),console.error("Error exporting categories:",o)})},Z=()=>{const o=`id,Arabic Name,English Name,Top Parent / Store
`+H.value.map(a=>`"${a.id}","${a.arabic_name}","${a.english_name}","${a.Top_Parent}",`).join(`
`),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");if(c.download!==void 0){const a=URL.createObjectURL(l);c.setAttribute("href",a),c.setAttribute("download","category_import_example.csv"),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(a)}},J=()=>{w.value=!0,v.value=null},ee=o=>{v.value=o.files[0]},ae=()=>{if(!v.value){g.add({severity:"warn",summary:t("warning"),detail:t("category.importNoFile"),life:3e3});return}U.value=!0;const o=new FormData;o.append("file",v.value),R.post("/api/import/store",o).then(()=>{g.add({severity:"success",summary:t("success"),detail:t("category.importSuccess"),life:3e3}),h(),w.value=!1,v.value=null;const l=document.querySelector('.p-fileupload input[type="file"]');l&&(l.value="")}).catch(l=>{g.add({severity:"error",summary:t("error"),detail:t("category.importError"),life:3e3}),console.error("Error importing categories:",l)}).finally(()=>{U.value=!1})},te=()=>{L.push({name:"category-create"})},le=o=>{L.push({name:"category-update",params:{id:o}})};return de(()=>{h()}),(o,l)=>{const c=ce("tooltip");return f(),_("div",_e,[s("div",xe,[s("div",we,[i(e(me),{class:"mb-4"},{start:d(()=>[s("h2",Ce,n(e(t)("category.managementTitle")),1)]),end:d(()=>[s("div",ke,[s("span",$e,[l[10]||(l[10]=s("i",{class:"pi pi-search"},null,-1)),i(e(ue),{modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=a=>E.value=a),placeholder:e(t)("category.search")},null,8,["modelValue","placeholder"])]),i(e(p),{label:e(t)("category.import"),icon:"pi pi-download",class:"exite",onClick:J,"aria-label":"Import categories"},null,8,["label"]),i(e(p),{label:e(t)("category.export"),icon:"pi pi-upload",class:"exite",onClick:Y,"aria-label":"Export categories"},null,8,["label"]),i(e(p),{label:e(t)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:te,"aria-label":"Create new category"},null,8,["label"])])]),_:1}),i(e(ve)),s("div",Ee,[i(e(be),{ref_key:"dt",ref:M,value:N.value,loading:$.value,"data-key":"id",paginator:!1,rows:y.value,filters:Q.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",Ue,[l[11]||(l[11]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",Pe,n(e(t)("category.noData")),1)])]),loading:d(()=>[s("div",Re,[i(e(ge),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(e(b),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(b),{field:"id",header:e(t)("id"),sortable:!0,"header-style":"width:5%; min-width:5rem;"},{body:d(a=>[k(n(a.data.id),1)]),_:1},8,["header"]),i(e(b),{field:"name_en",header:e(t)("category.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[k(n(a.data.name_en),1)]),_:1},8,["header"]),i(e(b),{field:"name_ar",header:e(t)("category.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[k(n(a.data.name_ar),1)]),_:1},8,["header"]),i(e(b),{field:"parent.name_en",header:e(t)("category.parent"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>{var m;return[k(n(((m=a.data.parent)==null?void 0:m.name_en)||e(t)("category.noParent")),1)]}),_:1},8,["header"]),i(e(b),{field:"store.name_en",header:e(t)("category.store"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>{var m;return[k(n(((m=a.data.store)==null?void 0:m.name_en)||e(t)("category.noStore")),1)]}),_:1},8,["header"]),i(e(b),{header:e(t)("actions"),"header-style":"width:12rem;"},{body:d(a=>[B(i(e(p),{icon:"pi pi-pencil",class:"p-detail",onClick:m=>le(a.data.id),"aria-label":"Edit category"},null,8,["onClick"]),[[c,e(t)("edit"),void 0,{top:!0}]]),B(i(e(p),{icon:"pi pi-trash",class:"p-delete",onClick:m=>W(a.data.id),"aria-label":"Delete category"},null,8,["onClick"]),[[c,e(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),s("div",De,[s("div",Le,[s("span",Ne,n(e(t)("show"))+" "+n(F.value)+" "+n(e(t)("to"))+" "+n(I.value)+" "+n(e(t)("from"))+" "+n(D.value),1)]),s("div",Se,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:l[1]||(l[1]=a=>C(1)),"aria-label":"First page"},l[12]||(l[12]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Ve),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!j.value,onClick:l[2]||(l[2]=a=>C(u.value-1)),"aria-label":"Previous page"},l[13]||(l[13]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,je),(f(!0),_(A,null,pe(T.value,(a,m)=>(f(),_(A,{key:m},[a.label&&!isNaN(parseInt(a.label))?(f(),_("button",{key:0,class:ye(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Ge=>C(parseInt(a.label)),"aria-label":`Page ${a.label}`},n(a.label),11,Fe)):a.label==="..."?(f(),_("span",Ie,"...")):O("",!0)],64))),128)),s("button",{class:"p-paginator-next p-pb-paginator-element p-link",disabled:!V.value,onClick:l[3]||(l[3]=a=>C(u.value+1)),"aria-label":"Next page"},l[14]||(l[14]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Te),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===P.value,onClick:l[4]||(l[4]=a=>C(P.value)),"aria-label":"Last page"},l[15]||(l[15]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ae),i(e(he),{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=a=>y.value=a),options:[5,10,20,30],onChange:K,class:"ml-2",style:{width:"80px"},"aria-label":"Rows per page"},null,8,["modelValue"])])])]),i(e(z),{visible:x.value,"onUpdate:visible":l[7]||(l[7]=a=>x.value=a),style:{width:"450px"},header:e(t)("category.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(e(p),{jumlah:e(t)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:l[6]||(l[6]=a=>x.value=!1),"aria-label":"Cancel delete"},null,8,["jumlah"]),i(e(p),{label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X,"aria-label":"Confirm delete"},null,8,["label"])]),default:d(()=>[s("div",Be,[l[16]||(l[16]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,n(e(t)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),i(e(z),{visible:w.value,"onUpdate:visible":l[9]||(l[9]=a=>w.value=a),style:{width:"500px"},header:e(t)("category.importInstructions"),modal:!0},{footer:d(()=>[i(e(p),{label:e(t)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:l[8]||(l[8]=a=>w.value=!1),"aria-label":"Cancel import"},null,8,["label"]),i(e(p),{label:e(t)("import"),icon:"pi pi-check",class:"p-button-success",onClick:ae,disabled:!v.value,loading:U.value,"aria-label":"Import categories"},null,8,["label","disabled","loading"])]),default:d(()=>[s("div",Oe,[s("div",null,[i(e(p),{label:e(t)("category.downloadExample"),icon:"pi pi-download",class:"p-button-outlined",onClick:Z,"aria-label":"Download example CSV"},null,8,["label"])]),i(e(fe),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:e(t)("category.chooseFile"),onSelect:ee,auto:!1,disabled:U.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),v.value?(f(),_("div",ze,[s("p",Me,n(e(t)("selectedFile"))+": "+n(v.value.name),1)])):O("",!0)])]),_:1},8,["visible","header"])])])])}}},Ke=oe(Qe,[["__scopeId","data-v-9b11b73d"]]);export{Ke as default};
