import{_ as J,n as O,b as q,L as H,u as K,r as c,d as Q,y as h,V as W,o as d,e as i,z as X,g as u,i as E,P as x,F as Y,a as N,f as e,t as S,B as T,x as Z,j as ee,p as ae,m as te,s as D}from"./index-b794012a.js";const r=g=>(ae("data-v-9f6b818b"),g=g(),te(),g),se={class:"max-w-5xl p-6 mx-auto bg-white shadow-lg rounded-xl"},oe=r(()=>e("h1",{class:"mb-8 text-3xl font-bold text-center text-gray-800"},"Edit Brand",-1)),ne={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},re={class:"space-y-2"},le=r(()=>e("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[D(" English Name "),e("span",{class:"text-red-500"},"*")],-1)),de={key:0,class:"text-xs text-red-500"},ie={class:"space-y-2"},ce=r(()=>e("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[D(" Arabic Name "),e("span",{class:"text-red-500"},"*")],-1)),ue={key:0,class:"text-xs text-red-500"},pe={class:"space-y-2 md:col-span-2"},me=r(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Brand Logo",-1)),_e={class:"flex justify-center"},ge=["onDragover","onDrop"],ve={key:0,class:"p-4"},be={class:"relative group"},fe=["src"],he={class:"absolute inset-0 flex items-center justify-center transition-all duration-300 bg-black bg-opacity-0 rounded-lg group-hover:bg-opacity-30"},xe={class:"space-x-3 transition-all duration-300 transform translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0"},ye=["onClick"],we=r(()=>e("i",{class:"text-sm pi pi-trash"},null,-1)),ke=[we],De={class:"p-2 text-gray-700 transition bg-white rounded-full cursor-pointer hover:bg-gray-100"},Be=r(()=>e("i",{class:"text-sm pi pi-pencil"},null,-1)),Ce=r(()=>e("p",{class:"mt-2 text-sm text-center text-gray-500"},"Click or drag to change logo",-1)),Ie={key:1,class:"flex flex-col items-center justify-center p-8"},Ve=r(()=>e("div",{class:"p-4 mb-4 bg-blue-100 rounded-full"},[e("i",{class:"text-2xl text-blue-500 pi pi-image"})],-1)),Fe=r(()=>e("p",{class:"mb-1 text-sm text-center text-gray-600"},[e("span",{class:"font-medium text-blue-500"},"Click to upload"),D(" or drag and drop ")],-1)),je=r(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)),Ee=[Ve,Fe,je],Ne={class:"flex justify-center pt-4 space-x-4"},Se={key:0},Te={key:1,class:"pi pi-spinner pi-spin"},Ue={setup(g){const U=O(),B=q(),y=H(),{t:w}=K(),p=c(),n=c(!1),v=c(null),m=c(null),_=c(!1),C=c(U.params.id),l=c({name_en:"",name_ar:"",image:null}),P=async()=>{var t,a,o;try{n.value=!0;const s=await N.get(`/api/brand/${C.value}`);l.value=s.data.data,(t=s.data.data.media[0])!=null&&t.url&&(m.value=s.data.data.media[0].url),n.value=!1}catch(s){console.error("Error fetching brand:",s),y.add({severity:"error",summary:w("error"),detail:((o=(a=s.response)==null?void 0:a.data)==null?void 0:o.message)||"Failed to fetch brand",life:3e3}),n.value=!1}};Q(()=>{P()});const G=t=>{t.preventDefault(),_.value=!0},L=()=>{_.value=!1},R=t=>{v.value=t;const a=new FileReader;a.onload=o=>{m.value=o.target.result},a.readAsDataURL(t),_.value=!1},k=t=>{var o,s,b;const a=((o=t.target.files)==null?void 0:o[0])||((b=(s=t.dataTransfer)==null?void 0:s.files)==null?void 0:b[0]);a&&a.type.match("image.*")&&R(a)},A=()=>{v.value=null,m.value=null,l.value.image=null},M=async()=>{n.value=!0;const t=new FormData;t.append("name_en",l.value.name_en),t.append("name_ar",l.value.name_ar),t.append("_method","post"),v.value?t.append("image",v.value):l.value.image===null&&t.append("remove_image","true"),N.post(`/api/brand/${C.value}`,t).then(a=>{B.push({name:"brand"}),y.add({severity:"success",summary:w("success"),detail:"Brand updated successfully",life:3e3}),n.value=!1}).catch(a=>{var o,s;console.error("Error:",a),y.add({severity:"error",summary:w("error"),detail:((s=(o=a.response)==null?void 0:o.data)==null?void 0:s.message)||"An error occurred",life:3e3}),n.value=!1})};return(t,a)=>{const o=h("InputText"),s=h("Button"),b=h("Form"),$=h("Toast"),z=W("can");return d(),i(Y,null,[X((d(),i("div",se,[oe,u(b,{ref_key:"form",ref:p,onSubmit:x(M,["prevent"]),class:"space-y-6"},{default:E(()=>{var I,V,F,j;return[e("div",ne,[e("div",re,[le,u(o,{id:"name_en",modelValue:l.value.name_en,"onUpdate:modelValue":a[0]||(a[0]=f=>l.value.name_en=f),placeholder:"Enter brand name in English",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(V=(I=p.value)==null?void 0:I.errors)!=null&&V.name_en?(d(),i("small",de,S(p.value.errors.name_en[0]),1)):T("",!0)]),e("div",ie,[ce,u(o,{id:"name_ar",modelValue:l.value.name_ar,"onUpdate:modelValue":a[1]||(a[1]=f=>l.value.name_ar=f),placeholder:"أدخل اسم العلامة التجارية بالعربية",dir:"rtl",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(j=(F=p.value)==null?void 0:F.errors)!=null&&j.name_ar?(d(),i("small",ue,S(p.value.errors.name_ar[0]),1)):T("",!0)]),e("div",pe,[me,e("div",_e,[e("label",{onDragover:x(G,["prevent"]),onDragleave:L,onDrop:x(k,["prevent"]),class:Z([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"w-full max-w-md transition-colors duration-300 border-2 border-dashed cursor-pointer rounded-xl"])},[e("input",{type:"file",onChange:k,accept:"image/*",class:"hidden"},null,32),m.value?(d(),i("div",ve,[e("div",be,[e("img",{src:m.value,alt:"Preview",class:"object-contain w-full h-64 transition-transform duration-300 rounded-lg shadow-md group-hover:scale-105"},null,8,fe),e("div",he,[e("div",xe,[e("button",{type:"button",onClick:x(A,["stop"]),class:"p-2 text-white transition bg-red-500 rounded-full hover:bg-red-600"},ke,8,ye),e("label",De,[Be,e("input",{type:"file",onChange:k,accept:"image/*",class:"hidden"},null,32)])])])]),Ce])):(d(),i("div",Ie,Ee))],42,ge)])])]),e("div",Ne,[u(s,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:a[2]||(a[2]=f=>ee(B).go(-1)),class:"flex items-center justify-center px-6 py-3 mx-2 space-x-2 text-gray-700 transition-all duration-300 bg-gray-200 rounded-lg shadow-md hover:bg-gray-300 hover:shadow-lg",disabled:n.value},null,8,["disabled"]),u(s,{type:"submit",label:"Update Brand",icon:"pi pi-check",loading:n.value,class:"flex items-center justify-center px-8 py-3 space-x-2 text-white transition-all duration-300 rounded-lg shadow-md bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 hover:shadow-lg",disabled:n.value},{default:E(()=>[n.value?(d(),i("i",Te)):(d(),i("span",Se,"Update Brand"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["onSubmit"])])),[[z,"edit brands"]]),u($)],64)}}},Ge=J(Ue,[["__scopeId","data-v-9f6b818b"]]);export{Ge as default};
