import{_ as U,u as B,r as u,o as G,P as A,C as f,a as i,c as a,f as e,t as d,B as T,D as q,F as p,d as k,v as E,g as x,i as V,Q as S}from"./index-e54ddec3.js";const F={class:"permission-manager"},R={class:"controls"},L={class:"name-input"},O={for:"roleName"},Q=["placeholder"],j={key:0,class:"loading"},z={key:0,class:"table-view"},H=["rowspan"],J=["id","checked",".indeterminate","onChange"],K=["for"],W=["onClick","disabled"],X=["id","value"],Y={key:1,class:"card-view"},Z={class:"permission-groups"},N={class:"group-header"},ee=["id","checked",".indeterminate","onChange"],te=["for"],se={class:"permission-items"},le={class:"permission-info"},oe=["id","value"],ne=["for"],ie=["onClick","disabled"],ae=["disabled"],re={class:"modal-content"},de={__name:"create",setup(ce){const I=B(),v=u({}),y=u(!0),r=u([]),h=u(""),m=u(!1),g=u(""),b=u(!1),P=()=>{V.get("api/role/get/permissions").then(o=>{v.value=o.data.data,y.value=!1})},C=(o,t)=>{const n=(v.value[o]||[]).map(s=>s.id);t.target.checked?r.value=[...new Set([...r.value,...n])]:r.value=r.value.filter(s=>!n.includes(s))},w=o=>{const t=v.value[o]||[];return t.length===0?!1:t.every(_=>r.value.includes(_.id))},$=o=>{const t=v.value[o]||[];if(t.length===0)return!1;const _=t.some(s=>r.value.includes(s.id)),n=t.every(s=>r.value.includes(s.id));return _&&!n},D=o=>{g.value=o||"No description available",m.value=!0},M=()=>{if(!h.value){alert("Please enter a role name");return}const o={name:h.value,permissions:r.value};V.post("/api/role",o).then(t=>{I.push({name:"roles"})}).catch(t=>{console.error("Error:",t)})};return G(()=>{P()}),(o,t)=>{const _=A("can");return f((i(),a("div",F,[e("h1",null,d(o.$t("role.role_Permissions_Manager")),1),e("div",R,[e("div",L,[e("label",O,[T(d(o.$t("role.role_Name")),1),t[6]||(t[6]=e("span",{class:"required"},"*",-1))]),f(e("input",{type:"text",id:"roleName","onUpdate:modelValue":t[0]||(t[0]=n=>h.value=n),placeholder:o.$t("role.enter_role_name"),required:""},null,8,Q),[[q,h.value]])]),e("button",{onClick:t[1]||(t[1]=n=>b.value=!b.value),class:"view-toggle"},d(b.value?"Switch to Card View":"Switch to Table View"),1)]),y.value?(i(),a("div",j,d(o.$t("role.loading_permissions")),1)):(i(),a(p,{key:1},[b.value?(i(),a("div",z,[e("table",null,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"Group"),e("th",null,"Permission"),e("th",null,"Description"),e("th",null,"Select")])],-1)),e("tbody",null,[(i(!0),a(p,null,k(v.value,(n,s)=>(i(),a(p,{key:s},[(i(!0),a(p,null,k(n,l=>(i(),a("tr",{key:l.id},[n.indexOf(l)===0?(i(),a("td",{key:0,rowspan:n.length},[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${s}-table`,checked:w(s),".indeterminate":$(s),onChange:c=>C(s,c)},null,40,J),e("label",{for:`group-${s}-table`},d(s.charAt(0).toUpperCase()+s.slice(1)),9,K)],8,H)):x("",!0),e("td",null,d(l.name),1),e("td",null,[e("button",{onClick:c=>D(l.description),class:"description-btn",disabled:!l.description},d(l.description?"View":"None"),9,W)]),e("td",null,[f(e("input",{class:"mx-2 my-auto",type:"checkbox",id:`permission-${l.id}-table`,value:l.id,"onUpdate:modelValue":t[2]||(t[2]=c=>r.value=c)},null,8,X),[[S,r.value]])])]))),128))],64))),128))])])])):(i(),a("div",Y,[e("div",Z,[(i(!0),a(p,null,k(v.value,(n,s)=>(i(),a("div",{key:s,class:"permission-group"},[e("div",N,[e("input",{class:"mx-2 my-auto",type:"checkbox",id:`group-${s}`,checked:w(s),".indeterminate":$(s),onChange:l=>C(s,l)},null,40,ee),e("label",{for:`group-${s}`},d(s.charAt(0).toUpperCase()+s.slice(1)),9,te)]),e("div",se,[(i(!0),a(p,null,k(n,l=>(i(),a("div",{key:l.id,class:"permission-item"},[e("div",le,[f(e("input",{type:"checkbox",id:`permission-${l.id}`,value:l.id,"onUpdate:modelValue":t[3]||(t[3]=c=>r.value=c)},null,8,oe),[[S,r.value]]),e("label",{for:`permission-${l.id}`},d(l.name),9,ne)]),e("button",{onClick:c=>D(l.description),class:"description-btn",disabled:!l.description},d(l.description?"View Description":"No Description"),9,ie)]))),128))])]))),128))])]))],64)),e("button",{onClick:M,class:"submit-btn",disabled:r.value.length===0||!h.value},d(o.$t("role.create_Role_with_Selected_Permissions")),9,ae),m.value?(i(),a("div",{key:2,class:"modal-overlay",onClick:t[5]||(t[5]=E(n=>m.value=!1,["self"]))},[e("div",re,[e("h3",null,d(o.$t("role.permission_Description")),1),e("p",null,d(g.value),1),e("button",{onClick:t[4]||(t[4]=n=>m.value=!1),class:"close-modal"},"Close")])])):x("",!0)])),[[_,"create roles"]])}}},ve=U(de,[["__scopeId","data-v-45427bb7"]]);export{ve as default};
