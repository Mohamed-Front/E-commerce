import{_ as re,u as de,f as ce,G as pe,r as l,g as ue,w as _e,o as ve,h as c,i as G,b as m,c as x,j as a,e as n,k as r,l as k,m as me,t as d,B as o,F as L,n as he,p as ge,a as q,q as O,s as be,v as fe,x as ye,y as xe}from"./index-7330e92f.js";const u=C=>(ye("data-v-b3298778"),C=C(),xe(),C),ke={class:"grid"},Ce={class:"col-12"},we={class:"card p-4 shadow-2 border-round"},Te={class:"text-2xl font-bold"},Se={class:"flex gap-2"},De={class:"p-input-icon-left"},Ve=u(()=>a("i",{class:"pi pi-search"},null,-1)),Pe={class:"card shadow-1 surface-0"},Ie={class:"text-center py-4"},Ne=u(()=>a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),$e={class:"text-xl"},Be={class:"flex justify-content-center align-items-center py-4"},Me={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ue={class:"p-paginator-left-content"},Ee={class:"p-paginator-current"},Re={class:"p-paginator-right-content"},Fe=["disabled"],je=u(()=>a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),ze=[je],Ae=["disabled"],Ge=u(()=>a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Le=[Ge],qe=["onClick"],Oe={key:1,class:"p-paginator-dots"},Qe=["disabled"],We=u(()=>a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),He=[We],Je=["disabled"],Ke=u(()=>a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Xe=[Ke],Ye={class:"flex align-items-center justify-content-center"},Ze=u(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),et={setup(C){const I=de(),D=ce(),{t}=pe(),w=l(!0),N=l("");l({});const $=l(null);l(!1),l(!1);const h=l(!1);l(null);const B=l(null),M=l({}),T=l(""),p=l(1),V=l(0),g=l(10),S=l(0),Q=l(""),W=l(""),U=l(""),E=l(""),R=l(0),F=l(0),j=l([]),H=()=>{B.value.exportCSV()},J=s=>{N.value=s,h.value=!0},K=()=>{q.delete(`/api/store/${N.value}`).then(()=>{b(),h.value=!1,D.add({severity:"success",summary:t("success"),detail:t("store.deletedSuccess"),life:3e3})}).catch(()=>{D.add({severity:"error",summary:t("error"),detail:t("store.deleteError"),life:3e3})})},X=()=>{M.value={global:{value:null,matchMode:ge.CONTAINS}}};ue(()=>{X()});const b=()=>{w.value=!0,q.get("/api/store",{params:{page:p.value,limit:g.value,search:T.value}}).then(s=>{w.value=!1,$.value=s.data.data.data,V.value=s.data.data.total,S.value=s.data.data.last_page,Q.value=s.data.data.first_page_url,W.value=s.data.data.last_page_url,U.value=s.data.data.next_page_url,E.value=s.data.data.prev_page_url,R.value=s.data.data.from,F.value=s.data.data.to,j.value=s.data.data.links}).catch(s=>{w.value=!1,D.add({severity:"error",summary:t("error"),detail:t("store.loadError"),life:3e3}),console.error("Error fetching data:",s)})};_e(T,s=>{p.value=1,b()});const f=s=>{s>=1&&s<=S.value&&(p.value=s,b())},Y=s=>{g.value=s.value,p.value=1,b()};ve(()=>{b()});const Z=()=>{I.push({name:"store-create"})},ee=s=>{I.push({name:"store-edit",params:{id:s}})};return(s,i)=>{const te=c("InputText"),_=c("Button"),ae=c("Toolbar"),se=c("Toast"),v=c("Column"),z=c("Tag"),oe=c("ProgressSpinner"),le=c("DataTable"),ne=c("Dropdown"),ie=c("Dialog"),y=G("can"),A=G("tooltip");return m(),x("div",ke,[a("div",Ce,[a("div",we,[n(ae,{class:"mb-4"},{start:r(()=>[a("h2",Te,d(o(t)("store.managementTitle")),1)]),end:r(()=>[a("div",Se,[a("span",De,[Ve,n(te,{modelValue:T.value,"onUpdate:modelValue":i[0]||(i[0]=e=>T.value=e),placeholder:o(t)("store.search")},null,8,["modelValue","placeholder"])]),k(n(_,{label:o(t)("store.export"),icon:"pi pi-upload",class:"p-export",onClick:H},null,8,["label"]),[[y,"list stores"]]),k(n(_,{label:o(t)("store.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[y,"create stores"]])])]),_:1}),n(se),a("div",Pe,[k((m(),me(le,{ref_key:"dt",ref:B,value:$.value,loading:w.value,"data-key":"id",paginator:!1,rows:g.value,filters:M.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[a("div",Ie,[Ne,a("p",$e,d(o(t)("store.noData")),1)])]),loading:r(()=>[a("div",Be,[n(oe,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[n(v,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(v,{field:"name_en",header:o(t)("store.nameEn"),sortable:!0},{body:r(e=>[O(d(e.data.name_en),1)]),_:1},8,["header"]),n(v,{field:"name_ar",header:o(t)("store.nameAr"),sortable:!0},{body:r(e=>[O(d(e.data.name_ar),1)]),_:1},8,["header"]),n(v,{field:"is_default",header:o(t)("store.isDefault"),sortable:!0},{body:r(e=>[n(z,{value:e.data.is_default?o(t)("store.yes"):o(t)("store.no"),severity:e.data.is_default?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),n(v,{field:"has_market",header:o(t)("store.hasMarket"),sortable:!0},{body:r(e=>[n(z,{value:e.data.has_market?o(t)("store.yes"):o(t)("store.no"),severity:e.data.has_market?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),n(v,{header:o(t)("actions"),headerStyle:"width: 12rem"},{body:r(e=>[k(n(_,{icon:"pi pi-pencil",class:"p-detail",onClick:P=>ee(e.data.id)},null,8,["onClick"]),[[y,"edit stores"],[A,o(t)("edit"),void 0,{top:!0}]]),k(n(_,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:P=>J(e.data.id)},null,8,["onClick"]),[[y,"delete stores"],[A,o(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[y,"list stores"]]),a("div",Me,[a("div",Ue,[a("span",Ee,d(o(t)("show"))+" "+d(R.value)+" "+d(o(t)("to"))+" "+d(F.value)+" "+d(o(t)("from"))+" "+d(V.value),1)]),a("div",Re,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:i[1]||(i[1]=e=>f(1))},ze,8,Fe),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!E.value,onClick:i[2]||(i[2]=e=>f(p.value-1))},Le,8,Ae),(m(!0),x(L,null,he(j.value,(e,P)=>(m(),x(L,{key:P},[e.label&&!isNaN(e.label)?(m(),x("button",{key:0,class:be(["p-paginator-page p-paginator-element p-link",{"p-highlight":e.active}]),onClick:tt=>f(parseInt(e.label))},d(e.label),11,qe)):e.label==="..."?(m(),x("span",Oe,"...")):fe("",!0)],64))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!U.value,onClick:i[3]||(i[3]=e=>f(p.value+1))},He,8,Qe),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===S.value,onClick:i[4]||(i[4]=e=>f(S.value))},Xe,8,Je),n(ne,{modelValue:g.value,"onUpdate:modelValue":i[5]||(i[5]=e=>g.value=e),options:[5,10,20,30],optionLabel:"",onChange:Y,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(ie,{visible:h.value,"onUpdate:visible":i[7]||(i[7]=e=>h.value=e),style:{width:"450px"},header:o(t)("store.deleteConfirmTitle"),modal:!0},{footer:r(()=>[n(_,{label:o(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:i[6]||(i[6]=e=>h.value=!1)},null,8,["label"]),n(_,{label:o(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:K},null,8,["label"])]),default:r(()=>[a("div",Ye,[Ze,a("span",null,d(o(t)("store.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},st=re(et,[["__scopeId","data-v-b3298778"]]);export{st as default};
