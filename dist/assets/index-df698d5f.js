import{_ as pe,u as ve,A as ge,j as me,r,n as be,o as ye,P as M,a as f,c as h,f as s,h as i,w as c,e as a,t as n,F as q,d as fe,i as k,R as he,a1 as G,T as p,Z as _e,O as xe,E as we,$ as _,B as D,C as N,a0 as Ce,x as ke,g as Q,a2 as W,a5 as $e}from"./index-d70b1557.js";const Ee={class:"grid"},Ue={class:"col-12"},Le={class:"card p-4 shadow-2 border-round"},Re={class:"text-2xl font-bold"},Se={class:"flex gap-2"},De={class:"p-input-icon-left"},Pe={class:"card shadow-1 surface-0"},Ve={class:"text-center py-4"},Fe={class:"text-xl"},Ne={class:"flex justify-content-center align-items-center py-4"},Te={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ie={class:"p-paginator-left-content"},je={class:"p-paginator-current"},Ae={class:"p-paginator-right-content"},Be=["disabled"],Oe=["disabled"],ze=["onClick","aria-label"],Me={key:1,class:"p-paginator-dots"},qe=["disabled"],Ge=["disabled"],Qe={class:"flex align-items-center justify-content-center"},We={class:"flex flex-column gap-3"},Ze={key:0,class:"mt-2"},He={class:"font-semibold"},Je={__name:"index",setup(Ke){const P=ve(),g=ge(),{t}=me(),$=r(!0),T=r([]),x=r(!1),V=r(null),Z=r(null),H=r({}),E=r("");r(null);const w=r(!1),m=r(null),U=r(!1),I=r([]),L=r(null),J=r(localStorage.getItem("appLang")),v=r(1),F=r(0),b=r(10),R=r(0),K=r(""),X=r(""),j=r(""),A=r(""),B=r(0),O=r(0),z=r([]),Y=r([{id:"شفت 7",arabic_name:"Shift7",english_name:"الأحذية",Top_Parent:"shift7"}]),ee=()=>{k.get("/api/store").then(o=>{I.value=o.data.data.data}).catch(o=>{g.add({severity:"error",summary:t("error"),detail:t("store.loadError"),life:3e3}),console.error("Error fetching stores:",o)})},ae=o=>{P.push({name:"media-links",params:{id:o,type:2}})},y=()=>{var o;$.value=!0,k.get("/api/category",{params:{page:v.value,limit:b.value,search:E.value||void 0,store_id:((o=L.value)==null?void 0:o.id)||void 0}}).then(e=>{T.value=e.data.data.data,F.value=e.data.data.total,R.value=e.data.data.last_page,K.value=e.data.data.first_page_url,X.value=e.data.data.last_page_url,j.value=e.data.data.next_page_url,A.value=e.data.data.prev_page_url,B.value=e.data.data.from,O.value=e.data.data.to,z.value=e.data.data.links,v.value=e.data.data.current_page,$.value=!1}).catch(e=>{g.add({severity:"error",summary:t("error"),detail:t("category.loadError"),life:3e3}),$.value=!1,console.error("Error fetching categories:",e)})};be([E,b,L],()=>{v.value=1,y()});const C=o=>{o>=1&&o<=R.value&&(v.value=o,y())},te=o=>{b.value=o.value,v.value=1,y()},le=o=>{V.value=o,x.value=!0},oe=()=>{k.delete(`/api/category/${V.value}`).then(()=>{g.add({severity:"success",summary:t("success"),detail:t("category.deleteSuccess"),life:3e3}),y(),x.value=!1,V.value=null}).catch(o=>{g.add({severity:"error",summary:t("error"),detail:t("category.deleteError"),life:3e3}),console.error("Error deleting category:",o)})},se=()=>{k.get("/api/export/category",{responseType:"blob"}).then(o=>{const e=new Blob([o.data],{type:"text/csv"}),u=window.URL.createObjectURL(e),d=document.createElement("a");d.href=u,d.setAttribute("download","categories_export.csv"),document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}).catch(o=>{g.add({severity:"error",summary:t("error"),detail:t("category.exportError"),life:3e3}),console.error("Error exporting categories:",o)})},ie=()=>{const o=`id,Arabic Name,English Name,Top Parent / Store
`+Y.value.map(d=>`"${d.id}","${d.arabic_name}","${d.english_name}","${d.Top_Parent}",`).join(`
`),e=new Blob([o],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a");if(u.download!==void 0){const d=URL.createObjectURL(e);u.setAttribute("href",d),u.setAttribute("download","category_import_example.csv"),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(d)}},re=()=>{w.value=!0,m.value=null},ne=o=>{m.value=o.files[0]},de=()=>{if(!m.value){g.add({severity:"warn",summary:t("warning"),detail:t("category.importNoFile"),life:3e3});return}U.value=!0;const o=new FormData;o.append("file",m.value),k.post("/api/import/store",o).then(()=>{g.add({severity:"success",summary:t("success"),detail:t("category.importSuccess"),life:3e3}),y(),w.value=!1,m.value=null;const e=document.querySelector('.p-fileupload input[type="file"]');e&&(e.value="")}).catch(e=>{g.add({severity:"error",summary:t("error"),detail:t("category.importError"),life:3e3}),console.error("Error importing categories:",e)}).finally(()=>{U.value=!1})},ce=()=>{P.push({name:"category-create"})},ue=o=>{P.push({name:"category-update",params:{id:o}})};return ye(()=>{ee(),y()}),(o,e)=>{const u=M("tooltip"),d=M("can");return f(),h("div",Ee,[s("div",Ue,[s("div",Le,[i(a(_e),{class:"mb-4"},{start:c(()=>[s("h2",Re,n(a(t)("category.managementTitle")),1)]),end:c(()=>[s("div",Se,[s("span",De,[e[11]||(e[11]=s("i",{class:"pi pi-search"},null,-1)),i(a(he),{modelValue:E.value,"onUpdate:modelValue":e[0]||(e[0]=l=>E.value=l),placeholder:a(t)("category.search")},null,8,["modelValue","placeholder"])]),i(a(G),{modelValue:L.value,"onUpdate:modelValue":e[1]||(e[1]=l=>L.value=l),options:I.value,optionLabel:"name_en",placeholder:a(t)("category.selectStore"),class:"w-12rem",showClear:!0,"aria-label":"Filter by store"},null,8,["modelValue","options","placeholder"]),i(a(p),{label:a(t)("category.import"),icon:"pi pi-download",class:"exite",onClick:re,"aria-label":"Import categories"},null,8,["label"]),i(a(p),{label:a(t)("category.export"),icon:"pi pi-upload",class:"exite",onClick:se,"aria-label":"Export categories"},null,8,["label"]),i(a(p),{label:a(t)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:ce,"aria-label":"Create new category"},null,8,["label"])])]),_:1}),i(a(xe)),s("div",Pe,[i(a(Ce),{ref_key:"dt",ref:Z,value:T.value,loading:$.value,"data-key":"id",paginator:!1,rows:b.value,filters:H.value,totalRecords:F.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:c(()=>[s("div",Ve,[e[12]||(e[12]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",Fe,n(a(t)("category.noData")),1)])]),loading:c(()=>[s("div",Ne,[i(a(we),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:c(()=>[i(a(_),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(a(_),{field:"id",header:a(t)("id"),sortable:!0,"header-style":"width:5%; min-width:5rem;"},{body:c(l=>[D(n(l.data.id),1)]),_:1},8,["header"]),i(a(_),{field:"name_en",header:a(t)("category.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(l=>[D(n(l.data.name_en),1)]),_:1},8,["header"]),i(a(_),{field:"name_ar",header:a(t)("category.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(l=>[D(n(l.data.name_ar),1)]),_:1},8,["header"]),i(a(_),{field:"belongs_to",header:a(t)("category.store"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(l=>[D(n(J.value==="ar"?l.data.belongs_to_ar:l.data.belongs_to_en||a(t)("category.noStore")),1)]),_:1},8,["header"]),i(a(_),{header:a(t)("actions"),"header-style":"width:12rem;"},{body:c(l=>[N(i(a(p),{icon:"pi pi-pencil",class:"p-detail",onClick:S=>ue(l.data.id),"aria-label":"Edit category"},null,8,["onClick"]),[[u,a(t)("edit"),void 0,{top:!0}]]),N(i(a(p),{icon:"pi pi-trash",class:"p-delete",onClick:S=>le(l.data.id),"aria-label":"Delete category"},null,8,["onClick"]),[[u,a(t)("delete"),void 0,{top:!0}]]),N(i(a(p),{icon:"pi pi-images",class:"p-button-info",onClick:S=>ae(l.data.id)},null,8,["onClick"]),[[d,"edit inventory"]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),s("div",Te,[s("div",Ie,[s("span",je,n(a(t)("show"))+" "+n(B.value)+" "+n(a(t)("to"))+" "+n(O.value)+" "+n(a(t)("from"))+" "+n(F.value),1)]),s("div",Ae,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:v.value===1,onClick:e[2]||(e[2]=l=>C(1)),"aria-label":"First page"},e[13]||(e[13]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Be),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!A.value,onClick:e[3]||(e[3]=l=>C(v.value-1)),"aria-label":"Previous page"},e[14]||(e[14]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Oe),(f(!0),h(q,null,fe(z.value,(l,S)=>(f(),h(q,{key:S},[l.label&&!isNaN(parseInt(l.label))?(f(),h("button",{key:0,class:ke(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:Xe=>C(parseInt(l.label)),"aria-label":`Page ${l.label}`},n(l.label),11,ze)):l.label==="..."?(f(),h("span",Me,"...")):Q("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!j.value,onClick:e[4]||(e[4]=l=>C(v.value+1)),"aria-label":"Next page"},e[15]||(e[15]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,qe),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:v.value===R.value,onClick:e[5]||(e[5]=l=>C(R.value)),"aria-label":"Last page"},e[16]||(e[16]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ge),i(a(G),{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=l=>b.value=l),options:[5,10,20,30],onChange:te,class:"ml-2",style:{width:"80px"},"aria-label":"Rows per page"},null,8,["modelValue"])])])]),i(a(W),{visible:x.value,"onUpdate:visible":e[8]||(e[8]=l=>x.value=l),style:{width:"450px"},header:a(t)("category.deleteConfirmTitle"),modal:!0},{footer:c(()=>[i(a(p),{label:a(t)("cancel"),icon:"pi pi-times",text:"",onClick:e[7]||(e[7]=l=>x.value=!1),"aria-label":"Cancel delete"},null,8,["label"]),i(a(p),{label:a(t)("yes"),icon:"pi pi-check",text:"",severity:"danger",onClick:oe,"aria-label":"Confirm delete"},null,8,["label"])]),default:c(()=>[s("div",Qe,[e[17]||(e[17]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,n(a(t)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),i(a(W),{visible:w.value,"onUpdate:visible":e[10]||(e[10]=l=>w.value=l),style:{width:"500px"},header:a(t)("category.importInstructions"),modal:!0},{footer:c(()=>[i(a(p),{label:a(t)("cancel"),icon:"pi pi-times",text:"",onClick:e[9]||(e[9]=l=>w.value=!1),"aria-label":"Cancel import"},null,8,["label"]),i(a(p),{label:a(t)("import"),icon:"pi pi-check",class:"p-button-success",onClick:de,disabled:!m.value,loading:U.value,"aria-label":"Import categories"},null,8,["label","disabled","loading"])]),default:c(()=>[s("div",We,[s("div",null,[i(a(p),{label:a(t)("category.downloadExample"),icon:"pi pi-download",class:"p-button-outlined",onClick:ie,"aria-label":"Download example CSV"},null,8,["label"])]),i(a($e),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:a(t)("category.chooseFile"),onSelect:ne,auto:!1,disabled:U.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),m.value?(f(),h("div",Ze,[s("p",He,n(a(t)("selectedFile"))+": "+n(m.value.name),1)])):Q("",!0)])]),_:1},8,["visible","header"])])])])}}},ea=pe(Je,[["__scopeId","data-v-ba471021"]]);export{ea as default};
