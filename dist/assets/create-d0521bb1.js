import{_ as F,a as O,I as z,u as D,r as n,G as K,o as M,b as c,c as m,e as p,g as u,d as r,s as o,t as i,K as E,p as v,z as f,w as G,i as $,V as R,$ as Z,Z as V,S as k,T as q}from"./index-eed5ef4e.js";const A=["dir"],H={class:"max-w-3xl mx-auto card transform hover:scale-[1.01] transition-transform duration-300"},J={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},P={class:"space-y-2"},Q={key:0,id:"store_id_error",class:"text-red-500"},W={class:"space-y-2"},X={key:0,id:"type_error",class:"text-red-500"},Y={class:"space-y-2"},ee={key:0,id:"name_ar_error",class:"text-red-500"},ae={class:"space-y-2"},te={key:0,id:"name_en_error",class:"text-red-500"},se={class:"space-y-2"},re={key:0,id:"row_type_error",class:"text-red-500"},le={key:0},oe={key:1,class:"pi pi-spinner pi-spin"},de={__name:"create",setup(ie){const x=O(),_=z(),{t}=D(),b=n(!1),y=n(!1),g=n(!1),h=n([]),w=n([]),s=n({}),L=n(localStorage.getItem("appLang")||"en"),l=n({store_id:[],type:null,name_ar:"",name_en:"",row_type:null}),T=n([{label:t("custom_tabs.categories"),value:1},{label:t("custom_tabs.products"),value:2}]),C=n([{label:t("custom_tabs.single_row"),value:1},{label:t("custom_tabs.double_rows"),value:2}]),N=K(()=>L.value==="ar"?"name_ar":"name_en"),S=async()=>{var e;g.value=!0;try{const a=await $.get("/api/store");w.value=((e=a.data)==null?void 0:e.data.data)||[],w.value.length||_.add({severity:"warn",summary:t("warning"),detail:t("custom_tabs.no_stores_found"),life:3e3})}catch{w.value=[],_.add({severity:"error",summary:t("error"),detail:t("custom_tabs.fetch_stores_failed"),life:3e3})}finally{g.value=!1}},U=async()=>{var e;y.value=!0;try{const a=await $.get("/api/custom-tabs");h.value=((e=a.data)==null?void 0:e.data.data)||[],h.value.length||_.add({severity:"warn",summary:t("warning"),detail:t("custom_tabs.no_tabs_found"),life:3e3})}catch{h.value=[],_.add({severity:"error",summary:t("error"),detail:t("custom_tabs.fetch_failed"),life:3e3})}finally{y.value=!1}},j=()=>(s.value={},l.value.store_id.length||(s.value.store_id=t("custom_tabs.store_id_required")),[1,2].includes(l.value.type)||(s.value.type=t("custom_tabs.type_required")),l.value.name_ar||(s.value.name_ar=t("custom_tabs.name_ar_required")),l.value.name_en||(s.value.name_en=t("custom_tabs.name_en_required")),[1,2].includes(l.value.row_type)||(s.value.row_type=t("custom_tabs.row_type_required")),Object.keys(s.value).length===0),I=async()=>{var e,a;if(!j()){_.add({severity:"error",summary:t("error"),detail:t("custom_tabs.creation_failed"),life:3e3});return}b.value=!0;try{await $.post("/api/custom-tabs",{...l.value,store_id:l.value.store_id}),x.push({name:"custom-tabs"}),_.add({severity:"success",summary:t("success"),detail:t("custom_tabs.created_successfully"),life:3e3})}catch(d){_.add({severity:"error",summary:t("error"),detail:((a=(e=d.response)==null?void 0:e.data)==null?void 0:a.message)||t("custom_tabs.creation_failed"),life:3e3})}finally{b.value=!1}},B=()=>{l.value={store_id:[],type:null,name_ar:"",name_en:"",row_type:null},s.value={}};return M(()=>{S(),U()}),(e,a)=>(c(),m("div",{class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",dir:e.$t("dir")},[p(u(R),{position:"top-right"}),r("div",H,[r("h1",{id:"form-title",class:o(["text-3xl font-bold text-center mb-8 text-gray-800",{"text-right":e.$t("dir")==="rtl"}]),role:"heading","aria-level":"1"},i(e.$t("custom_tabs.create_new_tab")),3),r("form",{onSubmit:E(I,["prevent"]),class:"space-y-6",role:"form","aria-labelledby":"form-title"},[r("div",J,[r("div",P,[r("label",{for:"store_id",class:o(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[v(i(e.$t("custom_tabs.store_id"))+" ",1),a[6]||(a[6]=r("span",{class:"text-red-500"},"*",-1))],2),p(u(Z),{id:"store_id",modelValue:l.value.store_id,"onUpdate:modelValue":a[0]||(a[0]=d=>l.value.store_id=d),options:w.value,optionLabel:N.value,optionValue:"id",placeholder:g.value?e.$t("loading"):e.$t("custom_tabs.select_store"),disabled:g.value,class:o(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":s.value.store_id}]),"aria-describedby":"store_id_error",required:""},null,8,["modelValue","options","optionLabel","placeholder","disabled","class"]),s.value.store_id?(c(),m("small",Q,i(s.value.store_id),1)):f("",!0)]),r("div",W,[r("label",{for:"type",class:o(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[v(i(e.$t("custom_tabs.type"))+" ",1),a[7]||(a[7]=r("span",{class:"text-red-500"},"*",-1))],2),p(u(V),{filter:"",id:"type",modelValue:l.value.type,"onUpdate:modelValue":a[1]||(a[1]=d=>l.value.type=d),options:T.value,optionLabel:"label",optionValue:"value",placeholder:y.value?e.$t("loading"):e.$t("custom_tabs.select_type"),disabled:y.value,class:o(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":s.value.type}]),"aria-describedby":"type_error",required:""},null,8,["modelValue","options","placeholder","disabled","class"]),s.value.type?(c(),m("small",X,i(s.value.type),1)):f("",!0)]),r("div",Y,[r("label",{for:"name_ar",class:o(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[v(i(e.$t("custom_tabs.name_ar"))+" ",1),a[8]||(a[8]=r("span",{class:"text-red-500"},"*",-1))],2),p(u(k),{id:"name_ar",modelValue:l.value.name_ar,"onUpdate:modelValue":a[2]||(a[2]=d=>l.value.name_ar=d),placeholder:e.$t("custom_tabs.enter_name_ar"),class:o(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":s.value.name_ar}]),"aria-describedby":"name_ar_error",required:""},null,8,["modelValue","placeholder","class"]),s.value.name_ar?(c(),m("small",ee,i(s.value.name_ar),1)):f("",!0)]),r("div",ae,[r("label",{for:"name_en",class:o(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[v(i(e.$t("custom_tabs.name_en"))+" ",1),a[9]||(a[9]=r("span",{class:"text-red-500"},"*",-1))],2),p(u(k),{id:"name_en",modelValue:l.value.name_en,"onUpdate:modelValue":a[3]||(a[3]=d=>l.value.name_en=d),placeholder:e.$t("custom_tabs.enter_name_en"),class:o(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":s.value.name_en}]),"aria-describedby":"name_en_error",required:""},null,8,["modelValue","placeholder","class"]),s.value.name_en?(c(),m("small",te,i(s.value.name_en),1)):f("",!0)]),r("div",se,[r("label",{for:"row_type",class:o(["block text-sm font-medium text-gray-700",{"text-right":e.$t("dir")==="rtl"}])},[v(i(e.$t("custom_tabs.row_type"))+" ",1),a[10]||(a[10]=r("span",{class:"text-red-500"},"*",-1))],2),p(u(V),{filter:"",id:"row_type",modelValue:l.value.row_type,"onUpdate:modelValue":a[4]||(a[4]=d=>l.value.row_type=d),options:C.value,optionLabel:"label",optionValue:"value",placeholder:y.value?e.$t("loading"):e.$t("custom_tabs.select_row_type"),disabled:y.value,class:o(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"border-red-500":s.value.row_type}]),"aria-describedby":"row_type_error",required:""},null,8,["modelValue","options","placeholder","disabled","class"]),s.value.row_type?(c(),m("small",re,i(s.value.row_type),1)):f("",!0)])]),r("div",{class:o(["pt-6 flex justify-center space-x-4",{"space-x-reverse":e.$t("dir")==="rtl"}])},[p(u(q),{type:"submit",label:e.$t("custom_tabs.create_tab"),icon:"pi pi-plus",loading:b.value,class:o(["px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",{"space-x-reverse":e.$t("dir")==="rtl"}]),disabled:b.value},{default:G(()=>[b.value?(c(),m("i",oe)):(c(),m("span",le,i(e.$t("custom_tabs.create_tab")),1))]),_:1},8,["label","loading","class","disabled"]),p(u(q),{type:"button",label:e.$t("custom_tabs.cancel"),icon:"pi pi-times",class:o(["px-8 py-3 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",{"space-x-reverse":e.$t("dir")==="rtl"}]),onClick:a[5]||(a[5]=d=>{u(x).push({name:"custom-tabs"}),B()}),disabled:b.value},null,8,["label","class","disabled"])],2)],32)])],8,A))}},ue=F(de,[["__scopeId","data-v-45d5c490"]]);export{ue as default};
