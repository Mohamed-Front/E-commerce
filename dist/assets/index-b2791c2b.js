import{_ as ee,u as te,G as ae,j as se,r as o,l as le,m as ie,q as ne,o as oe,R as F,a as h,c as k,f as i,h as n,w as r,e,z as w,b as re,t as d,F as I,d as de,Z as pe,i as E,S as ue,U as m,$ as ce,Q as ge,H as ve,a0 as u,p as v,a4 as O,ao as he,a1 as me,y as be,g as fe,a2 as _e,a3 as ye}from"./index-c09db402.js";const xe={class:"grid"},Se={class:"col-12"},ke={class:"card p-4 shadow-2 border-round"},we={class:"text-2xl font-bold"},Ce={class:"flex gap-2"},$e={class:"p-input-icon-left"},Ve={class:"card shadow-1 surface-0"},Ue={class:"text-center py-4"},Ee={class:"text-xl"},Ne={class:"flex justify-content-center align-items-center py-4"},Re={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Te={class:"p-paginator-left-content"},De={class:"p-paginator-current"},Pe={class:"p-paginator-right-content"},Le=["disabled"],je=["disabled"],Be=["onClick"],Me={key:1,class:"p-paginator-dots"},Ae=["disabled"],Fe=["disabled"],Ie={class:"flex align-items-center justify-content-center"},Oe={__name:"index",setup(ze){const N=te(),b=ae(),{t}=se(),C=o(!0),R=o("");o({});const T=o(null);o(!1),o(!1);const f=o(!1);o(null);const z=o(null),D=o({}),$=o(""),g=o(1),U=o(0),_=o(10),V=o(0),G=o(""),Q=o(""),P=o(""),L=o(""),j=o(0),B=o(0),M=o([]),A=le(()=>[{label:t("days.sunday"),value:0},{label:t("days.monday"),value:1},{label:t("days.tuesday"),value:2},{label:t("days.wednesday"),value:3},{label:t("days.thursday"),value:4},{label:t("days.friday"),value:5},{label:t("days.saturday"),value:6}]),q=()=>{E.get("/api/export/shipping-setting",{responseType:"blob"}).then(l=>{const s=new Blob([l.data],{type:"text/csv"}),p=window.URL.createObjectURL(s),c=document.createElement("a");c.href=p,c.setAttribute("download","shipping_settings_export.csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(p),b.add({severity:"success",summary:t("success"),detail:t("shippingSetting.exportSuccess"),life:3e3})}).catch(l=>{b.add({severity:"error",summary:t("error"),detail:t("shippingSetting.exportError"),life:3e3}),console.error("Error exporting shipping settings:",l)})},H=l=>{R.value=l,f.value=!0},W=()=>{E.delete(`/api/shipping-setting/${R.value}`).then(()=>{y(),f.value=!1,b.add({severity:"success",summary:t("success"),detail:t("shippingSetting.deletedSuccess"),life:3e3})}).catch(()=>{b.add({severity:"error",summary:t("error"),detail:t("shippingSetting.deleteError"),life:3e3})})},Z=()=>{D.value={global:{value:null,matchMode:pe.CONTAINS}}};ie(()=>{Z()});const y=()=>{C.value=!0,E.get("/api/shipping-setting",{params:{page:g.value,limit:_.value,search:$.value}}).then(l=>{C.value=!1,T.value=l.data.data.data,U.value=l.data.data.total,V.value=l.data.data.last_page,G.value=l.data.data.first_page_url,Q.value=l.data.data.last_page_url,P.value=l.data.data.next_page_url,L.value=l.data.data.prev_page_url,j.value=l.data.data.from,B.value=l.data.data.to,M.value=l.data.data.links}).catch(l=>{C.value=!1,b.add({severity:"error",summary:t("error"),detail:t("shippingSetting.loadError"),life:3e3}),console.error("Error fetching data:",l)})};ne($,l=>{g.value=1,y()});const x=l=>{l>=1&&l<=V.value&&(g.value=l,y())},J=l=>{_.value=l.value,g.value=1,y()};oe(()=>{y()});const K=()=>{N.push({name:"shipping-create"})},X=l=>{N.push({name:"shipping-update",params:{id:l}})},Y=l=>l==null?void 0:l.map(s=>{var p;return((p=A.value.find(c=>c.value===s))==null?void 0:p.label)||s}).join(", ");return(l,s)=>{const p=F("can"),c=F("tooltip");return h(),k("div",xe,[i("div",Se,[i("div",ke,[n(e(ce),{class:"mb-4"},{start:r(()=>[i("h2",we,d(e(t)("shippingSetting.managementTitle")),1)]),end:r(()=>[i("div",Ce,[i("span",$e,[s[8]||(s[8]=i("i",{class:"pi pi-search"},null,-1)),n(e(ue),{modelValue:$.value,"onUpdate:modelValue":s[0]||(s[0]=a=>$.value=a),placeholder:e(t)("shippingSetting.search")},null,8,["modelValue","placeholder"])]),w(n(e(m),{label:e(t)("shippingSetting.export"),icon:"pi pi-upload",class:"p-export",onClick:q},null,8,["label"]),[[p,"list shipping settings"]]),w(n(e(m),{label:e(t)("shippingSetting.new"),icon:"pi pi-plus",class:"p-button-success",onClick:K},null,8,["label"]),[[p,"create shipping settings"]])])]),_:1}),n(e(ge)),i("div",Ve,[w((h(),re(e(me),{ref_key:"dt",ref:z,value:T.value,loading:C.value,"data-key":"id",paginator:!1,rows:_.value,filters:D.value,totalRecords:U.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[i("div",Ue,[s[9]||(s[9]=i("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),i("p",Ee,d(e(t)("shippingSetting.noData")),1)])]),loading:r(()=>[i("div",Ne,[n(e(ve),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[n(e(u),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(u),{field:"store.name_en",header:e(t)("shippingSetting.storeNameEn"),sortable:!0},{body:r(a=>[v(d(a.data.store.name_en),1)]),_:1},8,["header"]),n(e(u),{field:"store.name_ar",header:e(t)("shippingSetting.storeNameAr"),sortable:!0},{body:r(a=>[v(d(a.data.store.name_ar),1)]),_:1},8,["header"]),n(e(u),{field:"is_enabled",header:e(t)("shippingSetting.isEnabled"),sortable:!0},{body:r(a=>[n(e(O),{value:a.data.is_enabled?e(t)("shippingSetting.yes"):e(t)("shippingSetting.no"),severity:a.data.is_enabled?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),n(e(u),{field:"min_amount",header:e(t)("shippingSetting.minAmount"),sortable:!0},{body:r(a=>[v(d(a.data.min_amount),1)]),_:1},8,["header"]),n(e(u),{field:"free_amount",header:e(t)("shippingSetting.freeAmount"),sortable:!0},{body:r(a=>[v(d(a.data.free_amount),1)]),_:1},8,["header"]),n(e(u),{field:"express_enabled",header:e(t)("shippingSetting.expressEnabled"),sortable:!0},{body:r(a=>[n(e(O),{value:a.data.express_enabled?e(t)("shippingSetting.yes"):e(t)("shippingSetting.no"),severity:a.data.express_enabled?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),n(e(u),{field:"days",header:e(t)("shippingSetting.days"),sortable:!1},{body:r(a=>[n(e(he),{modelValue:a.data.days,options:A.value,optionLabel:"label",optionValue:"value",disabled:!0,placeholder:e(t)("shippingSetting.selectDays"),class:"w-full"},{value:r(S=>[v(d(Y(S.value)),1)]),_:2},1032,["modelValue","options","placeholder"])]),_:1},8,["header"]),n(e(u),{field:"from",header:e(t)("shippingSetting.fromTime"),sortable:!0},{body:r(a=>[v(d(a.data.from),1)]),_:1},8,["header"]),n(e(u),{field:"to",header:e(t)("shippingSetting.toTime"),sortable:!0},{body:r(a=>[v(d(a.data.to),1)]),_:1},8,["header"]),n(e(u),{header:e(t)("actions"),headerStyle:"width: 12rem"},{body:r(a=>[w(n(e(m),{icon:"pi pi-pencil",class:"p-detail",onClick:S=>X(a.data.id)},null,8,["onClick"]),[[p,"edit shipping settings"],[c,e(t)("edit"),void 0,{top:!0}]]),w(n(e(m),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:S=>H(a.data.id)},null,8,["onClick"]),[[p,"delete shipping settings"],[c,e(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[p,"list shipping settings"]]),i("div",Re,[i("div",Te,[i("span",De,d(e(t)("show"))+" "+d(j.value)+" "+d(e(t)("to"))+" "+d(B.value)+" "+d(e(t)("from"))+" "+d(U.value),1)]),i("div",Pe,[i("button",{class:"p-paginator-first p-paginator-element p-link",disabled:g.value===1,onClick:s[1]||(s[1]=a=>x(1))},s[10]||(s[10]=[i("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Le),i("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!L.value,onClick:s[2]||(s[2]=a=>x(g.value-1))},s[11]||(s[11]=[i("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,je),(h(!0),k(I,null,de(M.value,(a,S)=>(h(),k(I,{key:S},[a.label&&!isNaN(a.label)?(h(),k("button",{key:0,class:be(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Ge=>x(parseInt(a.label))},d(a.label),11,Be)):a.label==="..."?(h(),k("span",Me,"...")):fe("",!0)],64))),128)),i("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!P.value,onClick:s[3]||(s[3]=a=>x(g.value+1))},s[12]||(s[12]=[i("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Ae),i("button",{class:"p-paginator-last p-paginator-element p-link",disabled:g.value===V.value,onClick:s[4]||(s[4]=a=>x(V.value))},s[13]||(s[13]=[i("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Fe),n(e(_e),{filter:"",modelValue:_.value,"onUpdate:modelValue":s[5]||(s[5]=a=>_.value=a),options:[5,10,20,30],optionLabel:"",onChange:J,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(ye),{visible:f.value,"onUpdate:visible":s[7]||(s[7]=a=>f.value=a),style:{width:"450px"},header:e(t)("shippingSetting.deleteConfirmTitle"),modal:!0},{footer:r(()=>[n(e(m),{label:e(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:s[6]||(s[6]=a=>f.value=!1)},null,8,["label"]),n(e(m),{label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:W},null,8,["label"])]),default:r(()=>[i("div",Ie,[s[14]||(s[14]=i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),i("span",null,d(e(t)("shippingSetting.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},qe=ee(Oe,[["__scopeId","data-v-c916f0e6"]]);export{qe as default};
