import{p as X,y as Y,x as Z,L as ee,r as m,o as te,d as f,B as se,e as n,f as d,D as oe,h as t,t as a,i as p,w as N,J as k,F as ae,b as D,m as _,n as b,G as le,q as re,s as ne}from"./index-e7ee9ceb.js";const i=y=>(re("data-v-1c9f709c"),y=y(),ne(),y),de={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ie={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ce={class:"space-y-2"},pe={for:"name",class:"block text-sm font-medium text-gray-700"},me=i(()=>t("span",{class:"text-red-500"},"*",-1)),_e={key:0,class:"text-red-500 text-xs"},ve={class:"space-y-2"},ge={for:"phone",class:"block text-sm font-medium text-gray-700"},he=i(()=>t("span",{class:"text-red-500"},"*",-1)),fe={key:0,class:"text-red-500 text-xs"},be={class:"space-y-2"},ye={for:"type",class:"block text-sm font-medium text-gray-700"},xe=i(()=>t("span",{class:"text-red-500"},"*",-1)),we={key:0,class:"text-red-500 text-xs"},ke={class:"space-y-2"},Ve={for:"role",class:"block text-sm font-medium text-gray-700"},De=i(()=>t("span",{class:"text-red-500"},"*",-1)),$e={key:0,class:"text-red-500 text-xs"},Ue={class:"space-y-2"},Ie={for:"email",class:"block text-sm font-medium text-gray-700"},Fe=i(()=>t("span",{class:"text-red-500"},"*",-1)),Ce={key:0,class:"text-red-500 text-xs"},Be={class:"md:col-span-2 space-y-2"},Re={class:"block text-sm font-medium text-gray-700"},Se={class:"flex justify-center"},Te=["onDragover","onDrop"],je={key:0,class:"p-4"},Ge={class:"relative group"},Le=["src"],Ne={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Pe={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ee=["onClick"],Me=i(()=>t("i",{class:"pi pi-trash text-sm"},null,-1)),Ae=[Me],Je=i(()=>t("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[t("i",{class:"pi pi-pencil text-sm"})],-1)),qe=i(()=>t("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change photo",-1)),ze={key:1,class:"p-8 flex flex-col items-center justify-center"},Oe=i(()=>t("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[t("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),He={class:"text-sm text-center text-gray-600 mb-1"},Ke={class:"text-blue-500 font-medium"},Qe=i(()=>t("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1)),We={class:"pt-4 flex justify-center"},Xe={key:0},Ye={key:1,class:"pi pi-spinner pi-spin"},Ze={setup(y){const P=Y(),V=Z(),{t:E}=ee(),l=m(),v=m(!1),$=m([]),x=m(null),g=m(null),h=m(!1),o=m({name:"",phone:"",type:null,role_id:null,email:""}),M=async()=>{try{const e=await D.get("api/role");$.value=e.data.data.data,z()}catch(e){console.error("Error fetching roles:",e)}},A=e=>{e.preventDefault(),h.value=!0},J=()=>{h.value=!1},q=e=>{x.value=e;const s=new FileReader;s.onload=r=>{g.value=r.target.result},s.readAsDataURL(e),h.value=!1},U=e=>{var r,c,w;const s=((r=e.target.files)==null?void 0:r[0])||((w=(c=e.dataTransfer)==null?void 0:c.files)==null?void 0:w[0]);s&&s.type.match("image.*")&&q(s)},z=()=>{D.get(`api/user/${V.currentRoute._value.params.id}`).then(e=>{var s,r,c;o.value.name=e.data.data.name,o.value.email=e.data.data.email,o.value.type=e.data.data.type,o.value.phone=e.data.data.phone,o.value.role_id=e.data.data.roles[0].id,g.value=(c=(r=(s=e.data)==null?void 0:s.data)==null?void 0:r.media[0])==null?void 0:c.url})},O=()=>{x.value=null,g.value=null},H=async()=>{v.value=!0;const e=new FormData;e.append("name",o.value.name),e.append("phone",o.value.phone),e.append("type",o.value.type),e.append("role_id",o.value.role_id),e.append("email",o.value.email),x.value&&e.append("image",x.value),D.post(`/api/user/${V.currentRoute._value.params.id}`,e).then(s=>{V.push({name:"users"})}).catch(s=>{console.error("Error:",s),P.add({severity:"error",summary:E("error"),detail:s.response.data.message,life:3e3}),v.value=!1})};return te(()=>{M()}),(e,s)=>{const r=f("InputText"),c=f("Dropdown"),w=f("Button"),K=f("Form"),Q=f("Toast"),W=se("can");return n(),d(ae,null,[oe((n(),d("div",de,[t("h1",ie,a(e.$t("user.edit_User")),1),p(K,{ref_key:"form",ref:l,model:o.value,rules:e.rules,onSubmit:k(H,["prevent"]),class:"space-y-6"},{default:N(()=>{var I,F,C,B,R,S,T,j,G,L;return[t("div",ue,[t("div",ce,[t("label",pe,[_(a(e.$t("user.name"))+" ",1),me]),p(r,{id:"name",modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=u=>o.value.name=u),placeholder:e.$t("user.enter_full_name"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(F=(I=l.value)==null?void 0:I.errors)!=null&&F.name?(n(),d("small",_e,a(l.value.errors.name[0].message),1)):b("",!0)]),t("div",ve,[t("label",ge,[_(a(e.$t("user.phone"))+" ",1),he]),p(r,{id:"phone",modelValue:o.value.phone,"onUpdate:modelValue":s[1]||(s[1]=u=>o.value.phone=u),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(B=(C=l.value)==null?void 0:C.errors)!=null&&B.phone?(n(),d("small",fe,a(l.value.errors.phone[0].message),1)):b("",!0)]),t("div",be,[t("label",ye,[_(a(e.$t("user.type"))+" ",1),xe]),p(c,{id:"type",modelValue:o.value.type,"onUpdate:modelValue":s[2]||(s[2]=u=>o.value.type=u),options:[{label:"Admin",value:1},{label:"customer",value:2},{label:"User",value:2}],optionLabel:"label",optionValue:"value",placeholder:'$t("user.select_user_type")',class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(S=(R=l.value)==null?void 0:R.errors)!=null&&S.type?(n(),d("small",we,a(l.value.errors.type[0].message),1)):b("",!0)]),t("div",ke,[t("label",Ve,[_(a(e.$t("user.role"))+" ",1),De]),p(c,{id:"role",modelValue:o.value.role_id,"onUpdate:modelValue":s[3]||(s[3]=u=>o.value.role_id=u),options:$.value,optionLabel:"name",optionValue:"id",placeholder:e.$t("user.select_role"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options","placeholder"]),(j=(T=l.value)==null?void 0:T.errors)!=null&&j.role_id?(n(),d("small",$e,a(l.value.errors.role_id[0].message),1)):b("",!0)]),t("div",Ue,[t("label",Ie,[_(a(e.$t("user.email"))+" ",1),Fe]),p(r,{id:"email",modelValue:o.value.email,"onUpdate:modelValue":s[4]||(s[4]=u=>o.value.email=u),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(L=(G=l.value)==null?void 0:G.errors)!=null&&L.email?(n(),d("small",Ce,a(l.value.errors.email[0].message),1)):b("",!0)]),t("div",Be,[t("label",Re,a(e.$t("user.profile_Image")),1),t("div",Se,[t("label",{onDragover:k(A,["prevent"]),onDragleave:J,onDrop:k(U,["prevent"]),class:le([{"border-blue-500 bg-blue-50":h.value,"border-gray-300":!h.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[t("input",{type:"file",onChange:U,accept:"image/*",class:"hidden"},null,32),g.value?(n(),d("div",je,[t("div",Ge,[t("img",{src:g.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Le),t("div",Ne,[t("div",Pe,[t("button",{type:"button",onClick:k(O,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Ae,8,Ee),Je])])]),qe])):(n(),d("div",ze,[Oe,t("p",He,[t("span",Ke,a(e.$t("user.click_to_upload")),1),_(" "+a(e.$t("user.or_drag_and_drop")),1)]),Qe]))],42,Te)])])]),t("div",We,[p(w,{type:"submit",label:"Update User",icon:"pi pi-user-plus",loading:v.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:v.value},{default:N(()=>[v.value?(n(),d("i",Ye)):(n(),d("span",Xe,a(e.$t("user.update_User")),1))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules","onSubmit"])])),[[W,"edit users"]]),p(Q)],64)}}},tt=X(Ze,[["__scopeId","data-v-1c9f709c"]]);export{tt as default};
