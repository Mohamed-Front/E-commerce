import{p as Z,v as $,s as ee,J as se,r as c,o as oe,d as _,e as n,f as d,h as e,i as u,w as R,H as k,F as te,b as G,t as g,n as v,A as ae,B as le,C as re,m as p}from"./index-606b4cc8.js";const a=x=>(le("data-v-d2a58f76"),x=x(),re(),x),ne={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},de=a(()=>e("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Create New User",-1)),ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"space-y-2"},ce=a(()=>e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},[p(" Name "),e("span",{class:"text-red-500"},"*")],-1)),pe={key:0,class:"text-red-500 text-xs"},me={class:"space-y-2"},_e=a(()=>e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},[p(" Phone "),e("span",{class:"text-red-500"},"*")],-1)),ge={key:0,class:"text-red-500 text-xs"},ve={class:"space-y-2"},fe=a(()=>e("label",{for:"type",class:"block text-sm font-medium text-gray-700"},[p(" Type "),e("span",{class:"text-red-500"},"*")],-1)),be={key:0,class:"text-red-500 text-xs"},xe={class:"space-y-2"},he=a(()=>e("label",{for:"role",class:"block text-sm font-medium text-gray-700"},[p(" Role "),e("span",{class:"text-red-500"},"*")],-1)),ye={key:0,class:"text-red-500 text-xs"},we={class:"space-y-2"},ke=a(()=>e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},[p(" Email "),e("span",{class:"text-red-500"},"*")],-1)),Ve={key:0,class:"text-red-500 text-xs"},De={class:"space-y-2"},Ce=a(()=>e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},[p(" Password "),e("span",{class:"text-red-500"},"*")],-1)),Ue={key:0,class:"text-red-500 text-xs"},Ie={class:"md:col-span-2 space-y-2"},Fe=a(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Profile Image",-1)),Pe={class:"flex justify-center"},Se=["onDragover","onDrop"],Te={key:0,class:"p-4"},Be={class:"relative group"},Ne=["src"],je={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ee={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Me=["onClick"],Re=a(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Ge=[Re],Le=a(()=>e("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[e("i",{class:"pi pi-pencil text-sm"})],-1)),Ae=a(()=>e("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change photo",-1)),Je={key:1,class:"p-8 flex flex-col items-center justify-center"},ze=a(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),He=a(()=>e("p",{class:"text-sm text-center text-gray-600 mb-1"},[e("span",{class:"text-blue-500 font-medium"},"Click to upload"),p(" or drag and drop ")],-1)),Oe=a(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1)),qe=[ze,He,Oe],Ke={class:"pt-4 flex justify-center"},Qe={key:0},We={key:1,class:"pi pi-spinner pi-spin"},Xe={setup(x){const L=$(),A=ee(),{t:J}=se(),l=c(),m=c(!1),V=c([]),h=c(null),y=c(null),f=c(!1),t=c({name:"",phone:"",type:null,role_id:null,email:"",password:""}),z=async()=>{try{const o=await G.get("api/role");V.value=o.data.data.data}catch(o){console.error("Error fetching roles:",o)}},H=o=>{o.preventDefault(),f.value=!0},O=()=>{f.value=!1},q=o=>{h.value=o;const s=new FileReader;s.onload=i=>{y.value=i.target.result},s.readAsDataURL(o),f.value=!1},D=o=>{var i,b,w;const s=((i=o.target.files)==null?void 0:i[0])||((w=(b=o.dataTransfer)==null?void 0:b.files)==null?void 0:w[0]);s&&s.type.match("image.*")&&q(s)},K=()=>{h.value=null,y.value=null},Q=async()=>{m.value=!0;const o=new FormData;o.append("name",t.value.name),o.append("phone",t.value.phone),o.append("type",t.value.type),o.append("role_id",t.value.role_id),o.append("email",t.value.email),o.append("password",t.value.password),h.value&&o.append("image",h.value),G.post("/api/user",o).then(s=>{A.push({name:"users"}),m.value=!1}).catch(s=>{console.error("Error:",s),L.add({severity:"error",summary:J("error"),detail:s.response.data.message,life:3e3}),m.value=!1})};return oe(()=>{z()}),(o,s)=>{const i=_("InputText"),b=_("Dropdown"),w=_("Password"),W=_("Button"),X=_("Form"),Y=_("Toast");return n(),d(te,null,[e("div",ne,[de,u(X,{ref_key:"form",ref:l,model:t.value,rules:o.rules,onSubmit:k(Q,["prevent"]),class:"space-y-6"},{default:R(()=>{var C,U,I,F,P,S,T,B,N,j,E,M;return[e("div",ue,[e("div",ie,[ce,u(i,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":s[0]||(s[0]=r=>t.value.name=r),placeholder:"Enter full name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(U=(C=l.value)==null?void 0:C.errors)!=null&&U.name?(n(),d("small",pe,g(l.value.errors.name[0].message),1)):v("",!0)]),e("div",me,[_e,u(i,{id:"phone",modelValue:t.value.phone,"onUpdate:modelValue":s[1]||(s[1]=r=>t.value.phone=r),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(F=(I=l.value)==null?void 0:I.errors)!=null&&F.phone?(n(),d("small",ge,g(l.value.errors.phone[0].message),1)):v("",!0)]),e("div",ve,[fe,u(b,{id:"type",modelValue:t.value.type,"onUpdate:modelValue":s[2]||(s[2]=r=>t.value.type=r),options:[{label:"Admin",value:1},{label:"Manager",value:2},{label:"User",value:3}],optionLabel:"label",optionValue:"value",placeholder:"Select user type",class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(S=(P=l.value)==null?void 0:P.errors)!=null&&S.type?(n(),d("small",be,g(l.value.errors.type[0].message),1)):v("",!0)]),e("div",xe,[he,u(b,{id:"role",modelValue:t.value.role_id,"onUpdate:modelValue":s[3]||(s[3]=r=>t.value.role_id=r),options:V.value,optionLabel:"name",optionValue:"id",placeholder:"Select role",class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options"]),(B=(T=l.value)==null?void 0:T.errors)!=null&&B.role_id?(n(),d("small",ye,g(l.value.errors.role_id[0].message),1)):v("",!0)]),e("div",we,[ke,u(i,{id:"email",modelValue:t.value.email,"onUpdate:modelValue":s[4]||(s[4]=r=>t.value.email=r),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(j=(N=l.value)==null?void 0:N.errors)!=null&&j.email?(n(),d("small",Ve,g(l.value.errors.email[0].message),1)):v("",!0)]),e("div",De,[Ce,u(w,{id:"password",modelValue:t.value.password,"onUpdate:modelValue":s[5]||(s[5]=r=>t.value.password=r),placeholder:"••••••••",toggleMask:"",feedback:!1,inputClass:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",class:"w-full"},null,8,["modelValue"]),(M=(E=l.value)==null?void 0:E.errors)!=null&&M.password?(n(),d("small",Ue,g(l.value.errors.password[0].message),1)):v("",!0)]),e("div",Ie,[Fe,e("div",Pe,[e("label",{onDragover:k(H,["prevent"]),onDragleave:O,onDrop:k(D,["prevent"]),class:ae([{"border-blue-500 bg-blue-50":f.value,"border-gray-300":!f.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32),y.value?(n(),d("div",Te,[e("div",Be,[e("img",{src:y.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ne),e("div",je,[e("div",Ee,[e("button",{type:"button",onClick:k(K,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Ge,8,Me),Le])])]),Ae])):(n(),d("div",Je,qe))],42,Se)])])]),e("div",Ke,[u(W,{type:"submit",label:"Create User",icon:"pi pi-user-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:m.value},{default:R(()=>[m.value?(n(),d("i",We)):(n(),d("span",Qe,"Create User"))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules","onSubmit"])]),u(Y)],64)}}},Ze=Z(Xe,[["__scopeId","data-v-d2a58f76"]]);export{Ze as default};
