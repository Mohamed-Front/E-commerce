import{j as Y,u as Z,G as J,r,q as K,m as X,o as ee,Y as B,a as c,c as m,f as s,h as i,w as d,e,y as $,b as te,t as n,F as E,d as ae,Z as se,i as F,R as le,T as x,$ as oe,Q as re,H as ie,a0 as h,p as I,a3 as ne,a1 as de,x as pe,g as ue,S as ce,a2 as ve}from"./index-fc77f056.js";const ge={class:"grid"},me={class:"col-12"},he={class:"card p-4 shadow-2 border-round"},fe={class:"text-2xl font-bold"},be={class:"flex gap-2"},_e={class:"p-input-icon-left"},ye={class:"card shadow-1 surface-0"},xe={class:"text-center py-4"},we={class:"text-xl"},ke={class:"flex justify-content-center align-items-center py-4"},Ce={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},$e={class:"p-paginator-left-content"},Ve={class:"p-paginator-current"},Pe={class:"p-paginator-right-content"},Ne=["disabled"],Re=["disabled"],Te=["onClick"],Ue={key:1,class:"p-paginator-dots"},De=["disabled"],Me=["disabled"],Se={class:"flex align-items-center justify-content-center"},Ie={__name:"index",setup(Be){const{t:l}=Y(),j=Z(),w=J(),f=r(!0),O=r(""),b=r(!1),V=r(null);r(null);const P=r(null),N=r({}),_=r(""),p=r(1),k=r(0),u=r(10),y=r(0),z=r(""),G=r(""),R=r(""),T=r(""),U=r(0),D=r(0),M=r([]),Q=()=>{N.value={global:{value:null,matchMode:se.CONTAINS}}},v=()=>{f.value=!0,F.get("/api/order",{params:{page:p.value,limit:u.value,search:_.value||void 0}}).then(o=>{V.value=o.data.data.data,k.value=o.data.data.total,y.value=o.data.data.last_page,z.value=o.data.data.first_page_url,G.value=o.data.data.last_page_url,R.value=o.data.data.next_page_url,T.value=o.data.data.prev_page_url,U.value=o.data.data.from,D.value=o.data.data.to,M.value=o.data.data.links,f.value=!1}).catch(o=>{w.add({severity:"error",summary:l("error"),detail:l("order.loadError"),life:3e3}),f.value=!1,console.error("Error fetching data:",o)})};K([_,u],()=>{p.value=1,v()});const g=o=>{o>=1&&o<=y.value&&(p.value=o,v())},q=o=>{u.value=o.value,p.value=1,v()},A=()=>{F.delete(`/api/order/${O.value}`).then(()=>{w.add({severity:"success",summary:l("success"),detail:l("order.deleteSuccess"),life:3e3}),v(),b.value=!1}).catch(o=>{w.add({severity:"error",summary:l("error"),detail:l("order.deleteError"),life:3e3})})},H=()=>{P.value.exportCSV()},L=o=>{j.push({name:"order-show",params:{id:o}})};return X(()=>{Q()}),ee(()=>{v()}),(o,t)=>{const C=B("can"),W=B("tooltip");return c(),m("div",ge,[s("div",me,[s("div",he,[i(e(oe),{class:"mb-4"},{start:d(()=>[s("h2",fe,n(e(l)("order.managementTitle")),1)]),end:d(()=>[s("div",be,[s("span",_e,[t[8]||(t[8]=s("i",{class:"pi pi-search"},null,-1)),i(e(le),{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=a=>_.value=a),placeholder:e(l)("order.search")},null,8,["modelValue","placeholder"])]),$(i(e(x),{label:e(l)("order.export"),icon:"pi pi-upload",class:"p-export",onClick:H},null,8,["label"]),[[C,"export orders"]])])]),_:1}),i(e(re)),s("div",ye,[$((c(),te(e(de),{ref_key:"dt",ref:P,value:V.value,loading:f.value,"data-key":"id",paginator:!1,rows:u.value,filters:N.value,totalRecords:k.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",xe,[t[9]||(t[9]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",we,n(e(l)("order.noData")),1)])]),loading:d(()=>[s("div",ke,[i(e(ie),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(e(h),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(h),{field:"id",header:e(l)("order.id"),sortable:!0,"header-style":"width:14%; min-width:8rem;"},{body:d(a=>[I(n(a.data.id),1)]),_:1},8,["header"]),i(e(h),{field:"total_price",header:e(l)("order.totalPrice"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[I(" $"+n(a.data.total_price),1)]),_:1},8,["header"]),i(e(h),{field:"status",header:e(l)("order.status"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(a=>[i(e(ne),{value:a.data.status===0?e(l)("order.pending"):e(l)("order.completed"),severity:a.data.status===0?"warning":"success"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(h),{header:e(l)("actions"),"header-style":"min-width:10rem;"},{body:d(a=>[$(i(e(x),{icon:"pi pi-eye",class:"p-detail",onClick:S=>L(a.data.id)},null,8,["onClick"]),[[C,"show orders"],[W,e(l)("view"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[C,"list orders"]]),s("div",Ce,[s("div",$e,[s("span",Ve,n(e(l)("show"))+" "+n(U.value)+" "+n(e(l)("to"))+" "+n(D.value)+" "+n(e(l)("from"))+" "+n(k.value),1)]),s("div",Pe,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:t[1]||(t[1]=a=>g(1))},t[10]||(t[10]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Ne),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!T.value,onClick:t[2]||(t[2]=a=>g(p.value-1))},t[11]||(t[11]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Re),(c(!0),m(E,null,ae(M.value,(a,S)=>(c(),m(E,{key:S},[a.label&&!isNaN(parseInt(a.label))?(c(),m("button",{key:0,class:pe(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Ee=>g(parseInt(a.label))},n(a.label),11,Te)):a.label==="..."?(c(),m("span",Ue,"...")):ue("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!R.value,onClick:t[3]||(t[3]=a=>g(p.value+1))},t[12]||(t[12]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,De),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===y.value,onClick:t[4]||(t[4]=a=>g(y.value))},t[13]||(t[13]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Me),i(e(ce),{modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=a=>u.value=a),options:[5,10,20,30],onChange:q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(e(ve),{visible:b.value,"onUpdate:visible":t[7]||(t[7]=a=>b.value=a),style:{width:"450px"},header:e(l)("order.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(e(x),{label:e(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=a=>b.value=!1)},null,8,["label"]),i(e(x),{label:e(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:A},null,8,["label"])]),default:d(()=>[s("div",Se,[t[14]||(t[14]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,n(e(l)("order.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{Ie as default};
