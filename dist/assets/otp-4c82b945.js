import{_ as w,r as f,o as k,a as c,b as p,e as s,L as P,F as h,d as g,h as u,n as V,t as _,N as O,z as S,A as T,B as I,O as B}from"./index-30883687.js";import{u as C}from"./WebAuth-2e643f0f.js";const j={class:"bg-gray-900 min-h-screen flex items-center justify-center p-4 overflow-hidden",dir:"rtl"},N={class:"bg-white rounded-3xl shadow-2xl p-6 w-full max-w-sm my-8 text-center"},D={class:"space-y-6"},F={class:"flex justify-center space-x-2 space-x-reverse"},K=["onUpdate:modelValue","onInput","onKeydown"],L={key:0,class:"text-red-500 text-sm text-right"},M=["disabled"],A={class:"text-center text-sm text-gray-500 mt-4"},E={__name:"otp",props:{email:String,phone:String,otp_type:String},setup(m){const l=C(),n=f(["","","","","",""]),d=f([]),t=m;k(()=>{console.log("OTP Page Props:",{email:t.email,phone:t.phone,otp_type:t.otp_type}),d.value.length>0&&d.value[0].focus()});const y=(e,o)=>{const a=o.target.value;a.length>1?n.value[e]=a.slice(0,1):n.value[e]=a,a&&e<n.value.length-1&&d.value[e+1].focus()},v=e=>{e>0&&n.value[e]===""&&d.value[e-1].focus()},x=async()=>{const e=n.value.join("");if(console.log("Verifying OTP with Props:",{email:t.email,phone:t.phone,otp_type:t.otp_type,otp:e}),e)try{await l.verifyOtp({email:t.email,phone:t.phone,otp:e})}catch(o){console.error("OTP Verification failed:",o)}else l.authErrors=["الرجاء إدخال رمز تحقق مكون من 6 أرقام."]},b=async()=>{console.log("Resending Code with Props:",{email:t.email,phone:t.phone,otp_type:t.otp_type});try{await l.resendOtp({email:t.email,phone:t.phone,otp_type:t.otp_type})}catch(e){console.error("Resend OTP failed:",e)}};return(e,o)=>(c(),p("div",j,[s("div",N,[o[3]||(o[3]=s("div",{class:"flex flex-col items-center mb-8"},[s("img",{src:P,alt:"SHIFT7 Logo",class:"h-16 w-16 object-contain"})],-1)),s("div",D,[o[1]||(o[1]=s("h2",{class:"text-2xl font-bold text-gray-800"},"ادخل الرمز المرسل",-1)),o[2]||(o[2]=s("p",{class:"text-sm text-gray-500"}," تم إرسال رمز التحقق المكون من 4 أرقام ",-1)),s("div",F,[(c(!0),p(h,null,g(n.value,(a,i)=>T((c(),p("input",{key:i,type:"tel",maxlength:"1",class:"w-12 h-12 text-center text-xl font-bold rounded-xl bg-gray-100 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow","onUpdate:modelValue":r=>n.value[i]=r,onInput:r=>y(i,r),onKeydown:B(r=>v(i),["backspace"]),ref_for:!0,ref:r=>{r&&(d.value[i]=r)}},null,40,K)),[[I,n.value[i]]])),128))]),u(l).errors.length?(c(),p("div",L,[(c(!0),p(h,null,g(u(l).errors,a=>(c(),p("p",{key:a},_(a),1))),128))])):V("",!0),s("button",{onClick:x,disabled:u(l).loading,class:"w-full mt-6 py-3 bg-blue-700 text-white font-bold rounded-xl shadow-lg hover:bg-blue-800 transition-colors duration-300 disabled:bg-gray-400"},_(u(l).loading?"جاري التحقق...":"تحقق"),9,M),s("div",A,[o[0]||(o[0]=O(" لم تتلق الرمز؟ ")),s("a",{href:"#",onClick:S(b,["prevent"]),class:"text-blue-600 font-semibold hover:underline"},"إعادة إرسال الرمز")])])])]))}},z=w(E,[["__scopeId","data-v-0af1e508"]]);export{z as default};
