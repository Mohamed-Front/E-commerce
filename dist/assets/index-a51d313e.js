import{_ as ee,b as te,L as ae,u as se,r as l,U as oe,w as le,d as ne,V as F,o as _,e as k,f as o,g as n,i as r,j as e,z as w,c as ie,t as d,F as z,h as re,W as de,a as E,X as ce,Y as h,Z as pe,$ as ue,a0 as ve,a1 as m,s as A,a6 as O,a2 as _e,x as he,B as me,a3 as ge,a5 as be,p as fe,m as ye}from"./index-b794012a.js";const v=C=>(fe("data-v-47d2d4b2"),C=C(),ye(),C),xe={class:"grid"},ke={class:"col-12"},we={class:"card p-4 shadow-2 border-round"},Ce={class:"text-2xl font-bold"},$e={class:"flex gap-2"},Se={class:"p-input-icon-left"},Ue=v(()=>o("i",{class:"pi pi-search"},null,-1)),Ve={class:"card shadow-1 surface-0"},Re={class:"text-center py-4"},Ee=v(()=>o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Ne={class:"text-xl"},Pe={class:"flex justify-content-center align-items-center py-4"},Be={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},De={class:"p-paginator-left-content"},Ie={class:"p-paginator-current"},Le={class:"p-paginator-right-content"},Me=["disabled"],Te=v(()=>o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),je=[Te],Fe=["disabled"],ze=v(()=>o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Ae=[ze],Oe=["onClick"],We={key:1,class:"p-paginator-dots"},Ge=["disabled"],Qe=v(()=>o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Xe=[Qe],Ye=["disabled"],Ze=v(()=>o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),qe=[Ze],He={class:"flex align-items-center justify-content-center"},Je=v(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Ke={setup(C){const N=te(),g=ae(),{t}=se(),$=l(!0),P=l("");l({});const B=l(null);l(!1),l(!1);const b=l(!1);l(null);const W=l(null),D=l({}),S=l(""),c=l(1),V=l(0),f=l(10),U=l(0),G=l(""),Q=l(""),I=l(""),L=l(""),M=l(0),T=l(0),j=l([]),X=()=>{E.get("/api/export/store",{responseType:"blob"}).then(s=>{const i=new Blob([s.data],{type:"text/csv"}),p=window.URL.createObjectURL(i),u=document.createElement("a");u.href=p,u.setAttribute("download","stores_export.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(p),g.add({severity:"success",summary:t("success"),detail:t("store.exportSuccess"),life:3e3})}).catch(s=>{g.add({severity:"error",summary:t("error"),detail:t("store.exportError"),life:3e3}),console.error("Error exporting stores:",s)})},Y=s=>{P.value=s,b.value=!0},Z=()=>{E.delete(`/api/store/${P.value}`).then(()=>{y(),b.value=!1,g.add({severity:"success",summary:t("success"),detail:t("store.deletedSuccess"),life:3e3})}).catch(()=>{g.add({severity:"error",summary:t("error"),detail:t("store.deleteError"),life:3e3})})},q=()=>{D.value={global:{value:null,matchMode:de.CONTAINS}}};oe(()=>{q()});const y=()=>{$.value=!0,E.get("/api/store",{params:{page:c.value,limit:f.value,search:S.value}}).then(s=>{$.value=!1,B.value=s.data.data.data,V.value=s.data.data.total,U.value=s.data.data.last_page,G.value=s.data.data.first_page_url,Q.value=s.data.data.last_page_url,I.value=s.data.data.next_page_url,L.value=s.data.data.prev_page_url,M.value=s.data.data.from,T.value=s.data.data.to,j.value=s.data.data.links}).catch(s=>{$.value=!1,g.add({severity:"error",summary:t("error"),detail:t("store.loadError"),life:3e3}),console.error("Error fetching data:",s)})};le(S,s=>{c.value=1,y()});const x=s=>{s>=1&&s<=U.value&&(c.value=s,y())},H=s=>{f.value=s.value,c.value=1,y()};ne(()=>{y()});const J=()=>{N.push({name:"store-create"})},K=s=>{N.push({name:"store-edit",params:{id:s}})};return(s,i)=>{const p=F("can"),u=F("tooltip");return _(),k("div",xe,[o("div",ke,[o("div",we,[n(e(pe),{class:"mb-4"},{start:r(()=>[o("h2",Ce,d(e(t)("store.managementTitle")),1)]),end:r(()=>[o("div",$e,[o("span",Se,[Ue,n(e(ce),{modelValue:S.value,"onUpdate:modelValue":i[0]||(i[0]=a=>S.value=a),placeholder:e(t)("store.search")},null,8,["modelValue","placeholder"])]),w(n(e(h),{label:e(t)("store.export"),icon:"pi pi-upload",class:"p-export",onClick:X},null,8,["label"]),[[p,"list stores"]]),w(n(e(h),{label:e(t)("store.new"),icon:"pi pi-plus",class:"p-button-success",onClick:J},null,8,["label"]),[[p,"create stores"]])])]),_:1}),n(e(ue)),o("div",Ve,[w((_(),ie(e(_e),{ref_key:"dt",ref:W,value:B.value,loading:$.value,"data-key":"id",paginator:!1,rows:f.value,filters:D.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[o("div",Re,[Ee,o("p",Ne,d(e(t)("store.noData")),1)])]),loading:r(()=>[o("div",Pe,[n(e(ve),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[n(e(m),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(m),{field:"name_en",header:e(t)("store.nameEn"),sortable:!0},{body:r(a=>[A(d(a.data.name_en),1)]),_:1},8,["header"]),n(e(m),{field:"name_ar",header:e(t)("store.nameAr"),sortable:!0},{body:r(a=>[A(d(a.data.name_ar),1)]),_:1},8,["header"]),n(e(m),{field:"is_default",header:e(t)("store.isDefault"),sortable:!0},{body:r(a=>[n(e(O),{value:a.data.is_default?e(t)("store.yes"):e(t)("store.no"),severity:a.data.is_default?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),n(e(m),{field:"has_market",header:e(t)("store.hasMarket"),sortable:!0},{body:r(a=>[n(e(O),{value:a.data.has_market?e(t)("store.yes"):e(t)("store.no"),severity:a.data.has_market?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),n(e(m),{header:e(t)("actions"),headerStyle:"width: 12rem"},{body:r(a=>[w(n(e(h),{icon:"pi pi-pencil",class:"p-detail",onClick:R=>K(a.data.id)},null,8,["onClick"]),[[p,"edit stores"],[u,e(t)("edit"),void 0,{top:!0}]]),w(n(e(h),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:R=>Y(a.data.id)},null,8,["onClick"]),[[p,"delete stores"],[u,e(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[p,"list stores"]]),o("div",Be,[o("div",De,[o("span",Ie,d(e(t)("show"))+" "+d(M.value)+" "+d(e(t)("to"))+" "+d(T.value)+" "+d(e(t)("from"))+" "+d(V.value),1)]),o("div",Le,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:i[1]||(i[1]=a=>x(1))},je,8,Me),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!L.value,onClick:i[2]||(i[2]=a=>x(c.value-1))},Ae,8,Fe),(_(!0),k(z,null,re(j.value,(a,R)=>(_(),k(z,{key:R},[a.label&&!isNaN(a.label)?(_(),k("button",{key:0,class:he(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:et=>x(parseInt(a.label))},d(a.label),11,Oe)):a.label==="..."?(_(),k("span",We,"...")):me("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!I.value,onClick:i[3]||(i[3]=a=>x(c.value+1))},Xe,8,Ge),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===U.value,onClick:i[4]||(i[4]=a=>x(U.value))},qe,8,Ye),n(e(ge),{filter:"",modelValue:f.value,"onUpdate:modelValue":i[5]||(i[5]=a=>f.value=a),options:[5,10,20,30],optionLabel:"",onChange:H,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(be),{visible:b.value,"onUpdate:visible":i[7]||(i[7]=a=>b.value=a),style:{width:"450px"},header:e(t)("store.deleteConfirmTitle"),modal:!0},{footer:r(()=>[n(e(h),{label:e(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:i[6]||(i[6]=a=>b.value=!1)},null,8,["label"]),n(e(h),{variant:s.outline,label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Z},null,8,["variant","label"])]),default:r(()=>[o("div",He,[Je,o("span",null,d(e(t)("store.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},at=ee(Ke,[["__scopeId","data-v-47d2d4b2"]]);export{at as default};
