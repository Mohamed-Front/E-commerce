import{_ as ge,u as ve,G as me,j as be,r,q as ye,o as he,R as M,a as h,c as f,f as s,h as i,w as p,e as a,t as n,F as q,d as fe,i as $,S as _e,a2 as G,U as u,$ as xe,Q as we,H as Ce,a0 as _,p as V,z as P,a1 as ke,y as $e,g as Q,a3 as H,ac as Ee}from"./index-23dc13f5.js";const Se={class:"grid"},Ue={class:"col-12"},Le={class:"card p-4 shadow-2 border-round"},Re={class:"text-2xl font-bold"},De={class:"flex gap-2"},Ve={class:"p-input-icon-left"},Pe={class:"card shadow-1 surface-0"},Fe={class:"text-center py-4"},Ne={class:"text-xl"},Te={class:"flex justify-content-center align-items-center py-4"},Ie={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},je={class:"p-paginator-left-content"},Ae={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},ze=["disabled"],Oe=["disabled"],Me=["onClick","aria-label"],qe={key:1,class:"p-paginator-dots"},Ge=["disabled"],Qe=["disabled"],He={class:"flex align-items-center justify-content-center"},We={class:"flex flex-column gap-3"},Je={key:0,class:"mt-2"},Ke={class:"font-semibold"},Xe={__name:"index",setup(Ye){const E=ve(),v=me(),{t}=be(),S=r(!0),T=r([]),x=r(!1),F=r(null),W=r(null),J=r({}),U=r("");r(null);const w=r(!1),m=r(null),L=r(!1),I=r([]),R=r(null),K=r(localStorage.getItem("appLang")),g=r(1),N=r(0),b=r(10),D=r(0),X=r(""),Y=r(""),j=r(""),A=r(""),B=r(0),z=r(0),O=r([]),Z=r([{id:"شفت 7",arabic_name:"Shift7",english_name:"الأحذية",Top_Parent:"shift7"}]),ee=()=>{$.get("/api/store").then(o=>{I.value=o.data.data.data}).catch(o=>{v.add({severity:"error",summary:t("error"),detail:t("store.loadError"),life:3e3}),console.error("Error fetching stores:",o)})},ae=o=>{E.push({name:"media-links",params:{id:o,type:2}})},y=()=>{var o;S.value=!0,$.get("/api/category",{params:{page:g.value,limit:b.value,search:U.value||void 0,store_id:((o=R.value)==null?void 0:o.id)||void 0}}).then(e=>{T.value=e.data.data.data,N.value=e.data.data.total,D.value=e.data.data.last_page,X.value=e.data.data.first_page_url,Y.value=e.data.data.last_page_url,j.value=e.data.data.next_page_url,A.value=e.data.data.prev_page_url,B.value=e.data.data.from,z.value=e.data.data.to,O.value=e.data.data.links,g.value=e.data.data.current_page,S.value=!1}).catch(e=>{v.add({severity:"error",summary:t("error"),detail:t("category.loadError"),life:3e3}),S.value=!1,console.error("Error fetching categories:",e)})};ye([U,b,R],()=>{g.value=1,y()});const C=o=>{o>=1&&o<=D.value&&(g.value=o,y())},te=o=>{b.value=o.value,g.value=1,y()},le=o=>{F.value=o,x.value=!0},oe=()=>{$.delete(`/api/category/${F.value}`).then(()=>{v.add({severity:"success",summary:t("success"),detail:t("category.deleteSuccess"),life:3e3}),y(),x.value=!1,F.value=null}).catch(o=>{v.add({severity:"error",summary:t("error"),detail:t("category.deleteError"),life:3e3}),console.error("Error deleting category:",o)})},se=()=>{$.get("/api/export/category",{responseType:"blob"}).then(o=>{const e=new Blob([o.data],{type:"text/csv"}),c=window.URL.createObjectURL(e),d=document.createElement("a");d.href=c,d.setAttribute("download","categories_export.csv"),document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)}).catch(o=>{v.add({severity:"error",summary:t("error"),detail:t("category.exportError"),life:3e3}),console.error("Error exporting categories:",o)})},ie=()=>{const o=`id,Arabic Name,English Name,Top Parent / Store
`+Z.value.map(d=>`"${d.id}","${d.arabic_name}","${d.english_name}","${d.Top_Parent}",`).join(`
`),e=new Blob([o],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");if(c.download!==void 0){const d=URL.createObjectURL(e);c.setAttribute("href",d),c.setAttribute("download","category_import_example.csv"),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d)}},re=()=>{w.value=!0,m.value=null},ne=o=>{m.value=o.files[0]},de=o=>{E.push({name:"category-shipping-settings",params:{id:o}})},ce=()=>{if(!m.value){v.add({severity:"warn",summary:t("warning"),detail:t("category.importNoFile"),life:3e3});return}L.value=!0;const o=new FormData;o.append("file",m.value),$.post("/api/import/store",o).then(()=>{v.add({severity:"success",summary:t("success"),detail:t("category.importSuccess"),life:3e3}),y(),w.value=!1,m.value=null;const e=document.querySelector('.p-fileupload input[type="file"]');e&&(e.value="")}).catch(e=>{v.add({severity:"error",summary:t("error"),detail:t("category.importError"),life:3e3}),console.error("Error importing categories:",e)}).finally(()=>{L.value=!1})},pe=()=>{E.push({name:"category-create"})},ue=o=>{E.push({name:"category-update",params:{id:o}})};return he(()=>{ee(),y()}),(o,e)=>{const c=M("tooltip"),d=M("can");return h(),f("div",Se,[s("div",Ue,[s("div",Le,[i(a(xe),{class:"mb-4"},{start:p(()=>[s("h2",Re,n(a(t)("category.managementTitle")),1)]),end:p(()=>[s("div",De,[s("span",Ve,[e[11]||(e[11]=s("i",{class:"pi pi-search"},null,-1)),i(a(_e),{modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=l=>U.value=l),placeholder:a(t)("category.search")},null,8,["modelValue","placeholder"])]),i(a(G),{modelValue:R.value,"onUpdate:modelValue":e[1]||(e[1]=l=>R.value=l),options:I.value,optionLabel:"name_en",placeholder:a(t)("category.selectStore"),class:"w-12rem",showClear:!0,"aria-label":"Filter by store"},null,8,["modelValue","options","placeholder"]),i(a(u),{label:a(t)("category.import"),icon:"pi pi-download",class:"exite",onClick:re,"aria-label":"Import categories"},null,8,["label"]),i(a(u),{label:a(t)("category.export"),icon:"pi pi-upload",class:"exite",onClick:se,"aria-label":"Export categories"},null,8,["label"]),i(a(u),{label:a(t)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:pe,"aria-label":"Create new category"},null,8,["label"])])]),_:1}),i(a(we)),s("div",Pe,[i(a(ke),{ref_key:"dt",ref:W,value:T.value,loading:S.value,"data-key":"id",paginator:!1,rows:b.value,filters:J.value,totalRecords:N.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:p(()=>[s("div",Fe,[e[12]||(e[12]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",Ne,n(a(t)("category.noData")),1)])]),loading:p(()=>[s("div",Te,[i(a(Ce),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:p(()=>[i(a(_),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(a(_),{field:"id",header:a(t)("id"),sortable:!0,"header-style":"width:5%; min-width:5rem;"},{body:p(l=>[V(n(l.data.id),1)]),_:1},8,["header"]),i(a(_),{field:"name_en",header:a(t)("category.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:p(l=>[V(n(l.data.name_en),1)]),_:1},8,["header"]),i(a(_),{field:"name_ar",header:a(t)("category.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:p(l=>[V(n(l.data.name_ar),1)]),_:1},8,["header"]),i(a(_),{field:"belongs_to",header:a(t)("category.store"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:p(l=>[V(n(K.value==="ar"?l.data.belongs_to_ar:l.data.belongs_to_en||a(t)("category.noStore")),1)]),_:1},8,["header"]),i(a(_),{header:a(t)("actions"),"header-style":"width:12rem;"},{body:p(l=>[P(i(a(u),{icon:"pi pi-pencil",class:"p-detail",onClick:k=>ue(l.data.id),"aria-label":"Edit category"},null,8,["onClick"]),[[c,a(t)("edit"),void 0,{top:!0}]]),P(i(a(u),{icon:"pi pi-trash",class:"p-delete",onClick:k=>le(l.data.id),"aria-label":"Delete category"},null,8,["onClick"]),[[c,a(t)("delete"),void 0,{top:!0}]]),P(i(a(u),{icon:"pi pi-images",class:"p-detail",onClick:k=>ae(l.data.id)},null,8,["onClick"]),[[d,"edit inventory"]]),P(i(a(u),{icon:"pi pi-truck",class:"p-button-warning mx-1",onClick:k=>de(l.data.id)},null,8,["onClick"]),[[c,a(t)("store.shippingSettings"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),s("div",Ie,[s("div",je,[s("span",Ae,n(a(t)("show"))+" "+n(B.value)+" "+n(a(t)("to"))+" "+n(z.value)+" "+n(a(t)("from"))+" "+n(N.value),1)]),s("div",Be,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:g.value===1,onClick:e[2]||(e[2]=l=>C(1)),"aria-label":"First page"},e[13]||(e[13]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,ze),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!A.value,onClick:e[3]||(e[3]=l=>C(g.value-1)),"aria-label":"Previous page"},e[14]||(e[14]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Oe),(h(!0),f(q,null,fe(O.value,(l,k)=>(h(),f(q,{key:k},[l.label&&!isNaN(parseInt(l.label))?(h(),f("button",{key:0,class:$e(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:Ze=>C(parseInt(l.label)),"aria-label":`Page ${l.label}`},n(l.label),11,Me)):l.label==="..."?(h(),f("span",qe,"...")):Q("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!j.value,onClick:e[4]||(e[4]=l=>C(g.value+1)),"aria-label":"Next page"},e[15]||(e[15]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Ge),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:g.value===D.value,onClick:e[5]||(e[5]=l=>C(D.value)),"aria-label":"Last page"},e[16]||(e[16]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Qe),i(a(G),{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=l=>b.value=l),options:[5,10,20,30],onChange:te,class:"ml-2",style:{width:"80px"},"aria-label":"Rows per page"},null,8,["modelValue"])])])]),i(a(H),{visible:x.value,"onUpdate:visible":e[8]||(e[8]=l=>x.value=l),style:{width:"450px"},header:a(t)("category.deleteConfirmTitle"),modal:!0},{footer:p(()=>[i(a(u),{label:a(t)("cancel"),icon:"pi pi-times",text:"",onClick:e[7]||(e[7]=l=>x.value=!1),"aria-label":"Cancel delete"},null,8,["label"]),i(a(u),{label:a(t)("yes"),icon:"pi pi-check",text:"",severity:"danger",onClick:oe,"aria-label":"Confirm delete"},null,8,["label"])]),default:p(()=>[s("div",He,[e[17]||(e[17]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,n(a(t)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),i(a(H),{visible:w.value,"onUpdate:visible":e[10]||(e[10]=l=>w.value=l),style:{width:"500px"},header:a(t)("category.importInstructions"),modal:!0},{footer:p(()=>[i(a(u),{label:a(t)("cancel"),icon:"pi pi-times",text:"",onClick:e[9]||(e[9]=l=>w.value=!1),"aria-label":"Cancel import"},null,8,["label"]),i(a(u),{label:a(t)("import"),icon:"pi pi-check",class:"p-button-success",onClick:ce,disabled:!m.value,loading:L.value,"aria-label":"Import categories"},null,8,["label","disabled","loading"])]),default:p(()=>[s("div",We,[s("div",null,[i(a(u),{label:a(t)("category.downloadExample"),icon:"pi pi-download",class:"p-button-outlined",onClick:ie,"aria-label":"Download example CSV"},null,8,["label"])]),i(a(Ee),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:a(t)("category.chooseFile"),onSelect:ne,auto:!1,disabled:L.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),m.value?(h(),f("div",Je,[s("p",Ke,n(a(t)("selectedFile"))+": "+n(m.value.name),1)])):Q("",!0)])]),_:1},8,["visible","header"])])])])}}},aa=ge(Xe,[["__scopeId","data-v-876e3a18"]]);export{aa as default};
