import{b as H,L as J,u as K,r as i,w as O,d as tt,V as S,o as p,e as g,f as e,g as n,i as d,j as t,z as f,c as et,t as r,F as j,h as at,a as z,X as st,Y as v,Z as lt,$ as it,a0 as ot,a1 as w,s as F,a2 as nt,x as rt,B as dt,a3 as ct,a5 as ut}from"./index-b794012a.js";const pt={class:"grid"},vt={class:"col-12"},_t={class:"card p-4 shadow-2 border-round"},bt={class:"text-2xl font-bold"},ht={class:"flex gap-2"},mt={class:"p-input-icon-left"},gt=e("i",{class:"pi pi-search"},null,-1),ft={class:"card shadow-1 surface-0"},xt={class:"text-center py-4"},yt=e("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1),kt={class:"text-xl"},wt={class:"flex justify-content-center align-items-center py-4"},Ct={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},$t={class:"p-paginator-left-content"},Vt={class:"p-paginator-current"},Pt={class:"p-paginator-right-content"},Dt=["disabled"],Nt=e("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1),Ut=[Nt],Et=["disabled"],Rt=e("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1),Bt=[Rt],Tt=["onClick"],At={key:1,class:"p-paginator-dots"},It=["disabled"],St=e("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1),jt=[St],zt=["disabled"],Ft=e("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1),Lt=[Ft],Mt={class:"flex align-items-center justify-content-center"},Gt=e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1),Yt={setup(Qt){const P=H(),C=J(),{t:l}=K(),x=i(!0),D=i([]),_=i(!1),N=i(null),U=i(null),L=i({}),y=i("");i(null);const c=i(1),$=i(0),u=i(10),k=i(0),M=i(""),G=i(""),E=i(""),R=i(""),B=i(0),T=i(0),A=i([]),b=()=>{x.value=!0,z.get("/api/attribute",{params:{page:c.value,limit:u.value,search:y.value||void 0}}).then(a=>{D.value=a.data.data.data,$.value=a.data.data.total,k.value=a.data.data.last_page,M.value=a.data.data.first_page_url,G.value=a.data.data.last_page_url,E.value=a.data.data.next_page_url,R.value=a.data.data.prev_page_url,B.value=a.data.data.from,T.value=a.data.data.to,A.value=a.data.data.links,x.value=!1}).catch(a=>{C.add({severity:"error",summary:l("error"),detail:l("attribute.loadError"),life:3e3}),x.value=!1,console.error("Error fetching attributes:",a)})};O([y,u],()=>{c.value=1,b()});const h=a=>{a>=1&&a<=k.value&&(c.value=a,b())},Q=a=>{u.value=a.value,c.value=1,b()},W=a=>{N.value=a,_.value=!0},X=()=>{z.delete(`/api/attribute/${N.value}`).then(()=>{C.add({severity:"success",summary:l("success"),detail:l("attribute.deleteSuccess"),life:3e3}),b(),_.value=!1}).catch(a=>{C.add({severity:"error",summary:l("error"),detail:l("attribute.deleteError"),life:3e3}),console.error("Error deleting attribute:",a)})},Y=()=>{U.value.exportCSV()},Z=()=>{P.push({name:"attribute-create"})},q=a=>{P.push({name:"attribute-update",params:{id:a}})};return tt(()=>{b()}),(a,o)=>{const m=S("can"),I=S("tooltip");return p(),g("div",pt,[e("div",vt,[e("div",_t,[n(t(lt),{class:"mb-4"},{start:d(()=>[e("h2",bt,r(t(l)("attribute.managementTitle")),1)]),end:d(()=>[e("div",ht,[e("span",mt,[gt,n(t(st),{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=s=>y.value=s),placeholder:t(l)("attribute.search")},null,8,["modelValue","placeholder"])]),f(n(t(v),{label:t(l)("attribute.export"),icon:"pi pi-upload",class:"p-export",onClick:Y},null,8,["label"]),[[m,"list attributes"]]),f(n(t(v),{label:t(l)("attribute.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[m,"create attributes"]])])]),_:1}),n(t(it)),e("div",ft,[f((p(),et(t(nt),{ref_key:"dt",ref:U,value:D.value,loading:x.value,"data-key":"id",paginator:!1,rows:u.value,filters:L.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[e("div",xt,[yt,e("p",kt,r(t(l)("attribute.noData")),1)])]),loading:d(()=>[e("div",wt,[n(t(ot),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(t(w),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(t(w),{field:"name_ar",header:t(l)("attribute.nameAr"),sortable:!0,"header-style":"width:20%; min-width:10rem;"},{body:d(s=>[F(r(s.data.name_ar),1)]),_:1},8,["header"]),n(t(w),{field:"name_en",header:t(l)("attribute.nameEn"),sortable:!0,"header-style":"width:20%; min-width:10rem;"},{body:d(s=>[F(r(s.data.name_en),1)]),_:1},8,["header"]),n(t(w),{header:t(l)("actions"),"header-style":"width: 12rem"},{body:d(s=>[f(n(t(v),{icon:"pi pi-pencil",class:"p-detail",onClick:V=>q(s.data.id)},null,8,["onClick"]),[[m,"edit attributes"],[I,t(l)("edit"),void 0,{top:!0}]]),f(n(t(v),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:V=>W(s.data.id)},null,8,["onClick"]),[[m,"delete attributes"],[I,t(l)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[m,"list attributes"]]),e("div",Ct,[e("div",$t,[e("span",Vt,r(t(l)("show"))+" "+r(B.value)+" "+r(t(l)("to"))+" "+r(T.value)+" "+r(t(l)("from"))+" "+r($.value),1)]),e("div",Pt,[e("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:o[1]||(o[1]=s=>h(1))},Ut,8,Dt),e("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!R.value,onClick:o[2]||(o[2]=s=>h(c.value-1))},Bt,8,Et),(p(!0),g(j,null,at(A.value,(s,V)=>(p(),g(j,{key:V},[s.label&&!isNaN(parseInt(s.label))?(p(),g("button",{key:0,class:rt(["p-paginator-page p-paginator-element p-link",{"p-highlight":s.active}]),onClick:Wt=>h(parseInt(s.label))},r(s.label),11,Tt)):s.label==="..."?(p(),g("span",At,"...")):dt("",!0)],64))),128)),e("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!E.value,onClick:o[3]||(o[3]=s=>h(c.value+1))},jt,8,It),e("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===k.value,onClick:o[4]||(o[4]=s=>h(k.value))},Lt,8,zt),n(t(ct),{filter:"",modelValue:u.value,"onUpdate:modelValue":o[5]||(o[5]=s=>u.value=s),options:[5,10,20,30],onChange:Q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(t(ut),{visible:_.value,"onUpdate:visible":o[7]||(o[7]=s=>_.value=s),style:{width:"450px"},header:t(l)("attribute.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(t(v),{label:t(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:o[6]||(o[6]=s=>_.value=!1)},null,8,["label"]),n(t(v),{label:t(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:d(()=>[e("div",Mt,[Gt,e("span",null,r(t(l)("attribute.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{Yt as default};
