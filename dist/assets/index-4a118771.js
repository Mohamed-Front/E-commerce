import{j as ne,u as re,Q as de,r as i,n as ue,m as pe,o as ce,R as W,a as v,c as b,f as o,h as n,w as d,e,y as w,b as ve,t as r,F as A,d as me,S as ge,i as P,T as G,U as c,V as fe,W as be,X as he,Y as U,J,Z as _e,q as ye,g as L,$ as xe,a0 as ke,a1 as O}from"./index-0513d032.js";const we={class:"grid"},Ce={class:"col-12"},Ve={class:"card p-4 shadow-2 border-round"},$e={class:"text-2xl font-bold"},Pe={class:"flex gap-2"},Ue={class:"p-input-icon-left"},Re={class:"card shadow-1 surface-0"},De={class:"text-center py-4"},Ee={class:"text-xl"},Ne={class:"flex justify-content-center align-items-center py-4"},Me={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Se={class:"p-paginator-left-content"},Te={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Fe=["disabled"],Ie=["disabled"],je=["onClick"],qe={key:1,class:"p-paginator-dots"},ze=["disabled"],Qe=["disabled"],We={class:"field mb-5"},Ae={for:"name"},Ge={key:0,class:"p-error"},Je={class:"field"},Le={for:"permissions"},Oe={class:"flex align-items-center justify-content-center"},He={__name:"index",setup(Xe){const{t:a}=ne(),X=re(),m=de(),C=i(!0),u=i({name:"",permissions:[]}),E=i([]),N=i([]),h=i(!1),_=i(!1),M=i(null),S=i(null),T=i({}),y=i(!1),B=i(null),V=i(""),p=i(1),R=i(0),g=i(10),$=i(0),Y=i(""),Z=i(""),F=i(""),I=i(""),j=i(0),q=i(0),z=i([]),H=()=>{T.value={global:{value:null,matchMode:ge.CONTAINS}}},f=()=>{C.value=!0,P.get("/api/role",{params:{page:p.value,limit:g.value,search:V.value||void 0}}).then(s=>{N.value=s.data.data.data,R.value=s.data.data.total,$.value=s.data.data.last_page,Y.value=s.data.data.first_page_url,Z.value=s.data.data.last_page_url,F.value=s.data.data.next_page_url,I.value=s.data.data.prev_page_url,j.value=s.data.data.from,q.value=s.data.data.to,z.value=s.data.data.links,C.value=!1}).catch(s=>{m.add({severity:"error",summary:a("error"),detail:a("role.loadError"),life:3e3}),C.value=!1,console.error("Error fetching roles:",s)}),P.get("/api/role/get/permissions").then(s=>{E.value=s.data.permissions}).catch(s=>{m.add({severity:"error",summary:a("error"),detail:a("role.loadPermissionsError"),life:3e3}),console.error("Error fetching permissions:",s)})},x=s=>{s>=1&&s<=$.value&&(p.value=s,f())},K=s=>{g.value=s.value,p.value=1,f()};ue([V,g],()=>{p.value=1,f()});const ee=()=>{u.value={name:"",permissions:[]},y.value=!1,h.value=!0},le=()=>{h.value=!1,y.value=!1},ae=()=>{y.value=!0,u.value.name.trim()&&P.post("/api/role",u.value).then(()=>{f(),h.value=!1,m.add({severity:"success",summary:a("success"),detail:a("role.createSuccess"),life:3e3}),u.value={name:"",permissions:[]}}).catch(s=>{m.add({severity:"error",summary:a("error"),detail:a("role.createError"),life:3e3}),console.error("Error creating role:",s)})},te=s=>{X.push({name:"roles-update",params:{id:s}})},se=s=>{B.value=s,_.value=!0},oe=()=>{P.delete(`/api/role/${B.value}`).then(()=>{f(),_.value=!1,m.add({severity:"success",summary:a("success"),detail:a("role.deleteSuccess"),life:3e3})}).catch(s=>{m.add({severity:"error",summary:a("error"),detail:a("role.deleteError"),life:3e3}),console.error("Error deleting role:",s)})},ie=()=>{S.value.exportCSV()};return pe(()=>{H()}),ce(()=>{f()}),(s,l)=>{const k=W("can"),Q=W("tooltip");return v(),b("div",we,[o("div",Ce,[o("div",Ve,[n(e(fe),{class:"mb-4"},{start:d(()=>[o("h2",$e,r(e(a)("role.manage_Roles")),1)]),end:d(()=>[o("div",Pe,[o("span",Ue,[l[12]||(l[12]=o("i",{class:"pi pi-search"},null,-1)),n(e(G),{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=t=>V.value=t),placeholder:e(a)("role.search")},null,8,["modelValue","placeholder"])]),w(n(e(c),{label:e(a)("role.export"),icon:"pi pi-upload",class:"p-export",onClick:ie},null,8,["label"]),[[k,"export roles"]]),w(n(e(c),{label:e(a)("role.new"),icon:"pi pi-plus",class:"p-button-success",onClick:ee},null,8,["label"]),[[k,"create roles"]])])]),_:1}),n(e(be)),o("div",Re,[w((v(),ve(e(_e),{ref_key:"dt",ref:S,selection:M.value,"onUpdate:selection":l[1]||(l[1]=t=>M.value=t),value:N.value,loading:C.value,"data-key":"id",paginator:!1,rows:g.value,filters:T.value,totalRecords:R.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[o("div",De,[l[13]||(l[13]=o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),o("p",Ee,r(e(a)("role.noData")),1)])]),loading:d(()=>[o("div",Ne,[n(e(he),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(e(U),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(U),{field:"id",header:e(a)("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:d(t=>[J(r(t.data.id),1)]),_:1},8,["header"]),n(e(U),{field:"name",header:e(a)("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[J(r(t.data.name),1)]),_:1},8,["header"]),n(e(U),{header:e(a)("actions"),"header-style":"min-width:10rem;"},{body:d(t=>[w(n(e(c),{icon:"pi pi-pencil",class:"p-detail",onClick:D=>te(t.data.id)},null,8,["onClick"]),[[k,"edit roles"],[Q,e(a)("edit"),void 0,{top:!0}]]),w(n(e(c),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:D=>se(t.data.id)},null,8,["onClick"]),[[k,"delete roles"],[Q,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["selection","value","loading","rows","filters","totalRecords"])),[[k,"list roles"]]),o("div",Me,[o("div",Se,[o("span",Te,r(e(a)("show"))+" "+r(j.value)+" "+r(e(a)("to"))+" "+r(q.value)+" "+r(e(a)("from"))+" "+r(R.value),1)]),o("div",Be,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:l[2]||(l[2]=t=>x(1))},l[14]||(l[14]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Fe),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!I.value,onClick:l[3]||(l[3]=t=>x(p.value-1))},l[15]||(l[15]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Ie),(v(!0),b(A,null,me(z.value,(t,D)=>(v(),b(A,{key:D},[t.label&&!isNaN(parseInt(t.label))?(v(),b("button",{key:0,class:ye(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Ye=>x(parseInt(t.label))},r(t.label),11,je)):t.label==="..."?(v(),b("span",qe,"...")):L("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!F.value,onClick:l[4]||(l[4]=t=>x(p.value+1))},l[16]||(l[16]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,ze),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===$.value,onClick:l[5]||(l[5]=t=>x($.value))},l[17]||(l[17]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Qe),n(e(xe),{modelValue:g.value,"onUpdate:modelValue":l[6]||(l[6]=t=>g.value=t),options:[5,10,20,30],onChange:K,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(O),{visible:h.value,"onUpdate:visible":l[9]||(l[9]=t=>h.value=t),style:{width:"450px"},header:e(a)("role.createTitle"),modal:!0,class:"p-fluid"},{footer:d(()=>[n(e(c),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:le},null,8,["label"]),n(e(c),{label:e(a)("save"),icon:"pi pi-check",class:"p-button-text",onClick:ae},null,8,["label"])]),default:d(()=>[o("div",We,[o("label",Ae,r(e(a)("role.name")),1),n(e(G),{class:"mt-3 w-full",id:"name",modelValue:u.value.name,"onUpdate:modelValue":l[7]||(l[7]=t=>u.value.name=t),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:y.value&&!u.value.name},null,8,["modelValue","invalid"]),y.value&&!u.value.name?(v(),b("small",Ge,r(e(a)("role.nameRequired")),1)):L("",!0)]),o("div",Je,[o("label",Le,r(e(a)("role.permissions")),1),n(e(ke),{id:"permissions",modelValue:u.value.permissions,"onUpdate:modelValue":l[8]||(l[8]=t=>u.value.permissions=t),display:"chip","option-value":"id",options:E.value,"option-label":"name",placeholder:e(a)("role.selectPermissions"),class:"w-full"},null,8,["modelValue","options","placeholder"])])]),_:1},8,["visible","header"]),n(e(O),{visible:_.value,"onUpdate:visible":l[11]||(l[11]=t=>_.value=t),style:{width:"460px"},header:e(a)("role.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(e(c),{label:e(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[10]||(l[10]=t=>_.value=!1)},null,8,["label"]),n(e(c),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:oe},null,8,["label"])]),default:d(()=>[o("div",Oe,[l[18]||(l[18]=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,r(e(a)("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{He as default};
