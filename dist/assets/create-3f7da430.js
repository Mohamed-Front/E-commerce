import{_ as A,u as N,D as Z,j,r as h,l as S,o as M,Q as B,a as g,c as f,x as I,f as t,t as r,e,E as b,h as i,w as k,F,d as R,B as P,i as w,a1 as Q,ae as D,S as c,ag as W,R as U,T as y,P as G}from"./index-39233d5b.js";import{x as H,A as J,O as K}from"./index.es-e0ecb607.js";const X={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},Y={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={class:"space-y-2"},te={for:"store_id",class:"block text-sm font-medium text-gray-700"},oe={class:"space-y-4"},le={class:"flex items-center space-x-4"},ae={class:"block text-sm font-medium text-gray-700 mx-2"},ie={class:"space-y-2"},re={for:"min_amount",class:"block text-sm font-medium text-gray-700"},ne={class:"space-y-2"},de={for:"free_amount",class:"block text-sm font-medium text-gray-700"},ue={class:"space-y-4"},pe={class:"flex items-center space-x-4"},ce={class:"block text-sm font-medium text-gray-700 mx-2"},me={class:"space-y-2"},ge={for:"days",class:"block text-sm font-medium text-gray-700"},fe={class:"space-y-2"},be={for:"from",class:"block text-sm font-medium text-gray-700"},_e={class:"space-y-2"},ye={for:"to",class:"block text-sm font-medium text-gray-700"},he={class:"space-y-2 md:col-span-2"},xe={class:"text-xl font-semibold text-gray-800 mb-4"},ve={class:"space-y-2 md:col-span-2"},Ve={class:"block text-sm font-medium text-gray-700"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ke={class:"space-y-2"},Fe=["for"],we={class:"space-y-2"},De=["for"],Ue={class:"space-y-2"},Te=["for"],qe={class:"space-y-2"},ze=["for"],Ee={class:"space-y-2"},Ce=["for"],Oe={class:"flex items-center"},$e={class:"pt-4 flex justify-center space-x-4"},Le={key:0},Ae={key:1,class:"pi pi-spinner pi-spin"},Ne={__name:"create",setup(Ze){const T=N(),_=Z(),{t:s}=j(),m=h(!1),a=h({store_id:null,is_enabled:!1,min_amount:0,free_amount:0,express_enabled:!1,days:[],from:"",to:"",lat:31.984983325941823,long:35.900908045672196,distance:1e3,zones:[{from:0,to:0,fee:0,express_time:0,express_fee:0}]}),q=S(()=>{const d=Number(a.value.distance)||1e3;return{center:{lat:Number(a.value.lat),lng:Number(a.value.long)},radius:d,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}}),x=h([]),z=S(()=>[{label:s("days.sunday"),value:0},{label:s("days.monday"),value:1},{label:s("days.tuesday"),value:2},{label:s("days.wednesday"),value:3},{label:s("days.thursday"),value:4},{label:s("days.friday"),value:5},{label:s("days.saturday"),value:6}]),E=async()=>{var d,o;try{const p=await w.get("/api/store");x.value=(o=(d=p.data.data)==null?void 0:d.data)==null?void 0:o.map(l=>({label:l.name_en,value:l.id}))}catch(p){console.error("Error fetching stores:",p),_.add({severity:"error",summary:s("error"),detail:s("shippingSetting.loadStoresError"),life:3e3})}};function C(d){const o=d.latLng;a.value.lat=o.lat(),a.value.long=o.lng()}const O=()=>{a.value.zones.push({from:0,to:0,fee:0,express_time:0,express_fee:0})},$=d=>{a.value.zones.length>1?a.value.zones.splice(d,1):_.add({severity:"warn",summary:s("warning"),detail:s("shippingSetting.atLeastOneZone"),life:3e3})},L=async()=>{var d,o,p,l;m.value=!0;try{await w.post("/api/shipping-setting",a.value,{}),_.add({severity:"success",summary:s("success"),detail:s("shippingSetting.createdSuccess"),life:3e3})}catch(n){console.error("Error:",n);const u=((o=(d=n.response)==null?void 0:d.data)==null?void 0:o.message)||s("shippingSetting.createError"),v=((l=(p=n.response)==null?void 0:p.data)==null?void 0:l.errors)||{};let V=u;Object.keys(v).length>0&&(V=Object.values(v).flat().join(" ")),_.add({severity:"error",summary:s("error"),detail:V,life:5e3})}finally{m.value=!1}};return M(()=>{E()}),(d,o)=>{const p=B("can");return g(),f(F,null,[I((g(),f("div",X,[t("h1",Y,r(e(s)("shippingSetting.createTitle")),1),t("form",{onSubmit:P(L,["prevent"]),class:"space-y-6"},[t("div",ee,[t("div",se,[t("label",te,[b(r(e(s)("shippingSetting.store"))+" ",1),o[9]||(o[9]=t("span",{class:"text-red-500"},"*",-1))]),i(e(Q),{id:"store_id",modelValue:a.value.store_id,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.store_id=l),options:x.value,optionLabel:"label",optionValue:"value",placeholder:e(s)("shippingSetting.selectStore"),class:"w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","options","placeholder"])]),t("div",oe,[t("div",le,[t("label",ae,r(e(s)("shippingSetting.isEnabled")),1),i(e(D),{modelValue:a.value.is_enabled,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.is_enabled=l)},null,8,["modelValue"])])]),t("div",ie,[t("label",re,[b(r(e(s)("shippingSetting.minAmount"))+" ",1),o[10]||(o[10]=t("span",{class:"text-red-500"},"*",-1))]),i(e(c),{id:"min_amount",modelValue:a.value.min_amount,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.min_amount=l),mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:e(s)("shippingSetting.enterMinAmount"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",ne,[t("label",de,[b(r(e(s)("shippingSetting.freeAmount"))+" ",1),o[11]||(o[11]=t("span",{class:"text-red-500"},"*",-1))]),i(e(c),{id:"free_amount",modelValue:a.value.free_amount,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.free_amount=l),mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:e(s)("shippingSetting.enterFreeAmount"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",ue,[t("div",pe,[t("label",ce,r(e(s)("shippingSetting.expressEnabled")),1),i(e(D),{modelValue:a.value.express_enabled,"onUpdate:modelValue":o[4]||(o[4]=l=>a.value.express_enabled=l)},null,8,["modelValue"])])]),t("div",me,[t("label",ge,[b(r(e(s)("shippingSetting.days"))+" ",1),o[12]||(o[12]=t("span",{class:"text-red-500"},"*",-1))]),i(e(W),{id:"days",modelValue:a.value.days,"onUpdate:modelValue":o[5]||(o[5]=l=>a.value.days=l),options:z.value,optionLabel:"label",optionValue:"value",placeholder:e(s)("shippingSetting.selectDays"),class:"w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","options","placeholder"])]),t("div",fe,[t("label",be,[b(r(e(s)("shippingSetting.fromTime"))+" ",1),o[13]||(o[13]=t("span",{class:"text-red-500"},"*",-1))]),i(e(U),{id:"from",modelValue:a.value.from,"onUpdate:modelValue":o[6]||(o[6]=l=>a.value.from=l),type:"time",placeholder:e(s)("shippingSetting.enterFromTime"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",_e,[t("label",ye,[b(r(e(s)("shippingSetting.toTime"))+" ",1),o[14]||(o[14]=t("span",{class:"text-red-500"},"*",-1))]),i(e(U),{id:"to",modelValue:a.value.to,"onUpdate:modelValue":o[7]||(o[7]=l=>a.value.to=l),type:"time",placeholder:e(s)("shippingSetting.enterToTime"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",he,[t("h2",xe,r(e(s)("shippingSetting.select_location")),1),i(e(K),{onClick:C,style:{width:"100%",height:"300px"},center:{lat:parseFloat(a.value.lat),lng:parseFloat(a.value.long)},zoom:14},{default:k(()=>[i(e(H),{options:{position:{lat:parseFloat(a.value.lat),lng:parseFloat(a.value.long)}}},null,8,["options"]),i(e(J),{options:q.value},null,8,["options"])]),_:1},8,["center"])]),t("div",ve,[t("label",Ve,r(e(s)("shippingSetting.zones")),1),(g(!0),f(F,null,R(a.value.zones,(l,n)=>(g(),f("div",{key:n,class:"border p-4 rounded-lg mb-4"},[t("div",Se,[t("div",ke,[t("label",{for:"zone_from_"+n,class:"block text-sm font-medium text-gray-700"},r(e(s)("shippingSetting.zoneFrom")),9,Fe),i(e(c),{id:"zone_from_"+n,modelValue:l.from,"onUpdate:modelValue":u=>l.from=u,mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:e(s)("shippingSetting.enterZoneFrom"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])]),t("div",we,[t("label",{for:"zone_to_"+n,class:"block text-sm font-medium text-gray-700"},r(e(s)("shippingSetting.zoneTo")),9,De),i(e(c),{id:"zone_to_"+n,modelValue:l.to,"onUpdate:modelValue":u=>l.to=u,mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:e(s)("shippingSetting.enterZoneTo"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])]),t("div",Ue,[t("label",{for:"zone_fee_"+n,class:"block text-sm font-medium text-gray-700"},r(e(s)("shippingSetting.fee")),9,Te),i(e(c),{id:"zone_fee_"+n,modelValue:l.fee,"onUpdate:modelValue":u=>l.fee=u,mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:e(s)("shippingSetting.enterFee"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])]),t("div",qe,[t("label",{for:"zone_express_time_"+n,class:"block text-sm font-medium text-gray-700"},r(e(s)("shippingSetting.expressTime")),9,ze),i(e(c),{id:"zone_express_time_"+n,modelValue:l.express_time,"onUpdate:modelValue":u=>l.express_time=u,placeholder:e(s)("shippingSetting.enterExpressTime"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])]),t("div",Ee,[t("label",{for:"zone_express_fee_"+n,class:"block text-sm font-medium text-gray-700"},r(e(s)("shippingSetting.expressFee")),9,Ce),i(e(c),{id:"zone_express_fee_"+n,modelValue:l.express_fee,"onUpdate:modelValue":u=>l.express_fee=u,mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:e(s)("shippingSetting.enterExpressFee"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])]),t("div",Oe,[i(e(y),{icon:"pi pi-trash",class:"p-button-danger p-button-text",onClick:u=>$(n),disabled:a.value.zones.length===1},null,8,["onClick","disabled"])])])]))),128)),i(e(y),{label:e(s)("shippingSetting.addZone"),icon:"pi pi-plus",class:"p-button-outlined",onClick:O},null,8,["label"])])]),t("div",$e,[i(e(y),{type:"button",label:e(s)("cancel"),icon:"pi pi-times",onClick:o[8]||(o[8]=l=>e(T).go(-1)),class:"px-6 py-3 bg-gray-200 mx-2 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300",disabled:m.value},null,8,["label","disabled"]),i(e(y),{type:"submit",label:e(s)("shippingSetting.createShipping"),icon:"pi pi-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r mx-2 from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",disabled:m.value},{default:k(()=>[m.value?(g(),f("i",Ae)):(g(),f("span",Le,r(e(s)("shippingSetting.createShipping")),1))]),_:1},8,["label","loading","disabled"])])],32)])),[[p,"create shipping settings"]]),i(e(G))],64)}}},Be=A(Ne,[["__scopeId","data-v-99cbda97"]]);export{Be as default};
