import{_ as ne,u as oe,Q as re,j as ie,r,n as de,o as ce,R as ue,a as _,c as $,f as n,h as o,w as i,e,y as h,b as pe,t as d,F as M,d as be,i as B,T as ve,U as c,V as me,W as fe,X as ge,Y as b,J as L,Z as G,q as _e,g as he,$ as xe,a1 as O,a5 as ye}from"./index-1b30a3d9.js";const ke={class:"grid"},we={class:"col-12"},Ce={class:"card p-4 shadow-2 border-round"},$e={class:"text-2xl font-bold"},Ue={class:"flex gap-2"},De={class:"p-input-icon-left"},Re={class:"card shadow-1 surface-0"},Be={class:"text-center py-4"},Ee={class:"text-xl"},Ve={class:"flex justify-content-center align-items-center py-4"},Le={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ne={class:"p-paginator-left-content"},Pe={class:"p-paginator-current"},Fe={class:"p-paginator-right-content"},Ie=["disabled"],Te=["disabled"],Se=["onClick"],je={key:1,class:"p-paginator-dots"},ze=["disabled"],Ae=["disabled"],Me={class:"flex align-items-center justify-content-center"},Ge={class:"flex flex-column gap-3"},Oe={__name:"index",setup(Qe){const v={mounted(s,a){}},N=oe(),p=re(),{t}=ie(),U=r(!0),P=r([]),x=r(!1),F=r(null),Q=r(null),W=r({}),D=r(""),I=r(null),y=r(!1),m=r(null),k=r(!1),u=r(1),E=r(0),f=r(10),R=r(0),q=r(""),J=r(""),T=r(""),S=r(""),j=r(0),z=r(0),A=r([]),X=r([{brand_name_ar:"ليستر",brand_name_en:"Luster"},{brand_name_ar:"لوكس",brand_name_en:"Lux"},{brand_name_ar:"مارفلوس",brand_name_en:"Marvelous"}]),g=()=>{U.value=!0,B.get("/api/brand",{params:{page:u.value,limit:f.value,search:D.value||void 0}}).then(s=>{P.value=s.data.data.data,E.value=s.data.data.total,R.value=s.data.data.last_page,q.value=s.data.data.first_page_url,J.value=s.data.data.last_page_url,T.value=s.data.data.next_page_url,S.value=s.data.data.prev_page_url,j.value=s.data.data.from,z.value=s.data.data.to,A.value=s.data.data.links,U.value=!1}).catch(s=>{p.add({severity:"error",summary:t("error"),detail:t("brand.loadError"),life:3e3}),U.value=!1,console.error("Error fetching brands:",s)})};de([D,f],()=>{u.value=1,g()});const w=s=>{s>=1&&s<=R.value&&(u.value=s,g())},Y=s=>{f.value=s.value,u.value=1,g()},Z=s=>{F.value=s,x.value=!0},H=()=>{B.delete(`/api/brand/${F.value}`).then(()=>{p.add({severity:"success",summary:t("success"),detail:t("brand.deleteSuccess"),life:3e3}),g(),x.value=!1}).catch(s=>{p.add({severity:"error",summary:t("error"),detail:t("brand.deleteError"),life:3e3})})},K=()=>{B.get("/api/export/brands",{responseType:"blob"}).then(s=>{const a=new Blob([s.data],{type:"text/csv"}),C=window.URL.createObjectURL(a),l=document.createElement("a");l.href=C,l.setAttribute("download","brands_export.csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(C)}).catch(s=>{p.add({severity:"error",summary:t("error"),detail:t("brand.exportError"),life:3e3}),console.error("Error exporting brands:",s)})},ee=()=>{y.value=!0,m.value=null},ae=s=>{m.value=s.files[0]},te=()=>{if(!m.value){p.add({severity:"warn",summary:t("warning"),detail:t("brand.importNoFile"),life:3e3});return}k.value=!0;const s=new FormData;s.append("file",m.value),B.post("/api/import/brands",s).then(()=>{p.add({severity:"success",summary:t("success"),detail:t("brand.importSuccess"),life:3e3}),g(),y.value=!1,k.value=!1,m.value=null}).catch(a=>{p.add({severity:"error",summary:t("error"),detail:t("brand.importError"),life:3e3}),k.value=!1,console.error("Error importing brands:",a)})},le=()=>{N.push({name:"brand-create"})},se=s=>{N.push({name:"brand-edit",params:{id:s}})};return ce(()=>{g()}),(s,a)=>{const C=ue("tooltip");return _(),$("div",ke,[n("div",we,[n("div",Ce,[o(e(me),{class:"mb-4"},{start:i(()=>[n("h2",$e,d(e(t)("brand.managementTitle")),1)]),end:i(()=>[n("div",Ue,[n("span",De,[a[11]||(a[11]=n("i",{class:"pi pi-search"},null,-1)),o(e(ve),{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=l=>D.value=l),placeholder:e(t)("brand.search")},null,8,["modelValue","placeholder"])]),h(o(e(c),{label:e(t)("brand.import"),icon:"pi pi-download",class:"other",onClick:ee},null,8,["label"]),[[v,"import brands"]]),h(o(e(c),{label:e(t)("brand.export"),icon:"pi pi-upload",class:"exite",onClick:K},null,8,["label"]),[[v,"export brands"]]),h(o(e(c),{label:e(t)("brand.new"),icon:"pi pi-plus",class:"p-button-success",onClick:le},null,8,["label"]),[[v,"create brands"]])])]),_:1}),o(e(fe)),n("div",Re,[h((_(),pe(e(G),{ref_key:"dt",ref:Q,value:P.value,selection:I.value,"onUpdate:selection":a[1]||(a[1]=l=>I.value=l),loading:U.value,"data-key":"id",paginator:!1,rows:f.value,filters:W.value,totalRecords:E.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:i(()=>[n("div",Be,[a[12]||(a[12]=n("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),n("p",Ee,d(e(t)("brand.noData")),1)])]),loading:i(()=>[n("div",Ve,[o(e(ge),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:i(()=>[o(e(b),{"selection-mode":"multiple","header-style":"width: 3rem"}),o(e(b),{field:"name_en",header:e(t)("id"),sortable:!0},{body:i(l=>[L(d(l.data.id),1)]),_:1},8,["header"]),o(e(b),{field:"name_en",header:e(t)("brand.nameEn"),sortable:!0},{body:i(l=>[L(d(l.data.name_en),1)]),_:1},8,["header"]),o(e(b),{field:"name_ar",header:e(t)("brand.nameAr"),sortable:!0},{body:i(l=>[L(d(l.data.name_ar),1)]),_:1},8,["header"]),o(e(b),{header:e(t)("actions"),"header-style":"width: 12rem"},{body:i(l=>[h(o(e(c),{icon:"pi pi-pencil",class:"p-detail",onClick:V=>se(l.data.id)},null,8,["onClick"]),[[v,"edit brands"],[C,e(t)("edit"),void 0,{top:!0}]]),h(o(e(c),{icon:"pi pi-trash",class:"p-delete",onClick:V=>Z(l.data.id)},null,8,["onClick"]),[[v,"delete brands"],[C,e(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","selection","loading","rows","filters","totalRecords"])),[[v,"list brands"]]),n("div",Le,[n("div",Ne,[n("span",Pe,d(e(t)("show"))+" "+d(j.value)+" "+d(e(t)("to"))+" "+d(z.value)+" "+d(e(t)("from"))+" "+d(E.value),1)]),n("div",Fe,[n("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:a[2]||(a[2]=l=>w(1))},a[13]||(a[13]=[n("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Ie),n("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!S.value,onClick:a[3]||(a[3]=l=>w(u.value-1))},a[14]||(a[14]=[n("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Te),(_(!0),$(M,null,be(A.value,(l,V)=>(_(),$(M,{key:V},[l.label&&!isNaN(parseInt(l.label))?(_(),$("button",{key:0,class:_e(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:We=>w(parseInt(l.label))},d(l.label),11,Se)):l.label==="..."?(_(),$("span",je,"...")):he("",!0)],64))),128)),n("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!T.value,onClick:a[4]||(a[4]=l=>w(u.value+1))},a[15]||(a[15]=[n("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,ze),n("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===R.value,onClick:a[5]||(a[5]=l=>w(R.value))},a[16]||(a[16]=[n("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ae),o(e(xe),{modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=l=>f.value=l),options:[5,10,20,30],onChange:Y,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),o(e(O),{visible:x.value,"onUpdate:visible":a[8]||(a[8]=l=>x.value=l),style:{width:"450px"},header:e(t)("brand.deleteConfirmTitle"),modal:!0},{footer:i(()=>[o(e(c),{label:e(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=l=>x.value=!1)},null,8,["label"]),o(e(c),{label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:H},null,8,["label"])]),default:i(()=>[n("div",Me,[a[17]||(a[17]=n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),n("span",null,d(e(t)("brand.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(e(O),{visible:y.value,"onUpdate:visible":a[10]||(a[10]=l=>y.value=l),style:{width:"600px"},header:e(t)("brand.importInstructions"),modal:!0},{footer:i(()=>[o(e(ye),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:e(t)("brand.chooseFile"),onSelect:ae,auto:!1,disabled:k.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),o(e(c),{label:e(t)("cancel"),icon:"pi pi-times",class:"p-button-text mt-3",onClick:a[9]||(a[9]=l=>y.value=!1)},null,8,["label"]),o(e(c),{label:e(t)("import"),icon:"pi pi-check",class:"p-button-success",onClick:te,disabled:!m.value,loading:k.value},null,8,["label","disabled","loading"])]),default:i(()=>[n("div",Ge,[n("div",null,[o(e(G),{value:X.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{default:i(()=>[o(e(b),{field:"brand_name_ar",header:e(t)("brand.brandNameAr")},null,8,["header"]),o(e(b),{field:"brand_name_en",header:e(t)("brand.brandNameEn")},null,8,["header"])]),_:1},8,["value"])])])]),_:1},8,["visible","header"])])])])}}},Je=ne(Oe,[["__scopeId","data-v-bdf677bd"]]);export{Je as default};
