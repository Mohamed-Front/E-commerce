import{_ as W,a as q,I as H,u as J,r as n,m as O,o as X,v as i,K as S,b as $,c as Y,d as o,e as a,w as d,x as v,j as Z,g as t,i as B,t as p,p as w}from"./index-a74d0a8d.js";const ee={class:"grid"},te={class:"col-12"},ae={class:"p-4 card shadow-2 border-round"},oe={class:"text-2xl font-bold"},le={class:"flex gap-2"},se={class:"p-input-icon-left"},ne={class:"card shadow-1 surface-0"},re={class:"py-4 text-center"},de={class:"text-xl"},ie={class:"flex py-4 justify-content-center align-items-center"},ce={class:"flex align-items-center justify-content-center"},pe={__name:"index",setup(ue){const k=q(),x=H(),{t:e}=J(),h=n(!0),C=n([]),u=n(!1),P=n(null),D=n(null),I=n({}),f=n("");n(null);const T=n(1),R=n(0),b=n(10),L=n(0),y=()=>{h.value=!0,B.get("/api/model",{params:{page:T.value,per_page:b.value,search:f.value||void 0}}).then(r=>{C.value=r.data.data.data,R.value=r.data.data.total,L.value=r.data.data.last_page,h.value=!1}).catch(r=>{x.add({severity:"error",summary:e("error"),detail:e("model.loadError"),life:3e3}),h.value=!1,console.error("Error fetching models:",r)})};O([T,b,f],()=>{y()});const E=r=>{P.value=r,u.value=!0},M=()=>{B.delete(`/api/model/${P.value}`).then(()=>{x.add({severity:"success",summary:e("success"),detail:e("model.deleteSuccess"),life:3e3}),y(),u.value=!1}).catch(r=>{x.add({severity:"error",summary:e("error"),detail:e("model.deleteError"),life:3e3})})},N=()=>{D.value.exportCSV()},j=()=>{k.push({name:"model-create"})},U=r=>{k.push({name:"model-edit",params:{id:r}})};return X(()=>{y()}),(r,s)=>{const z=i("InputText"),c=i("Button"),A=i("Toolbar"),F=i("Toast"),m=i("Column"),G=i("ProgressSpinner"),K=i("DataTable"),Q=i("Dialog"),_=S("can"),V=S("tooltip");return $(),Y("div",ee,[o("div",te,[o("div",ae,[a(A,{class:"mb-4"},{start:d(()=>[o("h2",oe,p(t(e)("model.managementTitle")),1)]),end:d(()=>[o("div",le,[o("span",se,[s[3]||(s[3]=o("i",{class:"pi pi-search"},null,-1)),a(z,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=l=>f.value=l),placeholder:t(e)("model.search")},null,8,["modelValue","placeholder"])]),v(a(c,{label:t(e)("model.export"),icon:"pi pi-upload",class:"p-export",onClick:N},null,8,["label"]),[[_,"list models"]]),v(a(c,{label:t(e)("model.new"),icon:"pi pi-plus",class:"p-button-success",onClick:j},null,8,["label"]),[[_,"create models"]])])]),_:1}),a(F),o("div",ne,[v(($(),Z(K,{ref_key:"dt",ref:D,value:C.value,loading:h.value,"data-key":"id",paginator:!0,rows:b.value,filters:I.value,totalRecords:R.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[o("div",re,[s[4]||(s[4]=o("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),o("p",de,p(t(e)("model.noData")),1)])]),loading:d(()=>[o("div",ie,[a(G,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[a(m,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(m,{field:"name_ar",header:t(e)("model.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[w(p(l.data.name_ar),1)]),_:1},8,["header"]),a(m,{field:"name_en",header:t(e)("model.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[w(p(l.data.name_en),1)]),_:1},8,["header"]),a(m,{field:"brand.name_en",header:t(e)("model.brand"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>{var g;return[w(p((g=l.data.brand)==null?void 0:g.name_en),1)]}),_:1},8,["header"]),a(m,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:d(l=>[v(a(c,{icon:"pi pi-pencil",class:"p-detail",onClick:g=>U(l.data.id)},null,8,["onClick"]),[[_,"edit models"],[V,t(e)("edit"),void 0,{top:!0}]]),v(a(c,{icon:"pi pi-trash",class:"mx-2 p-delete",onClick:g=>E(l.data.id)},null,8,["onClick"]),[[_,"delete models"],[V,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[_,"list models"]])]),a(Q,{visible:u.value,"onUpdate:visible":s[2]||(s[2]=l=>u.value=l),style:{width:"450px"},header:t(e)("model.deleteConfirmTitle"),modal:!0},{footer:d(()=>[a(c,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:s[1]||(s[1]=l=>u.value=!1)},null,8,["label"]),a(c,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:M},null,8,["label"])]),default:d(()=>[o("div",ce,[s[5]||(s[5]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,p(t(e)("model.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},_e=W(pe,[["__scopeId","data-v-136e68d4"]]);export{_e as default};
