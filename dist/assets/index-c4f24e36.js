import{_ as O,u as X,f as Y,G as Z,r as n,w as ee,o as te,h as c,i as B,b as $,c as ae,j as s,e as a,k as l,l as v,m as oe,B as t,a as L,t as p,n as b,x as se,y as re}from"./index-12f18b3e.js";const C=y=>(se("data-v-fd2d58ed"),y=y(),re(),y),le={class:"grid"},ne={class:"col-12"},ce={class:"card p-4 shadow-2 border-round"},ie={class:"text-2xl font-bold"},de={class:"flex gap-2"},pe={class:"p-input-icon-left"},ue=C(()=>s("i",{class:"pi pi-search"},null,-1)),_e={class:"card shadow-1 surface-0"},ge={class:"text-center py-4"},me=C(()=>s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),ve={class:"text-xl"},ye={class:"flex justify-content-center align-items-center py-4"},he={class:"flex align-items-center justify-content-center"},fe=C(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),be={setup(y){const T=X(),x=Y(),{t:e}=Z(),h=n(!0),P=n([]),g=n(!1),D=n(null),S=n(null),E=n({}),f=n("");n(null);const I=n(1),R=n(0),k=n(10),N=n(0),w=()=>{h.value=!0,L.get("/api/category",{params:{page:I.value,per_page:k.value,search:f.value||void 0}}).then(r=>{P.value=r.data.data.data,R.value=r.data.data.total,N.value=r.data.data.last_page,h.value=!1}).catch(r=>{x.add({severity:"error",summary:e("error"),detail:e("category.loadError"),life:3e3}),h.value=!1,console.error("Error fetching categories:",r)})};ee([I,k,f],()=>{w()});const M=r=>{D.value=r,g.value=!0},j=()=>{L.delete(`/api/category/${D.value}`).then(()=>{x.add({severity:"success",summary:e("success"),detail:e("category.deleteSuccess"),life:3e3}),w(),g.value=!1}).catch(r=>{x.add({severity:"error",summary:e("error"),detail:e("category.deleteError"),life:3e3})})},G=()=>{S.value.exportCSV()},U=()=>{T.push({name:"category-create"})},z=r=>{T.push({name:"category-update",params:{id:r}})},A=r=>r===1?"success":"info";return te(()=>{w()}),(r,u)=>{const F=c("InputText"),_=c("Button"),Q=c("Toolbar"),W=c("Toast"),i=c("Column"),q=c("Tag"),H=c("ProgressSpinner"),J=c("DataTable"),K=c("Dialog"),m=B("can"),V=B("tooltip");return $(),ae("div",le,[s("div",ne,[s("div",ce,[a(Q,{class:"mb-4"},{start:l(()=>[s("h2",ie,p(t(e)("category.managementTitle")),1)]),end:l(()=>[s("div",de,[s("span",pe,[ue,a(F,{modelValue:f.value,"onUpdate:modelValue":u[0]||(u[0]=o=>f.value=o),placeholder:t(e)("category.search")},null,8,["modelValue","placeholder"])]),v(a(_,{label:t(e)("category.export"),icon:"pi pi-upload",class:"p-export",onClick:G},null,8,["label"]),[[m,"list categories"]]),v(a(_,{label:t(e)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:U},null,8,["label"]),[[m,"create categories"]])])]),_:1}),a(W),s("div",_e,[v(($(),oe(J,{ref_key:"dt",ref:S,value:P.value,loading:h.value,"data-key":"id",paginator:!0,rows:k.value,filters:E.value,totalRecords:R.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:l(()=>[s("div",ge,[me,s("p",ve,p(t(e)("category.noData")),1)])]),loading:l(()=>[s("div",ye,[a(H,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:l(()=>[a(i,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(i,{field:"name_en",header:t(e)("category.nameEn"),sortable:!0},{body:l(o=>[b(p(o.data.name_en),1)]),_:1},8,["header"]),a(i,{field:"name_ar",header:t(e)("category.nameAr"),sortable:!0},{body:l(o=>[b(p(o.data.name_ar),1)]),_:1},8,["header"]),a(i,{field:"is_market",header:t(e)("category.marketType"),sortable:!0},{body:l(o=>[a(q,{value:o.data.is_market?t(e)("category.market"):t(e)("category.nonMarket"),severity:A(o.data.is_market)},null,8,["value","severity"])]),_:1},8,["header"]),a(i,{field:"parent.name_en",header:t(e)("category.parent"),sortable:!0},{body:l(o=>{var d;return[b(p(((d=o.data.parent)==null?void 0:d.name_en)||t(e)("category.noParent")),1)]}),_:1},8,["header"]),a(i,{field:"store.name_en",header:t(e)("category.store"),sortable:!0},{body:l(o=>{var d;return[b(p(((d=o.data.store)==null?void 0:d.name_en)||""),1)]}),_:1},8,["header"]),a(i,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:l(o=>[v(a(_,{icon:"pi pi-pencil",class:"p-detail",onClick:d=>z(o.data.id)},null,8,["onClick"]),[[m,"edit categories"],[V,t(e)("edit"),void 0,{top:!0}]]),v(a(_,{icon:"pi pi-trash",class:"p-delete mx-2",onClick:d=>M(o.data.id)},null,8,["onClick"]),[[m,"delete categories"],[V,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[m,"list categories"]])]),a(K,{visible:g.value,"onUpdate:visible":u[2]||(u[2]=o=>g.value=o),style:{width:"450px"},header:t(e)("category.deleteConfirmTitle"),modal:!0},{footer:l(()=>[a(_,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:u[1]||(u[1]=o=>g.value=!1)},null,8,["label"]),a(_,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:j},null,8,["label"])]),default:l(()=>[s("div",he,[fe,s("span",null,p(t(e)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},ke=O(be,[["__scopeId","data-v-fd2d58ed"]]);export{ke as default};
