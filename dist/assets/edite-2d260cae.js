import{_ as H,k as K,u as O,K as q,j as G,r as p,o as J,a2 as y,M as Q,a as i,c,z as W,f as a,t as n,e as o,h as _,w as E,v as h,F as X,i as N,N as T,g as B,x as Y}from"./index-573f064c.js";const Z={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ee={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={class:"space-y-2"},se={for:"name_en",class:"block text-sm font-medium text-gray-700"},re={key:0,class:"text-red-500 text-xs"},oe={class:"space-y-2"},ne={for:"name_ar",class:"block text-sm font-medium text-gray-700"},le={key:0,class:"text-red-500 text-xs"},de={class:"md:col-span-2 space-y-2"},ie={class:"block text-sm font-medium text-gray-700"},ce={class:"flex justify-center"},ue={key:0,class:"p-4"},pe={class:"relative group"},me=["src"],_e={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},ge={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},be={class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition cursor-pointer"},ve={class:"mt-2 text-center text-sm text-gray-500"},fe={key:1,class:"p-8 flex flex-col items-center justify-center"},xe={class:"text-sm text-center text-gray-600 mb-1"},ye={class:"text-blue-500 font-medium"},he={class:"text-xs text-gray-400"},we={class:"pt-4 flex justify-center space-x-4"},ke={key:0},De={key:1,class:"pi pi-spinner pi-spin"},Te={__name:"edite",setup(Ve){const U=K(),w=O(),k=q(),{t}=G(),g=p(),l=p(!1),v=p(null),m=p(null),b=p(!1),V=p(U.params.id),u=p({name_en:"",name_ar:""}),A=async()=>{var s,e;try{l.value=!0;const r=await N.get(`/api/brand/${V.value}`);u.value={name_en:r.data.data.name_en,name_ar:r.data.data.name_ar},r.data.data.image&&(m.value=r.data.data.image)}catch(r){console.error("Error fetching brand:",r),k.add({severity:"error",summary:t("error"),detail:((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.message)||t("brand.loadError"),life:3e3}),w.push({name:"brand"})}finally{l.value=!1}},R=s=>{s.preventDefault(),b.value=!0},L=()=>{b.value=!1},M=s=>{v.value=s;const e=new FileReader;e.onload=r=>{m.value=r.target.result},e.readAsDataURL(s),b.value=!1},D=s=>{var r,d,f;const e=((r=s.target.files)==null?void 0:r[0])||((f=(d=s.dataTransfer)==null?void 0:d.files)==null?void 0:f[0]);e&&e.type.match("image.*")&&M(e)},P=()=>{v.value=null,m.value=null},S=async()=>{var e,r;l.value=!0;const s=new FormData;s.append("name_en",u.value.name_en),s.append("name_ar",u.value.name_ar),s.append("_method","PATCH"),v.value?s.append("image",v.value):m.value||s.append("remove_image","true");try{await N.post(`/api/brand/${V.value}`,s),w.push({name:"brand"}),k.add({severity:"success",summary:t("success"),detail:t("brand.updateSuccess"),life:3e3})}catch(d){console.error("Error updating brand:",d),k.add({severity:"error",summary:t("error"),detail:((r=(e=d.response)==null?void 0:e.data)==null?void 0:r.message)||t("brand.updateError"),life:3e3})}finally{l.value=!1}};return J(()=>{A()}),(s,e)=>{const r=y("InputText"),d=y("Button"),f=y("Form"),$=y("Toast"),z=Q("can");return i(),c(X,null,[W((i(),c("div",Z,[a("h1",ee,n(o(t)("brand.editTitle")),1),_(f,{ref_key:"form",ref:g,onSubmit:h(S,["prevent"]),class:"space-y-6"},{default:E(()=>{var C,j,F,I;return[a("div",ae,[a("div",te,[a("label",se,[T(n(o(t)("brand.nameEn"))+" ",1),e[3]||(e[3]=a("span",{class:"text-red-500"},"*",-1))]),_(r,{id:"name_en",modelValue:u.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=x=>u.value.name_en=x),placeholder:o(t)("brand.enterNameEn"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(j=(C=g.value)==null?void 0:C.errors)!=null&&j.name_en?(i(),c("small",re,n(g.value.errors.name_en[0]),1)):B("",!0)]),a("div",oe,[a("label",ne,[T(n(o(t)("brand.nameAr"))+" ",1),e[4]||(e[4]=a("span",{class:"text-red-500"},"*",-1))]),_(r,{id:"name_ar",modelValue:u.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=x=>u.value.name_ar=x),placeholder:o(t)("brand.enterNameAr"),dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(I=(F=g.value)==null?void 0:F.errors)!=null&&I.name_ar?(i(),c("small",le,n(g.value.errors.name_ar[0]),1)):B("",!0)]),a("div",de,[a("label",ie,n(o(t)("brand.logo")),1),a("div",ce,[a("label",{onDragover:h(R,["prevent"]),onDragleave:L,onDrop:h(D,["prevent"]),class:Y([{"border-blue-500 bg-blue-50":b.value,"border-gray-300":!b.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[a("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32),m.value?(i(),c("div",ue,[a("div",pe,[a("img",{src:m.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,me),a("div",_e,[a("div",ge,[a("button",{type:"button",onClick:h(P,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[5]||(e[5]=[a("i",{class:"pi pi-trash text-sm"},null,-1)])),a("label",be,[e[6]||(e[6]=a("i",{class:"pi pi-pencil text-sm"},null,-1)),a("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32)])])])]),a("p",ve,n(o(t)("brand.changeLogo")),1)])):(i(),c("div",fe,[e[7]||(e[7]=a("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[a("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),a("p",xe,[a("span",ye,n(o(t)("brand.upload")),1),T(" "+n(o(t)("brand.orDragDrop")),1)]),a("p",he,n(o(t)("brand.fileTypes")),1)]))],34)])])]),a("div",we,[_(d,{type:"button",label:o(t)("cancel"),icon:"pi pi-times",onClick:e[2]||(e[2]=x=>o(w).go(-1)),class:"px-6 mx-2 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:l.value},null,8,["label","disabled"]),_(d,{type:"submit",label:o(t)("brand.update"),icon:"pi pi-check",loading:l.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:l.value},{default:E(()=>[l.value?(i(),c("i",De)):(i(),c("span",ke,n(o(t)("brand.update")),1))]),_:1},8,["label","loading","disabled"])])]}),_:1},512)])),[[z,"edit brands"]]),_($)],64)}}},je=H(Te,[["__scopeId","data-v-08f52d23"]]);export{je as default};
