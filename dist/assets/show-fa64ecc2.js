import{_ as E,j as N,k as B,u as C,G as T,r as y,o as V,a as u,c as p,f as s,h as l,e,w as n,t as o,i as w,Q as j,H as q,V as b,p as d,al as F,a5 as G,ak as k,a4 as P,a3 as _}from"./index-0e13589d.js";const R={class:"grid"},S={class:"col-12"},H={class:"card p-4 shadow-2 border-round"},M={key:0,class:"flex justify-content-center align-items-center py-8"},O={key:1},Q={class:"flex justify-content-between align-items-center mb-5"},W={class:"flex align-items-center gap-3"},z={class:"text-2xl font-bold"},A={class:"text-500"},J={class:"grid"},K={class:"col-12 lg:col-6"},U={class:"text-lg font-semibold mb-3 text-primary"},X={class:"space-y-2"},Y={class:"text-xl font-bold text-primary"},Z={class:"col-12 lg:col-6"},ee={class:"text-lg font-semibold mb-3 text-primary"},te={class:"space-y-3"},se={class:"flex align-items-center gap-2"},oe={class:"text-xl font-bold"},ae=["src"],re={key:1,class:"text-500"},le={class:"text-center py-6 text-600"},ie={class:"text-lg font-medium"},ne={key:2,class:"text-center py-8"},de={class:"text-xl font-medium text-700"},ce={__name:"show",setup(ue){const{t}=N(),$=B(),I=C(),m=T(),a=y(null),v=y(!0),h=y(!1),L=()=>{v.value=!0,w.get(`/api/order/${$.params.id}`).then(r=>{r.data&&r.data.data?a.value=r.data.data:(m.add({severity:"warn",summary:t("warning"),detail:t("order.noData"),life:3e3}),a.value=null)}).catch(r=>{m.add({severity:"error",summary:t("error"),detail:t("order.loadError"),life:3e3}),console.error("Error fetching order data:",r)}).finally(()=>{v.value=!1})},D=()=>{var r;(r=a.value)!=null&&r.id&&(h.value=!0,w.post("/api/invoice",{order_id:a.value.id}).then(c=>{var i;m.add({severity:"success",summary:t("success"),detail:t("order.invoiceSuccess"),life:5e3}),(i=c.data)!=null&&i.invoice_url&&window.open(c.data.invoice_url,"_blank")}).catch(c=>{m.add({severity:"error",summary:t("error"),detail:t("order.invoiceError"),life:5e3}),console.error("Error generating invoice:",c)}).finally(()=>{h.value=!1}))},f=()=>{I.push({name:"orders"})};return V(()=>{L()}),(r,c)=>(u(),p("div",R,[s("div",S,[s("div",H,[l(e(j)),v.value?(u(),p("div",M,[l(e(q),{style:{width:"60px",height:"60px"},strokeWidth:"5"})])):a.value?(u(),p("div",O,[s("div",Q,[l(e(b),{label:e(t)("common.back"),icon:"pi pi-arrow-left",onClick:f,class:"p-button-text p-button-secondary"},null,8,["label"]),l(e(b),{label:e(t)("order.generateInvoice"),icon:"pi pi-file-pdf",onClick:D,loading:h.value,class:"p-button-success"},null,8,["label","loading"])]),l(e(k),{class:"mb-5"},{title:n(()=>[s("div",W,[s("span",z,o(e(t)("order.detailTitle")),1),s("small",A,"ID: "+o(a.value.id),1)])]),content:n(()=>[s("div",J,[s("div",K,[s("h4",U,o(e(t)("order.financialSummary")),1),s("div",X,[s("p",null,[s("strong",null,o(e(t)("order.subTotalPrice"))+":",1),d(" "+o(a.value.sub_total_price)+" "+o(r.$t("currencyLabel")),1)]),s("p",null,[s("strong",null,o(e(t)("order.taxFee"))+":",1),d(" "+o(a.value.tax_fee)+" "+o(r.$t("currencyLabel")),1)]),s("p",null,[s("strong",null,o(e(t)("order.serviceFee"))+":",1),d(" "+o(a.value.service_fee)+" "+o(r.$t("currencyLabel")),1)]),s("p",null,[s("strong",null,o(e(t)("order.deliveryFee"))+":",1),d(" "+o(a.value.delivery_fee)+" "+o(r.$t("currencyLabel")),1)]),s("p",null,[s("strong",null,o(e(t)("order.coupon"))+":",1),d(" -"+o(a.value.coupon)+" "+o(r.$t("currencyLabel")),1)]),l(e(F),{class:"my-3"}),s("p",Y,o(e(t)("order.totalPrice"))+": "+o(a.value.total_price)+" "+o(r.$t("currencyLabel")),1)])]),s("div",Z,[s("h4",ee,o(e(t)("order.generalInfo")),1),s("div",te,[s("p",null,[s("strong",null,o(e(t)("order.userId"))+":",1),d(" "+o(a.value.user_id),1)]),s("p",se,[s("strong",null,o(e(t)("order.status"))+":",1),l(e(G),{value:a.value.status===0?e(t)("order.pending"):e(t)("order.completed"),severity:a.value.status===0?"warning":"success",class:"font-medium"},null,8,["value","severity"])])])])])]),_:1}),l(e(k),null,{title:n(()=>[s("h3",oe,o(e(t)("order.items")),1)]),content:n(()=>[l(e(P),{value:a.value.order_items,responsiveLayout:"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm",pt:{table:{class:"text-sm"}}},{empty:n(()=>[s("div",le,[c[0]||(c[0]=s("i",{class:"pi pi-shopping-cart text-4xl mb-3 opacity-30"},null,-1)),s("p",ie,o(e(t)("order.noItems")),1)])]),default:n(()=>[l(e(_),{field:"id",header:e(t)("order.itemId"),sortable:"",style:{width:"10%"}},{body:n(({data:i})=>[d(o(i.id),1)]),_:1},8,["header"]),l(e(_),{header:e(t)("order.productName"),sortable:"",style:{width:"35%"}},{body:n(({data:i})=>[d(o(i.product.name_en||i.product.name||e(t)("order.noName")),1)]),_:1},8,["header"]),l(e(_),{field:"quantity",header:e(t)("order.quantity"),sortable:"",style:{width:"12%"}},{body:n(({data:i})=>[d(o(i.quantity),1)]),_:1},8,["header"]),l(e(_),{field:"price",header:e(t)("order.price"),sortable:"",style:{width:"15%"}},{body:n(({data:i})=>[d(o(i.price)+" "+o(r.$t("currencyLabel")),1)]),_:1},8,["header"]),l(e(_),{header:e(t)("order.image"),style:{width:"15%"}},{body:n(({data:i})=>{var g,x;return[(x=(g=i.product.media)==null?void 0:g[0])!=null&&x.url?(u(),p("img",{key:0,src:i.product.media[0].url,alt:"Product",class:"product-image shadow-2 border-round"},null,8,ae)):(u(),p("span",re,o(e(t)("order.noImage")),1))]}),_:1},8,["header"])]),_:1},8,["value"])]),_:1})])):(u(),p("div",ne,[c[1]||(c[1]=s("i",{class:"pi pi-exclamation-triangle text-6xl text-red-500 mb-4 opacity-70"},null,-1)),s("p",de,o(e(t)("order.noData")),1),l(e(b),{label:e(t)("common.back"),icon:"pi pi-arrow-left",onClick:f,class:"mt-4 p-button-outlined"},null,8,["label"])]))])])]))}},_e=E(ce,[["__scopeId","data-v-16b4574d"]]);export{_e as default};
