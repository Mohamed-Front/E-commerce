import{a as W,I as q,u as H,r as l,m as J,o as O,v as c,K as R,b as V,c as X,d as s,e as a,w as n,x as m,j as Y,g as t,i as S,t as b,p as $}from"./index-a74d0a8d.js";const Z={class:"grid"},ee={class:"col-12"},te={class:"p-4 card shadow-2 border-round"},ae={class:"text-2xl font-bold"},se={class:"flex gap-2"},oe={class:"p-input-icon-left"},le={class:"card shadow-1 surface-0"},re={class:"py-4 text-center"},ie={class:"text-xl"},ne={class:"flex py-4 justify-content-center align-items-center"},ce={class:"flex align-items-center justify-content-center"},pe={__name:"index",setup(de){const y=W(),f=q(),{t:e}=H(),v=l(!0),w=l([]),u=l(!1),k=l(null),C=l(null),B=l({}),_=l("");l(null);const P=l(1),D=l(0),g=l(10),L=l(0),x=()=>{v.value=!0,S.get("/api/attribute",{params:{page:P.value,per_page:g.value,search:_.value||void 0}}).then(r=>{w.value=r.data.data.data,D.value=r.data.data.total,L.value=r.data.data.last_page,v.value=!1}).catch(r=>{f.add({severity:"error",summary:e("error"),detail:e("attribute.loadError"),life:3e3}),v.value=!1,console.error("Error fetching attributes:",r)})};J([P,g,_],()=>{x()});const E=r=>{k.value=r,u.value=!0},I=()=>{S.delete(`/api/attribute/${k.value}`).then(()=>{f.add({severity:"success",summary:e("success"),detail:e("attribute.deleteSuccess"),life:3e3}),x(),u.value=!1}).catch(r=>{f.add({severity:"error",summary:e("error"),detail:e("attribute.deleteError"),life:3e3})})},N=()=>{C.value.exportCSV()},A=()=>{y.push({name:"attribute-create"})},j=r=>{y.push({name:"attribute-update",params:{id:r}})};return O(()=>{x()}),(r,o)=>{const M=c("InputText"),d=c("Button"),U=c("Toolbar"),z=c("Toast"),h=c("Column"),F=c("ProgressSpinner"),G=c("DataTable"),K=c("Dialog"),p=R("can"),T=R("tooltip");return V(),X("div",Z,[s("div",ee,[s("div",te,[a(U,{class:"mb-4"},{start:n(()=>[s("h2",ae,b(t(e)("attribute.managementTitle")),1)]),end:n(()=>[s("div",se,[s("span",oe,[o[3]||(o[3]=s("i",{class:"pi pi-search"},null,-1)),a(M,{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=i=>_.value=i),placeholder:t(e)("attribute.search")},null,8,["modelValue","placeholder"])]),m(a(d,{label:t(e)("attribute.export"),icon:"pi pi-upload",class:"p-export",onClick:N},null,8,["label"]),[[p,"list attributes"]]),m(a(d,{label:t(e)("attribute.new"),icon:"pi pi-plus",class:"p-button-success",onClick:A},null,8,["label"]),[[p,"create attributes"]])])]),_:1}),a(z),s("div",le,[m((V(),Y(G,{ref_key:"dt",ref:C,value:w.value,loading:v.value,"data-key":"id",paginator:!0,rows:g.value,filters:B.value,totalRecords:D.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[s("div",re,[o[4]||(o[4]=s("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),s("p",ie,b(t(e)("attribute.noData")),1)])]),loading:n(()=>[s("div",ne,[a(F,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[a(h,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(h,{field:"name_ar",header:t(e)("attribute.nameAr"),sortable:!0,"header-style":"width:20%; min-width:10rem;"},{body:n(i=>[$(b(i.data.name_ar),1)]),_:1},8,["header"]),a(h,{field:"name_en",header:t(e)("attribute.nameEn"),sortable:!0,"header-style":"width:20%; min-width:10rem;"},{body:n(i=>[$(b(i.data.name_en),1)]),_:1},8,["header"]),a(h,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:n(i=>[m(a(d,{icon:"pi pi-pencil",class:"p-detail",onClick:Q=>j(i.data.id)},null,8,["onClick"]),[[p,"edit attributes"],[T,t(e)("edit"),void 0,{top:!0}]]),m(a(d,{icon:"pi pi-trash",class:"mx-2 p-delete",onClick:Q=>E(i.data.id)},null,8,["onClick"]),[[p,"delete attributes"],[T,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[p,"list attributes"]])]),a(K,{visible:u.value,"onUpdate:visible":o[2]||(o[2]=i=>u.value=i),style:{width:"450px"},header:t(e)("attribute.deleteConfirmTitle"),modal:!0},{footer:n(()=>[a(d,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:o[1]||(o[1]=i=>u.value=!1)},null,8,["label"]),a(d,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:I},null,8,["label"])]),default:n(()=>[s("div",ce,[o[5]||(o[5]=s("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,b(t(e)("attribute.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{pe as default};
