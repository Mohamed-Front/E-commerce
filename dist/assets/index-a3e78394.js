import{u as Q,E as W,B as q,r,k as K,j as O,H as i,I as V,o as B,c as X,a as s,b as a,w as n,J as _,g as Y,e as t,D as S,t as c,l as g}from"./index-e0fe619d.js";const Z={class:"grid"},ee={class:"col-12"},te={class:"p-4 card shadow-2 border-round"},ae={class:"text-2xl font-bold"},oe={class:"flex gap-2"},se={class:"p-input-icon-left"},le={class:"card shadow-1 surface-0"},re={class:"py-4 text-center"},ne={class:"text-xl"},de={class:"flex py-4 justify-content-center align-items-center"},ie={class:"flex align-items-center justify-content-center"},pe={__name:"index",setup(ce){const w=Q(),b=W(),{t:e}=q(),v=r(!0),k=r([]),m=r(!1),P=r(null),C=r(null),$=r({}),f=r("");r(null);const D=r(1),T=r(0),y=r(10),E=r(0),x=()=>{v.value=!0,S.get("/api/product",{params:{page:D.value,per_page:y.value,search:f.value||void 0}}).then(d=>{k.value=d.data.data.data,T.value=d.data.data.total,E.value=d.data.data.last_page,v.value=!1}).catch(d=>{b.add({severity:"error",summary:e("error"),detail:e("product.loadError"),life:3e3}),v.value=!1,console.error("Error fetching products:",d)})};K([D,y,f],()=>{x()});const L=d=>{P.value=d,m.value=!0},I=()=>{S.delete(`/api/product/${P.value}`).then(()=>{b.add({severity:"success",summary:e("success"),detail:e("product.deleteSuccess"),life:3e3}),x(),m.value=!1}).catch(d=>{b.add({severity:"error",summary:e("error"),detail:e("product.deleteError"),life:3e3})})},N=()=>{C.value.exportCSV()},j=()=>{w.push({name:"product-create"})},M=d=>{w.push({name:"product-update",params:{id:d}})};return O(()=>{x()}),(d,l)=>{const U=i("InputText"),u=i("Button"),z=i("Toolbar"),A=i("Toast"),p=i("Column"),F=i("ProgressSpinner"),G=i("DataTable"),H=i("Dialog"),h=V("can"),R=V("tooltip");return B(),X("div",Z,[s("div",ee,[s("div",te,[a(z,{class:"mb-4"},{start:n(()=>[s("h2",ae,c(t(e)("product.managementTitle")),1)]),end:n(()=>[s("div",oe,[s("span",se,[l[3]||(l[3]=s("i",{class:"pi pi-search"},null,-1)),a(U,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=o=>f.value=o),placeholder:t(e)("product.search")},null,8,["modelValue","placeholder"])]),_(a(u,{label:t(e)("product.export"),icon:"pi pi-upload",class:"p-export",onClick:N},null,8,["label"]),[[h,"list products"]]),_(a(u,{label:t(e)("product.new"),icon:"pi pi-plus",class:"p-button-success",onClick:j},null,8,["label"]),[[h,"create products"]])])]),_:1}),a(A),s("div",le,[_((B(),Y(G,{ref_key:"dt",ref:C,value:k.value,loading:v.value,"data-key":"id",paginator:!0,rows:y.value,filters:$.value,totalRecords:T.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,20,30],"current-page-report-template":`${t(e)("show")} {first} ${t(e)("to")} {last} ${t(e)("from")} {totalRecords}`,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[s("div",re,[l[4]||(l[4]=s("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),s("p",ne,c(t(e)("product.noData")),1)])]),loading:n(()=>[s("div",de,[a(F,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[a(p,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(p,{field:"name_ar",header:t(e)("product.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(o=>[g(c(o.data.name_ar),1)]),_:1},8,["header"]),a(p,{field:"name_en",header:t(e)("product.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(o=>[g(c(o.data.name_en),1)]),_:1},8,["header"]),a(p,{field:"base_price",header:t(e)("product.basePrice"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(o=>[g(c(o.data.base_price),1)]),_:1},8,["header"]),a(p,{field:"is_displayed",header:t(e)("product.isDisplayed"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(o=>[g(c(o.data.is_displayed?t(e)("yes"):t(e)("no")),1)]),_:1},8,["header"]),a(p,{header:t(e)("actions"),headerStyle:"width: 12rem"},{body:n(o=>[_(a(u,{icon:"pi pi-pencil",class:"p-detail",onClick:J=>M(o.data.id)},null,8,["onClick"]),[[h,"edit products"],[R,t(e)("edit"),void 0,{top:!0}]]),_(a(u,{icon:"pi pi-trash",class:"mx-2 p-delete",onClick:J=>L(o.data.id)},null,8,["onClick"]),[[h,"delete products"],[R,t(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords","current-page-report-template"])),[[h,"list products"]])]),a(H,{visible:m.value,"onUpdate:visible":l[2]||(l[2]=o=>m.value=o),style:{width:"450px"},header:t(e)("product.deleteConfirmTitle"),modal:!0},{footer:n(()=>[a(u,{label:t(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[1]||(l[1]=o=>m.value=!1)},null,8,["label"]),a(u,{label:t(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:I},null,8,["label"])]),default:n(()=>[s("div",ie,[l[5]||(l[5]=s("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,c(t(e)("product.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{pe as default};
