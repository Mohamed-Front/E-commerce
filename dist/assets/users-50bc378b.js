import{_ as ne,u as ie,i as re,j as de,r as i,k as ce,w as ue,o as pe,l as u,m as j,a as p,c as v,b as s,h as l,q as d,s as C,v as z,t as r,x as a,F as A,e as G,E as _e,y as he,g as q,z as I,n as ve,p as me,f as ge}from"./index-5f332ad0.js";const m=T=>(me("data-v-681a2c10"),T=T(),ge(),T),be={class:"grid"},fe={class:"col-12"},ye={class:"card p-4 shadow-2 border-round"},xe={class:"text-2xl font-bold"},we={class:"flex gap-2"},ke={class:"p-input-icon-left"},Ce=m(()=>s("i",{class:"pi pi-search"},null,-1)),Te={class:"card shadow-1 surface-0"},De={key:0},Ve={key:1},Se={class:"text-center py-4"},$e=m(()=>s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Ie={class:"text-xl"},Be={class:"flex justify-content-center align-items-center py-4"},Ne={key:0,class:"p-paginator p-component p-unselectable-text mt-3"},Me={class:"p-paginator-left-content"},Re={class:"p-paginator-current"},Ee={class:"p-paginator-right-content"},Pe={class:"p-paginator-pages"},Ue=["disabled"],Fe=m(()=>s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),je=[Fe],ze=["disabled"],Ae=m(()=>s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Ge=[Ae],qe=["onClick"],Le=["disabled"],Oe=m(()=>s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Qe=[Oe],We=["disabled"],He=m(()=>s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Je=[He],Ke={class:"p-paginator-rpp-options"},Xe={class:"flex align-items-center justify-content-center"},Ye=m(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Ze={setup(T){const{t}=ie(),B=re(),S=de(),D=i(!0),N=i(""),M=i(null),b=i(!1);i(null);const R=i(null),E=i({}),V=i(""),c=i(1),$=i(0),f=i(10),_=i(0),P=i(0),U=i(0),L=()=>{R.value.exportCSV()},O=o=>{N.value=o,b.value=!0},Q=()=>{q.delete(`/api/user/${N.value}`).then(()=>{y(),b.value=!1,S.add({severity:"success",summary:t("success"),detail:t("user.deleteSuccess"),life:3e3})}).catch(o=>{S.add({severity:"error",summary:t("error"),detail:t("user.deleteError"),life:3e3})})},W=()=>{E.value={global:{value:null,matchMode:he.CONTAINS}}};ce(()=>{W()});const y=()=>{D.value=!0,q.get("/api/user",{params:{page:c.value,limit:f.value,search:V.value}}).then(o=>{D.value=!1,M.value=o.data.data,$.value=o.data.pagination.total,_.value=o.data.pagination.last_page,P.value=o.data.pagination.from,U.value=o.data.pagination.to}).catch(o=>{D.value=!1,S.add({severity:"error",summary:t("error"),detail:t("user.loadError"),life:3e3}),console.error("Error fetching data:",o)})};ue(V,o=>{c.value=1,y()});const x=o=>{o>=1&&o<=_.value&&(c.value=o,y())},H=o=>{f.value=o,c.value=1,y()};pe(()=>{y()});const J=()=>{B.push({name:"user-create"})},K=o=>{B.push({name:"user-edit",params:{id:o}})};return(o,n)=>{const X=u("InputText"),g=u("Button"),Y=u("Toolbar"),Z=u("Toast"),h=u("Column"),ee=u("Tag"),te=u("Chip"),se=u("ProgressSpinner"),ae=u("DataTable"),oe=u("Dropdown"),le=u("Dialog"),w=j("can"),F=j("tooltip");return p(),v("div",be,[s("div",fe,[s("div",ye,[l(Y,{class:"mb-4"},{start:d(()=>[s("h2",xe,r(a(t)("user.users")),1)]),end:d(()=>[s("div",we,[s("span",ke,[Ce,l(X,{modelValue:V.value,"onUpdate:modelValue":n[0]||(n[0]=e=>V.value=e),placeholder:a(t)("user.search")},null,8,["modelValue","placeholder"])]),C(l(g,{label:a(t)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:L},null,8,["label"]),[[w,"export users"]]),C(l(g,{label:a(t)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:J},null,8,["label"]),[[w,"create users"]])])]),_:1}),l(Z),s("div",Te,[C((p(),z(ae,{ref_key:"dt",ref:R,value:M.value,loading:D.value,"data-key":"id",paginator:!1,rows:f.value,filters:E.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",Se,[$e,s("p",Ie,r(a(t)("user.noData")),1)])]),loading:d(()=>[s("div",Be,[l(se,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[l(h,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(h,{field:"name",header:a(t)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[I(r(e.data.name),1)]),_:1},8,["header"]),l(h,{field:"email",header:a(t)("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[I(r(e.data.email),1)]),_:1},8,["header"]),l(h,{field:"phone",header:a(t)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[I(r(e.data.phone),1)]),_:1},8,["header"]),l(h,{field:"type_description",header:a(t)("user.type"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[l(ee,{value:e.data.type_description,severity:{Admin:"info",Customer:"success",Guest:"danger"}[e.data.type_description]||"warning"},null,8,["value","severity"])]),_:1},8,["header"]),l(h,{field:"roles",header:a(t)("user.roles"),"header-style":"width:20%; min-width:15rem;"},{body:d(e=>[e.data.roles&&e.data.roles.length?(p(),v("div",De,[(p(!0),v(A,null,G(e.data.roles,k=>(p(),z(te,{key:k.id,label:k.name,class:"mr-2 mb-2"},null,8,["label"]))),128))])):(p(),v("span",Ve,"-"))]),_:1},8,["header"]),l(h,{header:a(t)("actions"),"header-style":"min-width:10rem;"},{body:d(e=>[C(l(g,{icon:"pi pi-pencil",class:"p-detail",onClick:k=>K(e.data.id)},null,8,["onClick"]),[[w,"edit users"],[F,a(t)("edit"),void 0,{top:!0}]]),C(l(g,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:k=>O(e.data.id)},null,8,["onClick"]),[[w,"delete users"],[F,a(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[w,"list users"]]),_.value>0?(p(),v("div",Ne,[s("div",Me,[s("span",Re,r(a(t)("showing"))+" "+r(P.value)+" "+r(a(t)("to"))+" "+r(U.value)+" "+r(a(t)("of"))+" "+r($.value)+" "+r(a(t)("entries")),1)]),s("div",Ee,[s("span",Pe,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:n[1]||(n[1]=e=>x(1))},je,8,Ue),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:c.value===1,onClick:n[2]||(n[2]=e=>x(c.value-1))},Ge,8,ze),(p(!0),v(A,null,G(_.value,e=>(p(),v("button",{key:e,class:ve(["p-paginator-page p-paginator-element p-link",{"p-highlight":c.value===e}]),onClick:k=>x(e)},r(e),11,qe))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:c.value===_.value,onClick:n[3]||(n[3]=e=>x(c.value+1))},Qe,8,Le),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===_.value,onClick:n[4]||(n[4]=e=>x(_.value))},Je,8,We)]),s("span",Ke,[l(oe,{modelValue:f.value,"onUpdate:modelValue":n[5]||(n[5]=e=>f.value=e),options:[5,10,20,30],onChange:H,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):_e("",!0)]),l(le,{visible:b.value,"onUpdate:visible":n[7]||(n[7]=e=>b.value=e),style:{width:"450px"},header:a(t)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[l(g,{label:a(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:n[6]||(n[6]=e=>b.value=!1)},null,8,["label"]),l(g,{label:a(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Q},null,8,["label"])]),default:d(()=>[s("div",Xe,[Ye,s("span",null,r(a(t)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},tt=ne(Ze,[["__scopeId","data-v-681a2c10"]]);export{tt as default};
