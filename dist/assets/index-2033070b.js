import{_ as j,r as m,o as z,a3 as l,P as F,C as y,a as b,c as w,f as a,t as u,h as n,w as d,i as C,F as R,d as A,b as H,B as K}from"./index-06a0949a.js";const L={class:"permissions-container"},M={class:"card"},O={class:"flex justify-between"},S={class:"header"},q={class:"subtitle"},G={class:"toolbar"},J={class:"description-cell"},Q={class:"empty-message"},W={class:"p-fluid"},X={class:"p-field"},Y={for:"permissionName"},Z={class:"p-field"},ee={for:"description"},se={__name:"index",setup(ae){const T=m({}),g=m([]),r=m(!0),f=m(0),_=m(!1),c=m({id:"",name:"",description:""}),k=e=>{const s=[];for(const[o,p]of Object.entries(e))s.push({name:o.charAt(0).toUpperCase()+o.slice(1),value:o,permissions:p});return s.sort((o,p)=>o.name.localeCompare(p.name)),s},v=()=>{r.value=!0,C.get("api/role/get/permissions").then(e=>{T.value=e.data.data,g.value=k(e.data.data),r.value=!1}).catch(e=>{console.error("Error fetching permissions:",e),r.value=!1})},h=e=>{_.value=!0,c.value={id:e.id,name:e.name,description:e.description||""}},D=()=>{r.value=!0,C.put(`/api/role/permission/${c.value.id}`,{description:c.value.description}).then(()=>{v(),_.value=!1}).catch(e=>{console.error("Update failed:",e)}).finally(()=>{r.value=!1})};return z(()=>{v()}),(e,s)=>{const o=l("Button"),p=l("Column"),x=l("Tag"),V=l("DataTable"),B=l("TabPanel"),I=l("TabView"),P=l("InputText"),U=l("Textarea"),N=l("Dialog"),$=F("can");return y((b(),w("div",L,[a("div",M,[a("div",O,[a("div",S,[a("h1",null,u(e.$t("permissions_management.title")),1),a("p",q,u(e.$t("permissions_management.subtitle")),1)]),a("div",G,[n(o,{icon:"pi pi-refresh",label:e.$t("permissions_management.refresh_button"),onClick:v,loading:r.value},null,8,["label","loading"])])]),n(I,{activeIndex:f.value,"onUpdate:activeIndex":s[0]||(s[0]=t=>f.value=t),class:"grouped-tabs"},{default:d(()=>[(b(!0),w(R,null,A(g.value,t=>(b(),H(B,{key:t.value,header:t.name},{default:d(()=>[n(V,{value:t.permissions,stripedRows:"",class:"p-datatable-sm",loading:r.value,dataKey:"id",scrollable:"",scrollHeight:"flex"},{empty:d(()=>[a("div",Q,[s[5]||(s[5]=a("i",{class:"pi pi-database",style:{"font-size":"2rem"}},null,-1)),a("p",null,u(e.$t("permissions_management.table.no_permissions")),1)])]),default:d(()=>[n(p,{field:"id",header:e.$t("permissions_management.table.id"),sortable:"",style:{width:"80px"}},null,8,["header"]),n(p,{field:"name",header:e.$t("permissions_management.table.name"),sortable:""},{body:d(({data:i})=>[n(x,{value:i.name,severity:i.name.includes("delete")?"danger":i.name.includes("edit")?"warning":i.name.includes("create")?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),n(p,{field:"description",header:e.$t("permissions_management.table.description")},{body:d(({data:i})=>[a("div",J,[K(u(i.description||e.$t("permissions_management.table.no_permissions"))+" ",1),y(n(o,{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-sm",onClick:E=>h(i)},null,8,["onClick"]),[[$,"edit permissions"]])])]),_:1},8,["header"]),n(p,{header:e.$t("permissions_management.table.actions"),style:{width:"100px"}},{body:d(({data:i})=>[n(o,{icon:"pi pi-cog",class:"p-button-rounded p-button-text p-button-sm",onClick:E=>h(i)},null,8,["onClick"])]),_:1},8,["header"])]),_:2},1032,["value","loading"])]),_:2},1032,["header"]))),128))]),_:1},8,["activeIndex"]),n(N,{visible:_.value,"onUpdate:visible":s[4]||(s[4]=t=>_.value=t),modal:"",header:e.$t("permissions_management.dialog.header"),style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:d(()=>[n(o,{label:e.$t("permissions_management.dialog.cancel_button"),icon:"pi pi-times",onClick:s[3]||(s[3]=t=>_.value=!1),class:"p-button-text"},null,8,["label"]),n(o,{label:e.$t("permissions_management.dialog.save_button"),icon:"pi pi-check",onClick:D,loading:r.value,autofocus:""},null,8,["label","loading"])]),default:d(()=>[a("div",W,[a("div",X,[a("label",Y,u(e.$t("permissions_management.dialog.permission_name_label")),1),n(P,{id:"permissionName",modelValue:c.value.name,"onUpdate:modelValue":s[1]||(s[1]=t=>c.value.name=t),disabled:""},null,8,["modelValue"])]),a("div",Z,[a("label",ee,u(e.$t("permissions_management.dialog.description_label")),1),n(U,{id:"description",modelValue:c.value.description,"onUpdate:modelValue":s[2]||(s[2]=t=>c.value.description=t),rows:"5",autoResize:"",placeholder:e.$t("permissions_management.dialog.description_placeholder")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])),[[$,"list permissions"]])}}},te=j(se,[["__scopeId","data-v-6a7c07f2"]]);export{te as default};
