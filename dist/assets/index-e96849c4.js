import{j as J,u as K,G as W,r as d,q as X,m as Y,o as Z,n as p,a0 as $,a as v,c as m,f as o,h as l,w as r,y as k,b as B,t as n,e as i,F as M,d as ee,a1 as te,i as ae,p as f,x as oe,g as ne}from"./index-2dca1551.js";const se={class:"grid"},le={class:"col-12"},ie={class:"card p-4 shadow-2 border-round"},re={class:"text-2xl font-bold"},de={class:"flex gap-3 align-items-center"},ce={class:"p-input-icon-left"},pe={key:1},ue={class:"text-center py-6 text-600"},ve={class:"text-xl"},me={class:"flex justify-content-center py-6"},_e={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},ge={class:"p-paginator-left-content"},be={class:"p-paginator-current"},he={class:"p-paginator-right-content flex align-items-center gap-3"},fe=["disabled"],ye=["disabled"],xe=["onClick"],we={key:1,class:"p-paginator-dots"},ke=["disabled"],Ce=["disabled"],Se={__name:"index",setup(Te){const{t:s}=J(),R=K(),F=W(),b=d(!0),C=d([]);d(null);const T=d(null),V=d({}),h=d(""),c=d(1),y=d(0),_=d(0),P=d(0),S=d(0),D=d([]),L=()=>{V.value={global:{value:null,matchMode:te.CONTAINS}}},x=()=>{b.value=!0,ae.get("/api/invoice",{params:{page:c.value,limit:10,search:h.value||void 0}}).then(t=>{t.data.is_success&&t.data.data&&(C.value=t.data.data.data,y.value=t.data.data.total,_.value=t.data.data.last_page,P.value=t.data.data.from||0,S.value=t.data.data.to||0,D.value=t.data.data.links||[]),b.value=!1}).catch(t=>{F.add({severity:"error",summary:s("error"),detail:s("invoice.loadError")||"Failed to load invoices",life:4e3}),console.error("Error fetching invoices:",t),b.value=!1})};X(h,()=>{c.value=1,x()});const g=t=>{t>=1&&t<=_.value&&t!==c.value&&(c.value=t,x())},E=()=>{T.value.exportCSV()},j=t=>{R.push({name:"invoice-show",params:{id:t}})};return Y(()=>{L()}),Z(()=>{x()}),(t,a)=>{const G=p("InputText"),I=p("Button"),U=p("Toolbar"),q=p("Toast"),u=p("Column"),z=p("router-link"),A=p("ProgressSpinner"),O=p("DataTable"),Q=p("Dropdown"),w=$("can"),H=$("tooltip");return v(),m("div",se,[o("div",le,[o("div",ie,[l(U,{class:"mb-4"},{start:r(()=>[o("h2",re,n(i(s)("invoice.managementTitle")||"Invoice Management"),1)]),end:r(()=>[o("div",de,[o("span",ce,[a[6]||(a[6]=o("i",{class:"pi pi-search"},null,-1)),l(G,{modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),placeholder:i(s)("search")+"..."},null,8,["modelValue","placeholder"])]),k(l(I,{label:i(s)("export"),icon:"pi pi-upload",class:"p-button-outlined",onClick:E},null,8,["label"]),[[w,"export invoices"]])])]),_:1}),l(q),k((v(),B(O,{ref_key:"dt",ref:T,value:C.value,loading:b.value,"data-key":"id",paginator:!1,rows:10,filters:V.value,totalRecords:y.value,responsiveLayout:"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[o("div",ue,[a[7]||(a[7]=o("i",{class:"pi pi-inbox text-4xl mb-3"},null,-1)),o("p",ve,n(i(s)("invoice.noData")||"No invoices found"),1)])]),loading:r(()=>[o("div",me,[l(A)])]),default:r(()=>[l(u,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(u,{field:"id",header:i(s)("invoice.id"),sortable:"",headerStyle:"width: 8rem"},{body:r(e=>[f(" #"+n(e.data.id),1)]),_:1},8,["header"]),l(u,{field:"number",header:i(s)("invoice.number"),sortable:""},{body:r(e=>[o("strong",null,n(e.data.number),1)]),_:1},8,["header"]),l(u,{field:"order_id",header:i(s)("invoice.orderId"),sortable:"",headerStyle:"width: 10rem"},{body:r(e=>[e.data.order_id?(v(),B(z,{key:0,to:{name:"order-show",params:{id:e.data.order_id}},class:"text-primary hover:underline"},{default:r(()=>[f(" #"+n(e.data.order_id),1)]),_:2},1032,["to"])):(v(),m("span",pe,"-"))]),_:1},8,["header"]),l(u,{field:"total_price",header:i(s)("invoice.totalPrice"),sortable:""},{body:r(e=>[o("strong",null,n(e.data.total_price)+" "+n(t.$t("currencyLabel")),1)]),_:1},8,["header"]),l(u,{field:"sub_total_price",header:i(s)("invoice.subTotal")},{body:r(e=>[f(n(e.data.sub_total_price)+" "+n(t.$t("currencyLabel")),1)]),_:1},8,["header"]),l(u,{field:"tax_fee",header:i(s)("invoice.tax")},{body:r(e=>[f(n(e.data.tax_fee)+" "+n(t.$t("currencyLabel")),1)]),_:1},8,["header"]),l(u,{header:i(s)("actions"),headerStyle:"width: 8rem; text-align: center"},{body:r(e=>[k(l(I,{icon:"pi pi-eye",class:"p-button-rounded p-button-info p-button-sm",onClick:N=>j(e.data.id)},null,8,["onClick"]),[[H,i(s)("view"),void 0,{top:!0}],[w,"show invoices"]])]),_:1},8,["header"])]),_:1},8,["value","loading","filters","totalRecords"])),[[w,"list invoices"]]),o("div",_e,[o("div",ge,[o("span",be,n(i(s)("show"))+" "+n(P.value)+" "+n(i(s)("to"))+" "+n(S.value)+" "+n(i(s)("from"))+" "+n(y.value),1)]),o("div",he,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:a[1]||(a[1]=e=>g(1))},a[8]||(a[8]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,fe),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:c.value===1,onClick:a[2]||(a[2]=e=>g(c.value-1))},a[9]||(a[9]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,ye),(v(!0),m(M,null,ee(D.value,(e,N)=>(v(),m(M,{key:N},[e.label&&!isNaN(parseInt(e.label))?(v(),m("button",{key:0,class:oe(["p-paginator-page p-paginator-element p-link",{"p-highlight":e.active}]),onClick:Ve=>g(parseInt(e.label))},n(e.label),11,xe)):e.label==="..."?(v(),m("span",we,"...")):ne("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:c.value===_.value,onClick:a[3]||(a[3]=e=>g(c.value+1))},a[10]||(a[10]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,ke),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===_.value,onClick:a[4]||(a[4]=e=>g(_.value))},a[11]||(a[11]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ce),l(Q,{modelValue:t.rowsPerPage,"onUpdate:modelValue":a[5]||(a[5]=e=>t.rowsPerPage=e),options:[5,10,20,30,50],onChange:t.changeRowsPerPage,class:"ml-3",style:{width:"80px"}},null,8,["modelValue","onChange"])])])])])])}}};export{Se as default};
