import{_ as N,k as M,u as O,M as A,j as D,r as v,l as L,o as B,P as I,a as _,c as y,A as x,f as l,t as i,O as c,h as o,e as r,Q as P,w as V,v as R,F as S,i as g,a1 as T,R as m,S as $,T as w,N as j}from"./index-ef49bc5b.js";import{x as E,A as Q,O as W}from"./index.es-8dcf6b9b.js";const G={class:"max-w-3xl mx-auto p-6 bg-white rounded-xl shadow-lg"},H={class:"text-3xl font-bold text-center mb-8 text-gray-800"},J={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},K={class:"space-y-2"},X={for:"user_id",class:"block text-sm font-medium text-gray-700"},Y={class:"space-y-2"},Z={for:"address_line_1",class:"block text-sm font-medium text-gray-700"},ee={class:"space-y-2"},se={for:"address_line_2",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2"},le={for:"city",class:"block text-sm font-medium text-gray-700"},te={class:"space-y-2"},de={for:"country",class:"block text-sm font-medium text-gray-700"},re={class:"space-y-2"},oe={for:"zip_code",class:"block text-sm font-medium text-gray-700"},ie={class:"space-y-2"},ne={for:"lat",class:"block text-sm font-medium text-gray-700"},ue={class:"space-y-2"},ce={for:"long",class:"block text-sm font-medium text-gray-700"},pe={class:"space-y-2"},me={class:"flex items-center space-x-2"},fe={class:"text-sm font-medium text-gray-700"},ve={class:"mt-6 card"},_e={class:"text-xl font-semibold text-gray-800 mb-4"},ye={class:"pt-4 flex justify-between"},ge={key:0},be={key:1,class:"pi pi-spinner pi-spin"},he={__name:"update",setup(xe){const k=M(),f=O(),n=A(),{t:d}=D(),u=v(!1),b=v(k.params.id),h=v([]),e=v({user_id:null,address_line_1:"",address_line_2:"",city:"",country:"",zip_code:"",is_default:!1,lat:31.984983325941823,long:35.900908045672196,distance:1e3}),F=L(()=>{const s=Number(e.value.distance)||1e3;return{center:{lat:Number(e.value.lat),lng:Number(e.value.long)},radius:s,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}}),U=()=>{g.get("api/user").then(s=>{h.value=s.data.data.data,z()}).catch(s=>{n.add({severity:"error",summary:d("error"),detail:d("address.failed_to_load_users"),life:3e3}),f.push({name:"address"})})},z=async()=>{u.value=!0;try{const s=await g.get(`/api/address/${b.value}`);e.value={...s.data.data,is_default:s.data.data.is_default=="1",lat:s.data.data.lat||31.984983325941823,long:s.data.data.long||35.900908045672196,distance:s.data.data.distance||1e3}}catch{n.add({severity:"error",summary:d("error"),detail:d("address.load_error"),life:3e3}),f.push({name:"address"})}finally{u.value=!1}};function q(s){const a=s.latLng;e.value.lat=a.lat(),e.value.long=a.lng()}const C=async()=>{var s,a;u.value=!0;try{if(!e.value.user_id||!e.value.address_line_1||!e.value.city||!e.value.country){n.add({severity:"error",summary:d("validation_error"),detail:d("address.required_fields_missing"),life:3e3});return}if(e.value.lat<-90||e.value.lat>90){n.add({severity:"error",summary:d("validation_error"),detail:d("address.invalid_lat"),life:3e3});return}if(e.value.long<-180||e.value.long>180){n.add({severity:"error",summary:d("validation_error"),detail:d("address.invalid_long"),life:3e3});return}if(e.value.distance<=0){n.add({severity:"error",summary:d("validation_error"),detail:d("address.invalid_distance"),life:3e3});return}const p={...e.value,is_default:e.value.is_default?"1":"0"};await g.put(`/api/address/${b.value}`,p),f.push({name:"address"}),n.add({severity:"success",summary:d("success"),detail:d("address.updated_successfully"),life:3e3})}catch(p){n.add({severity:"error",summary:d("error"),detail:((a=(s=p.response)==null?void 0:s.data)==null?void 0:a.message)||d("address.update_error"),life:3e3})}finally{u.value=!1}};return B(()=>{U()}),(s,a)=>{const p=I("can");return _(),y(S,null,[x((_(),y("div",G,[l("h1",H,i(s.$t("address.update_address")),1),l("form",{onSubmit:R(C,["prevent"]),class:"space-y-6"},[l("div",J,[l("div",K,[l("label",X,[c(i(s.$t("user.name"))+" ",1),a[10]||(a[10]=l("span",{class:"text-red-500"},"*",-1))]),o(r(T),{filter:"",modelValue:e.value.user_id,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.user_id=t),options:h.value,optionLabel:"name",optionValue:"id",placeholder:s.$t("user.name"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,8,["modelValue","options","placeholder"])]),l("div",Y,[l("label",Z,[c(i(s.$t("address.line1"))+" ",1),a[11]||(a[11]=l("span",{class:"text-red-500"},"*",-1))]),o(r(m),{id:"address_line_1",modelValue:e.value.address_line_1,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.address_line_1=t),placeholder:s.$t("address.enter_line1"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",ee,[l("label",se,i(s.$t("address.line2")),1),o(r(m),{id:"address_line_2",modelValue:e.value.address_line_2,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.address_line_2=t),placeholder:s.$t("address.enter_line2"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"])]),l("div",ae,[l("label",le,[c(i(s.$t("address.city"))+" ",1),a[12]||(a[12]=l("span",{class:"text-red-500"},"*",-1))]),o(r(m),{id:"city",modelValue:e.value.city,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.city=t),placeholder:s.$t("address.enter_city"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",te,[l("label",de,[c(i(s.$t("address.country"))+" ",1),a[13]||(a[13]=l("span",{class:"text-red-500"},"*",-1))]),o(r(m),{id:"country",modelValue:e.value.country,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value.country=t),placeholder:s.$t("address.enter_country"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),l("div",re,[l("label",oe,i(s.$t("address.zip_code")),1),o(r(m),{id:"zip_code",modelValue:e.value.zip_code,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.zip_code=t),placeholder:s.$t("address.enter_zip_code"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"])]),l("div",ie,[l("label",ne,[c(i(s.$t("address.lat"))+" ",1),a[14]||(a[14]=l("span",{class:"text-red-500"},"*",-1))]),o(r($),{id:"lat",modelValue:e.value.lat,"onUpdate:modelValue":a[6]||(a[6]=t=>e.value.lat=t),placeholder:s.$t("address.enter_lat"),min:-90,max:90,step:1e-6,decimalPlaces:6,class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",ue,[l("label",ce,[c(i(s.$t("address.long"))+" ",1),a[15]||(a[15]=l("span",{class:"text-red-500"},"*",-1))]),o(r($),{id:"long",modelValue:e.value.long,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.long=t),placeholder:s.$t("address.enter_long"),min:-180,max:180,step:1e-6,decimalPlaces:6,class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",pe,[l("label",me,[x(l("input",{type:"checkbox",class:"w-5 h-5 mx-2","onUpdate:modelValue":a[8]||(a[8]=t=>e.value.is_default=t),binary:!0},null,512),[[P,e.value.is_default]]),l("span",fe,i(s.$t("address.set_as_default")),1)])])]),l("div",ve,[l("h2",_e,i(s.$t("address.select_location")),1),o(r(W),{onClick:q,style:{width:"100%",height:"500px"},center:{lat:parseFloat(e.value.lat),lng:parseFloat(e.value.long)},zoom:14},{default:V(()=>[o(r(E),{options:{position:{lat:parseFloat(e.value.lat),lng:parseFloat(e.value.long)}}},null,8,["options"]),o(r(Q),{options:F.value},null,8,["options"])]),_:1},8,["center"])]),l("div",ye,[o(r(w),{type:"button",label:s.$t("cancel"),icon:"pi pi-times",onClick:a[9]||(a[9]=t=>r(f).push({name:"address"})),class:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow transition-all duration-300",disabled:u.value},null,8,["label","disabled"]),o(r(w),{type:"submit",label:s.$t("update"),icon:"pi pi-check",loading:u.value,class:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300",disabled:u.value},{default:V(()=>[u.value?(_(),y("i",be)):(_(),y("span",ge,i(s.$t("update")),1))]),_:1},8,["label","loading","disabled"])])],32)])),[[p,"edit address"]]),o(r(j))],64)}}},we=N(he,[["__scopeId","data-v-c37e8984"]]);export{we as default};
