import{_ as T,z as q,u as F,f as U,G as Y,r as g,o as R,h as i,i as j,b as r,c as p,l as E,j as o,t as d,q as v,e as c,m as A,v as $,B as G,k as L,D as z,F as H,a as h,x as J,y as K}from"./index-7330e92f.js";import{h as V}from"./moment-fbc5633a.js";const b=_=>(J("data-v-310389bb"),_=_(),K(),_),O={class:"max-w-2xl mx-auto p-6 bg-white rounded-xl shadow-lg"},P={class:"text-3xl font-bold text-center mb-8 text-gray-800"},Q=["onSubmit"],W={class:"grid grid-cols-1 gap-6"},X={class:"space-y-2"},Z={for:"code",class:"block text-sm font-medium text-gray-700"},ee=b(()=>o("span",{class:"text-red-500"},"*",-1)),oe={class:"flex gap-2"},te={class:"space-y-2"},se={for:"discount_type",class:"block text-sm font-medium text-gray-700"},ae=b(()=>o("span",{class:"text-red-500"},"*",-1)),le={class:"space-y-2"},ne={for:"discount_value",class:"block text-sm font-medium text-gray-700"},ue=b(()=>o("span",{class:"text-red-500"},"*",-1)),de={key:0,class:"text-gray-500 text-xs"},ce={class:"space-y-2"},ie={for:"expires_at",class:"block text-sm font-medium text-gray-700"},re=b(()=>o("span",{class:"text-red-500"},"*",-1)),pe={class:"pt-4 flex justify-center gap-4"},_e={key:0},me={key:1,class:"pi pi-spinner pi-spin"},ve={setup(_){const y=q(),x=F(),w=U(),{t:m}=Y(),u=g(!1),l=g(!1),t=g({code:"",discount_type:null,discount_value:null,expires_at:""}),k=async e=>{try{u.value=!0;const a=(await h.get(`/api/coupon/${e}`)).data.data;t.value={code:a.code,discount_type:a.discount_type,discount_value:a.discount_value,expires_at:V(a.expires_at).toDate()},l.value=!0}finally{u.value=!1}};R(()=>{y.params.id&&k(y.params.id)});const D=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let s="C-";for(let a=0;a<3;a++)s+=e.charAt(Math.floor(Math.random()*e.length));t.value.code=s},C=async()=>{u.value=!0;try{const e={...t.value,expires_at:V(t.value.expires_at).format("YYYY-MM-DD")};l.value?(await h.put(`/api/coupon/${y.params.id}`,e),w.add({severity:"success",summary:m("success"),detail:m("coupon.updated_successfully"),life:3e3})):(await h.post("/api/coupon",e),w.add({severity:"success",summary:m("success"),detail:m("coupon.created_successfully"),life:3e3})),x.push({name:"coupon"})}finally{u.value=!1}};return(e,s)=>{const a=i("InputText"),f=i("Button"),I=i("Dropdown"),B=i("InputNumber"),M=i("Calendar"),N=i("Toast"),S=j("can");return r(),p(H,null,[E((r(),p("div",O,[o("h1",P,d(l.value?e.$t("coupon.edit_coupon"):e.$t("coupon.create_new_coupon")),1),o("form",{onSubmit:z(C,["prevent"]),class:"space-y-6"},[o("div",W,[o("div",X,[o("label",Z,[v(d(e.$t("coupon.code"))+" ",1),ee]),o("div",oe,[c(a,{id:"code",modelValue:t.value.code,"onUpdate:modelValue":s[0]||(s[0]=n=>t.value.code=n),placeholder:e.$t("coupon.enter_code"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:"",disabled:l.value},null,8,["modelValue","placeholder","disabled"]),l.value?$("",!0):(r(),A(f,{key:0,type:"button",onClick:D,icon:"pi pi-refresh",class:"px-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition",title:e.$t("coupon.generate_random_code")},null,8,["title"]))])]),o("div",te,[o("label",se,[v(d(e.$t("coupon.discount_type"))+" ",1),ae]),c(I,{id:"discount_type",modelValue:t.value.discount_type,"onUpdate:modelValue":s[1]||(s[1]=n=>t.value.discount_type=n),options:[{label:e.$t("coupon.fixed_amount"),value:1},{label:e.$t("coupon.percentage"),value:2}],optionLabel:"label",optionValue:"value",placeholder:e.$t("coupon.select_discount_type"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,8,["modelValue","options","placeholder"])]),o("div",le,[o("label",ne,[v(d(e.$t("coupon.discount_value"))+" ",1),ue]),c(B,{id:"discount_value",modelValue:t.value.discount_value,"onUpdate:modelValue":s[2]||(s[2]=n=>t.value.discount_value=n),min:0,max:t.value.discount_type===2?100:null,placeholder:e.$t("coupon.enter_discount_value"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","max","placeholder"]),t.value.discount_type===2?(r(),p("small",de,d(e.$t("coupon.percentage_note")),1)):$("",!0)]),o("div",ce,[o("label",ie,[v(d(e.$t("coupon.expiration_date"))+" ",1),re]),c(M,{id:"expires_at",modelValue:t.value.expires_at,"onUpdate:modelValue":s[3]||(s[3]=n=>t.value.expires_at=n),minDate:new Date,dateFormat:"yy-mm-dd",placeholder:e.$t("coupon.select_expiration_date"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,8,["modelValue","minDate","placeholder"])])]),o("div",pe,[c(f,{type:"button",onClick:s[4]||(s[4]=n=>G(x).push({name:"coupons"})),label:e.$t("cancel"),icon:"pi pi-times",class:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg shadow-md transition-all duration-300"},null,8,["label"]),c(f,{type:"submit",label:l.value?e.$t("coupon.update_coupon"):e.$t("coupon.create_coupon"),icon:l.value?"pi pi-check":"pi pi-plus",loading:u.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:u.value},{default:L(()=>[u.value?(r(),p("i",me)):(r(),p("span",_e,d(l.value?e.$t("coupon.update_coupon"):e.$t("coupon.create_coupon")),1))]),_:1},8,["label","icon","loading","disabled"])])],40,Q)])),[[S,"edit coupons"]]),c(N)],64)}}},fe=T(ve,[["__scopeId","data-v-310389bb"]]);export{fe as default};
