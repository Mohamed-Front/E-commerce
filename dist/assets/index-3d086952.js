import{_ as me,u as _e,f as he,r as o,w as fe,g as ge,o as be,h as u,i as K,b as m,c as b,j as l,e as s,k as n,l as D,m as ye,t as i,F as X,n as we,p as Ce,a as P,q as Y,s as ke,v as xe,x as Ve,y as $e}from"./index-7330e92f.js";const c=y=>(Ve("data-v-835c3a8b"),y=y(),$e(),y),De={class:"grid"},Pe={class:"col-12"},Se={class:"card p-4 shadow-2 border-round"},Ue={class:"text-2xl font-bold"},Te={class:"flex gap-2"},Ne={class:"p-input-icon-left"},Me=c(()=>l("i",{class:"pi pi-search"},null,-1)),Re={class:"card shadow-1 surface-0"},Ee={class:"text-center py-4"},Ie=c(()=>l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Be={class:"text-xl"},Fe={class:"flex justify-content-center align-items-center py-4"},je={class:"p-paginator p-component p-unselectable-text mt-3"},Le={class:"p-paginator-left-content"},qe={class:"p-paginator-current"},ze={class:"p-paginator-right-content"},Ae={class:"p-paginator-pages"},Ge=["disabled"],Oe=c(()=>l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),Qe=[Oe],We=["disabled"],He=c(()=>l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Je=[He],Ke=["onClick"],Xe={key:1,class:"p-paginator-dots"},Ye=["disabled"],Ze=c(()=>l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),et=[Ze],tt=["disabled"],lt=c(()=>l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),at=[lt],ot={class:"p-paginator-rpp-options"},st={class:"flex align-items-center justify-content-center"},nt=c(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),it={class:"field mb-5"},rt=c(()=>l("label",{for:"name"},"Name",-1)),dt={class:"card flex justify-content-center"},ut={class:"field mb-5"},ct=c(()=>l("label",{for:"name"},"Name",-1)),pt={class:"card flex justify-content-center"},vt={setup(y){const R=_e(),_=he(),w=o(!0),r=o({name:"",permissions:[]}),S=o([]),E=o([]),U=o(!1),C=o(!1);o(!1);const h=o(!1);o({});const I=o(null),B=o(null),F=o({}),j=o(!1),L=o(Number),k=o(""),p=o(1),q=o(0),f=o(10),x=o(0),Z=o(""),ee=o(""),z=o(""),A=o(""),G=o(0),O=o(0),Q=o([]),te=()=>{F.value={global:{value:null,matchMode:Ce.CONTAINS}}},v=()=>{w.value=!0,P.get("/api/role",{params:{page:p.value,limit:f.value,search:k.value}}).then(e=>{w.value=!1,E.value=e.data.data.data,q.value=e.data.data.total,x.value=e.data.data.last_page,Z.value=e.data.data.first_page_url,ee.value=e.data.data.last_page_url,z.value=e.data.data.next_page_url,A.value=e.data.data.prev_page_url,G.value=e.data.data.from,O.value=e.data.data.to,Q.value=e.data.data.links}).catch(e=>{w.value=!1,console.error("Error fetching roles:",e),_.add({severity:"error",summary:"Error",detail:"Failed to load roles",life:3e3})}),P.get("/api/role/get/permissions").then(e=>{S.value=e.data.permissions}).catch(e=>{console.error("Error fetching permissions:",e)})},g=e=>{e>=1&&e<=x.value&&(p.value=e,v())},le=e=>{f.value=e.value,p.value=1,v()};fe(k,e=>{p.value=1,v()});const ae=()=>{R.push({name:"roles-create"})},W=()=>{C.value=!1,U.value=!1,j.value=!1},oe=()=>{j.value=!0,P.post("api/roles/create",r.value).then(e=>{v(),C.value=!1,_.add({severity:"success",summary:"Successful",detail:"Role Created",life:3e3}),r.value={name:"",permissions:[]}}).catch(e=>{console.error("Error creating role:",e),_.add({severity:"error",summary:"Error",detail:"Failed to create role",life:3e3})})},se=e=>{R.push({name:"roles-update",params:{id:e}})},ne=e=>{L.value=e,h.value=!0},ie=()=>{P.delete(`api/role/${L.value}`).then(()=>{v(),h.value=!1,_.add({severity:"success",summary:"Successful",detail:"Role Deleted",life:3e3})}).catch(e=>{console.error("Error deleting role:",e),_.add({severity:"error",summary:"Error",detail:"Failed to delete role",life:3e3})})},re=()=>{B.value.exportCSV()};return ge(()=>{te()}),be(()=>{v()}),(e,a)=>{const T=u("InputText"),d=u("Button"),de=u("Toolbar"),ue=u("Toast"),V=u("Column"),ce=u("ProgressSpinner"),pe=u("DataTable"),ve=u("Dropdown"),N=u("Dialog"),H=u("MultiSelect"),$=K("can"),J=K("tooltip");return m(),b("div",De,[l("div",Pe,[l("div",Se,[s(de,{class:"mb-4"},{start:n(()=>[l("h2",Ue,i(e.$t("role.manage_Roles")),1)]),end:n(()=>[l("div",Te,[l("span",Ne,[Me,s(T,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=t=>k.value=t),placeholder:e.$t("user.search")},null,8,["modelValue","placeholder"])]),s(d,{label:e.$t("user.export"),icon:"pi pi-upload",class:"p-export",onClick:re},null,8,["label"]),D(s(d,{label:e.$t("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:ae},null,8,["label"]),[[$,"create roles"]])])]),_:1}),s(ue),l("div",Re,[D((m(),ye(pe,{ref_key:"dt",ref:B,selection:I.value,"onUpdate:selection":a[1]||(a[1]=t=>I.value=t),value:E.value,loading:w.value,"data-key":"id",paginator:!1,rows:f.value,filters:F.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[l("div",Ee,[Ie,l("p",Be,i(e.$t("role.noData")),1)])]),loading:n(()=>[l("div",Fe,[s(ce,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[s(V,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(V,{field:"id",header:e.$t("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:n(t=>[Y(i(t.data.id),1)]),_:1},8,["header"]),s(V,{field:"name",header:e.$t("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(t=>[Y(i(t.data.name),1)]),_:1},8,["header"]),s(V,{"header-style":"min-width:10rem;"},{body:n(t=>[D(s(d,{icon:"pi pi-pencil",class:"p-detail",onClick:M=>se(t.data.id)},null,8,["onClick"]),[[$,"edit roles"],[J,e.$t("edit"),void 0,{top:!0}]]),D(s(d,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:M=>ne(t.data.id)},null,8,["onClick"]),[[$,"delete roles"],[J,e.$t("delete"),void 0,{top:!0}]])]),_:1})]),_:1},8,["selection","value","loading","rows","filters"])),[[$,"list roles"]]),l("div",je,[l("div",Le,[l("span",qe,i(e.$t("showing"))+" "+i(G.value)+" "+i(e.$t("to"))+" "+i(O.value)+" "+i(e.$t("of"))+" "+i(q.value)+" "+i(e.$t("entries")),1)]),l("div",ze,[l("span",Ae,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:a[2]||(a[2]=t=>g(1))},Qe,8,Ge),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!A.value,onClick:a[3]||(a[3]=t=>g(p.value-1))},Je,8,We),(m(!0),b(X,null,we(Q.value,(t,M)=>(m(),b(X,{key:M},[t.label&&!isNaN(t.label)?(m(),b("button",{key:0,class:ke(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:mt=>g(parseInt(t.label))},i(t.label),11,Ke)):t.label==="..."?(m(),b("span",Xe,"...")):xe("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!z.value,onClick:a[4]||(a[4]=t=>g(p.value+1))},et,8,Ye),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===x.value,onClick:a[5]||(a[5]=t=>g(x.value))},at,8,tt)]),l("span",ot,[s(ve,{modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=t=>f.value=t),options:[5,10,20,30],optionLabel:"label",optionValue:"value",onChange:le,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])]),s(N,{visible:h.value,"onUpdate:visible":a[8]||(a[8]=t=>h.value=t),style:{width:"450px"},header:e.$t("role.deleteConfirmTitle"),modal:!0},{footer:n(()=>[s(d,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=t=>h.value=!1)},null,8,["label"]),s(d,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:ie},null,8,["label"])]),default:n(()=>[l("div",st,[nt,l("span",null,i(e.$t("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),s(N,{visible:C.value,"onUpdate:visible":a[11]||(a[11]=t=>C.value=t),style:{width:"450px"},header:"Create Role",modal:!0,class:"p-fluid"},{footer:n(()=>[s(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:W}),s(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:oe})]),default:n(()=>[l("div",it,[rt,s(T,{class:"mt-3 w-full",id:"name",modelValue:r.value.name,"onUpdate:modelValue":a[9]||(a[9]=t=>r.value.name=t),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),l("div",dt,[s(H,{modelValue:r.value.permissions,"onUpdate:modelValue":a[10]||(a[10]=t=>r.value.permissions=t),display:"chip","option-value":"id",options:S.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"]),s(N,{visible:U.value,"onUpdate:visible":a[14]||(a[14]=t=>U.value=t),style:{width:"450px"},header:"Update Role",modal:!0},{footer:n(()=>[s(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:W}),s(d,{label:"Update",icon:"pi pi-check",class:"p-button-text",onClick:e.update},null,8,["onClick"])]),default:n(()=>[l("div",ut,[ct,s(T,{class:"mt-3 w-full",id:"name",modelValue:r.value.name,"onUpdate:modelValue":a[12]||(a[12]=t=>r.value.name=t),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue"])]),l("div",pt,[s(H,{modelValue:r.value.permissions,"onUpdate:modelValue":a[13]||(a[13]=t=>r.value.permissions=t),"option-value":"id",options:S.value,optionLabel:"name",placeholder:"Select Permissions",class:"w-full md:w-20rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"])])])])}}},ht=me(vt,[["__scopeId","data-v-835c3a8b"]]);export{ht as default};
