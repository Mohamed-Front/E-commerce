import{u as H,b as J,L as K,r as o,w as ee,U as te,d as ae,V as j,o as p,e as b,f as a,g as i,i as d,j as e,z as y,c as se,t as r,F as z,h as le,W as oe,a as A,X as ie,Y as v,Z as ne,$ as re,a0 as de,a1 as h,s as U,a6 as ce,a2 as ue,x as pe,B as ve,a3 as he,a5 as _e}from"./index-b794012a.js";const me={class:"grid"},ge={class:"col-12"},fe={class:"card p-4 shadow-2 border-round"},be={class:"text-2xl font-bold"},ye={class:"flex gap-2"},xe={class:"p-input-icon-left"},we=a("i",{class:"pi pi-search"},null,-1),ke={class:"card shadow-1 surface-0"},Ce={class:"text-center py-4"},$e=a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1),Ve={class:"text-xl"},Ue={class:"flex justify-content-center align-items-center py-4"},Ne={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Pe={class:"p-paginator-left-content"},De={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Me=["disabled"],Re=a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1),Te=[Re],Se=["disabled"],Ee=a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1),Fe=[Ee],Ie=["onClick"],je={key:1,class:"p-paginator-dots"},ze=["disabled"],Ae=a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1),Ge=[Ae],Le=["disabled"],We=a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1),Oe=[We],Qe={class:"flex align-items-center justify-content-center"},Xe=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1),He={setup(Ye){const{t:s}=H(),N=J(),C=K(),x=o(!0),P=o(""),D=o(null),_=o(!1);o(null);const B=o(null),M=o({}),w=o(""),c=o(1),$=o(0),u=o(10),k=o(0),G=o(""),L=o(""),R=o(""),T=o(""),S=o(0),E=o(0),F=o([]),W=()=>{M.value={global:{value:null,matchMode:oe.CONTAINS}}},m=()=>{x.value=!0,A.get("/api/user",{params:{page:c.value,limit:u.value,search:w.value||void 0}}).then(l=>{D.value=l.data.data.data,$.value=l.data.data.total,k.value=l.data.data.last_page,G.value=l.data.data.first_page_url,L.value=l.data.data.last_page_url,R.value=l.data.data.next_page_url,T.value=l.data.data.prev_page_url,S.value=l.data.data.from,E.value=l.data.data.to,F.value=l.data.data.links,x.value=!1}).catch(l=>{C.add({severity:"error",summary:s("error"),detail:s("user.loadError"),life:3e3}),x.value=!1,console.error("Error fetching data:",l)})};ee([w,u],()=>{c.value=1,m()});const g=l=>{l>=1&&l<=k.value&&(c.value=l,m())},O=l=>{u.value=l.value,c.value=1,m()},Q=l=>{P.value=l,_.value=!0},X=()=>{A.delete(`/api/user/${P.value}`).then(()=>{C.add({severity:"success",summary:s("success"),detail:s("user.deleteSuccess"),life:3e3}),m(),_.value=!1}).catch(l=>{C.add({severity:"error",summary:s("error"),detail:s("user.deleteError"),life:3e3})})},Y=()=>{B.value.exportCSV()},Z=()=>{N.push({name:"user-create"})},q=l=>{N.push({name:"user-edit",params:{id:l}})};return te(()=>{W()}),ae(()=>{m()}),(l,n)=>{const f=j("can"),I=j("tooltip");return p(),b("div",me,[a("div",ge,[a("div",fe,[i(e(ne),{class:"mb-4"},{start:d(()=>[a("h2",be,r(e(s)("user.managementTitle")),1)]),end:d(()=>[a("div",ye,[a("span",xe,[we,i(e(ie),{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=t=>w.value=t),placeholder:e(s)("user.search")},null,8,["modelValue","placeholder"])]),y(i(e(v),{label:e(s)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:Y},null,8,["label"]),[[f,"export users"]]),y(i(e(v),{label:e(s)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[f,"create users"]])])]),_:1}),i(e(re)),a("div",ke,[y((p(),se(e(ue),{ref_key:"dt",ref:B,value:D.value,loading:x.value,"data-key":"id",paginator:!1,rows:u.value,filters:M.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[a("div",Ce,[$e,a("p",Ve,r(e(s)("user.noData")),1)])]),loading:d(()=>[a("div",Ue,[i(e(de),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(e(h),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(h),{field:"name",header:e(s)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[U(r(t.data.name),1)]),_:1},8,["header"]),i(e(h),{field:"email",header:e(s)("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[U(r(t.data.email),1)]),_:1},8,["header"]),i(e(h),{field:"phone",header:e(s)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[U(r(t.data.phone),1)]),_:1},8,["header"]),i(e(h),{field:"type_description",header:e(s)("user.type"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[i(e(ce),{value:t.data.type_description,severity:{Admin:"info",Customer:"success",Guest:"danger"}[t.data.type_description]||"warning"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(h),{header:e(s)("actions"),"header-style":"min-width:10rem;"},{body:d(t=>[y(i(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:V=>q(t.data.id)},null,8,["onClick"]),[[f,"edit users"],[I,e(s)("edit"),void 0,{top:!0}]]),y(i(e(v),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:V=>Q(t.data.id)},null,8,["onClick"]),[[f,"delete users"],[I,e(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[f,"list users"]]),a("div",Ne,[a("div",Pe,[a("span",De,r(e(s)("show"))+" "+r(S.value)+" "+r(e(s)("to"))+" "+r(E.value)+" "+r(e(s)("from"))+" "+r($.value),1)]),a("div",Be,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:n[1]||(n[1]=t=>g(1))},Te,8,Me),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!T.value,onClick:n[2]||(n[2]=t=>g(c.value-1))},Fe,8,Se),(p(!0),b(z,null,le(F.value,(t,V)=>(p(),b(z,{key:V},[t.label&&!isNaN(parseInt(t.label))?(p(),b("button",{key:0,class:pe(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Ze=>g(parseInt(t.label))},r(t.label),11,Ie)):t.label==="..."?(p(),b("span",je,"...")):ve("",!0)],64))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!R.value,onClick:n[3]||(n[3]=t=>g(c.value+1))},Ge,8,ze),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===k.value,onClick:n[4]||(n[4]=t=>g(k.value))},Oe,8,Le),i(e(he),{modelValue:u.value,"onUpdate:modelValue":n[5]||(n[5]=t=>u.value=t),options:[5,10,20,30],onChange:O,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(e(_e),{visible:_.value,"onUpdate:visible":n[7]||(n[7]=t=>_.value=t),style:{width:"450px"},header:e(s)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(e(v),{label:e(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:n[6]||(n[6]=t=>_.value=!1)},null,8,["label"]),i(e(v),{label:e(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:d(()=>[a("div",Qe,[Xe,a("span",null,r(e(s)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{He as default};
