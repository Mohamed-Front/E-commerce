import{_ as X,k as Y,u as Z,j as ee,q as te,r as c,n as se,l as ae,m as oe,o as le,s as ie,a as l,c as i,f as t,t as n,e as v,x as _,z as m,A as L,F as j,d as O,B as S,C as E,h as re,i as x,p as ne,D as de,v as U,g as R,y as ue}from"./index-68e89a44.js";/* empty css              */import{d as ce}from"./banner-addtion-e4104052.js";const ve={class:"mx-auto mt-16 max-w-[1440px] px-4 sm:px-6 lg:px-8 pb-16"},ge={key:0,class:"flex flex-col items-center justify-center py-16 rounded-xl animate-pulse"},me={key:1,class:"text-center mb-10 py-16 text-red-600"},fe={class:"text-lg font-semibold"},pe={key:2,class:"lg:flex"},_e={class:"lg:w-1/4 mb-8 lg:mb-0 mx-8"},he={class:"bg-white p-6 rounded-lg shadow-lg sticky top-24"},we={class:"font-bold text-lg mb-4"},be={class:"space-y-6"},ye={class:"border-b pb-4"},xe={class:"font-semibold"},ke={class:"mt-4 space-y-2"},Be=["id","value"],Ce=["for"],Le=["src","alt"],Pe={class:"border-b pb-4"},Me={class:"font-semibold"},$e={class:"mt-4 space-y-2"},je={class:"flex items-center"},Oe={for:"express-delivery",class:"ml-2 text-sm text-gray-700"},Se={class:"flex items-center"},Re={for:"standard-delivery",class:"ml-2 text-sm text-gray-700"},ze={class:"border-b pb-4"},Ae={class:"font-semibold"},Fe={class:"mt-4 space-y-2"},Ie=["id","value","onUpdate:modelValue"],Ve=["for"],Ee={class:"border-b pb-4"},Ue={class:"font-semibold"},De={class:"mt-4 space-y-2"},Ne={class:"flex items-center space-x-2"},We={class:"lg:w-3/4"},qe={class:"font-bold font-sans text-gray-800 lg:mt-4 xs:mt-2 xs:text-lg sm:text-xl md:text-2xl lg:text-3xl text-center animate-fade-in"},He={class:"grid grid-cols-1 xs:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-10 mb-10"},Te=["onClick"],Ge={class:"w-full max-h-[600px] overflow-hidden rounded-t-lg relative"},Je=["src","alt"],Ke=["onClick","aria-label","title"],Qe={class:"p-4 w-full"},Xe={class:"font-sans text-gray-800 font-medium text-base line-clamp-2"},Ye={key:0,class:"font-sans text-gray-600 text-sm line-clamp-1 mt-1"},Ze={class:"flex items-center w-full justify-between mt-1"},et={class:"font-sans text-[#A6853B] font-semibold text-lg"},tt=["disabled","onClick","aria-label","title"],st={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},at={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ot={class:"mt-8 bg-white flex justify-center"},lt={__name:"brand-products",setup(it){const z=Y(),P=Z(),{t:u,locale:k}=ee(),B=te(),D=c(localStorage.getItem("defaultStoreId")),M=c({title:"",products:[]}),$=c(!1),h=c(null),f=c(1),w=c(12),A=c(0),b=c(window.innerWidth>=1024),r=c({fulfilledBy:[],arrivesBy:[],category:null,priceRange:{min:null,max:null}}),g=c({fulfilledBy:!0,arrivesBy:!0,category:!0,brand:!0,price:!0,deals:!0,priceDrop:!0}),F=c([]),N=c([]);se(r,()=>{f.value=1,y()},{deep:!0});const W=async()=>{try{const a=await x.get("/api/categories");F.value=a.data.data.map(e=>({id:e.id,name:k.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar}))}catch(a){console.error("Error fetching categories:",a)}},q=()=>{b.value=window.innerWidth>=1024,w.value=b.value?12:6},y=async(a=f.value)=>{$.value=!0,h.value=null;try{const e={page:a,limit:w.value,fulfilled_by:r.value.fulfilledBy.join(","),arrives_by:r.value.arrivesBy.join(","),category_id:r.value.category,min_price:r.value.priceRange.min,max_price:r.value.priceRange.max},d=(await x.get(`/api/home/products-by-brand/${z.params.id}`,{params:e})).data.data;M.value={title:k.value==="ar"?`منتجات ${d.brand.name_ar||d.brand.name_en}`:`Products ${d.brand.name_en||d.brand.name_ar}`,products:(d.products.data||[]).map(o=>{var p,V;return{id:o.id,name:k.value==="ar"?o.name_ar||o.name_en:o.name_en||o.name_ar,sub_name:k.value==="ar"?o.sub_name_ar||o.sub_name_en:o.sub_name_en||o.sub_name_ar,price:parseFloat(o.base_price||0).toFixed(2),img:((V=(p=o.media)==null?void 0:p.find(Q=>Q.name==="product_main_image"))==null?void 0:V.url)||o.key_default_image||ce,is_wished:o.is_wished||!1,in_cart:o.in_cart||!1,is_stock:o.is_stock||0,isOutOfStock:o.is_stock===0,variant_id:o.has_variants?o.variant_id:null}})},f.value=d.products.current_page,A.value=d.products.total}catch(e){console.error("Error fetching products:",e),h.value=u("products.errorLoading")||"Failed to load products."}finally{$.value=!1}},C=a=>{g.value[a]=!g.value[a]},H=ae(()=>M.value.products),T=a=>{f.value=a.page+1,y(f.value)},G=async a=>{if(!B.authenticatedweb){P.push({name:"AuthLogin"});return}if(!a.isOutOfStock)try{const e={product_id:a.id,variant_id:a.variant_id,quantity:1};(await x.post("/api/cart/add",e)).status===200&&(a.in_cart=!0,alert(u("cart.added")||"Product added to cart!"))}catch(e){console.error("Error adding to cart:",e),alert(u("cart.error")||"Failed to add product to cart.")}},J=async a=>{if(!B.authenticatedweb){P.push({name:"AuthLogin"});return}const e=a.is_wished,s=e?"delete":"post",d=e?`/api/wishlists/${a.id}`:"/api/wishlists",o={product_id:a.id};try{let p;s==="post"?p=await x.post(d,o):p=await x.delete(d,{data:o}),(p.status===200||p.status===204)&&(a.is_wished=!e,alert(u(e?"wishlist.removed":"wishlist.added")||`Product ${e?"removed from":"added to"} wishlist!`))}catch(p){console.error("Error toggling favorite status:",p),a.is_wished=e,alert(u("wishlist.error")||"Failed to update wishlist.")}},K=(a,e)=>a.length<=e?a:a.slice(0,e)+"...",I=()=>{const a=window.innerWidth>=1024;a!==b.value&&(b.value=a,w.value=b.value?12:6,f.value=1,y(f.value))};return oe(()=>{z.params.id&&D.value?(q(),y(f.value),W()):h.value=u("products.missingParams")||"Missing brand or store ID."}),le(()=>{window.addEventListener("resize",I)}),ie(()=>{window.removeEventListener("resize",I)}),(a,e)=>(l(),i("div",ve,[$.value?(l(),i("div",ge,e[10]||(e[10]=[t("img",{src:ne,alt:"Loading Logo",class:"w-32 h-32 object-contain animate-bounce","aria-label":"Loading animation"},null,-1)]))):h.value?(l(),i("div",me,[t("p",fe,n(h.value),1),t("button",{onClick:y,class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"},n(v(u)("products.retry")),1)])):(l(),i("div",pe,[t("div",_e,[t("div",he,[t("h3",we,n(v(u)("products.filters")),1),t("div",be,[t("div",ye,[t("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[0]||(e[0]=s=>C("fulfilledBy"))},[t("span",xe,n(v(u)("products.fulfilledBy")),1),(l(),i("svg",{class:_([{"rotate-180":g.value.fulfilledBy},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),m(t("div",ke,[(l(!0),i(j,null,O(N.value,s=>(l(),i("div",{key:s.value,class:"flex items-center space-x-2"},[m(t("input",{type:"checkbox",id:`fulfilledBy-${s.value}`,value:s.value,"onUpdate:modelValue":e[1]||(e[1]=d=>r.value.fulfilledBy=d),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,8,Be),[[S,r.value.fulfilledBy]]),t("label",{for:`fulfilledBy-${s.value}`,class:"flex items-center gap-2 text-sm text-gray-700"},[t("img",{src:s.image,class:"h-6 w-auto",alt:s.label},null,8,Le),t("span",null,n(s.label),1)],8,Ce)]))),128))],512),[[L,g.value.fulfilledBy]])]),t("div",Pe,[t("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[2]||(e[2]=s=>C("arrivesBy"))},[t("span",Me,n(v(u)("products.arrivesBy")),1),(l(),i("svg",{class:_([{"rotate-180":g.value.arrivesBy},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),m(t("div",$e,[t("div",je,[m(t("input",{type:"checkbox",id:"express-delivery",value:"express","onUpdate:modelValue":e[3]||(e[3]=s=>r.value.arrivesBy=s),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[S,r.value.arrivesBy]]),t("label",Oe,n(v(u)("products.expressDelivery")),1)]),t("div",Se,[m(t("input",{type:"checkbox",id:"standard-delivery",value:"standard","onUpdate:modelValue":e[4]||(e[4]=s=>r.value.arrivesBy=s),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[S,r.value.arrivesBy]]),t("label",Re,n(v(u)("products.standardDelivery")),1)])],512),[[L,g.value.arrivesBy]])]),t("div",ze,[t("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[5]||(e[5]=s=>C("category"))},[t("span",Ae,n(v(u)("products.category")),1),(l(),i("svg",{class:_([{"rotate-180":g.value.category},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),m(t("div",Fe,[(l(!0),i(j,null,O(F.value,s=>(l(),i("div",{key:s.id,class:"flex items-center"},[m(t("input",{type:"radio",id:`cat-${s.id}`,value:s.id,"onUpdate:modelValue":d=>r.value.category=d,class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,8,Ie),[[de,r.value.category]]),t("label",{for:`cat-${s.id}`,class:"ml-2 text-sm text-gray-700"},n(s.name),9,Ve)]))),128))],512),[[L,g.value.category]])]),t("div",Ee,[t("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[6]||(e[6]=s=>C("price"))},[t("span",Ue,n(v(u)("products.price")),1),(l(),i("svg",{class:_([{"rotate-180":g.value.price},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[14]||(e[14]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),m(t("div",De,[t("div",Ne,[m(t("input",{type:"number",placeholder:"Min","onUpdate:modelValue":e[7]||(e[7]=s=>r.value.priceRange.min=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[E,r.value.priceRange.min,void 0,{number:!0}]]),e[15]||(e[15]=t("span",null,"-",-1)),m(t("input",{type:"number",placeholder:"Max","onUpdate:modelValue":e[8]||(e[8]=s=>r.value.priceRange.max=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[E,r.value.priceRange.max,void 0,{number:!0}]])])],512),[[L,g.value.price]])])])])]),t("div",We,[t("h2",qe,n(M.value.title),1),t("div",He,[(l(!0),i(j,null,O(H.value,(s,d)=>(l(),i("div",{key:s.id,class:"group flex flex-col items-start cursor-pointer h-full bg-white transition-all pb-4 rounded-lg shadow-lg duration-300 hover:-translate-y-2 hover:shadow-xl",onClick:o=>v(P).push({name:"Product-details",params:{id:s.id}})},[t("div",Ge,[t("img",{src:s.img,alt:s.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,Je),e[17]||(e[17]=t("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1)),v(B).authenticatedweb?(l(),i("button",{key:0,class:"absolute top-2 right-2 p-2 rounded-full bg-white text-gray-500 hover:text-red-500 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 z-10",onClick:U(o=>J(s),["stop"]),"aria-label":s.is_wished?"Remove from wishlist":"Add to wishlist",title:s.is_wished?"Remove from wishlist":"Add to wishlist"},[(l(),i("svg",{class:_(["w-5 h-5",{"text-red-500":s.is_wished}]),fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[16]||(e[16]=[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},null,-1)]),2))],8,Ke)):R("",!0)]),t("div",Qe,[t("p",Xe,n(K(s.name,30)),1),s.sub_name?(l(),i("p",Ye,n(s.sub_name.slice(0,37)),1)):R("",!0),t("div",Ze,[t("span",et," $"+n(s.price)+" "+n(a.$t("currencyLabel")),1),v(B).authenticatedweb?(l(),i("button",{key:0,class:_(["p-2 rounded-full bg-gray-100 text-[#A6853B] transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-[#A6853B] focus:ring-offset-2",{"hover:bg-[#A6853B] hover:text-white":!s.in_cart&&!s.isOutOfStock,"bg-gray-300 text-gray-500 cursor-not-allowed":s.isOutOfStock}]),disabled:s.isOutOfStock,onClick:U(o=>G(s),["stop"]),"aria-label":s.in_cart?"In cart":s.isOutOfStock?"Out of stock":"Add to cart",title:s.in_cart?"In cart":s.isOutOfStock?"Out of stock":"Add to cart"},[s.in_cart?(l(),i("svg",st,e[18]||(e[18]=[t("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(l(),i("svg",at,e[19]||(e[19]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,tt)):R("",!0)])])],8,Te))),128))]),t("div",ot,[re(v(ue),{rows:w.value,totalRecords:A.value,pageLinkSize:3,first:(f.value-1)*w.value,onPage:e[9]||(e[9]=s=>T(s)),template:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])])]))]))}},ut=X(lt,[["__scopeId","data-v-bb763346"]]);export{ut as default};
