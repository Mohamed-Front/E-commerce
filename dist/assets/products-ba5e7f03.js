import{_ as U,l as W,u as X,k as Y,r as d,m as Z,a as c,b as g,e as s,t as u,h as n,f as A,w as S,g as f,j as h,F as O,d as D,i as b}from"./index-c1f9e4e6.js";import{b as $,S as j,A as M,a as z}from"./productsSwiper-f55d69b1.js";import{N as R}from"./navigation-563b1407.js";/* empty css                   */import{_}from"./banner-addtion-03b7a236.js";const ee={class:"mx-auto bg-gradient-to mt-16 max-w-7xl px-4 sm:px-6 lg:px-8"},ae={key:0,class:"text-center py-16 animate-pulse"},te={class:"text-gray-600 text-lg font-medium"},se={key:1,class:"text-center py-16 text-red-600"},le={class:"text-lg font-semibold"},re={key:2},oe={class:"text-center mb-8"},ne={class:"text-4xl sm:text-4xl font-extrabold text-gray-800 tracking-tight animate-fade-in"},ie={class:""},ce={class:"font-bold font-sans text-gray-800 text-2xl sm:text-3xl lg:text-4xl mb-8 animate-slide-up"},de={class:"w-full h-48 overflow-hidden rounded-xl shadow-md relative"},me=["src","alt"],ue={class:"font-sans mt-4 mb-1 text-gray-800 font-semibold text-sm sm:text-base md:text-lg"},_e={class:""},ge={key:1,class:"mt-16"},pe={class:"font-bold font-sans text-gray-800 text-2xl sm:text-3xl lg:text-4xl mb-8"},ve={class:"w-full h-48 overflow-hidden rounded-xl shadow-md relative"},fe=["src","alt"],ye={class:"font-sans mt-4 mb-1 text-gray-800 font-semibold text-sm sm:text-base md:text-lg"},xe={class:"text-gray-600 text-sm"},he={__name:"products",setup(be){const I=W(),q=X(),{t:i,locale:p}=Y(),v=d(localStorage.getItem("defaultStoreId")),w=d({}),y=d([]),V=d({title:"",products:[]}),k=d([]),F=d({title:"",products:[]}),B=d({title:"",products:[]}),P=d({title:"",products:[]}),E=d(!1),m=d(null),x=a=>p.value==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar,G=async()=>{try{const t=(await b.get(`/api/home/products-by-category/${I.params.id}/${v.value}`)).data.data;w.value={id:t.category.id,name_ar:t.category.name_ar,name_en:t.category.name_en,media:t.category.media||[{url:_,name:"default"}]},y.value=t.sub_categories.map(e=>({id:e.id,name_ar:e.name_ar||e.name_en,name_en:e.name_en||e.name_ar,media:e.media||[{url:_,name:"default"}]})),V.value={title:x(w.value),products:(t.products.data||[]).map(e=>{var r,o;return{id:e.id,name:p.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax,price:parseFloat(e.base_price||0).toFixed(2),img:((o=(r=e.media)==null?void 0:r.find(l=>l.name==="product_main_image"))==null?void 0:o.url)||e.key_default_image||_}})}}catch(a){console.error("Error fetching category data:",a),m.value=i("category.errorLoading")||"Failed to load category data."}},H=async()=>{try{const a=y.value.map(async e=>((await b.get(`/api/home/products-by-category/${e.id}/${v.value}`)).data.data.products.data||[]).map(l=>{var C,L;return{id:l.id,name:p.value==="ar"?l.name_ar||l.name_en:l.name_en||l.name_ar,tax:l.tax,price:parseFloat(l.base_price||0).toFixed(2),img:((L=(C=l.media)==null?void 0:C.find(T=>T.name==="product_main_image"))==null?void 0:L.url)||l.key_default_image||_}})),t=await Promise.allSettled(a);k.value=t.filter(e=>e.status==="fulfilled").flatMap(e=>e.value)}catch(a){console.error("Error fetching subcategory products:",a),m.value=i("category.errorLoading")||"Failed to load subcategory products."}},J=async()=>{try{const t=(await b.get(`/api/home/best-sellers/${v.value}`)).data.data.data||[];F.value={title:i("category.bestsellers")||"Best Sellers",products:t.map(e=>{var r,o;return{id:e.id,name:p.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax,price:parseFloat(e.base_price||0).toFixed(2),img:((o=(r=e.media)==null?void 0:r.find(l=>l.name==="product_main_image"))==null?void 0:o.url)||e.key_default_image||_}})}}catch(a){console.error("Error fetching best sellers:",a),m.value=i("category.errorLoading")||"Failed to load best sellers."}},K=async()=>{try{const t=(await b.get(`/api/home/new-arrivals/${v.value}`)).data.data.data||[];B.value={title:i("category.newlyarrived")||"New Arrivals",products:t.map(e=>{var r,o;return{id:e.id,name:p.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax,price:parseFloat(e.base_price||0).toFixed(2),img:((o=(r=e.media)==null?void 0:r.find(l=>l.name==="product_main_image"))==null?void 0:o.url)||e.key_default_image||_}})}}catch(a){console.error("Error fetching new arrivals:",a),m.value=i("category.errorLoading")||"Failed to load new arrivals."}},Q=async()=>{try{const t=(await b.get(`/api/home/exclusive-offers/${v.value}`)).data.data||[];P.value={title:i("category.exclusive")||"Exclusive Offers",products:t.map(e=>{var r,o;return{id:e.id,name:p.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,tax:e.tax,price:parseFloat(e.base_price||0).toFixed(2),img:((o=(r=e.media)==null?void 0:r.find(l=>l.name==="product_main_image"))==null?void 0:o.url)||e.key_default_image||_}})}}catch(a){console.error("Error fetching exclusive offers:",a),m.value=i("category.errorLoading")||"Failed to load exclusive offers."}},N=async()=>{E.value=!0,m.value=null,await Promise.allSettled([G(),J(),K(),Q()]),y.value.length&&await H(),E.value=!1};return Z(()=>{I.params.id&&v.value?N():m.value=i("category.missingParams")||"Missing category or store ID."}),(a,t)=>(c(),g("div",ee,[E.value?(c(),g("div",ae,[s("p",te,u(n(i)("category.loading")),1)])):m.value?(c(),g("div",se,[s("p",le,u(m.value),1),s("button",{onClick:N,class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded"},u(n(i)("category.retry")),1)])):(c(),g("div",re,[s("div",oe,[s("h1",ne,u(x(w.value)),1)]),s("div",ie,[s("h2",ce,u(n(i)("category.subCategories")),1),A(n(z),{modules:[n(M),n(R)],"slides-per-view":3,"space-between":20,loop:y.value.length>3,autoplay:{delay:3e3,disableOnInteraction:!1},speed:1e3,"grab-cursor":!0,navigation:!1,class:"mt-6 pb-12",breakpoints:{320:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:12},768:{slidesPerView:2,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20}}},{default:S(()=>[(c(!0),g(O,null,D(y.value,e=>(c(),f(n(j),{key:e.id,class:"group flex flex-col items-center cursor-pointer transition-all duration-300 hover:-translate-y-2",onClick:r=>n(q).push(`/categories/${e.id}`)},{default:S(()=>{var r,o;return[s("div",de,[s("img",{src:((o=(r=e.media)==null?void 0:r[0])==null?void 0:o.url)||n(_),alt:`${x(e)} image`,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,me),t[0]||(t[0]=s("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),s("h3",ue,u(x(e)),1)]}),_:2},1032,["onClick"]))),128))]),_:1},8,["modules","loop"])]),s("section",_e,[V.value.products.length?(c(),f($,{key:0,products:V.value,title:x(w.value)},null,8,["products","title"])):h("",!0),k.value.length?(c(),g("div",ge,[s("h2",pe,u(n(i)("category.subCategoryProducts")),1),A(n(z),{modules:[n(M),n(R)],"slides-per-view":3,"space-between":20,loop:k.value.length>3,autoplay:{delay:3e3,disableOnInteraction:!1},speed:1e3,"grab-cursor":!0,navigation:!0,class:"mt-6 pb-12",breakpoints:{320:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:12},768:{slidesPerView:2,spaceBetween:16},1024:{slidesPerView:4,spaceBetween:20}}},{default:S(()=>[(c(!0),g(O,null,D(k.value,e=>(c(),f(n(j),{key:e.id,class:"group flex flex-col items-center cursor-pointer transition-all duration-300 hover:-translate-y-2"},{default:S(()=>[s("div",ve,[s("img",{src:e.img,alt:`${e.name} image`,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,fe),t[1]||(t[1]=s("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),s("h3",ye,u(e.name),1),s("p",xe,"$"+u(e.price),1)]),_:2},1024))),128))]),_:1},8,["modules","loop"])])):h("",!0),P.value.products.length?(c(),f($,{key:2,products:P.value,title:P.value.title},null,8,["products","title"])):h("",!0),F.value.products.length?(c(),f($,{key:3,products:F.value,title:F.value.title},null,8,["products","title"])):h("",!0),B.value.products.length?(c(),f($,{key:4,products:B.value,title:B.value.title},null,8,["products","title"])):h("",!0)])]))]))}},Se=U(he,[["__scopeId","data-v-e130e204"]]);export{Se as default};
