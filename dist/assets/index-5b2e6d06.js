import{b as J,L as K,u as O,r as o,w as ee,d as te,y as ae,V as z,o as u,e as f,f as s,g as i,i as r,j as e,z as y,c as se,t as d,F,h as le,a as L,X as oe,Y as v,Z as ie,$ as ne,a0 as de,a1 as _,s as V,a2 as re,x as ce,B as pe,a3 as ue,a5 as ve}from"./index-b794012a.js";const _e={class:"grid"},he={class:"col-12"},me={class:"card p-4 shadow-2 border-round"},ge={class:"text-2xl font-bold"},be={class:"flex gap-2"},fe={class:"p-input-icon-left"},ye=s("i",{class:"pi pi-search"},null,-1),xe={class:"card shadow-1 surface-0"},we={class:"text-center py-4"},ke=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1),Ce={class:"text-xl"},$e={class:"flex justify-content-center align-items-center py-4"},Pe={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ve={class:"p-paginator-left-content"},De={class:"p-paginator-current"},Ne={class:"p-paginator-right-content"},Te=["disabled"],Ue=s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1),Ee=[Ue],Re=["disabled"],Be=s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1),Ie=[Be],Se=["onClick"],je={key:1,class:"p-paginator-dots"},ze=["disabled"],Fe=s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1),Le=[Fe],Me=["disabled"],Ae=s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1),Ge=[Ae],Qe={class:"flex align-items-center justify-content-center"},We=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1),qe={setup(Xe){const D=J(),C=K(),{t:a}=O(),x=o(!0),N=o([]),h=o(!1),T=o(null),U=o(null),M=o({}),w=o("");o(null);const c=o(1),$=o(0),p=o(10),k=o(0),A=o(""),G=o(""),E=o(""),R=o(""),B=o(0),I=o(0),S=o([]),m=()=>{x.value=!0,L.get("/api/product",{params:{page:c.value,limit:p.value,search:w.value||void 0}}).then(l=>{N.value=l.data.data.data,$.value=l.data.data.total,k.value=l.data.data.last_page,A.value=l.data.data.first_page_url,G.value=l.data.data.last_page_url,E.value=l.data.data.next_page_url,R.value=l.data.data.prev_page_url,B.value=l.data.data.from,I.value=l.data.data.to,S.value=l.data.data.links,x.value=!1}).catch(l=>{C.add({severity:"error",summary:a("error"),detail:a("product.loadError"),life:3e3}),x.value=!1,console.error("Error fetching products:",l)})};ee([w,p],()=>{c.value=1,m()});const g=l=>{l>=1&&l<=k.value&&(c.value=l,m())},Q=l=>{p.value=l.value,c.value=1,m()},W=l=>{T.value=l,h.value=!0},X=()=>{L.delete(`/api/product/${T.value}`).then(()=>{C.add({severity:"success",summary:a("success"),detail:a("product.deleteSuccess"),life:3e3}),m(),h.value=!1}).catch(l=>{C.add({severity:"error",summary:a("error"),detail:a("product.deleteError"),life:3e3}),console.error("Error deleting product:",l)})},Y=()=>{U.value.exportCSV()},Z=()=>{D.push({name:"product-create"})},q=l=>{D.push({name:"product-update",params:{id:l}})};return te(()=>{m()}),(l,n)=>{const H=ae("Tag"),b=z("can"),j=z("tooltip");return u(),f("div",_e,[s("div",he,[s("div",me,[i(e(ie),{class:"mb-4"},{start:r(()=>[s("h2",ge,d(e(a)("product.managementTitle")),1)]),end:r(()=>[s("div",be,[s("span",fe,[ye,i(e(oe),{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=t=>w.value=t),placeholder:e(a)("product.search")},null,8,["modelValue","placeholder"])]),y(i(e(v),{label:e(a)("product.export"),icon:"pi pi-upload",class:"p-export",onClick:Y},null,8,["label"]),[[b,"list products"]]),y(i(e(v),{label:e(a)("product.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Z},null,8,["label"]),[[b,"create products"]])])]),_:1}),i(e(ne)),s("div",xe,[y((u(),se(e(re),{ref_key:"dt",ref:U,value:N.value,loading:x.value,"data-key":"id",paginator:!1,rows:p.value,filters:M.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[s("div",we,[ke,s("p",Ce,d(e(a)("product.noData")),1)])]),loading:r(()=>[s("div",$e,[i(e(de),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[i(e(_),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(_),{field:"name_ar",header:e(a)("product.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[V(d(t.data.name_ar),1)]),_:1},8,["header"]),i(e(_),{field:"name_en",header:e(a)("product.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[V(d(t.data.name_en),1)]),_:1},8,["header"]),i(e(_),{field:"base_price",header:e(a)("product.basePrice"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[V(d(t.data.base_price),1)]),_:1},8,["header"]),i(e(_),{field:"is_displayed",header:e(a)("product.isDisplayed"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[i(H,{value:t.data.is_displayed?e(a)("yes"):e(a)("no"),severity:t.data.is_displayed?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(_),{header:e(a)("actions"),"header-style":"width: 12rem"},{body:r(t=>[y(i(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:P=>q(t.data.id)},null,8,["onClick"]),[[b,"edit products"],[j,e(a)("edit"),void 0,{top:!0}]]),y(i(e(v),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:P=>W(t.data.id)},null,8,["onClick"]),[[b,"delete products"],[j,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list products"]]),s("div",Pe,[s("div",Ve,[s("span",De,d(e(a)("show"))+" "+d(B.value)+" "+d(e(a)("to"))+" "+d(I.value)+" "+d(e(a)("from"))+" "+d($.value),1)]),s("div",Ne,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:n[1]||(n[1]=t=>g(1))},Ee,8,Te),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!R.value,onClick:n[2]||(n[2]=t=>g(c.value-1))},Ie,8,Re),(u(!0),f(F,null,le(S.value,(t,P)=>(u(),f(F,{key:P},[t.label&&!isNaN(parseInt(t.label))?(u(),f("button",{key:0,class:ce(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Ye=>g(parseInt(t.label))},d(t.label),11,Se)):t.label==="..."?(u(),f("span",je,"...")):pe("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!E.value,onClick:n[3]||(n[3]=t=>g(c.value+1))},Le,8,ze),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===k.value,onClick:n[4]||(n[4]=t=>g(k.value))},Ge,8,Me),i(e(ue),{modelValue:p.value,"onUpdate:modelValue":n[5]||(n[5]=t=>p.value=t),options:[5,10,20,30],onChange:Q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(e(ve),{visible:h.value,"onUpdate:visible":n[7]||(n[7]=t=>h.value=t),style:{width:"450px"},header:e(a)("product.deleteConfirmTitle"),modal:!0},{footer:r(()=>[i(e(v),{label:e(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:n[6]||(n[6]=t=>h.value=!1)},null,8,["label"]),i(e(v),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:r(()=>[s("div",Qe,[We,s("span",null,d(e(a)("product.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{qe as default};
