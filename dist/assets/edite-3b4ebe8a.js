import{_ as $,m as z,b as J,I as O,u as q,r as i,d as H,v as b,S as K,o as n,e as d,x as Q,f as a,g as u,i as I,L as x,F as W,a as j,p as w,t as E,z as N,s as X,j as Y}from"./index-23aef111.js";const Z={class:"max-w-5xl p-6 mx-auto bg-white shadow-lg rounded-xl"},ee={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},ae={class:"space-y-2"},te={key:0,class:"text-xs text-red-500"},se={class:"space-y-2"},oe={key:0,class:"text-xs text-red-500"},re={class:"space-y-2 md:col-span-2"},le={class:"flex justify-center"},ne={key:0,class:"p-4"},de={class:"relative group"},ie=["src"],ue={class:"absolute inset-0 flex items-center justify-center transition-all duration-300 bg-black bg-opacity-0 rounded-lg group-hover:bg-opacity-30"},ce={class:"space-x-3 transition-all duration-300 transform translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0"},pe={class:"p-2 text-gray-700 transition bg-white rounded-full cursor-pointer hover:bg-gray-100"},me={key:1,class:"flex flex-col items-center justify-center p-8"},ge={class:"flex justify-center pt-4 space-x-4"},ve={key:0},fe={key:1,class:"pi pi-spinner pi-spin"},be={__name:"edite",setup(xe){const T=z(),k=J(),_=O(),{t:y}=q(),c=i(),r=i(!1),g=i(null),p=i(null),m=i(!1),D=i(T.params.id),l=i({name_en:"",name_ar:"",image:null}),U=async()=>{var t,e,o;try{r.value=!0;const s=await j.get(`/api/brand/${D.value}`);l.value=s.data.data,(t=s.data.data.media[0])!=null&&t.url&&(p.value=s.data.data.media[0].url),r.value=!1}catch(s){console.error("Error fetching brand:",s),_.add({severity:"error",summary:y("error"),detail:((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to fetch brand",life:3e3}),r.value=!1}};H(()=>{U()});const G=t=>{t.preventDefault(),m.value=!0},L=()=>{m.value=!1},P=t=>{g.value=t;const e=new FileReader;e.onload=o=>{p.value=o.target.result},e.readAsDataURL(t),m.value=!1},h=t=>{var o,s,v;const e=((o=t.target.files)==null?void 0:o[0])||((v=(s=t.dataTransfer)==null?void 0:s.files)==null?void 0:v[0]);e&&e.type.match("image.*")&&P(e)},R=()=>{g.value=null,p.value=null,l.value.image=null},S=async()=>{r.value=!0;const t=new FormData;t.append("name_en",l.value.name_en),t.append("name_ar",l.value.name_ar),t.append("_method","post"),g.value?t.append("image",g.value):l.value.image===null&&t.append("remove_image","true"),j.post(`/api/brand/${D.value}`,t).then(e=>{k.push({name:"brand"}),_.add({severity:"success",summary:y("success"),detail:"Brand updated successfully",life:3e3}),r.value=!1}).catch(e=>{var o,s;console.error("Error:",e),_.add({severity:"error",summary:y("error"),detail:((s=(o=e.response)==null?void 0:o.data)==null?void 0:s.message)||"An error occurred",life:3e3}),r.value=!1})};return(t,e)=>{const o=b("InputText"),s=b("Button"),v=b("Form"),A=b("Toast"),M=K("can");return n(),d(W,null,[Q((n(),d("div",Z,[e[10]||(e[10]=a("h1",{class:"mb-8 text-3xl font-bold text-center text-gray-800"},"Edit Brand",-1)),u(v,{ref_key:"form",ref:c,onSubmit:x(S,["prevent"]),class:"space-y-6"},{default:I(()=>{var B,C,V,F;return[a("div",ee,[a("div",ae,[e[3]||(e[3]=a("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[w(" English Name "),a("span",{class:"text-red-500"},"*")],-1)),u(o,{id:"name_en",modelValue:l.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=f=>l.value.name_en=f),placeholder:"Enter brand name in English",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(C=(B=c.value)==null?void 0:B.errors)!=null&&C.name_en?(n(),d("small",te,E(c.value.errors.name_en[0]),1)):N("",!0)]),a("div",se,[e[4]||(e[4]=a("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[w(" Arabic Name "),a("span",{class:"text-red-500"},"*")],-1)),u(o,{id:"name_ar",modelValue:l.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=f=>l.value.name_ar=f),placeholder:"أدخل اسم العلامة التجارية بالعربية",dir:"rtl",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(F=(V=c.value)==null?void 0:V.errors)!=null&&F.name_ar?(n(),d("small",oe,E(c.value.errors.name_ar[0]),1)):N("",!0)]),a("div",re,[e[9]||(e[9]=a("label",{class:"block text-sm font-medium text-gray-700"},"Brand Logo",-1)),a("div",le,[a("label",{onDragover:x(G,["prevent"]),onDragleave:L,onDrop:x(h,["prevent"]),class:X([{"border-blue-500 bg-blue-50":m.value,"border-gray-300":!m.value},"w-full max-w-md transition-colors duration-300 border-2 border-dashed cursor-pointer rounded-xl"])},[a("input",{type:"file",onChange:h,accept:"image/*",class:"hidden"},null,32),p.value?(n(),d("div",ne,[a("div",de,[a("img",{src:p.value,alt:"Preview",class:"object-contain w-full h-64 transition-transform duration-300 rounded-lg shadow-md group-hover:scale-105"},null,8,ie),a("div",ue,[a("div",ce,[a("button",{type:"button",onClick:x(R,["stop"]),class:"p-2 text-white transition bg-red-500 rounded-full hover:bg-red-600"},e[5]||(e[5]=[a("i",{class:"text-sm pi pi-trash"},null,-1)])),a("label",pe,[e[6]||(e[6]=a("i",{class:"text-sm pi pi-pencil"},null,-1)),a("input",{type:"file",onChange:h,accept:"image/*",class:"hidden"},null,32)])])])]),e[7]||(e[7]=a("p",{class:"mt-2 text-sm text-center text-gray-500"},"Click or drag to change logo",-1))])):(n(),d("div",me,e[8]||(e[8]=[a("div",{class:"p-4 mb-4 bg-blue-100 rounded-full"},[a("i",{class:"text-2xl text-blue-500 pi pi-image"})],-1),a("p",{class:"mb-1 text-sm text-center text-gray-600"},[a("span",{class:"font-medium text-blue-500"},"Click to upload"),w(" or drag and drop ")],-1),a("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)])))],34)])])]),a("div",ge,[u(s,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:e[2]||(e[2]=f=>Y(k).go(-1)),class:"flex items-center justify-center px-6 py-3 mx-2 space-x-2 text-gray-700 transition-all duration-300 bg-gray-200 rounded-lg shadow-md hover:bg-gray-300 hover:shadow-lg",disabled:r.value},null,8,["disabled"]),u(s,{type:"submit",label:"Update Brand",icon:"pi pi-check",loading:r.value,class:"flex items-center justify-center px-8 py-3 space-x-2 text-white transition-all duration-300 rounded-lg shadow-md bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 hover:shadow-lg",disabled:r.value},{default:I(()=>[r.value?(n(),d("i",fe)):(n(),d("span",ve,"Update Brand"))]),_:1},8,["loading","disabled"])])]}),_:1},512)])),[[M,"edit brands"]]),u(A)],64)}}},ye=$(be,[["__scopeId","data-v-07a9929f"]]);export{ye as default};
