import{k as b,l as F,r as o,m as k,a as E,b as S,f as m,i as f}from"./index-b4e8db96.js";import{b as v}from"./productsSwiper-6ea64380.js";const I={__name:"products",setup(B){const{t:s,locale:c}=b();F();const d=o(localStorage.getItem("defaultStoreId")),i=o({title:"",products:[]}),_=o({title:"",products:[]}),g=o({title:"",products:[]}),p=o(!1),u=o(null),x=async()=>{try{const l=(await f.get(`/api/home/best-sellers/${d.value}`)).data.data.data||[];i.value={title:s("category.bestsellers")||"Best Sellers",products:l.map(e=>{var t,r;return{id:e.id,name:c.value==="ar"?e.name_ar:e.name_en,tax:e.tax,price:parseFloat(e.base_price).toFixed(2),img:((r=(t=e.media)==null?void 0:t.find(n=>n.name==="product_main_image"))==null?void 0:r.url)||e.key_default_image||""}})}}catch(a){console.error("Error fetching best sellers:",a),u.value=s("category.errorLoading")||"Failed to load best sellers."}},y=async()=>{try{const l=(await f.get(`/api/home/new-arrivals/${d.value}`)).data.data.data||[];_.value={title:s("category.newlyarrived")||"New Arrivals",products:l.map(e=>{var t,r;return{id:e.id,tax:e.tax,name:c.value==="ar"?e.name_ar:e.name_en,price:parseFloat(e.base_price).toFixed(2),img:((r=(t=e.media)==null?void 0:t.find(n=>n.name==="product_main_image"))==null?void 0:r.url)||e.key_default_image||""}})}}catch(a){console.error("Error fetching new arrivals:",a),u.value=s("category.errorLoading")||"Failed to load new arrivals."}},h=async()=>{try{const l=(await f.get(`/api/home/exclusive-offers/${d.value}`)).data.data||[];g.value={title:s("category.exclusive")||"Exclusive Offers",products:l.map(e=>{var t,r;return{id:e.id,tax:e.tax,name:c.value==="ar"?e.name_ar:e.name_en,price:parseFloat(e.base_price).toFixed(2),img:((r=(t=e.media)==null?void 0:t.find(n=>n.name==="product_main_image"))==null?void 0:r.url)||e.key_default_image||""}})}}catch(a){console.error("Error fetching exclusive offers:",a),u.value=s("category.errorLoading")||"Failed to load exclusive offers."}},w=async()=>{console.log("loaddata function called")};return k(async()=>{p.value=!0,await Promise.all([y(),x(),w(),h()]),p.value=!1}),(a,l)=>(E(),S("div",null,[m(v,{products:g.value,title:i.value.title},null,8,["products","title"]),m(v,{products:i.value,title:i.value.title},null,8,["products","title"]),m(v,{products:_.value,title:i.value.title},null,8,["products","title"])]))}};export{I as default};
