import{_ as re,G as de,u as ce,f as pe,r as l,g as ue,w as _e,o as ve,h as c,i as A,b as h,c as x,j as t,e as n,k as d,l as w,m as he,t as r,B as o,F as L,n as me,p as ge,a as q,q as I,s as be,v as fe,x as ye,y as xe}from"./index-7330e92f.js";const u=k=>(ye("data-v-49d013f9"),k=k(),xe(),k),we={class:"grid"},ke={class:"col-12"},Ce={class:"card p-4 shadow-2 border-round"},Te={class:"text-2xl font-bold"},Ve={class:"flex gap-2"},De={class:"p-input-icon-left"},Pe=u(()=>t("i",{class:"pi pi-search"},null,-1)),Se={class:"card shadow-1 surface-0"},Ie={class:"text-center py-4"},Ne=u(()=>t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Ue={class:"text-xl"},$e={class:"flex justify-content-center align-items-center py-4"},Be={class:"p-paginator p-component p-unselectable-text mt-3"},Me={class:"p-paginator-left-content"},Re={class:"p-paginator-current"},Ee={class:"p-paginator-right-content"},Fe={class:"p-paginator-pages"},je=["disabled"],Ge=u(()=>t("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),ze=[Ge],Ae=["disabled"],Le=u(()=>t("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),qe=[Le],Oe=["onClick"],Qe={key:1,class:"p-paginator-dots"},We=["disabled"],He=u(()=>t("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Je=[He],Ke=["disabled"],Xe=u(()=>t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Ye=[Xe],Ze={class:"p-paginator-rpp-options"},et={class:"flex align-items-center justify-content-center"},tt=u(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),at={setup(k){const{t:a}=de(),N=ce(),D=pe(),C=l(!0),U=l(""),$=l(null),m=l(!1);l(null);const B=l(null),M=l({}),T=l(""),p=l(1),P=l(0),g=l(10),V=l(0),O=l(""),Q=l(""),R=l(""),E=l(""),F=l(0),j=l(0),G=l([]),W=()=>{B.value.exportCSV()},H=s=>{U.value=s,m.value=!0},J=()=>{q.delete(`/api/user/${U.value}`).then(()=>{b(),m.value=!1,D.add({severity:"success",summary:a("success"),detail:a("user.deleteSuccess"),life:3e3})}).catch(s=>{D.add({severity:"error",summary:a("error"),detail:a("user.deleteError"),life:3e3})})},K=()=>{M.value={global:{value:null,matchMode:ge.CONTAINS}}};ue(()=>{K()});const b=()=>{C.value=!0,q.get("/api/user",{params:{page:p.value,limit:g.value,search:T.value}}).then(s=>{C.value=!1,$.value=s.data.data.data,P.value=s.data.data.total,V.value=s.data.data.last_page,O.value=s.data.data.first_page_url,Q.value=s.data.data.last_page_url,R.value=s.data.data.next_page_url,E.value=s.data.data.prev_page_url,F.value=s.data.data.from,j.value=s.data.data.to,G.value=s.data.data.links}).catch(s=>{C.value=!1,D.add({severity:"error",summary:a("error"),detail:a("user.loadError"),life:3e3}),console.error("Error fetching data:",s)})};_e(T,s=>{p.value=1,b()});const f=s=>{s>=1&&s<=V.value&&(p.value=s,b())},X=s=>{g.value=s.value,p.value=1,b()};ve(()=>{b()});const Y=()=>{N.push({name:"user-create"})},Z=s=>{N.push({name:"user-edit",params:{id:s}})};return(s,i)=>{const ee=c("InputText"),_=c("Button"),te=c("Toolbar"),ae=c("Toast"),v=c("Column"),se=c("Tag"),oe=c("ProgressSpinner"),le=c("DataTable"),ne=c("Dropdown"),ie=c("Dialog"),y=A("can"),z=A("tooltip");return h(),x("div",we,[t("div",ke,[t("div",Ce,[n(te,{class:"mb-4"},{start:d(()=>[t("h2",Te,r(o(a)("user.managementTitle")),1)]),end:d(()=>[t("div",Ve,[t("span",De,[Pe,n(ee,{modelValue:T.value,"onUpdate:modelValue":i[0]||(i[0]=e=>T.value=e),placeholder:o(a)("user.search")},null,8,["modelValue","placeholder"])]),w(n(_,{label:o(a)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:W},null,8,["label"]),[[y,"export users"]]),w(n(_,{label:o(a)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Y},null,8,["label"]),[[y,"create users"]])])]),_:1}),n(ae),t("div",Se,[w((h(),he(le,{ref_key:"dt",ref:B,value:$.value,loading:C.value,"data-key":"id",paginator:!1,rows:g.value,filters:M.value,totalRecords:P.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[t("div",Ie,[Ne,t("p",Ue,r(o(a)("user.noData")),1)])]),loading:d(()=>[t("div",$e,[n(oe,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(v,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(v,{field:"name",header:o(a)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[I(r(e.data.name),1)]),_:1},8,["header"]),n(v,{field:"email",header:o(a)("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[I(r(e.data.email),1)]),_:1},8,["header"]),n(v,{field:"phone",header:o(a)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[I(r(e.data.phone),1)]),_:1},8,["header"]),n(v,{field:"type_description",header:o(a)("user.type"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[n(se,{value:e.data.type_description,severity:{Admin:"info",Customer:"success",Guest:"danger"}[e.data.type_description]||"warning"},null,8,["value","severity"])]),_:1},8,["header"]),n(v,{header:o(a)("actions"),"header-style":"min-width:10rem;"},{body:d(e=>[w(n(_,{icon:"pi pi-pencil",class:"p-detail",onClick:S=>Z(e.data.id)},null,8,["onClick"]),[[y,"edit users"],[z,o(a)("edit"),void 0,{top:!0}]]),w(n(_,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:S=>H(e.data.id)},null,8,["onClick"]),[[y,"delete users"],[z,o(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[y,"list users"]]),t("div",Be,[t("div",Me,[t("span",Re,r(o(a)("showing"))+" "+r(F.value)+" "+r(o(a)("to"))+" "+r(j.value)+" "+r(o(a)("of"))+" "+r(P.value)+" "+r(o(a)("entries")),1)]),t("div",Ee,[t("span",Fe,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:i[1]||(i[1]=e=>f(1))},ze,8,je),t("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!E.value,onClick:i[2]||(i[2]=e=>f(p.value-1))},qe,8,Ae),(h(!0),x(L,null,me(G.value,(e,S)=>(h(),x(L,{key:S},[e.label&&!isNaN(e.label)?(h(),x("button",{key:0,class:be(["p-paginator-page p-paginator-element p-link",{"p-highlight":e.active}]),onClick:st=>f(parseInt(e.label))},r(e.label),11,Oe)):e.label==="..."?(h(),x("span",Qe,"...")):fe("",!0)],64))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!R.value,onClick:i[3]||(i[3]=e=>f(p.value+1))},Je,8,We),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===V.value,onClick:i[4]||(i[4]=e=>f(V.value))},Ye,8,Ke)]),t("span",Ze,[n(ne,{modelValue:g.value,"onUpdate:modelValue":i[5]||(i[5]=e=>g.value=e),options:[5,10,20,30],optionLabel:"label",optionValue:"value",onChange:X,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])]),n(ie,{visible:m.value,"onUpdate:visible":i[7]||(i[7]=e=>m.value=e),style:{width:"450px"},header:o(a)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(_,{label:o(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:i[6]||(i[6]=e=>m.value=!1)},null,8,["label"]),n(_,{label:o(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:J},null,8,["label"])]),default:d(()=>[t("div",et,[tt,t("span",null,r(o(a)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},lt=re(at,[["__scopeId","data-v-49d013f9"]]);export{lt as default};
