import{_ as ie,b as de,L as ce,u as ue,r as n,w as pe,d as ve,V as me,o as f,e as D,f as o,g as s,i,j as e,z as x,c as ge,t as d,F as O,h as _e,a as N,X as be,Y as p,Z as he,$ as ye,a0 as fe,a1 as c,s as E,a6 as xe,a2 as Q,x as ke,B as we,a3 as Ce,a5 as W,a7 as $e,p as Ue,m as De}from"./index-b794012a.js";const g=L=>(Ue("data-v-9247aff2"),L=L(),De(),L),Ee={class:"grid"},Le={class:"col-12"},Re={class:"card p-4 shadow-2 border-round"},Ve={class:"text-2xl font-bold"},Ie={class:"flex gap-2"},Ne={class:"p-input-icon-left"},Pe=g(()=>o("i",{class:"pi pi-search"},null,-1)),Se={class:"card shadow-1 surface-0"},Fe={class:"text-center py-4"},Te=g(()=>o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Be={class:"text-xl"},je={class:"flex justify-content-center align-items-center py-4"},Me={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},ze={class:"p-paginator-left-content"},Ae={class:"p-paginator-current"},Ge={class:"p-paginator-right-content"},Oe=["disabled"],Qe=g(()=>o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),We=[Qe],Xe=["disabled"],Ye=g(()=>o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Ze=[Ye],qe=["onClick"],He={key:1,class:"p-paginator-dots"},Je=["disabled"],Ke=g(()=>o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),ea=[Ke],aa=["disabled"],ta=g(()=>o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),la=[ta],sa={class:"flex align-items-center justify-content-center"},oa=g(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),ra={class:"flex flex-column gap-3"},na={setup(L){const _={mounted(l,r){}},S=de(),m=ce(),{t:a}=ue(),R=n(!0),F=n([]),k=n(!1),T=n(null),X=n(null),Y=n({}),V=n(""),B=n(null),w=n(!1),b=n(null),C=n(!1),v=n(1),P=n(0),h=n(10),I=n(0),Z=n(""),q=n(""),j=n(""),M=n(""),z=n(0),A=n(0),G=n([]),H=n([{brand_name_ar:"ليستر",brand_name_en:"Luster"},{brand_name_ar:"لوكس",brand_name_en:"Lux"},{brand_name_ar:"مارفلوس",brand_name_en:"Marvelous"}]),y=()=>{R.value=!0,N.get("/api/category",{params:{page:v.value,limit:h.value,search:V.value||void 0}}).then(l=>{F.value=l.data.data.data,P.value=l.data.data.total,I.value=l.data.data.last_page,Z.value=l.data.data.first_page_url,q.value=l.data.data.last_page_url,j.value=l.data.data.next_page_url,M.value=l.data.data.prev_page_url,z.value=l.data.data.from,A.value=l.data.data.to,G.value=l.data.data.links,R.value=!1}).catch(l=>{m.add({severity:"error",summary:a("error"),detail:a("category.loadError"),life:3e3}),R.value=!1,console.error("Error fetching categories:",l)})};pe([V,h],()=>{v.value=1,y()});const $=l=>{l>=1&&l<=I.value&&(v.value=l,y())},J=l=>{h.value=l.value,v.value=1,y()},K=l=>{T.value=l,k.value=!0},ee=()=>{N.delete(`/api/category/${T.value}`).then(()=>{m.add({severity:"success",summary:a("success"),detail:a("category.deleteSuccess"),life:3e3}),y(),k.value=!1}).catch(l=>{m.add({severity:"error",summary:a("error"),detail:a("category.deleteError"),life:3e3})})},ae=()=>{N.get("/api/export/brands",{responseType:"blob"}).then(l=>{const r=new Blob([l.data],{type:"text/csv"}),U=window.URL.createObjectURL(r),t=document.createElement("a");t.href=U,t.setAttribute("download","brands_export.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(U)}).catch(l=>{m.add({severity:"error",summary:a("error"),detail:a("category.exportError"),life:3e3}),console.error("Error exporting brands:",l)})},te=()=>{w.value=!0,b.value=null},le=l=>{b.value=l.files[0]},se=()=>{if(!b.value){m.add({severity:"warn",summary:a("warning"),detail:a("category.importNoFile"),life:3e3});return}C.value=!0;const l=new FormData;l.append("file",b.value),N.post("/api/import/brands",l).then(()=>{m.add({severity:"success",summary:a("success"),detail:a("category.importSuccess"),life:3e3}),y(),w.value=!1,C.value=!1,b.value=null}).catch(r=>{m.add({severity:"error",summary:a("error"),detail:a("category.importError"),life:3e3}),C.value=!1,console.error("Error importing brands:",r)})},oe=()=>{S.push({name:"category-create"})},re=l=>{S.push({name:"category-update",params:{id:l}})},ne=l=>l===1?"success":"info";return ve(()=>{y()}),(l,r)=>{const U=me("tooltip");return f(),D("div",Ee,[o("div",Le,[o("div",Re,[s(e(he),{class:"mb-4"},{start:i(()=>[o("h2",Ve,d(e(a)("category.managementTitle")),1)]),end:i(()=>[o("div",Ie,[o("span",Ne,[Pe,s(e(be),{modelValue:V.value,"onUpdate:modelValue":r[0]||(r[0]=t=>V.value=t),placeholder:e(a)("category.search")},null,8,["modelValue","placeholder"])]),x(s(e(p),{label:e(a)("category.import"),icon:"pi pi-download",class:"other",onClick:te},null,8,["label"]),[[_,"import brands"]]),x(s(e(p),{label:e(a)("category.export"),icon:"pi pi-upload",class:"exite",onClick:ae},null,8,["label"]),[[_,"export brands"]]),x(s(e(p),{label:e(a)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:oe},null,8,["label"]),[[_,"create categories"]])])]),_:1}),s(e(ye)),o("div",Se,[x((f(),ge(e(Q),{ref_key:"dt",ref:X,value:F.value,selection:B.value,"onUpdate:selection":r[1]||(r[1]=t=>B.value=t),loading:R.value,"data-key":"id",paginator:!1,rows:h.value,filters:Y.value,totalRecords:P.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:i(()=>[o("div",Fe,[Te,o("p",Be,d(e(a)("category.noData")),1)])]),loading:i(()=>[o("div",je,[s(e(fe),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:i(()=>[s(e(c),{"selection-mode":"multiple","header-style":"width: 3rem"}),s(e(c),{field:"name_en",header:e(a)("id"),sortable:!0},{body:i(t=>[E(d(t.data.id),1)]),_:1},8,["header"]),s(e(c),{field:"name_en",header:e(a)("category.nameEn"),sortable:!0},{body:i(t=>[E(d(t.data.name_en),1)]),_:1},8,["header"]),s(e(c),{field:"name_ar",header:e(a)("category.nameAr"),sortable:!0},{body:i(t=>[E(d(t.data.name_ar),1)]),_:1},8,["header"]),s(e(c),{field:"is_market",header:e(a)("category.marketType"),sortable:!0},{body:i(t=>[s(e(xe),{value:t.data.is_market?e(a)("category.market"):e(a)("category.nonMarket"),severity:ne(t.data.is_market)},null,8,["value","severity"])]),_:1},8,["header"]),s(e(c),{field:"parent.name_en",header:e(a)("category.parent"),sortable:!0},{body:i(t=>{var u;return[E(d(((u=t.data.parent)==null?void 0:u.name_en)||e(a)("category.noParent")),1)]}),_:1},8,["header"]),s(e(c),{field:"store.name_en",header:e(a)("category.store"),sortable:!0},{body:i(t=>{var u;return[E(d(((u=t.data.store)==null?void 0:u.name_en)||""),1)]}),_:1},8,["header"]),s(e(c),{header:e(a)("actions"),"header-style":"width: 12rem"},{body:i(t=>[x(s(e(p),{icon:"pi pi-pencil",class:"p-detail",onClick:u=>re(t.data.id)},null,8,["onClick"]),[[_,"edit categories"],[U,e(a)("edit"),void 0,{top:!0}]]),x(s(e(p),{icon:"pi pi-trash",class:"p-delete",onClick:u=>K(t.data.id)},null,8,["onClick"]),[[_,"delete categories"],[U,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","selection","loading","rows","filters","totalRecords"])),[[_,"list categories"]]),o("div",Me,[o("div",ze,[o("span",Ae,d(e(a)("show"))+" "+d(z.value)+" "+d(e(a)("to"))+" "+d(A.value)+" "+d(e(a)("from"))+" "+d(P.value),1)]),o("div",Ge,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:v.value===1,onClick:r[2]||(r[2]=t=>$(1))},We,8,Oe),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!M.value,onClick:r[3]||(r[3]=t=>$(v.value-1))},Ze,8,Xe),(f(!0),D(O,null,_e(G.value,(t,u)=>(f(),D(O,{key:u},[t.label&&!isNaN(parseInt(t.label))?(f(),D("button",{key:0,class:ke(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:ia=>$(parseInt(t.label))},d(t.label),11,qe)):t.label==="..."?(f(),D("span",He,"...")):we("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!j.value,onClick:r[4]||(r[4]=t=>$(v.value+1))},ea,8,Je),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:v.value===I.value,onClick:r[5]||(r[5]=t=>$(I.value))},la,8,aa),s(e(Ce),{modelValue:h.value,"onUpdate:modelValue":r[6]||(r[6]=t=>h.value=t),options:[5,10,20,30],onChange:J,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),s(e(W),{visible:k.value,"onUpdate:visible":r[8]||(r[8]=t=>k.value=t),style:{width:"450px"},header:e(a)("category.deleteConfirmTitle"),modal:!0},{footer:i(()=>[s(e(p),{label:e(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:r[7]||(r[7]=t=>k.value=!1)},null,8,["label"]),s(e(p),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:ee},null,8,["label"])]),default:i(()=>[o("div",sa,[oa,o("span",null,d(e(a)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),s(e(W),{visible:w.value,"onUpdate:visible":r[10]||(r[10]=t=>w.value=t),style:{width:"600px"},header:e(a)("category.importInstructions"),modal:!0},{footer:i(()=>[s(e($e),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:e(a)("category.chooseFile"),onSelect:le,auto:!1,disabled:C.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),s(e(p),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text mt-3",onClick:r[9]||(r[9]=t=>w.value=!1)},null,8,["label"]),s(e(p),{label:e(a)("import"),icon:"pi pi-check",class:"p-button-success",onClick:se,disabled:!b.value,loading:C.value},null,8,["label","disabled","loading"])]),default:i(()=>[o("div",ra,[o("div",null,[s(e(Q),{value:H.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{default:i(()=>[s(e(c),{field:"brand_name_ar",header:e(a)("category.brandNameAr")},null,8,["header"]),s(e(c),{field:"brand_name_en",header:e(a)("category.brandNameEn")},null,8,["header"])]),_:1},8,["value"])])])]),_:1},8,["visible","header"])])])])}}},ca=ie(na,[["__scopeId","data-v-9247aff2"]]);export{ca as default};
