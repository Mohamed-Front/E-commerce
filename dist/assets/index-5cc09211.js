import{j as Y,u as ee,G as te,r as i,q as ae,m as le,o as se,R as z,a as u,c as b,f as s,h as n,w as d,e,z as _,b as oe,t as r,F as G,d as ie,Z as ne,i as P,S as re,U as v,$ as de,Q as pe,H as ce,a0 as C,p as Q,a1 as ue,y as ve,g as me,a2 as ge,a3 as fe}from"./index-e9816b7f.js";const he={class:"grid"},be={class:"col-12"},_e={class:"card p-4 shadow-2 border-round"},xe={class:"text-2xl font-bold"},ye={class:"flex gap-2"},ke={class:"p-input-icon-left"},we={class:"card shadow-1 surface-0"},Ce={class:"text-center py-4"},$e={class:"text-xl"},Ve={class:"flex justify-content-center align-items-center py-4"},Pe={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Re={class:"p-paginator-left-content"},Ne={class:"p-paginator-current"},Ue={class:"p-paginator-right-content"},De=["disabled"],Ee=["disabled"],Me=["onClick"],Se={key:1,class:"p-paginator-dots"},Be=["disabled"],Te=["disabled"],Fe={class:"flex align-items-center justify-content-center"},Ge={__name:"index",setup(Ie){const{t:o}=Y(),R=ee(),x=te(),y=i(!0);i({name:"",permissions:[]});const q=i([]),N=i([]);i(!1);const m=i(!1),U=i(null),D=i(null),E=i({});i(!1);const M=i(null),k=i(""),p=i(1),$=i(0),c=i(10),w=i(0),A=i(""),H=i(""),S=i(""),B=i(""),T=i(0),F=i(0),I=i([]),L=()=>{E.value={global:{value:null,matchMode:ne.CONTAINS}}},g=()=>{y.value=!0,P.get("/api/role",{params:{page:p.value,limit:c.value,search:k.value||void 0}}).then(a=>{N.value=a.data.data.data,$.value=a.data.data.total,w.value=a.data.data.last_page,A.value=a.data.data.first_page_url,H.value=a.data.data.last_page_url,S.value=a.data.data.next_page_url,B.value=a.data.data.prev_page_url,T.value=a.data.data.from,F.value=a.data.data.to,I.value=a.data.data.links,y.value=!1}).catch(a=>{x.add({severity:"error",summary:o("error"),detail:o("role.loadError"),life:3e3}),y.value=!1,console.error("Error fetching roles:",a)}),P.get("/api/role/get/permissions").then(a=>{q.value=a.data.permissions}).catch(a=>{x.add({severity:"error",summary:o("error"),detail:o("role.loadPermissionsError"),life:3e3}),console.error("Error fetching permissions:",a)})},f=a=>{a>=1&&a<=w.value&&(p.value=a,g())},O=a=>{c.value=a.value,p.value=1,g()};ae([k,c],()=>{p.value=1,g()});const W=()=>{R.push({name:"roles-create"})},Z=a=>{R.push({name:"roles-update",params:{id:a}})},J=a=>{M.value=a,m.value=!0},K=()=>{P.delete(`/api/role/${M.value}`).then(()=>{g(),m.value=!1,x.add({severity:"success",summary:o("success"),detail:o("role.deleteSuccess"),life:3e3})}).catch(a=>{x.add({severity:"error",summary:o("error"),detail:o("role.deleteError"),life:3e3}),console.error("Error deleting role:",a)})},X=()=>{D.value.exportCSV()};return le(()=>{L()}),se(()=>{g()}),(a,t)=>{const h=z("can"),j=z("tooltip");return u(),b("div",he,[s("div",be,[s("div",_e,[n(e(de),{class:"mb-4"},{start:d(()=>[s("h2",xe,r(e(o)("role.manage_Roles")),1)]),end:d(()=>[s("div",ye,[s("span",ke,[t[9]||(t[9]=s("i",{class:"pi pi-search"},null,-1)),n(e(re),{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=l=>k.value=l),placeholder:e(o)("role.search")},null,8,["modelValue","placeholder"])]),_(n(e(v),{label:e(o)("role.export"),icon:"pi pi-upload",class:"p-export",onClick:X},null,8,["label"]),[[h,"export roles"]]),_(n(e(v),{label:e(o)("role.new"),icon:"pi pi-plus",class:"p-button-success",onClick:W},null,8,["label"]),[[h,"create roles"]])])]),_:1}),n(e(pe)),s("div",we,[_((u(),oe(e(ue),{ref_key:"dt",ref:D,selection:U.value,"onUpdate:selection":t[1]||(t[1]=l=>U.value=l),value:N.value,loading:y.value,"data-key":"id",paginator:!1,rows:c.value,filters:E.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",Ce,[t[10]||(t[10]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",$e,r(e(o)("role.noData")),1)])]),loading:d(()=>[s("div",Ve,[n(e(ce),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(e(C),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(C),{field:"id",header:e(o)("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:d(l=>[Q(r(l.data.id),1)]),_:1},8,["header"]),n(e(C),{field:"name",header:e(o)("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[Q(r(l.data.name),1)]),_:1},8,["header"]),n(e(C),{header:e(o)("actions"),"header-style":"min-width:10rem;"},{body:d(l=>[_(n(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:V=>Z(l.data.id)},null,8,["onClick"]),[[h,"edit roles"],[j,e(o)("edit"),void 0,{top:!0}]]),_(n(e(v),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:V=>J(l.data.id)},null,8,["onClick"]),[[h,"delete roles"],[j,e(o)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["selection","value","loading","rows","filters","totalRecords"])),[[h,"list roles"]]),s("div",Pe,[s("div",Re,[s("span",Ne,r(e(o)("show"))+" "+r(T.value)+" "+r(e(o)("to"))+" "+r(F.value)+" "+r(e(o)("from"))+" "+r($.value),1)]),s("div",Ue,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:t[2]||(t[2]=l=>f(1))},t[11]||(t[11]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,De),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!B.value,onClick:t[3]||(t[3]=l=>f(p.value-1))},t[12]||(t[12]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Ee),(u(!0),b(G,null,ie(I.value,(l,V)=>(u(),b(G,{key:V},[l.label&&!isNaN(parseInt(l.label))?(u(),b("button",{key:0,class:ve(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:je=>f(parseInt(l.label))},r(l.label),11,Me)):l.label==="..."?(u(),b("span",Se,"...")):me("",!0)],64))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!S.value,onClick:t[4]||(t[4]=l=>f(p.value+1))},t[13]||(t[13]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Be),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===w.value,onClick:t[5]||(t[5]=l=>f(w.value))},t[14]||(t[14]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Te),n(e(ge),{modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=l=>c.value=l),options:[5,10,20,30],onChange:O,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(fe),{visible:m.value,"onUpdate:visible":t[8]||(t[8]=l=>m.value=l),style:{width:"460px"},header:e(o)("role.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(e(v),{label:e(o)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=l=>m.value=!1)},null,8,["label"]),n(e(v),{label:e(o)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:K},null,8,["label"])]),default:d(()=>[s("div",Fe,[t[15]||(t[15]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,r(e(o)("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{Ge as default};
