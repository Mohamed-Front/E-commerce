import{u as q,I as H,j as K,r as n,n as O,o as ee,M as j,a as m,c as _,f as l,h as i,w as r,e,J as x,b as ae,t as d,F as z,d as te,i as F,P as le,R as v,X as se,L as oe,Y as ne,Z as y,N as P,$ as ie,x as de,g as re,a0 as pe,a1 as ce}from"./index-32e0b41b.js";const ue={class:"grid"},me={class:"col-12"},ve={class:"card p-4 shadow-2 border-round"},ge={class:"text-2xl font-bold"},he={class:"flex gap-2"},be={class:"p-input-icon-left"},fe={class:"card shadow-1 surface-0"},_e={class:"text-center py-4"},xe={class:"text-xl"},ye={class:"flex justify-content-center align-items-center py-4"},ke={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},we={class:"p-paginator-left-content"},Ce={class:"p-paginator-current"},$e={class:"p-paginator-right-content"},Ve=["disabled"],Pe=["disabled"],Ne=["onClick"],De={key:1,class:"p-paginator-dots"},Re=["disabled"],Ue=["disabled"],Ee={class:"flex align-items-center justify-content-center"},Te={__name:"index",setup(Me){const N=q(),$=H(),{t:s}=K(),k=n(!0),D=n([]),g=n(!1),R=n(null),U=n(null),L=n({}),w=n("");n(null);const p=n(1),V=n(0),c=n(10),C=n(0),A=n(""),G=n(""),E=n(""),M=n(""),B=n(0),I=n(0),T=n([]),h=()=>{k.value=!0,F.get("/api/model",{params:{page:p.value,limit:c.value,search:w.value||void 0}}).then(o=>{D.value=o.data.data.data,V.value=o.data.data.total,C.value=o.data.data.last_page,A.value=o.data.data.first_page_url,G.value=o.data.data.last_page_url,E.value=o.data.data.next_page_url,M.value=o.data.data.prev_page_url,B.value=o.data.data.from,I.value=o.data.data.to,T.value=o.data.data.links,k.value=!1}).catch(o=>{$.add({severity:"error",summary:s("error"),detail:s("model.loadError"),life:3e3}),k.value=!1,console.error("Error fetching models:",o)})};O([w,c],()=>{p.value=1,h()});const b=o=>{o>=1&&o<=C.value&&(p.value=o,h())},J=o=>{c.value=o.value,p.value=1,h()},Q=o=>{R.value=o,g.value=!0},W=()=>{F.delete(`/api/model/${R.value}`).then(()=>{$.add({severity:"success",summary:s("success"),detail:s("model.deleteSuccess"),life:3e3}),h(),g.value=!1}).catch(o=>{$.add({severity:"error",summary:s("error"),detail:s("model.deleteError"),life:3e3}),console.error("Error deleting model:",o)})},X=()=>{U.value.exportCSV()},Y=()=>{N.push({name:"model-create"})},Z=o=>{N.push({name:"model-edit",params:{id:o}})};return ee(()=>{h()}),(o,a)=>{const f=j("can"),S=j("tooltip");return m(),_("div",ue,[l("div",me,[l("div",ve,[i(e(se),{class:"mb-4"},{start:r(()=>[l("h2",ge,d(e(s)("model.managementTitle")),1)]),end:r(()=>[l("div",he,[l("span",be,[a[8]||(a[8]=l("i",{class:"pi pi-search"},null,-1)),i(e(le),{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),placeholder:e(s)("model.search")},null,8,["modelValue","placeholder"])]),x(i(e(v),{label:e(s)("model.export"),icon:"pi pi-upload",class:"p-export",onClick:X},null,8,["label"]),[[f,"list models"]]),x(i(e(v),{label:e(s)("model.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Y},null,8,["label"]),[[f,"create models"]])])]),_:1}),i(e(oe)),l("div",fe,[x((m(),ae(e(ie),{ref_key:"dt",ref:U,value:D.value,loading:k.value,"data-key":"id",paginator:!1,rows:c.value,filters:L.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[l("div",_e,[a[9]||(a[9]=l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),l("p",xe,d(e(s)("model.noData")),1)])]),loading:r(()=>[l("div",ye,[i(e(ne),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[i(e(y),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(y),{field:"name_ar",header:e(s)("model.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[P(d(t.data.name_ar),1)]),_:1},8,["header"]),i(e(y),{field:"name_en",header:e(s)("model.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[P(d(t.data.name_en),1)]),_:1},8,["header"]),i(e(y),{field:"brand.name_en",header:e(s)("model.brand"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>{var u;return[P(d(((u=t.data.brand)==null?void 0:u.name_en)||e(s)("model.noBrand")),1)]}),_:1},8,["header"]),i(e(y),{header:e(s)("actions"),"header-style":"width: 12rem"},{body:r(t=>[x(i(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:u=>Z(t.data.id)},null,8,["onClick"]),[[f,"edit models"],[S,e(s)("edit"),void 0,{top:!0}]]),x(i(e(v),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:u=>Q(t.data.id)},null,8,["onClick"]),[[f,"delete models"],[S,e(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[f,"list models"]]),l("div",ke,[l("div",we,[l("span",Ce,d(e(s)("show"))+" "+d(B.value)+" "+d(e(s)("to"))+" "+d(I.value)+" "+d(e(s)("from"))+" "+d(V.value),1)]),l("div",$e,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:a[1]||(a[1]=t=>b(1))},a[10]||(a[10]=[l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Ve),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!M.value,onClick:a[2]||(a[2]=t=>b(p.value-1))},a[11]||(a[11]=[l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Pe),(m(!0),_(z,null,te(T.value,(t,u)=>(m(),_(z,{key:u},[t.label&&!isNaN(parseInt(t.label))?(m(),_("button",{key:0,class:de(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Be=>b(parseInt(t.label))},d(t.label),11,Ne)):t.label==="..."?(m(),_("span",De,"...")):re("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!E.value,onClick:a[3]||(a[3]=t=>b(p.value+1))},a[12]||(a[12]=[l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Re),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===C.value,onClick:a[4]||(a[4]=t=>b(C.value))},a[13]||(a[13]=[l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Ue),i(e(pe),{filter:"",modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=t=>c.value=t),options:[5,10,20,30],onChange:J,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(e(ce),{visible:g.value,"onUpdate:visible":a[7]||(a[7]=t=>g.value=t),style:{width:"450px"},header:e(s)("model.deleteConfirmTitle"),modal:!0},{footer:r(()=>[i(e(v),{label:e(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[6]||(a[6]=t=>g.value=!1)},null,8,["label"]),i(e(v),{label:e(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:W},null,8,["label"])]),default:r(()=>[l("div",Ee,[a[14]||(a[14]=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,d(e(s)("model.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}};export{Te as default};
