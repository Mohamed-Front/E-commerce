import{_ as R,u as z,f as G,G as H,r as d,A as J,o as K,h as k,i as Q,b as u,c as p,l as W,j as e,t as r,B as s,q as f,e as _,D as g,s as S,k as X,F as Y,a as U,x as Z,y as ee}from"./index-2ff8cefd.js";const m=D=>(Z("data-v-99c6936a"),D=D(),ee(),D),te={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ae={class:"text-3xl font-bold text-center mb-8 text-gray-800"},oe=["onSubmit"],se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"space-y-2"},ne={for:"name_en",class:"block text-sm font-medium text-gray-700"},re=m(()=>e("span",{class:"text-red-500"},"*",-1)),ie={class:"space-y-2"},ce={for:"name_ar",class:"block text-sm font-medium text-gray-700"},de=m(()=>e("span",{class:"text-red-500"},"*",-1)),ue={class:"space-y-2"},pe={for:"parent_id",class:"block text-sm font-medium text-gray-700"},ge={class:"space-y-2"},me={for:"store_id",class:"block text-sm font-medium text-gray-700"},_e=m(()=>e("span",{class:"text-red-500"},"*",-1)),be={class:"space-y-2 md:col-span-2"},ve={class:"block text-sm font-medium text-gray-700"},fe={class:"flex items-center space-x-4"},ye={class:"text-sm text-gray-600"},he={class:"space-y-2"},xe={class:"block text-sm font-medium text-gray-700"},we={class:"flex justify-center"},ke={key:0,class:"p-4 w-full h-full"},De={class:"relative group w-full h-full"},Ve=["src","alt"],je={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Te=m(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Ie=[Te],Ce={key:1,class:"p-4 flex flex-col items-center justify-center"},Se=m(()=>e("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[e("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),Ue={class:"text-sm text-center text-gray-600"},Be={class:"text-blue-500 font-medium"},Pe={class:"space-y-2"},$e={class:"block text-sm font-medium text-gray-700"},Ae={class:"flex justify-center"},Ee={key:0,class:"p-4 w-full h-full"},Le={class:"relative group w-full h-full"},Fe=["src","alt"],qe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Oe=m(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),Me=[Oe],Ne={key:1,class:"p-4 flex flex-col items-center justify-center"},Re=m(()=>e("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[e("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),ze={class:"text-sm text-center text-gray-600"},Ge={class:"text-blue-500 font-medium"},He={class:"space-y-2 md:col-span-2"},Je={class:"block text-sm font-medium text-gray-700"},Ke={class:"flex justify-center"},Qe={key:0,class:"p-4 w-full h-full"},We={class:"relative group w-full h-full"},Xe=["src","alt"],Ye={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ze=m(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),et=[Ze],tt={key:1,class:"p-4 flex flex-col items-center justify-center"},at=m(()=>e("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[e("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),ot={class:"text-sm text-center text-gray-600"},st={class:"text-blue-500 font-medium"},lt={class:"pt-4 flex justify-center space-x-4"},nt={key:0},rt={key:1,class:"pi pi-spinner pi-spin"},it={setup(D){const B=z(),P=G(),{t:a}=H(),b=d(!1),$=J(()=>localStorage.getItem("appLang")=="ar"?"name_ar":"name_en"),l=d({name_en:"",name_ar:"",is_market:!1,parent_id:null,store_id:null,image:null,banner_one_image:null,banner_two_image:null}),V=d(null),j=d(null),T=d(null),A=d([]),E=d([]),y=d(!1),h=d(!1),x=d(!1),L=async()=>{try{const n=await U.get("/api/category");A.value=n.data.data.data}catch(n){console.error("Error fetching parent categories:",n)}},F=async()=>{try{const n=await U.get("/api/store");E.value=n.data.data.data}catch(n){console.error("Error fetching stores:",n)}},q=(n,t)=>{const c=new FileReader;c.onload=i=>{switch(t){case"image":l.value.image=n,V.value=i.target.result,y.value=!1;break;case"banner_one":l.value.banner_one_image=n,j.value=i.target.result,h.value=!1;break;case"banner_two":l.value.banner_two_image=n,T.value=i.target.result,x.value=!1;break}},c.readAsDataURL(n)},v=(n,t)=>{var i,I,w;const c=((i=n.target.files)==null?void 0:i[0])||((w=(I=n.dataTransfer)==null?void 0:I.files)==null?void 0:w[0]);c&&c.type.match("image.*")&&q(c,t)},C=n=>{switch(n){case"image":l.value.image=null,V.value=null;break;case"banner_one":l.value.banner_one_image=null,j.value=null;break;case"banner_two":l.value.banner_two_image=null,T.value=null;break}},O=async()=>{var t,c;b.value=!0;const n=new FormData;n.append("name_en",l.value.name_en),n.append("name_ar",l.value.name_ar),n.append("is_market",l.value.is_market?"1":"0"),n.append("parent_id",l.value.parent_id||""),n.append("store_id",l.value.store_id||""),l.value.image&&n.append("image",l.value.image),l.value.banner_one_image&&n.append("banner_one_image",l.value.banner_one_image),l.value.banner_two_image&&n.append("banner_two_image",l.value.banner_two_image);try{const i=await U.post("/api/category",n);B.push({name:"categories"}),P.add({severity:"success",summary:a("success"),detail:a("category.createSuccess"),life:3e3})}catch(i){console.error("Error:",i),P.add({severity:"error",summary:a("error"),detail:((c=(t=i.response)==null?void 0:t.data)==null?void 0:c.message)||a("category.createError"),life:3e3})}finally{b.value=!1}};return K(()=>{L(),F()}),(n,t)=>{const c=k("InputText"),i=k("Dropdown"),I=k("InputSwitch"),w=k("Button"),M=k("Toast"),N=Q("can");return u(),p(Y,null,[W((u(),p("div",te,[e("h1",ae,r(s(a)("category.createTitle")),1),e("form",{onSubmit:g(O,["prevent"]),class:"space-y-6"},[e("div",se,[e("div",le,[e("label",ne,[f(r(s(a)("category.nameEn"))+" ",1),re]),_(c,{id:"name_en",modelValue:l.value.name_en,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.name_en=o),placeholder:s(a)("category.nameEnPlaceholder"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),e("div",ie,[e("label",ce,[f(r(s(a)("category.nameAr"))+" ",1),de]),_(c,{id:"name_ar",modelValue:l.value.name_ar,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.name_ar=o),placeholder:s(a)("category.nameArPlaceholder"),dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),e("div",ue,[e("label",pe,r(s(a)("category.parent")),1),_(i,{modelValue:l.value.parent_id,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.parent_id=o),options:A.value,optionLabel:s($),optionValue:"id",placeholder:s(a)("category.selectParent"),class:"w-full",showClear:!0},null,8,["modelValue","options","optionLabel","placeholder"])]),e("div",ge,[e("label",me,[f(r(s(a)("category.store"))+" ",1),_e]),_(i,{modelValue:l.value.store_id,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.store_id=o),options:E.value,optionLabel:s($),optionValue:"id",placeholder:s(a)("category.selectStore"),class:"w-full",required:""},null,8,["modelValue","options","optionLabel","placeholder"])]),e("div",be,[e("label",ve,r(s(a)("category.marketType")),1),e("div",fe,[_(I,{modelValue:l.value.is_market,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.is_market=o)},null,8,["modelValue"]),e("span",ye,r(l.value.is_market?s(a)("category.market"):s(a)("category.nonMarket")),1)])]),e("div",he,[e("label",xe,r(s(a)("category.image")),1),e("div",we,[e("label",{onDragover:t[7]||(t[7]=g(o=>y.value=!0,["prevent"])),onDragleave:t[8]||(t[8]=o=>y.value=!1),onDrop:t[9]||(t[9]=g(o=>v(o,"image"),["prevent"])),class:S([{"border-blue-500 bg-blue-50":y.value,"border-gray-300":!y.value},"cursor-pointer w-full h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[e("input",{type:"file",onChange:t[5]||(t[5]=o=>v(o,"image")),accept:"image/*",class:"hidden"},null,32),V.value?(u(),p("div",ke,[e("div",De,[e("img",{src:V.value,alt:s(a)("category.imagePreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ve),e("div",je,[e("button",{type:"button",onClick:t[6]||(t[6]=g(o=>C("image"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Ie)])])])):(u(),p("div",Ce,[Se,e("p",Ue,[e("span",Be,r(s(a)("category.clickToUpload")),1),f(" "+r(s(a)("category.orDragAndDrop")),1)])]))],34)])]),e("div",Pe,[e("label",$e,r(s(a)("category.bannerOne")),1),e("div",Ae,[e("label",{onDragover:t[12]||(t[12]=g(o=>h.value=!0,["prevent"])),onDragleave:t[13]||(t[13]=o=>h.value=!1),onDrop:t[14]||(t[14]=g(o=>v(o,"banner_one"),["prevent"])),class:S([{"border-blue-500 bg-blue-50":h.value,"border-gray-300":!h.value},"cursor-pointer w-full h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[e("input",{type:"file",onChange:t[10]||(t[10]=o=>v(o,"banner_one")),accept:"image/*",class:"hidden"},null,32),j.value?(u(),p("div",Ee,[e("div",Le,[e("img",{src:j.value,alt:s(a)("category.bannerOnePreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Fe),e("div",qe,[e("button",{type:"button",onClick:t[11]||(t[11]=g(o=>C("banner_one"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Me)])])])):(u(),p("div",Ne,[Re,e("p",ze,[e("span",Ge,r(s(a)("category.clickToUpload")),1),f(" "+r(s(a)("category.orDragAndDrop")),1)])]))],34)])]),e("div",He,[e("label",Je,r(s(a)("category.bannerTwo")),1),e("div",Ke,[e("label",{onDragover:t[17]||(t[17]=g(o=>x.value=!0,["prevent"])),onDragleave:t[18]||(t[18]=o=>x.value=!1),onDrop:t[19]||(t[19]=g(o=>v(o,"banner_two"),["prevent"])),class:S([{"border-blue-500 bg-blue-50":x.value,"border-gray-300":!x.value},"cursor-pointer w-full max-w-2xl h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[e("input",{type:"file",onChange:t[15]||(t[15]=o=>v(o,"banner_two")),accept:"image/*",class:"hidden"},null,32),T.value?(u(),p("div",Qe,[e("div",We,[e("img",{src:T.value,alt:s(a)("category.bannerTwoPreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Xe),e("div",Ye,[e("button",{type:"button",onClick:t[16]||(t[16]=g(o=>C("banner_two"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},et)])])])):(u(),p("div",tt,[at,e("p",ot,[e("span",st,r(s(a)("category.clickToUpload")),1),f(" "+r(s(a)("category.orDragAndDrop")),1)])]))],34)])])]),e("div",lt,[_(w,{type:"button",label:s(a)("cancel"),icon:"pi pi-times",onClick:t[20]||(t[20]=o=>s(B).go(-1)),class:"px-6 py-3 mx-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:b.value},null,8,["label","disabled"]),_(w,{type:"submit",label:s(a)("category.createButton"),icon:"pi pi-plus",loading:b.value,class:"px-8 mx-2 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:b.value},{default:X(()=>[b.value?(u(),p("i",rt)):(u(),p("span",nt,r(s(a)("category.createButton")),1))]),_:1},8,["label","loading","disabled"])])],40,oe)])),[[N,"create categories"]]),_(M)],64)}}},dt=R(it,[["__scopeId","data-v-99c6936a"]]);export{dt as default};
