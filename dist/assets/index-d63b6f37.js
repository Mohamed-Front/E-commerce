import{u as se,H as oe,j as ie,r,n as re,o as ne,L as K,a as m,c as h,f as o,h as i,w as d,e,I as k,b as de,t as n,F as M,d as ce,i as E,O as ue,Q as u,X as pe,K as ve,Y as me,Z as _,M as R,a4 as be,$ as fe,v as ge,g as O,a0 as he,a2 as Q,a5 as _e}from"./index-8ddd7ad9.js";const ye={class:"grid"},xe={class:"col-12"},we={class:"card p-4 shadow-2 border-round"},ke={class:"text-2xl font-bold"},Ce={class:"flex gap-2"},$e={class:"p-input-icon-left"},De={class:"card shadow-1 surface-0"},Pe={class:"text-center py-4"},Se={class:"text-xl"},Ue={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ee={class:"p-paginator-left-content"},Re={class:"p-paginator-current"},Fe={class:"p-paginator-right-content"},Ne=["disabled"],Be=["disabled"],Le=["onClick"],Te={key:1,class:"p-paginator-dots"},Ie=["disabled"],je=["disabled"],ze={class:"flex align-items-center justify-content-center"},Ae={class:"flex flex-column gap-3"},Ke={key:0,class:"mt-2"},Me={class:"font-semibold"},Ge={__name:"index",setup(Oe){const F=se(),b=oe(),{t:a}=ie(),C=r(!0),N=r([]),y=r(!1),B=r(null),L=r(null),q=r({}),$=r("");r(null);const x=r(!1),v=r(null),S=r(!1),p=r(1),U=r(0),f=r(10),D=r(0),G=r(""),H=r(""),T=r(""),I=r(""),j=r(0),z=r(0),A=r([]),g=()=>{C.value=!0,E.get("/api/product",{params:{page:p.value,limit:f.value,search:$.value||void 0}}).then(s=>{N.value=s.data.data.data,U.value=s.data.data.total,D.value=s.data.data.last_page,G.value=s.data.data.first_page_url,H.value=s.data.data.last_page_url,T.value=s.data.data.next_page_url,I.value=s.data.data.prev_page_url,j.value=s.data.data.from,z.value=s.data.data.to,A.value=s.data.data.links,C.value=!1}).catch(s=>{b.add({severity:"error",summary:a("error"),detail:a("product.loadError"),life:3e3}),C.value=!1,console.error("Error fetching products:",s)})};re([$,f],()=>{p.value=1,g()});const w=s=>{s>=1&&s<=D.value&&(p.value=s,g())},W=s=>{f.value=s.value,p.value=1,g()},X=s=>{B.value=s,y.value=!0},Y=()=>{E.delete(`/api/product/${B.value}`).then(()=>{b.add({severity:"success",summary:a("success"),detail:a("product.deleteSuccess"),life:3e3}),g(),y.value=!1}).catch(s=>{b.add({severity:"error",summary:a("error"),detail:a("product.deleteError"),life:3e3}),console.error("Error deleting product:",s)})},Z=()=>{L.value.exportCSV()},J=()=>{const s=`store_id,category_id,name_en,name_ar,sku,brand_id,sub_name_en,sub_name_ar,description_en,description_ar,base_price,cost_price,tax
1,1,Demo Product 1,منتج تجريبي 1,SKU001,1,Sub Demo 1,تجريبي فرعي 1,Description of Demo Product 1,وصف المنتج التجريبي 1,15.50,10.00,0.05
2,2,Demo Product 2,منتج تجريبي 2,SKU002,2,Sub Demo 2,تجريبي فرعي 2,Description of Demo Product 2,وصف المنتج التجريبي 2,22.00,15.00,0.05`,t=new Blob([s],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");if(c.download!==void 0){const P=URL.createObjectURL(t);c.setAttribute("href",P),c.setAttribute("download","product_import_example.csv"),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}},ee=s=>{v.value=s.files[0]},te=()=>{if(!v.value){b.add({severity:"error",summary:a("error"),detail:a("validation.fileRequired"),life:3e3});return}S.value=!0;const s=new FormData;s.append("file",v.value),E.post("/api/import/products",s).then(()=>{b.add({severity:"success",summary:a("success"),detail:a("product.importSuccess"),life:3e3}),g(),x.value=!1,v.value=null}).catch(t=>{b.add({severity:"error",summary:a("error"),detail:a("product.importError"),life:3e3}),console.error("Error importing products:",t)}).finally(()=>{S.value=!1})},ae=()=>{F.push({name:"product-create"})},le=s=>{F.push({name:"product-update",params:{id:s}})};return ne(()=>{g()}),(s,t)=>{const c=K("can"),P=K("tooltip");return m(),h("div",ye,[o("div",xe,[o("div",we,[i(e(pe),{class:"mb-4"},{start:d(()=>[o("h2",ke,n(e(a)("product.managementTitle")),1)]),end:d(()=>[o("div",Ce,[o("span",$e,[t[11]||(t[11]=o("i",{class:"pi pi-search"},null,-1)),i(e(ue),{modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=l=>$.value=l),placeholder:e(a)("product.search")},null,8,["modelValue","placeholder"])]),i(e(u),{label:e(a)("product.import"),icon:"pi pi-download",class:"p-import",onClick:t[1]||(t[1]=l=>x.value=!0)},null,8,["label"]),k(i(e(u),{label:e(a)("product.export"),icon:"pi pi-upload",class:"p-export",onClick:Z},null,8,["label"]),[[c,"list products"]]),k(i(e(u),{label:e(a)("product.new"),icon:"pi pi-plus",class:"p-button-success",onClick:ae},null,8,["label"]),[[c,"create products"]])])]),_:1}),i(e(ve)),o("div",De,[k((m(),de(e(fe),{ref_key:"dt",ref:L,value:N.value,loading:C.value,"data-key":"id",paginator:!1,rows:f.value,filters:q.value,totalRecords:U.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[o("div",Pe,[t[12]||(t[12]=o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),o("p",Se,n(e(a)("product.noData")),1)])]),loading:d(()=>[o("div",Ue,[i(e(me),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(e(_),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(_),{field:"name_ar",header:e(a)("product.nameAr"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[R(n(l.data.name_ar),1)]),_:1},8,["header"]),i(e(_),{field:"name_en",header:e(a)("product.nameEn"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[R(n(l.data.name_en),1)]),_:1},8,["header"]),i(e(_),{field:"base_price",header:e(a)("product.basePrice"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[R(n(l.data.base_price),1)]),_:1},8,["header"]),i(e(_),{field:"is_displayed",header:e(a)("product.isDisplayed"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(l=>[i(e(be),{value:l.data.is_displayed?e(a)("yes"):e(a)("no"),severity:l.data.is_displayed?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(_),{header:e(a)("actions"),"header-style":"width: 12rem"},{body:d(l=>[k(i(e(u),{icon:"pi pi-pencil",class:"p-detail",onClick:V=>le(l.data.id)},null,8,["onClick"]),[[c,"edit products"],[P,e(a)("edit"),void 0,{top:!0}]]),k(i(e(u),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:V=>X(l.data.id)},null,8,["onClick"]),[[c,"delete products"],[P,e(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[c,"list products"]]),o("div",Ve,[o("div",Ee,[o("span",Re,n(e(a)("show"))+" "+n(j.value)+" "+n(e(a)("to"))+" "+n(z.value)+" "+n(e(a)("from"))+" "+n(U.value),1)]),o("div",Fe,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:t[2]||(t[2]=l=>w(1))},t[13]||(t[13]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Ne),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!I.value,onClick:t[3]||(t[3]=l=>w(p.value-1))},t[14]||(t[14]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Be),(m(!0),h(M,null,ce(A.value,(l,V)=>(m(),h(M,{key:V},[l.label&&!isNaN(parseInt(l.label))?(m(),h("button",{key:0,class:ge(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:Qe=>w(parseInt(l.label))},n(l.label),11,Le)):l.label==="..."?(m(),h("span",Te,"...")):O("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!T.value,onClick:t[4]||(t[4]=l=>w(p.value+1))},t[15]||(t[15]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Ie),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===D.value,onClick:t[5]||(t[5]=l=>w(D.value))},t[16]||(t[16]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,je),i(e(he),{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=l=>f.value=l),options:[5,10,20,30],onChange:W,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(e(Q),{visible:y.value,"onUpdate:visible":t[8]||(t[8]=l=>y.value=l),style:{width:"450px"},header:e(a)("product.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(e(u),{label:e(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=l=>y.value=!1)},null,8,["label"]),i(e(u),{label:e(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Y},null,8,["label"])]),default:d(()=>[o("div",ze,[t[17]||(t[17]=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,n(e(a)("product.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),i(e(Q),{visible:x.value,"onUpdate:visible":t[10]||(t[10]=l=>x.value=l),style:{width:"450px"},header:e(a)("product.importTitle"),modal:!0},{footer:d(()=>[i(e(u),{label:e(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=l=>x.value=!1)},null,8,["label"]),i(e(u),{label:e(a)("product.importButton"),icon:"pi pi-check",loading:S.value,disabled:!v.value,onClick:te},null,8,["label","loading","disabled"])]),default:d(()=>[o("div",Ae,[i(e(u),{label:e(a)("product.downloadExample"),icon:"pi pi-download",class:"p-button-outlined",onClick:J},null,8,["label"]),i(e(_e),{mode:"basic","custom-upload":!0,onSelect:ee,maxFileSize:1e7,chooseLabel:"Select File"}),v.value?(m(),h("div",Ke,[o("p",Me,n(e(a)("selectedFile"))+": "+n(v.value.name),1)])):O("",!0)])]),_:1},8,["visible","header"])])])])}}};export{Ge as default};
