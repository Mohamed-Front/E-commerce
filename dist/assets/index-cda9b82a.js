import{_ as Y,u as ee,G as te,j as ae,r as n,m as se,q as le,o as oe,R as j,a as m,c as k,f as o,h as i,w as r,e,z as g,b as ne,t as d,F,d as ie,Z as re,i as S,S as de,U as v,$ as ce,Q as pe,H as ue,a0 as _,p as I,a4 as z,a1 as ve,y as me,g as ge,a2 as _e,a3 as fe}from"./index-e9816b7f.js";const be={class:"grid"},he={class:"col-12"},ye={class:"card p-4 shadow-2 border-round"},xe={class:"text-2xl font-bold"},ke={class:"flex gap-2"},we={class:"p-input-icon-left"},Ce={class:"card shadow-1 surface-0"},$e={class:"text-center py-4"},Ue={class:"text-xl"},Re={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Se={class:"p-paginator-left-content"},Ee={class:"p-paginator-current"},Ne={class:"p-paginator-right-content"},Me=["disabled"],Te=["disabled"],De=["onClick"],Le={key:1,class:"p-paginator-dots"},Pe=["disabled"],Be=["disabled"],je={class:"flex align-items-center justify-content-center"},Fe={__name:"index",setup(Ie){const R=ee(),f=te(),{t}=ae(),w=n(!0),E=n("");n({});const N=n(null);n(!1),n(!1);const b=n(!1);n(null);const A=n(null),M=n({}),C=n(""),p=n(1),V=n(0),h=n(10),$=n(0),O=n(""),G=n(""),T=n(""),D=n(""),L=n(0),P=n(0),B=n([]),Q=()=>{S.get("/api/export/store",{responseType:"blob"}).then(s=>{const a=new Blob([s.data],{type:"text/csv"}),c=window.URL.createObjectURL(a),u=document.createElement("a");u.href=c,u.setAttribute("download","stores_export.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(c),f.add({severity:"success",summary:t("success"),detail:t("store.exportSuccess"),life:3e3})}).catch(s=>{f.add({severity:"error",summary:t("error"),detail:t("store.exportError"),life:3e3}),console.error("Error exporting stores:",s)})},q=s=>{E.value=s,b.value=!0},H=()=>{S.delete(`/api/store/${E.value}`).then(()=>{y(),b.value=!1,f.add({severity:"success",summary:t("success"),detail:t("store.deletedSuccess"),life:3e3})}).catch(()=>{f.add({severity:"error",summary:t("error"),detail:t("store.deleteError"),life:3e3})})},W=()=>{M.value={global:{value:null,matchMode:re.CONTAINS}}};se(()=>{W()});const Z=s=>{R.push({name:"media-links",params:{id:s,type:1}})},y=()=>{w.value=!0,S.get("/api/store",{params:{page:p.value,limit:h.value,search:C.value}}).then(s=>{w.value=!1,N.value=s.data.data.data,V.value=s.data.data.total,$.value=s.data.data.last_page,O.value=s.data.data.first_page_url,G.value=s.data.data.last_page_url,T.value=s.data.data.next_page_url,D.value=s.data.data.prev_page_url,L.value=s.data.data.from,P.value=s.data.data.to,B.value=s.data.data.links}).catch(s=>{w.value=!1,f.add({severity:"error",summary:t("error"),detail:t("store.loadError"),life:3e3}),console.error("Error fetching data:",s)})};le(C,s=>{p.value=1,y()});const x=s=>{s>=1&&s<=$.value&&(p.value=s,y())},J=s=>{h.value=s.value,p.value=1,y()};oe(()=>{y()});const K=()=>{R.push({name:"store-create"})},X=s=>{R.push({name:"store-edit",params:{id:s}})};return(s,a)=>{const c=j("can"),u=j("tooltip");return m(),k("div",be,[o("div",he,[o("div",ye,[i(e(ce),{class:"mb-4"},{start:r(()=>[o("h2",xe,d(e(t)("store.managementTitle")),1)]),end:r(()=>[o("div",ke,[o("span",we,[a[8]||(a[8]=o("i",{class:"pi pi-search"},null,-1)),i(e(de),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=l=>C.value=l),placeholder:e(t)("store.search")},null,8,["modelValue","placeholder"])]),g(i(e(v),{label:e(t)("store.export"),icon:"pi pi-upload",class:"p-export",onClick:Q},null,8,["label"]),[[c,"list stores"]]),g(i(e(v),{label:e(t)("store.new"),icon:"pi pi-plus",class:"p-button-success",onClick:K},null,8,["label"]),[[c,"create stores"]])])]),_:1}),i(e(pe)),o("div",Ce,[g((m(),ne(e(ve),{ref_key:"dt",ref:A,value:N.value,loading:w.value,"data-key":"id",paginator:!1,rows:h.value,filters:M.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[o("div",$e,[a[9]||(a[9]=o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),o("p",Ue,d(e(t)("store.noData")),1)])]),loading:r(()=>[o("div",Re,[i(e(ue),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[i(e(_),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(_),{field:"name_en",header:e(t)("store.nameEn"),sortable:!0},{body:r(l=>[I(d(l.data.name_en),1)]),_:1},8,["header"]),i(e(_),{field:"name_ar",header:e(t)("store.nameAr"),sortable:!0},{body:r(l=>[I(d(l.data.name_ar),1)]),_:1},8,["header"]),i(e(_),{field:"is_default",header:e(t)("store.isDefault"),sortable:!0},{body:r(l=>[i(e(z),{value:l.data.is_default?e(t)("store.yes"):e(t)("store.no"),severity:l.data.is_default?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(_),{field:"has_market",header:e(t)("store.hasMarket"),sortable:!0},{body:r(l=>[i(e(z),{value:l.data.has_market?e(t)("store.yes"):e(t)("store.no"),severity:l.data.has_market?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(_),{header:e(t)("actions"),headerStyle:"width: 12rem"},{body:r(l=>[g(i(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:U=>X(l.data.id)},null,8,["onClick"]),[[c,"edit stores"],[u,e(t)("edit"),void 0,{top:!0}]]),g(i(e(v),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:U=>q(l.data.id)},null,8,["onClick"]),[[c,"delete stores"],[u,e(t)("delete"),void 0,{top:!0}]]),g(i(e(v),{icon:"pi pi-images",class:"p-button-info",onClick:U=>Z(l.data.id)},null,8,["onClick"]),[[c,"edit inventory"]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[c,"list stores"]]),o("div",Ve,[o("div",Se,[o("span",Ee,d(e(t)("show"))+" "+d(L.value)+" "+d(e(t)("to"))+" "+d(P.value)+" "+d(e(t)("from"))+" "+d(V.value),1)]),o("div",Ne,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:a[1]||(a[1]=l=>x(1))},a[10]||(a[10]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Me),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!D.value,onClick:a[2]||(a[2]=l=>x(p.value-1))},a[11]||(a[11]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Te),(m(!0),k(F,null,ie(B.value,(l,U)=>(m(),k(F,{key:U},[l.label&&!isNaN(l.label)?(m(),k("button",{key:0,class:me(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:ze=>x(parseInt(l.label))},d(l.label),11,De)):l.label==="..."?(m(),k("span",Le,"...")):ge("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!T.value,onClick:a[3]||(a[3]=l=>x(p.value+1))},a[12]||(a[12]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Pe),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===$.value,onClick:a[4]||(a[4]=l=>x($.value))},a[13]||(a[13]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,Be),i(e(_e),{filter:"",modelValue:h.value,"onUpdate:modelValue":a[5]||(a[5]=l=>h.value=l),options:[5,10,20,30],optionLabel:"",onChange:J,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(e(fe),{visible:b.value,"onUpdate:visible":a[7]||(a[7]=l=>b.value=l),style:{width:"450px"},header:e(t)("store.deleteConfirmTitle"),modal:!0},{footer:r(()=>[i(e(v),{label:e(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[6]||(a[6]=l=>b.value=!1)},null,8,["label"]),i(e(v),{variant:s.outline,label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:H},null,8,["variant","label"])]),default:r(()=>[o("div",je,[a[14]||(a[14]=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,d(e(t)("store.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Oe=Y(Fe,[["__scopeId","data-v-67260d96"]]);export{Oe as default};
